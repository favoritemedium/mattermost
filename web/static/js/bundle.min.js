!function e(t,a,s){function n(l,i){if(!a[l]){if(!t[l]){var o="function"==typeof require&&require;if(!i&&o)return o(l,!0);if(r)return r(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[l]={exports:{}};t[l][0].call(u.exports,function(e){var a=t[l][1][e];return n(a?a:e)},u,u.exports,e,t,a,s)}return a[l].exports}for(var r="function"==typeof require&&require,l=0;l<s.length;l++)n(s[l]);return n}({1:[function(e,t,a){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":26}],2:[function(e,t,a){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":27}],3:[function(e,t,a){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":28}],4:[function(e,t,a){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":29}],5:[function(e,t,a){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":30}],6:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":31}],7:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":32}],8:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":33}],9:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":34}],10:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":35}],11:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":36}],12:[function(e,t,a){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":37}],13:[function(e,t,a){t.exports={default:e("core-js/library/fn/reflect/delete-property"),__esModule:!0}},{"core-js/library/fn/reflect/delete-property":38}],14:[function(e,t,a){t.exports={default:e("core-js/library/fn/reflect/own-keys"),__esModule:!0}},{"core-js/library/fn/reflect/own-keys":39}],15:[function(e,t,a){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":40}],16:[function(e,t,a){"use strict";a.__esModule=!0,a.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],17:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../core-js/object/define-property"),r=s(n);a.default=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,r.default)(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}()},{"../core-js/object/define-property":8}],18:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../core-js/object/assign"),r=s(n);a.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}},{"../core-js/object/assign":6}],19:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../core-js/object/get-prototype-of"),r=s(n),l=e("../core-js/object/get-own-property-descriptor"),i=s(l);a.default=function e(t,a,s){null===t&&(t=Function.prototype);var n=(0,i.default)(t,a);if(void 0===n){var l=(0,r.default)(t);return null===l?void 0:e(l,a,s)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(s)}},{"../core-js/object/get-own-property-descriptor":9,"../core-js/object/get-prototype-of":10}],20:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../core-js/object/set-prototype-of"),r=s(n),l=e("../core-js/object/create"),i=s(l),o=e("../helpers/typeof"),c=s(o);a.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":7,"../core-js/object/set-prototype-of":12,"../helpers/typeof":25}],21:[function(e,t,a){"use strict";a.__esModule=!0,a.default=function(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}},{}],22:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../helpers/typeof"),r=s(n);a.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,r.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":25}],23:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../core-js/is-iterable"),r=s(n),l=e("../core-js/get-iterator"),i=s(l);a.default=function(){function e(e,t){var a=[],s=!0,n=!1,r=void 0;try{for(var l,o=(0,i.default)(e);!(s=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":2,"../core-js/is-iterable":3}],24:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=e("../core-js/array/from"),r=s(n);a.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,r.default)(e)}},{"../core-js/array/from":1}],25:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e){return e&&"undefined"!=typeof _Symbol&&e.constructor===_Symbol?"symbol":typeof e}a.__esModule=!0;var r=e("../core-js/symbol"),l=s(r);a.default=function(e){return e&&"undefined"!=typeof l.default&&e.constructor===l.default?"symbol":"undefined"==typeof e?"undefined":n(e)}},{"../core-js/symbol":15}],26:[function(e,t,a){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/$.core").Array.from},{"../../modules/$.core":49,"../../modules/es6.array.from":95,"../../modules/es6.string.iterator":106}],27:[function(e,t,a){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":93,"../modules/es6.string.iterator":106,"../modules/web.dom.iterable":109}],28:[function(e,t,a){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":94,"../modules/es6.string.iterator":106,"../modules/web.dom.iterable":109}],29:[function(e,t,a){var s=e("../../modules/$.core");t.exports=function(e){return(s.JSON&&s.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},{"../../modules/$.core":49}],30:[function(e,t,a){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/$.core").Map},{"../modules/$.core":49,"../modules/es6.map":97,"../modules/es6.object.to-string":103,"../modules/es6.string.iterator":106,"../modules/es7.map.to-json":108,"../modules/web.dom.iterable":109}],31:[function(e,t,a){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":49,"../../modules/es6.object.assign":98}],32:[function(e,t,a){var s=e("../../modules/$");t.exports=function(e,t){return s.create(e,t)}},{"../../modules/$":71}],33:[function(e,t,a){var s=e("../../modules/$");t.exports=function(e,t,a){return s.setDesc(e,t,a)}},{"../../modules/$":71}],34:[function(e,t,a){var s=e("../../modules/$");e("../../modules/es6.object.get-own-property-descriptor"),t.exports=function(e,t){return s.getDesc(e,t)}},{"../../modules/$":71,"../../modules/es6.object.get-own-property-descriptor":99}],35:[function(e,t,a){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/$.core").Object.getPrototypeOf},{"../../modules/$.core":49,"../../modules/es6.object.get-prototype-of":100}],36:[function(e,t,a){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":49,"../../modules/es6.object.keys":101}],37:[function(e,t,a){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":49,"../../modules/es6.object.set-prototype-of":102}],38:[function(e,t,a){e("../../modules/es6.reflect.delete-property"),t.exports=e("../../modules/$.core").Reflect.deleteProperty},{"../../modules/$.core":49,"../../modules/es6.reflect.delete-property":104}],39:[function(e,t,a){e("../../modules/es6.reflect.own-keys"),t.exports=e("../../modules/$.core").Reflect.ownKeys},{"../../modules/$.core":49,"../../modules/es6.reflect.own-keys":105}],40:[function(e,t,a){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),t.exports=e("../../modules/$.core").Symbol},{"../../modules/$.core":49,"../../modules/es6.object.to-string":103,"../../modules/es6.symbol":107}],41:[function(e,t,a){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],42:[function(e,t,a){t.exports=function(){}},{}],43:[function(e,t,a){var s=e("./$.is-object");t.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":64}],44:[function(e,t,a){var s=e("./$.cof"),n=e("./$.wks")("toStringTag"),r="Arguments"==s(function(){return arguments}());t.exports=function(e){var t,a,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=(t=Object(e))[n])?a:r?s(t):"Object"==(l=s(t))&&"function"==typeof t.callee?"Arguments":l}},{"./$.cof":45,"./$.wks":91}],45:[function(e,t,a){var s={}.toString;t.exports=function(e){return s.call(e).slice(8,-1)}},{}],46:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.hide"),r=e("./$.redefine-all"),l=e("./$.ctx"),i=e("./$.strict-new"),o=e("./$.defined"),c=e("./$.for-of"),u=e("./$.iter-define"),d=e("./$.iter-step"),m=e("./$.uid")("id"),p=e("./$.has"),h=e("./$.is-object"),f=e("./$.set-species"),g=e("./$.descriptors"),b=Object.isExtensible||h,v=g?"_s":"size",_=0,E=function(e,t){if(!h(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!p(e,m)){if(!b(e))return"F";if(!t)return"E";n(e,m,++_)}return"O"+e[m]},y=function(e,t){var a,s=E(t);if("F"!==s)return e._i[s];for(a=e._f;a;a=a.n)if(a.k==t)return a};t.exports={getConstructor:function(e,t,a,n){var u=e(function(e,r){i(e,u,t),e._i=s.create(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&c(r,a,e[n],e)});return r(u.prototype,{clear:function(){for(var e=this,t=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete t[a.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,a=y(t,e);if(a){var s=a.n,n=a.p;delete t._i[a.i],a.r=!0,n&&(n.n=s),s&&(s.p=n),t._f==a&&(t._f=s),t._l==a&&(t._l=n),t[v]--}return!!a},forEach:function(e){for(var t,a=l(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(a(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),g&&s.setDesc(u.prototype,"size",{get:function(){return o(this[v])}}),u},def:function(e,t,a){var s,n,r=y(e,t);return r?r.v=a:(e._l=r={i:n=E(t,!0),k:t,v:a,p:s=e._l,n:void 0,r:!1},e._f||(e._f=r),s&&(s.n=r),e[v]++,"F"!==n&&(e._i[n]=r)),e},getEntry:y,setStrong:function(e,t,a){u(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?"keys"==t?d(0,a.k):"values"==t?d(0,a.v):d(0,[a.k,a.v]):(e._t=void 0,d(1))},a?"entries":"values",!a,!0),f(t)}}},{"./$":71,"./$.ctx":50,"./$.defined":51,"./$.descriptors":52,"./$.for-of":56,"./$.has":59,"./$.hide":60,"./$.is-object":64,"./$.iter-define":67,"./$.iter-step":69,"./$.redefine-all":78,"./$.set-species":81,"./$.strict-new":84,"./$.uid":90}],47:[function(e,t,a){var s=e("./$.for-of"),n=e("./$.classof");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");var t=[];return s(this,!1,t.push,t),t}}},{"./$.classof":44,"./$.for-of":56}],48:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.global"),r=e("./$.export"),l=e("./$.fails"),i=e("./$.hide"),o=e("./$.redefine-all"),c=e("./$.for-of"),u=e("./$.strict-new"),d=e("./$.is-object"),m=e("./$.set-to-string-tag"),p=e("./$.descriptors");t.exports=function(e,t,a,h,f,g){var b=n[e],v=b,_=f?"set":"add",E=v&&v.prototype,y={};return p&&"function"==typeof v&&(g||E.forEach&&!l(function(){(new v).entries().next()}))?(v=t(function(t,a){u(t,v,e),t._c=new b,void 0!=a&&c(a,f,t[_],t)}),s.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(e){var t="add"==e||"set"==e;e in E&&(!g||"clear"!=e)&&i(v.prototype,e,function(a,s){if(!t&&g&&!d(a))return"get"==e?void 0:!1;var n=this._c[e](0===a?0:a,s);return t?this:n})}),"size"in E&&s.setDesc(v.prototype,"size",{get:function(){return this._c.size}})):(v=h.getConstructor(t,e,f,_),o(v.prototype,a)),m(v,e),y[e]=v,r(r.G+r.W+r.F,y),g||h.setStrong(v,e,f),v}},{"./$":71,"./$.descriptors":52,"./$.export":54,"./$.fails":55,"./$.for-of":56,"./$.global":58,"./$.hide":60,"./$.is-object":64,"./$.redefine-all":78,"./$.set-to-string-tag":82,"./$.strict-new":84}],49:[function(e,t,a){var s=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=s)},{}],50:[function(e,t,a){var s=e("./$.a-function");t.exports=function(e,t,a){if(s(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,s){return e.call(t,a,s)};case 3:return function(a,s,n){return e.call(t,a,s,n)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":41}],51:[function(e,t,a){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],52:[function(e,t,a){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":55}],53:[function(e,t,a){var s=e("./$");t.exports=function(e){var t=s.getKeys(e),a=s.getSymbols;if(a)for(var n,r=a(e),l=s.isEnum,i=0;r.length>i;)l.call(e,n=r[i++])&&t.push(n);return t}},{"./$":71}],54:[function(e,t,a){var s=e("./$.global"),n=e("./$.core"),r=e("./$.ctx"),l="prototype",i=function(e,t,a){var o,c,u,d=e&i.F,m=e&i.G,p=e&i.S,h=e&i.P,f=e&i.B,g=e&i.W,b=m?n:n[t]||(n[t]={}),v=m?s:p?s[t]:(s[t]||{})[l];m&&(a=t);for(o in a)c=!d&&v&&o in v,c&&o in b||(u=c?v[o]:a[o],b[o]=m&&"function"!=typeof v[o]?a[o]:f&&c?r(u,s):g&&v[o]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[l]=e[l],t}(u):h&&"function"==typeof u?r(Function.call,u):u,h&&((b[l]||(b[l]={}))[o]=u))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,t.exports=i},{"./$.core":49,"./$.ctx":50,"./$.global":58}],55:[function(e,t,a){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],56:[function(e,t,a){var s=e("./$.ctx"),n=e("./$.iter-call"),r=e("./$.is-array-iter"),l=e("./$.an-object"),i=e("./$.to-length"),o=e("./core.get-iterator-method");t.exports=function(e,t,a,c){var u,d,m,p=o(e),h=s(a,c,t?2:1),f=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(r(p))for(u=i(e.length);u>f;f++)t?h(l(d=e[f])[0],d[1]):h(e[f]);else for(m=p.call(e);!(d=m.next()).done;)n(m,h,d.value,t)}},{"./$.an-object":43,"./$.ctx":50,"./$.is-array-iter":62,"./$.iter-call":65,"./$.to-length":88,"./core.get-iterator-method":92}],57:[function(e,t,a){var s=e("./$.to-iobject"),n=e("./$").getNames,r={}.toString,l="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return n(e)}catch(e){return l.slice()}};t.exports.get=function(e){return l&&"[object Window]"==r.call(e)?i(e):n(s(e))}},{"./$":71,"./$.to-iobject":87}],58:[function(e,t,a){var s=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},{}],59:[function(e,t,a){var s={}.hasOwnProperty;t.exports=function(e,t){return s.call(e,t)}},{}],60:[function(e,t,a){var s=e("./$"),n=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,a){return s.setDesc(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},{"./$":71,"./$.descriptors":52,"./$.property-desc":77}],61:[function(e,t,a){var s=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)}},{"./$.cof":45}],62:[function(e,t,a){var s=e("./$.iterators"),n=e("./$.wks")("iterator"),r=Array.prototype;t.exports=function(e){return void 0!==e&&(s.Array===e||r[n]===e)}},{"./$.iterators":70,"./$.wks":91}],63:[function(e,t,a){var s=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==s(e)}},{"./$.cof":45}],64:[function(e,t,a){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],65:[function(e,t,a){var s=e("./$.an-object");t.exports=function(e,t,a,n){try{return n?t(s(a)[0],a[1]):t(a)}catch(t){var r=e.return;throw void 0!==r&&s(r.call(e)),t}}},{"./$.an-object":43}],66:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.property-desc"),r=e("./$.set-to-string-tag"),l={};e("./$.hide")(l,e("./$.wks")("iterator"),function(){return this}),t.exports=function(e,t,a){e.prototype=s.create(l,{next:n(1,a)}),r(e,t+" Iterator")}},{"./$":71,"./$.hide":60,"./$.property-desc":77,"./$.set-to-string-tag":82,"./$.wks":91}],67:[function(e,t,a){"use strict";var s=e("./$.library"),n=e("./$.export"),r=e("./$.redefine"),l=e("./$.hide"),i=e("./$.has"),o=e("./$.iterators"),c=e("./$.iter-create"),u=e("./$.set-to-string-tag"),d=e("./$").getProto,m=e("./$.wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",f="keys",g="values",b=function(){return this};t.exports=function(e,t,a,v,_,E,y){c(a,t,v);var R,C,w=function(e){if(!p&&e in M)return M[e];switch(e){case f:return function(){return new a(this,e)};case g:return function(){return new a(this,e)}}return function(){return new a(this,e)}},S=t+" Iterator",k=_==g,N=!1,M=e.prototype,x=M[m]||M[h]||_&&M[_],j=x||w(_);if(x){var T=d(j.call(new e));u(T,S,!0),!s&&i(M,h)&&l(T,m,b),k&&x.name!==g&&(N=!0,j=function(){return x.call(this)})}if(s&&!y||!p&&!N&&M[m]||l(M,m,j),o[t]=j,o[S]=b,_)if(R={values:k?j:w(g),keys:E?j:w(f),entries:k?w("entries"):j},y)for(C in R)C in M||r(M,C,R[C]);else n(n.P+n.F*(p||N),t,R);return R}},{"./$":71,"./$.export":54,"./$.has":59,"./$.hide":60,"./$.iter-create":66,"./$.iterators":70,"./$.library":73,"./$.redefine":79,"./$.set-to-string-tag":82,"./$.wks":91}],68:[function(e,t,a){var s=e("./$.wks")("iterator"),n=!1;try{var r=[7][s]();r.return=function(){n=!0},Array.from(r,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!n)return!1;var a=!1;try{var r=[7],l=r[s]();l.next=function(){a=!0},r[s]=function(){return l},e(r)}catch(e){}return a}},{"./$.wks":91}],69:[function(e,t,a){t.exports=function(e,t){return{value:t,done:!!e}}},{}],70:[function(e,t,a){t.exports={}},{}],71:[function(e,t,a){var s=Object;t.exports={create:s.create,getProto:s.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:s.getOwnPropertyDescriptor,setDesc:s.defineProperty,setDescs:s.defineProperties,getKeys:s.keys,getNames:s.getOwnPropertyNames,getSymbols:s.getOwnPropertySymbols,each:[].forEach}},{}],72:[function(e,t,a){var s=e("./$"),n=e("./$.to-iobject");t.exports=function(e,t){for(var a,r=n(e),l=s.getKeys(r),i=l.length,o=0;i>o;)if(r[a=l[o++]]===t)return a}},{"./$":71,"./$.to-iobject":87}],73:[function(e,t,a){t.exports=!0},{}],74:[function(e,t,a){var s=e("./$"),n=e("./$.to-object"),r=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},a={},s=Symbol(),n="abcdefghijklmnopqrst";return t[s]=7,n.split("").forEach(function(e){a[e]=e}),7!=e({},t)[s]||Object.keys(e({},a)).join("")!=n})?function(e,t){for(var a=n(e),l=arguments,i=l.length,o=1,c=s.getKeys,u=s.getSymbols,d=s.isEnum;i>o;)for(var m,p=r(l[o++]),h=u?c(p).concat(u(p)):c(p),f=h.length,g=0;f>g;)d.call(p,m=h[g++])&&(a[m]=p[m]);return a}:Object.assign},{"./$":71,"./$.fails":55,"./$.iobject":61,"./$.to-object":89}],75:[function(e,t,a){var s=e("./$.export"),n=e("./$.core"),r=e("./$.fails");t.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],l={};l[e]=t(a),s(s.S+s.F*r(function(){a(1)}),"Object",l)}},{"./$.core":49,"./$.export":54,"./$.fails":55}],76:[function(e,t,a){var s=e("./$"),n=e("./$.an-object"),r=e("./$.global").Reflect;t.exports=r&&r.ownKeys||function(e){var t=s.getNames(n(e)),a=s.getSymbols;return a?t.concat(a(e)):t}},{"./$":71,"./$.an-object":43,"./$.global":58}],77:[function(e,t,a){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],78:[function(e,t,a){var s=e("./$.redefine");t.exports=function(e,t){for(var a in t)s(e,a,t[a]);return e}},{"./$.redefine":79}],79:[function(e,t,a){t.exports=e("./$.hide")},{"./$.hide":60}],80:[function(e,t,a){var s=e("./$").getDesc,n=e("./$.is-object"),r=e("./$.an-object"),l=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,a,n){try{n=e("./$.ctx")(Function.call,s(Object.prototype,"__proto__").set,2),n(t,[]),a=!(t instanceof Array)}catch(e){a=!0}return function(e,t){return l(e,t),a?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:l}},{"./$":71,"./$.an-object":43,"./$.ctx":50,"./$.is-object":64}],81:[function(e,t,a){"use strict";var s=e("./$.core"),n=e("./$"),r=e("./$.descriptors"),l=e("./$.wks")("species");t.exports=function(e){var t=s[e];r&&t&&!t[l]&&n.setDesc(t,l,{configurable:!0,get:function(){return this}})}},{"./$":71,"./$.core":49,"./$.descriptors":52,"./$.wks":91}],82:[function(e,t,a){var s=e("./$").setDesc,n=e("./$.has"),r=e("./$.wks")("toStringTag");t.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,r)&&s(e,r,{configurable:!0,value:t})}},{"./$":71,"./$.has":59,"./$.wks":91}],83:[function(e,t,a){var s=e("./$.global"),n="__core-js_shared__",r=s[n]||(s[n]={});t.exports=function(e){return r[e]||(r[e]={})}},{"./$.global":58}],84:[function(e,t,a){t.exports=function(e,t,a){if(!(e instanceof t))throw TypeError(a+": use the 'new' operator!");return e}},{}],85:[function(e,t,a){var s=e("./$.to-integer"),n=e("./$.defined");t.exports=function(e){return function(t,a){var r,l,i=String(n(t)),o=s(a),c=i.length;return 0>o||o>=c?e?"":void 0:(r=i.charCodeAt(o),55296>r||r>56319||o+1===c||(l=i.charCodeAt(o+1))<56320||l>57343?e?i.charAt(o):r:e?i.slice(o,o+2):(r-55296<<10)+(l-56320)+65536)}}},{"./$.defined":51,"./$.to-integer":86}],86:[function(e,t,a){var s=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?n:s)(e)}},{}],87:[function(e,t,a){var s=e("./$.iobject"),n=e("./$.defined");t.exports=function(e){return s(n(e))}},{"./$.defined":51,"./$.iobject":61}],88:[function(e,t,a){var s=e("./$.to-integer"),n=Math.min;t.exports=function(e){return e>0?n(s(e),9007199254740991):0}},{"./$.to-integer":86}],89:[function(e,t,a){var s=e("./$.defined");t.exports=function(e){return Object(s(e))}},{"./$.defined":51}],90:[function(e,t,a){var s=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+n).toString(36))}},{}],91:[function(e,t,a){var s=e("./$.shared")("wks"),n=e("./$.uid"),r=e("./$.global").Symbol;t.exports=function(e){return s[e]||(s[e]=r&&r[e]||(r||n)("Symbol."+e))}},{"./$.global":58,"./$.shared":83,"./$.uid":90}],92:[function(e,t,a){var s=e("./$.classof"),n=e("./$.wks")("iterator"),r=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[n]||e["@@iterator"]||r[s(e)]:void 0}},{"./$.classof":44,"./$.core":49,"./$.iterators":70,"./$.wks":91}],93:[function(e,t,a){var s=e("./$.an-object"),n=e("./core.get-iterator-method");t.exports=e("./$.core").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))}},{"./$.an-object":43,"./$.core":49,"./core.get-iterator-method":92}],94:[function(e,t,a){var s=e("./$.classof"),n=e("./$.wks")("iterator"),r=e("./$.iterators");t.exports=e("./$.core").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(s(t))}},{"./$.classof":44,"./$.core":49,"./$.iterators":70,"./$.wks":91}],95:[function(e,t,a){"use strict";var s=e("./$.ctx"),n=e("./$.export"),r=e("./$.to-object"),l=e("./$.iter-call"),i=e("./$.is-array-iter"),o=e("./$.to-length"),c=e("./core.get-iterator-method");n(n.S+n.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,n,u,d=r(e),m="function"==typeof this?this:Array,p=arguments,h=p.length,f=h>1?p[1]:void 0,g=void 0!==f,b=0,v=c(d);if(g&&(f=s(f,h>2?p[2]:void 0,2)),void 0==v||m==Array&&i(v))for(t=o(d.length),a=new m(t);t>b;b++)a[b]=g?f(d[b],b):d[b];else for(u=v.call(d),a=new m;!(n=u.next()).done;b++)a[b]=g?l(u,f,[n.value,b],!0):n.value;return a.length=b,a}})},{"./$.ctx":50,"./$.export":54,"./$.is-array-iter":62,"./$.iter-call":65,"./$.iter-detect":68,"./$.to-length":88,"./$.to-object":89,"./core.get-iterator-method":92}],96:[function(e,t,a){"use strict";var s=e("./$.add-to-unscopables"),n=e("./$.iter-step"),r=e("./$.iterators"),l=e("./$.to-iobject");t.exports=e("./$.iter-define")(Array,"Array",function(e,t){this._t=l(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,a):"values"==t?n(0,e[a]):n(0,[a,e[a]])},"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},{"./$.add-to-unscopables":42,"./$.iter-define":67,"./$.iter-step":69,"./$.iterators":70,"./$.to-iobject":87}],97:[function(e,t,a){"use strict";var s=e("./$.collection-strong");e("./$.collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=s.getEntry(this,e);return t&&t.v},set:function(e,t){return s.def(this,0===e?0:e,t)}},s,!0)},{"./$.collection":48,"./$.collection-strong":46}],98:[function(e,t,a){var s=e("./$.export");s(s.S+s.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":54,"./$.object-assign":74}],99:[function(e,t,a){var s=e("./$.to-iobject");e("./$.object-sap")("getOwnPropertyDescriptor",function(e){return function(t,a){return e(s(t),a)}})},{"./$.object-sap":75,"./$.to-iobject":87}],100:[function(e,t,a){var s=e("./$.to-object");e("./$.object-sap")("getPrototypeOf",function(e){return function(t){return e(s(t))}})},{"./$.object-sap":75,"./$.to-object":89}],101:[function(e,t,a){var s=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(s(t))}})},{"./$.object-sap":75,"./$.to-object":89}],102:[function(e,t,a){var s=e("./$.export");s(s.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.export":54,"./$.set-proto":80}],103:[function(e,t,a){},{}],104:[function(e,t,a){var s=e("./$.export"),n=e("./$").getDesc,r=e("./$.an-object");s(s.S,"Reflect",{deleteProperty:function(e,t){var a=n(r(e),t);return a&&!a.configurable?!1:delete e[t]}})},{"./$":71,"./$.an-object":43,"./$.export":54}],105:[function(e,t,a){var s=e("./$.export");s(s.S,"Reflect",{ownKeys:e("./$.own-keys")})},{"./$.export":54,"./$.own-keys":76}],106:[function(e,t,a){"use strict";var s=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=s(t,a),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":67,"./$.string-at":85}],107:[function(e,t,a){"use strict";var s=e("./$"),n=e("./$.global"),r=e("./$.has"),l=e("./$.descriptors"),i=e("./$.export"),o=e("./$.redefine"),c=e("./$.fails"),u=e("./$.shared"),d=e("./$.set-to-string-tag"),m=e("./$.uid"),p=e("./$.wks"),h=e("./$.keyof"),f=e("./$.get-names"),g=e("./$.enum-keys"),b=e("./$.is-array"),v=e("./$.an-object"),_=e("./$.to-iobject"),E=e("./$.property-desc"),y=s.getDesc,R=s.setDesc,C=s.create,w=f.get,S=n.Symbol,k=n.JSON,N=k&&k.stringify,M=!1,x=p("_hidden"),j=s.isEnum,T=u("symbol-registry"),P=u("symbols"),O="function"==typeof S,I=Object.prototype,D=l&&c(function(){return 7!=C(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,a){var s=y(I,t);s&&delete I[t],R(e,t,a),s&&e!==I&&R(I,t,s)}:R,L=function(e){var t=P[e]=C(S.prototype);return t._k=e,l&&M&&D(I,e,{configurable:!0,set:function(t){r(this,x)&&r(this[x],e)&&(this[x][e]=!1),D(this,e,E(1,t))}}),t},A=function(e){return"symbol"==typeof e},F=function(e,t,a){return a&&r(P,t)?(a.enumerable?(r(e,x)&&e[x][t]&&(e[x][t]=!1),a=C(a,{enumerable:E(0,!1)})):(r(e,x)||R(e,x,E(1,{})),e[x][t]=!0),D(e,t,a)):R(e,t,a)},U=function(e,t){v(e);for(var a,s=g(t=_(t)),n=0,r=s.length;r>n;)F(e,a=s[n++],t[a]);return e},$=function(e,t){return void 0===t?C(e):U(C(e),t)},H=function(e){var t=j.call(this,e);return t||!r(this,e)||!r(P,e)||r(this,x)&&this[x][e]?t:!0},B=function(e,t){var a=y(e=_(e),t);return!a||!r(P,t)||r(e,x)&&e[x][t]||(a.enumerable=!0),a},q=function(e){for(var t,a=w(_(e)),s=[],n=0;a.length>n;)r(P,t=a[n++])||t==x||s.push(t);return s},G=function(e){for(var t,a=w(_(e)),s=[],n=0;a.length>n;)r(P,t=a[n++])&&s.push(P[t]);return s},V=function(e){if(void 0!==e&&!A(e)){for(var t,a,s=[e],n=1,r=arguments;r.length>n;)s.push(r[n++]);return t=s[1],"function"==typeof t&&(a=t),(a||!b(t))&&(t=function(e,t){return a&&(t=a.call(this,e,t)),A(t)?void 0:t}),s[1]=t,N.apply(k,s)}},W=c(function(){var e=S();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))});O||(S=function(){if(A(this))throw TypeError("Symbol is not a constructor");return L(m(arguments.length>0?arguments[0]:void 0))},o(S.prototype,"toString",function(){return this._k}),A=function(e){return e instanceof S},s.create=$,s.isEnum=H,s.getDesc=B,s.setDesc=F,s.setDescs=U,s.getNames=f.get=q,s.getSymbols=G,l&&!e("./$.library")&&o(I,"propertyIsEnumerable",H,!0));var z={for:function(e){return r(T,e+="")?T[e]:T[e]=S(e)},keyFor:function(e){return h(T,e)},useSetter:function(){M=!0},useSimple:function(){M=!1}};s.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=p(e);z[e]=O?t:L(t)}),M=!0,i(i.G+i.W,{Symbol:S}),i(i.S,"Symbol",z),i(i.S+i.F*!O,"Object",{create:$,defineProperty:F,defineProperties:U,getOwnPropertyDescriptor:B,getOwnPropertyNames:q,getOwnPropertySymbols:G}),k&&i(i.S+i.F*(!O||W),"JSON",{stringify:V}),d(S,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./$":71,"./$.an-object":43,"./$.descriptors":52,"./$.enum-keys":53,"./$.export":54,"./$.fails":55,"./$.get-names":57,"./$.global":58,"./$.has":59,"./$.is-array":63,"./$.keyof":72,"./$.library":73,"./$.property-desc":77,"./$.redefine":79,"./$.set-to-string-tag":82,"./$.shared":83,"./$.to-iobject":87,"./$.uid":90,"./$.wks":91}],108:[function(e,t,a){var s=e("./$.export");s(s.P,"Map",{toJSON:e("./$.collection-to-json")("Map")})},{"./$.collection-to-json":47,"./$.export":54}],109:[function(e,t,a){e("./es6.array.iterator");var s=e("./$.iterators");s.NodeList=s.HTMLCollection=s.Array},{"./$.iterators":70,"./es6.array.iterator":96}],110:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=ReactBootstrap.Modal,f=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));
return t.doHide=t.doHide.bind(t),t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"doHide",value:function(){this.props.onModalDismissed()}},{key:"render",value:function(){var e=t.window.mm_config,a=t.window.mm_license,s="Team Edition",n=void 0;return"true"===e.BuildEnterpriseReady&&"true"===a.IsLicensed&&(s="Enterprise Edition",n=React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Licensed by:"),React.createElement("div",{className:"col-sm-9"},a.Company))),React.createElement(h,{show:this.props.show,onHide:this.doHide},React.createElement(h.Header,{closeButton:!0},React.createElement(h.Title,null,"About Mattermost")),React.createElement(h.Body,null,React.createElement("h4",null,"Mattermost "+s),n,React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Version:"),React.createElement("div",{className:"col-sm-9"},e.Version)),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Build Number:"),React.createElement("div",{className:"col-sm-9"},e.BuildNumber)),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Build Date:"),React.createElement("div",{className:"col-sm-9"},e.BuildDate)),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Build Hash:"),React.createElement("div",{className:"col-sm-9"},e.BuildHash))),React.createElement(h.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doHide},"Close")))}}]),a}(React.Component);a.default=f,f.defaultProps={show:!1},f.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],111:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../stores/channel_store.jsx"),v=n(b),_=e("../utils/async_client.jsx"),E=s(_),y=e("./loading_screen.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=ReactBootstrap.Modal,k=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.onAuditChange=a.onAuditChange.bind(a),a.handleMoreInfo=a.handleMoreInfo.bind(a),a.onShow=a.onShow.bind(a),a.onHide=a.onHide.bind(a),a.formatAuditInfo=a.formatAuditInfo.bind(a),a.handleRevokedSession=a.handleRevokedSession.bind(a);var s=a.getStateFromStoresForAudits();return s.moreInfo=[],a.state=s,a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStoresForAudits",value:function(){return{audits:g.default.getAudits()}}},{key:"onShow",value:function(){E.getAudits(),$(window).width()>768?($(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-200)):$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-150)}},{key:"onHide",value:function(){this.setState({moreInfo:[]}),this.props.onHide()}},{key:"componentDidMount",value:function(){g.default.addAuditsChangeListener(this.onAuditChange),this.props.show&&this.onShow()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillUnmount",value:function(){g.default.removeAuditsChangeListener(this.onAuditChange)}},{key:"onAuditChange",value:function(){var e=this.getStateFromStoresForAudits();w.areObjectsEqual(e.audits,this.state.audits)||this.setState(e)}},{key:"handleMoreInfo",value:function(e){var t=this.state.moreInfo;t[e]=!0,this.setState({moreInfo:t})}},{key:"handleRevokedSession",value:function(e){return"The session with id "+e+" was revoked"}},{key:"formatAuditInfo",value:function(e){var t=e.action.replace(/\/api\/v[1-9]/,""),a="";if(0===t.indexOf("/channels")){var s=e.extra_info.split(" "),n=s[0].split("="),r="",l=void 0,i="";switch(n.indexOf("name")>=0&&(r=n[n.indexOf("name")+1],l=v.default.getByName(r),i=l?l.display_name:r),t){case"/channels/create":a="Created the "+i+" channel/group";break;case"/channels/create_direct":a="Established a direct message channel with "+w.getDirectTeammate(l.id).username;break;case"/channels/update":a="Updated the "+i+" channel/group name";break;case"/channels/update_desc":case"/channels/update_header":a="Updated the "+i+" channel/group header";break;default:var o=[],c="",u="";s[1]&&(o=s[1].split("="),o.indexOf("user_id")>=0&&(c=o[o.indexOf("user_id")+1],u=g.default.getProfile(c).username)),/\/channels\/[A-Za-z0-9]+\/delete/.test(t)?a="Deleted the channel/group with the URL "+r:/\/channels\/[A-Za-z0-9]+\/add/.test(t)?a="Added "+u+" to the "+i+" channel/group":/\/channels\/[A-Za-z0-9]+\/remove/.test(t)&&(a="Removed "+u+" from the "+i+" channel/group")}}else if(0===t.indexOf("/oauth")){var d=e.extra_info.split(" ");switch(t){case"/oauth/register":var m=d[0].split("=");"client_id"===m[0]&&(a="Attempted to register a new OAuth Application with ID "+m[1]);break;case"/oauth/allow":"attempt"===d[0]?a="Attempted to allow a new OAuth service access":"success"===d[0]?a="Successfully gave a new OAuth service access":"fail - redirect_uri did not match registered callback"===d[0]&&(a="Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback");break;case"/oauth/access_token":if("attempt"===d[0])a="Attempted to get an OAuth access token";else if("success"===d[0])a="Successfully added a new OAuth service";else{var p=d[0].split("-");"fail"===p[0].trim()&&p[1]&&(a="Failed to get an OAuth access token - "+p[1].trim())}}}else if(0===t.indexOf("/users")){var h=e.extra_info.split(" ");switch(t){case"/users/login":"attempt"===h[0]?a="Attempted to login":"success"===h[0]?a="Successfully logged in":h[0]&&(a="FAILED login attempt");break;case"/users/revoke_session":a=this.handleRevokedSession(h[0].split("=")[1]);break;case"/users/newimage":a="Updated your profile picture";break;case"/users/update":a="Updated the general settings of your account";break;case"/users/newpassword":"attempted"===h[0]?a="Attempted to change password":"completed"===h[0]?a="Successfully changed password":"failed - tried to update user password who was logged in through oauth"===h[0]&&(a="Failed to change password - tried to update user password who was logged in through oauth");break;case"/users/update_roles":var f=h[0].split("=")[1];a="Updated user role(s) to ",a+=f.trim()?f:"member";break;case"/users/update_active":var b=h[0].split("=")[0],_=h[0].split("=")[1];if("active"===b){"true"===_?a="Account made active":"false"===_&&(a="Account made inactive");var E=h[1].split("=");if("session_user"===E[0]){var y=g.default.getProfile(E[1]),R=g.default.getCurrentUser();R&&y&&(w.isAdmin(R.roles)||w.isSystemAdmin(R.roles))?a+=" by "+y.username:R&&y&&(a+=" by an admin")}}else"session_id"===b&&(a=this.handleRevokedSession(_));break;case"/users/send_password_reset":a="Sent an email to "+h[0].split("=")[1]+" to reset your password";break;case"/users/reset_password":"attempt"===h[0]?a="Attempted to reset password":"success"===h[0]&&(a="Successfully reset password");break;case"/users/update_notify":a="Updated your global notification settings"}}else if(0===t.indexOf("/hooks")){var C=e.extra_info.split(" ");switch(t){case"/hooks/incoming/create":"attempt"===C[0]?a="Attempted to create a webhook":"success"===C[0]?a="Successfully created a webhook":"fail - bad channel permissions"===C[0]&&(a="Failed to create a webhook - bad channel permissions");break;case"/hooks/incoming/delete":"attempt"===C[0]?a="Attempted to delete a webhook":"success"===C[0]?a="Successfully deleted a webhook":"fail - inappropriate conditions"===C[0]&&(a="Failed to delete a webhook - inappropriate conditions")}}else switch(t){case"/logout":a="Logged out of your account";break;case"/verify_email":a="Sucessfully verified your email address"}if(!a)if(e.extra_info.indexOf("revoked_all=")>=0)a="Revoked all current sessions for the team";else{var S="";t&&-1!==t.lastIndexOf("/")&&(S=t.substring(t.lastIndexOf("/")+1).replace("_"," "),S=w.toTitleCase(S));var k="";e.extra_info&&(k=e.extra_info,-1!==k.indexOf("=")&&(k=k.substring(k.indexOf("=")+1))),a=S+" "+k}var N=new Date(e.create_at),M=N.toDateString()+" - "+N.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})+" | "+a;return M}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.audits.length;t++){var a=this.state.audits[t],s=this.formatAuditInfo(a),n=React.createElement("a",{href:"#",className:"theme",onClick:this.handleMoreInfo.bind(this,t)},"More info");this.state.moreInfo[t]&&(a.session_id||(a.session_id="N/A",a.action.search("/users/login")>=0&&("attempt"===a.extra_info?a.session_id+=" (Login attempt)":a.session_id+=" (Login failure)")),n=React.createElement("div",null,React.createElement("div",null,"IP: "+a.ip_address),React.createElement("div",null,"Session ID: "+a.session_id)));var r=null;t<this.state.audits.length-1&&(r=React.createElement("div",{className:"divider-light"})),e[t]=React.createElement("div",{key:"accessHistoryEntryKey"+t,className:"access-history__table"},React.createElement("div",{className:"access__report"},React.createElement("div",{className:"report__time"},s),React.createElement("div",{className:"report__info"},n),r))}var l;return l=this.state.audits.loading?React.createElement(R.default,null):React.createElement("form",{role:"form"},e),React.createElement(S,{show:this.props.show,onHide:this.onHide,bsSize:"large"},React.createElement(S.Header,{closeButton:!0},React.createElement(S.Title,null,"Access History")),React.createElement(S.Body,{ref:"modalBody"},l))}}]),t}(React.Component);a.default=k,k.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired}},{"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/utils.jsx":344,"./loading_screen.jsx":173,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],112:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/async_client.jsx"),E=s(_),y=e("./loading_screen.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=ReactBootstrap.Modal,k=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.submitRevoke=a.submitRevoke.bind(a),a.onListenerChange=a.onListenerChange.bind(a),a.handleMoreInfo=a.handleMoreInfo.bind(a),a.onHide=a.onHide.bind(a),a.onShow=a.onShow.bind(a);var s=a.getStateFromStores();return s.moreInfo=[],a.state=s,a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStores",value:function(){return{sessions:g.default.getSessions(),serverError:null,clientError:null}}},{key:"submitRevoke",value:function(e,t){t.preventDefault();var a=$(t.target).closest(".modal-content");a.addClass("animation--highlight"),setTimeout(function(){a.removeClass("animation--highlight")},1500),v.revokeSession(e,function(){E.getSessions()},function(e){var t=this.getStateFromStores();t.serverError=e,this.setState(t)}.bind(this))}},{key:"onShow",value:function(){E.getSessions(),$(window).width()>768?($(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-200)):$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-150)}},{key:"onHide",value:function(){this.setState({moreInfo:[]}),this.props.onHide()}},{key:"componentDidMount",value:function(){g.default.addSessionsChangeListener(this.onListenerChange),this.props.show&&this.onShow()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillUnmount",value:function(){g.default.removeSessionsChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();w.areObjectsEqual(e.sessions,this.state.sessions)||this.setState(e)}},{key:"handleMoreInfo",value:function(e){var t=this.state.moreInfo;t[e]=!0,this.setState({moreInfo:t})}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.sessions.length;t++){var a=this.state.sessions[t],s=new Date(a.last_activity_at),n=new Date(a.create_at),r=a.props.platform,l="";"Windows"===a.props.platform?l="fa fa-windows":a.device_id&&0===a.device_id.indexOf("apple:")?(l="fa fa-apple",r="iPhone Native App"):a.device_id&&0===a.device_id.indexOf("android:")?(r="Android Native App",l="fa fa-android"):"Macintosh"===a.props.platform||"iPhone"===a.props.platform?l="fa fa-apple":"Linux"===a.props.platform&&(a.props.os.indexOf("Android")>=0?(r="Android",l="fa fa-android"):l="fa fa-linux");var i=void 0;i=this.state.moreInfo[t]?React.createElement("div",null,React.createElement("div",null,"First time active: "+n.toDateString()+", "+s.toLocaleTimeString()),React.createElement("div",null,"OS: "+a.props.os),React.createElement("div",null,"Browser: "+a.props.browser),React.createElement("div",null,"Session ID: "+a.id)):React.createElement("a",{className:"theme",href:"#",onClick:this.handleMoreInfo.bind(this,t)},"More info"),e[t]=React.createElement("div",{key:"activityLogEntryKey"+t,className:"activity-log__table"},React.createElement("div",{className:"activity-log__report"},React.createElement("div",{className:"report__platform"},React.createElement("i",{className:l}),r),React.createElement("div",{className:"report__info"},React.createElement("div",null,"Last activity: "+s.toDateString()+", "+s.toLocaleTimeString()),i)),React.createElement("div",{className:"activity-log__action"},React.createElement("button",{onClick:this.submitRevoke.bind(this,a.id),className:"btn btn-primary"},"Logout")))}var o=void 0;return o=this.state.sessions.loading?React.createElement(R.default,null):React.createElement("form",{role:"form"},e),React.createElement(S,{show:this.props.show,onHide:this.onHide,bsSize:"large"},React.createElement(S.Header,{closeButton:!0},React.createElement(S.Title,null,"Active Sessions")),React.createElement(S.Body,{ref:"modalBody"},React.createElement("p",{className:"session-help-text"},"Sessions are created when you log in with your email and password to a new browser on a device. Sessions let you use Mattermost for up to 30 days without having to log in again. If you want to log out sooner, use the 'Logout' button below to end a session."),o))}}]),t}(React.Component);a.default=k,k.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired}},{"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./loading_screen.jsx":173,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],113:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/reflect/delete-property"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("./admin_sidebar.jsx"),v=n(b),_=e("../../stores/admin_store.jsx"),E=n(_),y=e("../../stores/team_store.jsx"),R=n(y),C=e("../../utils/async_client.jsx"),w=s(C),S=e("../loading_screen.jsx"),k=n(S),N=e("../../utils/utils.jsx"),M=s(N),x=e("./email_settings.jsx"),j=n(x),T=e("./log_settings.jsx"),P=n(T),O=e("./logs.jsx"),I=n(O),D=e("./image_settings.jsx"),L=n(D),A=e("./privacy_settings.jsx"),F=n(A),U=e("./rate_settings.jsx"),$=n(U),H=e("./gitlab_settings.jsx"),B=n(H),q=e("./sql_settings.jsx"),G=n(q),V=e("./team_settings.jsx"),W=n(V),z=e("./service_settings.jsx"),K=n(z),Y=e("./legal_and_support_settings.jsx"),J=n(Y),Z=e("./team_users.jsx"),X=n(Z),Q=e("./team_analytics.jsx"),ee=n(Q),te=e("./ldap_settings.jsx"),ae=n(te),se=e("./license_settings.jsx"),ne=n(se),re=e("./system_analytics.jsx"),le=n(re),ie=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));a.selectTab=a.selectTab.bind(a),a.removeSelectedTeam=a.removeSelectedTeam.bind(a),a.addSelectedTeam=a.addSelectedTeam.bind(a),a.onConfigListenerChange=a.onConfigListenerChange.bind(a),a.onAllTeamsListenerChange=a.onAllTeamsListenerChange.bind(a);var s=E.default.getSelectedTeams();if(null==s&&(s={},s[R.default.getCurrentId()]="true",E.default.saveSelectedTeams(s)),a.state={config:E.default.getConfig(),teams:E.default.getAllTeams(),selectedTeams:s,selected:e.tab||"system_analytics",selectedTeam:e.teamId||null},!e.tab){var n=M.getUrlParameter("session_token_index");history.replaceState(null,null,"/admin_console/"+a.state.selected+"?session_token_index="+n)}return a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){E.default.addConfigChangeListener(this.onConfigListenerChange),w.getConfig(),E.default.addAllTeamsChangeListener(this.onAllTeamsListenerChange),w.getAllTeams()}},{key:"componentWillUnmount",value:function(){E.default.removeConfigChangeListener(this.onConfigListenerChange),E.default.removeAllTeamsChangeListener(this.onAllTeamsListenerChange)}},{key:"onConfigListenerChange",value:function(){this.setState({config:E.default.getConfig(),teams:E.default.getAllTeams(),selectedTeams:E.default.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"onAllTeamsListenerChange",value:function(){this.setState({config:E.default.getConfig(),teams:E.default.getAllTeams(),selectedTeams:E.default.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"selectTab",value:function(e,t){this.setState({config:E.default.getConfig(),teams:E.default.getAllTeams(),selectedTeams:E.default.getSelectedTeams(),selected:e,selectedTeam:t})}},{key:"removeSelectedTeam",value:function(e){var t=E.default.getSelectedTeams();(0,l.default)(t,e),E.default.saveSelectedTeams(t),this.setState({config:E.default.getConfig(),teams:E.default.getAllTeams(),selectedTeams:E.default.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"addSelectedTeam",value:function(e){var t=E.default.getSelectedTeams();t[e]="true",E.default.saveSelectedTeams(t),this.setState({config:E.default.getConfig(),teams:E.default.getAllTeams(),selectedTeams:E.default.getSelectedTeams(),selected:this.state.selected,selectedTeam:this.state.selectedTeam})}},{key:"render",value:function(){var e=React.createElement(k.default,null);return null!=this.state.config&&("email_settings"===this.state.selected?e=React.createElement(j.default,{config:this.state.config}):"log_settings"===this.state.selected?e=React.createElement(P.default,{config:this.state.config}):"logs"===this.state.selected?e=React.createElement(I.default,null):"image_settings"===this.state.selected?e=React.createElement(L.default,{config:this.state.config}):"privacy_settings"===this.state.selected?e=React.createElement(F.default,{config:this.state.config}):"rate_settings"===this.state.selected?e=React.createElement($.default,{config:this.state.config}):"gitlab_settings"===this.state.selected?e=React.createElement(B.default,{config:this.state.config}):"sql_settings"===this.state.selected?e=React.createElement(G.default,{config:this.state.config}):"team_settings"===this.state.selected?e=React.createElement(W.default,{config:this.state.config}):"service_settings"===this.state.selected?e=React.createElement(K.default,{config:this.state.config}):"legal_and_support_settings"===this.state.selected?e=React.createElement(J.default,{config:this.state.config}):"ldap_settings"===this.state.selected?e=React.createElement(ae.default,{config:this.state.config}):"license"===this.state.selected?e=React.createElement(ne.default,null):"team_users"===this.state.selected?this.state.teams&&(e=React.createElement(X.default,{team:this.state.teams[this.state.selectedTeam]})):"team_analytics"===this.state.selected?this.state.teams&&(e=React.createElement(ee.default,{team:this.state.teams[this.state.selectedTeam]})):"system_analytics"===this.state.selected&&(e=React.createElement(le.default,null))),React.createElement("div",null,React.createElement("div",{className:"sidebar--menu",id:"sidebar-menu"}),React.createElement(v.default,{selected:this.state.selected,selectedTeam:this.state.selectedTeam,selectTab:this.selectTab,teams:this.state.teams,selectedTeams:this.state.selectedTeams,removeSelectedTeam:this.removeSelectedTeam,addSelectedTeam:this.addSelectedTeam}),React.createElement("div",{className:"inner__wrap channel__wrap"},React.createElement("div",{className:"row header"}),React.createElement("div",{className:"row main"},React.createElement("div",{id:"app-content",className:"app__content admin"},e))))}}]),t}(React.Component);a.default=ie,ie.defaultProps={},ie.propTypes={tab:React.PropTypes.string,teamId:React.PropTypes.string}},{"../../stores/admin_store.jsx":323,"../../stores/team_store.jsx":334,"../../utils/async_client.jsx":336,"../../utils/utils.jsx":344,"../loading_screen.jsx":173,"./admin_sidebar.jsx":115,"./email_settings.jsx":118,"./gitlab_settings.jsx":119,"./image_settings.jsx":120,"./ldap_settings.jsx":121,"./legal_and_support_settings.jsx":122,"./license_settings.jsx":123,"./log_settings.jsx":125,"./logs.jsx":126,"./privacy_settings.jsx":127,"./rate_settings.jsx":128,"./service_settings.jsx":131,"./sql_settings.jsx":132,"./system_analytics.jsx":133,"./team_analytics.jsx":134,"./team_settings.jsx":135,"./team_users.jsx":136,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/reflect/delete-property":13,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],114:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){return{currentTeam:y.default.getCurrent()}}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../../utils/utils.jsx"),b=s(g),v=e("../../utils/client.jsx"),_=s(v),E=e("../../stores/team_store.jsx"),y=n(E),R=e("../../utils/constants.jsx"),C=n(R),w=e("mm-intl"),S=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(0,i.default)(t).call(this,e));return a.blockToggle=!1,a.handleLogoutClick=a.handleLogoutClick.bind(a),a.state=r(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"handleLogoutClick",value:function(e){e.preventDefault(),_.logout()}},{key:"componentDidMount",value:function(){var e=this;$(ReactDOM.findDOMNode(this.refs.dropdown)).on("hide.bs.dropdown",function(){e.blockToggle=!0,setTimeout(function(){e.blockToggle=!1},100)})}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this.refs.dropdown)).off("hide.bs.dropdown")}},{key:"render",value:function(){return React.createElement("ul",{className:"nav navbar-nav navbar-right"},React.createElement("li",{ref:"dropdown",className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},React.createElement("span",{className:"dropdown__icon",dangerouslySetInnerHTML:{__html:C.default.MENU_ICON}})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",null,React.createElement("a",{href:b.getWindowLocationOrigin()+"/"+this.state.currentTeam.name},React.createElement(w.FormattedMessage,{id:"admin.nav.switch",defaultMessage:"Switch to {display_name}",values:{display_name:this.state.currentTeam.display_name}}))),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleLogoutClick},React.createElement(w.FormattedMessage,{id:"admin.nav.logout",defaultMessage:"Logout"}))),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/help.html"},React.createElement(w.FormattedMessage,{id:"admin.nav.help",defaultMessage:"Help"}))),React.createElement("li",null,React.createElement("a",{target:"_blank",href:"/static/help/report_problem.html"},React.createElement(w.FormattedMessage,{id:"admin.nav.report",defaultMessage:"Report a Problem"}))))))}}]),t}(React.Component);a.default=S},{"../../stores/team_store.jsx":334,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],115:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/keys"),l=n(r),i=e("babel-runtime/core-js/reflect/delete-property"),o=n(i),c=e("babel-runtime/core-js/object/get-prototype-of"),u=n(c),d=e("babel-runtime/helpers/classCallCheck"),m=n(d),p=e("babel-runtime/helpers/createClass"),h=n(p),f=e("babel-runtime/helpers/possibleConstructorReturn"),g=n(f),b=e("babel-runtime/helpers/inherits"),v=n(b);Object.defineProperty(a,"__esModule",{value:!0});var _=e("./admin_sidebar_header.jsx"),E=n(_),y=e("./select_team_modal.jsx"),R=n(y),C=e("../../utils/utils.jsx"),w=s(C),S=e("mm-intl"),k=ReactBootstrap.Tooltip,N=ReactBootstrap.OverlayTrigger,M=function(e){function a(e){(0,m.default)(this,a);var t=(0,g.default)(this,(0,u.default)(a).call(this,e));return t.isSelected=t.isSelected.bind(t),t.handleClick=t.handleClick.bind(t),t.removeTeam=t.removeTeam.bind(t),t.showTeamSelect=t.showTeamSelect.bind(t),t.teamSelectedModal=t.teamSelectedModal.bind(t),t.teamSelectedModalDismissed=t.teamSelectedModalDismissed.bind(t),t.state={showSelectModal:!1},t}return(0,v.default)(a,e),(0,h.default)(a,[{key:"handleClick",value:function(e,t,a){a.preventDefault(),this.props.selectTab(e,t);var s=w.getUrlParameter("session_token_index");history.pushState({name:e,teamId:t},null,"/admin_console/"+e+"/"+(t||"")+"?session_token_index="+s)}},{key:"isSelected",value:function(e,t){if(this.props.selected===e){if("team_users"!==e&&"team_analytics"!==e)return"active";if(null!=this.props.selectedTeam&&this.props.selectedTeam===t)return"active"}return""}},{key:"removeTeam",value:function(e,t){t.preventDefault(),(0,o.default)(this.props.selectedTeams,e),this.props.removeSelectedTeam(e),"team_users"===this.props.selected&&null!=this.props.selectedTeam&&this.props.selectedTeam===e&&this.props.selectTab("service_settings",null)}},{key:"componentDidMount",value:function(){$(window).width()>768&&$(".nav-pills__container").perfectScrollbar()}},{key:"showTeamSelect",value:function(e){e.preventDefault(),this.setState({showSelectModal:!0})}},{key:"teamSelectedModal",value:function(e){this.props.selectedTeams[e]="true",this.setState({showSelectModal:!1}),this.props.addSelectedTeam(e),this.forceUpdate()}},{key:"teamSelectedModalDismissed",value:function(){this.setState({showSelectModal:!1})}},{key:"render",value:function(){var e="*",a=React.createElement(S.FormattedMessage,{id:"admin.sidebar.loading",defaultMessage:"Loading"}),s=React.createElement(k,{id:"remove-team-tooltip"},React.createElement(S.FormattedMessage,{id:"admin.sidebar.rmTeamSidebar",defaultMessage:"Remove team from sidebar menu"})),n=React.createElement(k,{id:"add-team-tooltip"},React.createElement(S.FormattedMessage,{id:"admin.sidebar.addTeamSidebar",defaultMessage:"Add team from sidebar menu"}));if(null!=this.props.teams){e=""+(0,l.default)(this.props.teams).length,a=[];for(var r in this.props.selectedTeams)if(this.props.selectedTeams.hasOwnProperty(r)){var i=this.props.teams[r];null!=i&&a.push(React.createElement("ul",{key:"team_"+i.id,className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleClick.bind(this,"team_users",i.id),className:"nav__sub-menu-item "+this.isSelected("team_users",i.id)+" "+this.isSelected("team_analytics",i.id)},i.name,React.createElement(N,{delayShow:1e3,placement:"top",overlay:s},React.createElement("span",{className:"menu-icon--right menu__close",onClick:this.removeTeam.bind(this,i.id),style:{cursor:"pointer"}},"×")))),React.createElement("li",null,React.createElement("ul",{className:"nav nav__inner-menu"},React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("team_users",i.id),onClick:this.handleClick.bind(this,"team_users",i.id)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.users",defaultMessage:"- Users"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("team_analytics",i.id),onClick:this.handleClick.bind(this,"team_analytics",i.id)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.statistics",defaultMessage:"- Statistics"})))))))}}var o=void 0,c=void 0;return"true"===t.window.mm_config.BuildEnterpriseReady&&("true"===t.window.mm_license.IsLicensed&&(o=React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("ldap_settings"),onClick:this.handleClick.bind(this,"ldap_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.ldap",defaultMessage:"LDAP Settings"})))),c=React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("license"),onClick:this.handleClick.bind(this,"license",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.license",defaultMessage:"Edition and License"})))),React.createElement("div",{className:"sidebar--left sidebar--collapsable"},React.createElement("div",null,React.createElement(E.default,null),React.createElement("div",{className:"nav-pills__container"},React.createElement("ul",{
className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,React.createElement(S.FormattedMessage,{id:"admin.sidebar.reports",defaultMessage:"SITE REPORTS"}))))),React.createElement("ul",{className:"nav nav__sub-menu padded"},React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("system_analytics"),onClick:this.handleClick.bind(this,"system_analytics",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.view_statistics",defaultMessage:"View Statistics"})))),React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,React.createElement(S.FormattedMessage,{id:"admin.sidebar.settings",defaultMessage:"SETTINGS"}))))),React.createElement("ul",{className:"nav nav__sub-menu padded"},React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("service_settings"),onClick:this.handleClick.bind(this,"service_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.service",defaultMessage:"Service Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("team_settings"),onClick:this.handleClick.bind(this,"team_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.team",defaultMessage:"Team Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("sql_settings"),onClick:this.handleClick.bind(this,"sql_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.sql",defaultMessage:"SQL Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("email_settings"),onClick:this.handleClick.bind(this,"email_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.email",defaultMessage:"Email Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("image_settings"),onClick:this.handleClick.bind(this,"image_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.file",defaultMessage:"File Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("log_settings"),onClick:this.handleClick.bind(this,"log_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.log",defaultMessage:"Log Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("rate_settings"),onClick:this.handleClick.bind(this,"rate_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.rate_limit",defaultMessage:"Rate Limit Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("privacy_settings"),onClick:this.handleClick.bind(this,"privacy_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.privacy",defaultMessage:"Privacy Settings"}))),React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("gitlab_settings"),onClick:this.handleClick.bind(this,"gitlab_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.gitlab",defaultMessage:"GitLab Settings"}))),o,React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("legal_and_support_settings"),onClick:this.handleClick.bind(this,"legal_and_support_settings",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.support",defaultMessage:"Legal and Support Settings"})))),React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,React.createElement(S.FormattedMessage,{id:"admin.sidebar.teams",defaultMessage:"TEAMS ({count})",values:{count:e}})),React.createElement("span",{className:"menu-icon--right"},React.createElement(N,{delayShow:1e3,placement:"top",overlay:n},React.createElement("a",{href:"#",onClick:this.showTeamSelect},React.createElement("i",{className:"fa fa-plus"}))))))),React.createElement("ul",{className:"nav nav__sub-menu padded"},React.createElement("li",null,a)),React.createElement("ul",{className:"nav nav__sub-menu"},React.createElement("li",null,React.createElement("h4",null,React.createElement("span",{className:"icon fa fa-gear"}),React.createElement("span",null,React.createElement(S.FormattedMessage,{id:"admin.sidebar.other",defaultMessage:"OTHER"}))))),React.createElement("ul",{className:"nav nav__sub-menu padded"},c,React.createElement("li",null,React.createElement("a",{href:"#",className:this.isSelected("logs"),onClick:this.handleClick.bind(this,"logs",null)},React.createElement(S.FormattedMessage,{id:"admin.sidebar.logs",defaultMessage:"Logs"})))))))),React.createElement(R.default,{teams:this.props.teams,show:this.state.showSelectModal,onModalSubmit:this.teamSelectedModal,onModalDismissed:this.teamSelectedModalDismissed}))}}]),a}(React.Component);a.default=M,M.propTypes={teams:React.PropTypes.object,selectedTeams:React.PropTypes.object,removeSelectedTeam:React.PropTypes.func,addSelectedTeam:React.PropTypes.func,selected:React.PropTypes.string,selectedTeam:React.PropTypes.string,selectTab:React.PropTypes.func}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/utils.jsx":344,"./admin_sidebar_header.jsx":116,"./select_team_modal.jsx":130,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/core-js/reflect/delete-property":13,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],116:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./admin_navbar_dropdown.jsx"),g=n(f),b=e("../../stores/user_store.jsx"),v=n(b),_=e("../../utils/utils.jsx"),E=s(_),y=e("mm-intl"),R=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.toggleDropdown=a.toggleDropdown.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"toggleDropdown",value:function(e){return e.preventDefault(),this.refs.dropdown.blockToggle?void(this.refs.dropdown.blockToggle=!1):void $(".team__header").find(".dropdown-toggle").dropdown("toggle")}},{key:"render",value:function(){var e=v.default.getCurrentUser(),t=null;return e?(e.last_picture_update&&(t=React.createElement("img",{className:"user__picture",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at+"&"+E.getSessionIndex()})),React.createElement("div",{className:"team__header theme"},React.createElement("a",{href:"#",onClick:this.toggleDropdown},t,React.createElement("div",{className:"header__info"},React.createElement("div",{className:"user__name"},"@"+e.username),React.createElement("div",{className:"team__name"},React.createElement(y.FormattedMessage,{id:"admin.sidebarHeader.systemConsole",defaultMessage:"System Console"})))),React.createElement(g.default,{ref:"dropdown"}))):null}}]),t}(React.Component);a.default=R},{"../../stores/user_store.jsx":335,"../../utils/utils.jsx":344,"./admin_navbar_dropdown.jsx":114,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],117:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/utils.jsx"),g=s(f),b=e("../../utils/constants.jsx"),v=n(b),_=e("./line_chart.jsx"),E=n(_),y=e("mm-intl"),R=ReactBootstrap.Tooltip,C=ReactBootstrap.OverlayTrigger,w=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e="";this.props.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.props.serverError)));var t=React.createElement(y.FormattedMessage,{id:"admin.analytics.loading",defaultMessage:"Loading..."}),a=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.totalUsers",defaultMessage:"Total Users"}),React.createElement("i",{className:"fa fa-users"})),React.createElement("div",{className:"content"},null==this.props.uniqueUserCount?t:this.props.uniqueUserCount))),s=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.publicChannels",defaultMessage:"Public Channels"}),React.createElement("i",{className:"fa fa-globe"})),React.createElement("div",{className:"content"},null==this.props.channelOpenCount?t:this.props.channelOpenCount))),n=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.privateGroups",defaultMessage:"Private Groups"}),React.createElement("i",{className:"fa fa-lock"})),React.createElement("div",{className:"content"},null==this.props.channelPrivateCount?t:this.props.channelPrivateCount))),r=React.createElement("div",{className:"col-sm-3"},React.createElement("div",{className:"total-count"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.totalPosts",defaultMessage:"Total Posts"}),React.createElement("i",{className:"fa fa-comment"})),React.createElement("div",{className:"content"},null==this.props.postCount?t:this.props.postCount))),l=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.totalPosts",defaultMessage:"Total Posts"})),React.createElement("div",{className:"content"},t)));if(null!=this.props.postCountsDay){var i=void 0;i=0===this.props.postCountsDay.labels.length?React.createElement(y.FormattedMessage,{id:"admin.analytics.meaningful",defaultMessage:"Not enough data for a meaningful representation."}):React.createElement(E.default,{data:this.props.postCountsDay,width:"740",height:"225"}),l=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.totalPosts",defaultMessage:"Total Posts"})),React.createElement("div",{className:"content"},i)))}var o=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.activeUsers",defaultMessage:"Active Users With Posts"})),React.createElement("div",{className:"content"},t)));if(null!=this.props.userCountsWithPostsDay){var i=void 0;i=0===this.props.userCountsWithPostsDay.labels.length?React.createElement(y.FormattedMessage,{id:"admin.analytics.meaningful",defaultMessage:"Not enough data for a meaningful representation."}):React.createElement(E.default,{data:this.props.userCountsWithPostsDay,width:"740",height:"225"}),o=React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"total-count by-day"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.activeUsers",defaultMessage:"Active Users With Posts"})),React.createElement("div",{className:"content"},i)))}var c=void 0;if(null!=this.props.recentActiveUsers){var i=void 0;i=0===this.props.recentActiveUsers.length?t:React.createElement("table",null,React.createElement("tbody",null,this.props.recentActiveUsers.map(function(e){var t=React.createElement(R,{id:"recent-user-email-tooltip-"+e.id},e.email);return React.createElement("tr",{key:"recent-user-table-entry-"+e.id},React.createElement("td",null,React.createElement(C,{delayShow:v.default.OVERLAY_TIME_DELAY,placement:"top",overlay:t},React.createElement("time",null,e.username))),React.createElement("td",null,g.displayDateTime(e.last_activity_at)))}))),c=React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"total-count recent-active-users"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.recentActive",defaultMessage:"Recent Active Users"})),React.createElement("div",{className:"content"},i)))}var u=void 0;if(null!=this.props.newlyCreatedUsers){var i=void 0;i=0===this.props.newlyCreatedUsers.length?t:React.createElement("table",null,React.createElement("tbody",null,this.props.newlyCreatedUsers.map(function(e){var t=React.createElement(R,{id:"new-user-email-tooltip-"+e.id},e.email);return React.createElement("tr",{key:"new-user-table-entry-"+e.id},React.createElement("td",null,React.createElement(C,{delayShow:v.default.OVERLAY_TIME_DELAY,placement:"top",overlay:t},React.createElement("time",null,e.username))),React.createElement("td",null,g.displayDateTime(e.create_at)))}))),u=React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"total-count recent-active-users"},React.createElement("div",{className:"title"},React.createElement(y.FormattedMessage,{id:"admin.analytics.newlyCreated",defaultMessage:"Newly Created Users"})),React.createElement("div",{className:"content"},i)))}return React.createElement("div",{className:"wrapper--fixed team_statistics"},React.createElement("h3",null,React.createElement(y.FormattedMessage,{id:"admin.analytics.title",defaultMessage:"Statistics for {title}",values:{title:this.props.title}})),e,React.createElement("div",{className:"row"},a,r,s,n),React.createElement("div",{className:"row"},l),React.createElement("div",{className:"row"},o),React.createElement("div",{className:"row"},c,u))}}]),t}(React.Component);a.default=w,w.defaultProps={title:null,channelOpenCount:null,channelPrivateCount:null,postCount:null,postCountsDay:null,userCountsWithPostsDay:null,recentActiveUsers:null,newlyCreatedUsers:null,uniqueUserCount:null,serverError:null},w.propTypes={title:React.PropTypes.string,channelOpenCount:React.PropTypes.number,channelPrivateCount:React.PropTypes.number,postCount:React.PropTypes.number,postCountsDay:React.PropTypes.object,userCountsWithPostsDay:React.PropTypes.object,recentActiveUsers:React.PropTypes.array,newlyCreatedUsers:React.PropTypes.array,uniqueUserCount:React.PropTypes.number,serverError:React.PropTypes.string}},{"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"./line_chart.jsx":124,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],118:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("crypto"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({notificationDisplayExample:{id:"admin.email.notificationDisplayExample",defaultMessage:'Ex: "Mattermost Notification", "System", "No-Reply"'},notificationEmailExample:{id:"admin.email.notificationEmailExample",defaultMessage:'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"'},smtpUsernameExample:{id:"admin.email.smtpUsernameExample",defaultMessage:'Ex: "admin@yourcompany.com", "AKIADTOVBGERKLCBV"'},smtpPasswordExample:{id:"admin.email.smtpPasswordExample",defaultMessage:'Ex: "yourpassword", "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"'},smtpServerExample:{id:"admin.email.smtpServerExample",defaultMessage:'Ex: "smtp.yourcompany.com", "email-smtp.us-east-1.amazonaws.com"'},smtpPortExample:{id:"admin.email.smtpPortExample",defaultMessage:'Ex: "25", "465"'},connectionSecurityNone:{id:"admin.email.connectionSecurityNone",defaultMessage:"None"},connectionSecurityTls:{id:"admin.email.connectionSecurityTls",defaultMessage:"TLS (Recommended)"},connectionSecurityStart:{id:"admin.email.connectionSecurityStart",defaultMessage:"STARTTLS"},inviteSaltExample:{id:"admin.email.inviteSaltExample",defaultMessage:'Ex "bjlSR4QqkXFBr7TP4oDzlfZmcNuH9Yo"'},passwordSaltExample:{id:"admin.email.passwordSaltExample",defaultMessage:'Ex "bjlSR4QqkXFBr7TP4oDzlfZmcNuH9Yo"'},pushServerEx:{id:"admin.email.pushServerEx",defaultMessage:'E.g.: "https://push-test.mattermost.com"'},testing:{id:"admin.email.testing",defaultMessage:"Testing..."},saving:{id:"admin.email.saving",defaultMessage:"Saving Config..."}}),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleTestConnection=a.handleTestConnection.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.buildConfig=a.buildConfig.bind(a),a.handleGenerateInvite=a.handleGenerateInvite.bind(a),a.handleGenerateReset=a.handleGenerateReset.bind(a),a.state={sendEmailNotifications:a.props.config.EmailSettings.SendEmailNotifications,sendPushNotifications:a.props.config.EmailSettings.SendPushNotifications,saveNeeded:!1,serverError:null,emailSuccess:null,emailFail:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"sendEmailNotifications_true"===e&&(t.sendEmailNotifications=!0),"sendEmailNotifications_false"===e&&(t.sendEmailNotifications=!1),"sendPushNotifications_true"===e&&(t.sendPushNotifications=!0),"sendPushNotifications_false"===e&&(t.sendPushNotifications=!1),this.setState(t)}},{key:"buildConfig",value:function(){var e=this.props.config;return e.EmailSettings.EnableSignUpWithEmail=ReactDOM.findDOMNode(this.refs.allowSignUpWithEmail).checked,e.EmailSettings.SendEmailNotifications=ReactDOM.findDOMNode(this.refs.sendEmailNotifications).checked,e.EmailSettings.SendPushNotifications=ReactDOM.findDOMNode(this.refs.sendPushNotifications).checked,e.EmailSettings.RequireEmailVerification=ReactDOM.findDOMNode(this.refs.requireEmailVerification).checked,e.EmailSettings.FeedbackName=ReactDOM.findDOMNode(this.refs.feedbackName).value.trim(),e.EmailSettings.FeedbackEmail=ReactDOM.findDOMNode(this.refs.feedbackEmail).value.trim(),e.EmailSettings.SMTPServer=ReactDOM.findDOMNode(this.refs.SMTPServer).value.trim(),e.EmailSettings.PushNotificationServer=ReactDOM.findDOMNode(this.refs.PushNotificationServer).value.trim(),e.EmailSettings.SMTPPort=ReactDOM.findDOMNode(this.refs.SMTPPort).value.trim(),e.EmailSettings.SMTPUsername=ReactDOM.findDOMNode(this.refs.SMTPUsername).value.trim(),e.EmailSettings.SMTPPassword=ReactDOM.findDOMNode(this.refs.SMTPPassword).value.trim(),e.EmailSettings.ConnectionSecurity=ReactDOM.findDOMNode(this.refs.ConnectionSecurity).value.trim(),e.EmailSettings.InviteSalt=ReactDOM.findDOMNode(this.refs.InviteSalt).value.trim(),""===e.EmailSettings.InviteSalt&&(e.EmailSettings.InviteSalt=E.default.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.InviteSalt).value=e.EmailSettings.InviteSalt),e.EmailSettings.PasswordResetSalt=ReactDOM.findDOMNode(this.refs.PasswordResetSalt).value.trim(),""===e.EmailSettings.PasswordResetSalt&&(e.EmailSettings.PasswordResetSalt=E.default.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.PasswordResetSalt).value=e.EmailSettings.PasswordResetSalt),e}},{key:"handleGenerateInvite",value:function(e){e.preventDefault(),ReactDOM.findDOMNode(this.refs.InviteSalt).value=E.default.randomBytes(256).toString("base64").substring(0,32);var t={saveNeeded:!0,serverError:this.state.serverError};this.setState(t)}},{key:"handleGenerateReset",value:function(e){e.preventDefault(),ReactDOM.findDOMNode(this.refs.PasswordResetSalt).value=E.default.randomBytes(256).toString("base64").substring(0,32);var t={saveNeeded:!0,serverError:this.state.serverError};this.setState(t)}},{key:"handleTestConnection",value:function(e){var t=this;e.preventDefault(),$("#connection-button").button("loading");var a=this.buildConfig();g.testEmail(a,function(){t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:null,saveNeeded:!0,emailSuccess:!0,emailFail:null}),$("#connection-button").button("reset")},function(e){t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:null,saveNeeded:!0,emailSuccess:null,emailFail:e.message+" - "+e.detailed_error}),$("#connection-button").button("reset")})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.buildConfig();g.saveConfig(a,function(){v.getConfig(),t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:null,saveNeeded:!1,emailSuccess:null,emailFail:null}),$("#save-button").button("reset")},function(e){t.setState({sendEmailNotifications:a.EmailSettings.SendEmailNotifications,serverError:e.message,saveNeeded:!0,emailSuccess:null,emailFail:null}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";this.state.saveNeeded&&(a="btn btn-primary");var s="";this.state.emailSuccess&&(s=React.createElement("div",{className:"alert alert-success"},React.createElement("i",{className:"fa fa-check"}),React.createElement(y.FormattedMessage,{id:"admin.email.emailSuccess",defaultMessage:"No errors were reported while sending an email.  Please check your inbox to make sure."})));var n="";return this.state.emailFail&&(s=React.createElement("div",{className:"alert alert-warning"},React.createElement("i",{className:"fa fa-warning"}),React.createElement(y.FormattedMessage,{id:"admin.email.emailFail",defaultMessage:"Connection unsuccessful: {error}",values:{error:this.state.emailFail}}))),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(y.FormattedMessage,{id:"admin.email.emailSettings",defaultMessage:"Email Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"allowSignUpWithEmail"},React.createElement(y.FormattedMessage,{id:"admin.email.allowSignupTitle",defaultMessage:"Allow Sign Up With Email: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"allowSignUpWithEmail",value:"true",ref:"allowSignUpWithEmail",defaultChecked:this.props.config.EmailSettings.EnableSignUpWithEmail,onChange:this.handleChange.bind(this,"allowSignUpWithEmail_true")}),React.createElement(y.FormattedMessage,{id:"admin.email.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"allowSignUpWithEmail",value:"false",defaultChecked:!this.props.config.EmailSettings.EnableSignUpWithEmail,onChange:this.handleChange.bind(this,"allowSignUpWithEmail_false")}),React.createElement(y.FormattedMessage,{id:"admin.email.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.allowSignupDescription",defaultMessage:"When true, Mattermost allows team creation and account signup using email and password.  This value should be false only when you want to limit signup to a single-sign-on service like OAuth or LDAP."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"sendEmailNotifications"},React.createElement(y.FormattedMessage,{id:"admin.email.notificationsTitle",defaultMessage:"Send Email Notifications: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"sendEmailNotifications",value:"true",ref:"sendEmailNotifications",defaultChecked:this.props.config.EmailSettings.SendEmailNotifications,onChange:this.handleChange.bind(this,"sendEmailNotifications_true")}),React.createElement(y.FormattedMessage,{id:"admin.email.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"sendEmailNotifications",value:"false",defaultChecked:!this.props.config.EmailSettings.SendEmailNotifications,onChange:this.handleChange.bind(this,"sendEmailNotifications_false")}),React.createElement(y.FormattedMessage,{id:"admin.email.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedHTMLMessage,{id:"admin.email.notificationsDescription",defaultMessage:"Typically set to true in production. When true, Mattermost attempts to send email notifications. Developers may set this field to false to skip email setup for faster development.<br />Setting this to true removes the Preview Mode banner (requires logging out and logging back in after setting is changed)."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"requireEmailVerification"},React.createElement(y.FormattedMessage,{id:"admin.email.requireVerificationTitle",defaultMessage:"Require Email Verification: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"requireEmailVerification",value:"true",ref:"requireEmailVerification",defaultChecked:this.props.config.EmailSettings.RequireEmailVerification,onChange:this.handleChange.bind(this,"requireEmailVerification_true"),disabled:!this.state.sendEmailNotifications}),React.createElement(y.FormattedMessage,{id:"admin.email.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"requireEmailVerification",value:"false",defaultChecked:!this.props.config.EmailSettings.RequireEmailVerification,onChange:this.handleChange.bind(this,"requireEmailVerification_false"),disabled:!this.state.sendEmailNotifications}),React.createElement(y.FormattedMessage,{id:"admin.email.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.requireVerificationDescription",defaultMessage:"Typically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false so skip sending verification emails for faster development."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"feedbackName"},React.createElement(y.FormattedMessage,{id:"admin.email.notificationDisplayTitle",defaultMessage:"Notification Display Name:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"feedbackName",ref:"feedbackName",placeholder:e(R.notificationDisplayExample),defaultValue:this.props.config.EmailSettings.FeedbackName,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.notificationDisplayDescription",defaultMessage:"Display name on email account used when sending notification emails from Mattermost."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"feedbackEmail"},React.createElement(y.FormattedMessage,{id:"admin.email.notificationEmailTitle",defaultMessage:"Notification Email Address:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"email",className:"form-control",id:"feedbackEmail",ref:"feedbackEmail",placeholder:e(R.notificationEmailExample),defaultValue:this.props.config.EmailSettings.FeedbackEmail,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.notificationEmailDescription",defaultMessage:"Email address displayed on email account used when sending notification emails from Mattermost."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPUsername"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpUsernameTitle",defaultMessage:"SMTP Username:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPUsername",ref:"SMTPUsername",placeholder:e(R.smtpUsernameExample),defaultValue:this.props.config.EmailSettings.SMTPUsername,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpUsernameDescription",defaultMessage:" Obtain this credential from administrator setting up your email server."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPPassword"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpPasswordTitle",defaultMessage:"SMTP Password:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPPassword",ref:"SMTPPassword",placeholder:e(R.smtpPasswordExample),defaultValue:this.props.config.EmailSettings.SMTPPassword,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpPasswordDescription",
defaultMessage:" Obtain this credential from administrator setting up your email server."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPServer"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpServerTitle",defaultMessage:"SMTP Server:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPServer",ref:"SMTPServer",placeholder:e(R.smtpServerExample),defaultValue:this.props.config.EmailSettings.SMTPServer,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpServerDescription",defaultMessage:"Location of SMTP email server."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SMTPPort"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpPortTitle",defaultMessage:"SMTP Port:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SMTPPort",ref:"SMTPPort",placeholder:e(R.smtpPortExample),defaultValue:this.props.config.EmailSettings.SMTPPort,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.smtpPortDescription",defaultMessage:"Port of SMTP email server."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ConnectionSecurity"},React.createElement(y.FormattedMessage,{id:"admin.email.connectionSecurityTitle",defaultMessage:"Connection Security:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"ConnectionSecurity",ref:"ConnectionSecurity",defaultValue:this.props.config.EmailSettings.ConnectionSecurity,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications},React.createElement("option",{value:""},e(R.connectionSecurityNone)),React.createElement("option",{value:"TLS"},e(R.connectionSecurityTls)),React.createElement("option",{value:"STARTTLS"},e(R.connectionSecurityStart))),React.createElement("div",{className:"help-text"},React.createElement("table",{className:"table table-bordered",cellPadding:"5"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.connectionSecurityNone",defaultMessage:"None"})),React.createElement("td",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.connectionSecurityNoneDescription",defaultMessage:"Mattermost will send email over an unsecure connection."}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"TLS"),React.createElement("td",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.connectionSecurityTlsDescription",defaultMessage:"Encrypts the communication between Mattermost and your email server."}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"STARTTLS"),React.createElement("td",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.connectionSecurityStartDescription",defaultMessage:"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS."})))))),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleTestConnection,disabled:!this.state.sendEmailNotifications,id:"connection-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(R.testing)},React.createElement(y.FormattedMessage,{id:"admin.email.connectionSecurityTest",defaultMessage:"Test Connection"})),s,n))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"InviteSalt"},React.createElement(y.FormattedMessage,{id:"admin.email.inviteSaltTitle",defaultMessage:"Invite Salt:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"InviteSalt",ref:"InviteSalt",placeholder:e(R.inviteSaltExample),defaultValue:this.props.config.EmailSettings.InviteSalt,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.inviteSaltDescription",defaultMessage:'32-character salt added to signing of email invites. Randomly generated on install. Click "Re-Generate" to create new salt.'})),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerateInvite,disabled:!this.state.sendEmailNotifications},React.createElement(y.FormattedMessage,{id:"admin.email.regenerate",defaultMessage:"Re-Generate"}))))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PasswordResetSalt"},React.createElement(y.FormattedMessage,{id:"admin.email.passwordSaltTitle",defaultMessage:"Password Reset Salt:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PasswordResetSalt",ref:"PasswordResetSalt",placeholder:e(R.passwordSaltExample),defaultValue:this.props.config.EmailSettings.PasswordResetSalt,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.passwordSaltDescription",defaultMessage:'32-character salt added to signing of password reset emails. Randomly generated on install. Click "Re-Generate" to create new salt.'})),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerateReset,disabled:!this.state.sendEmailNotifications},React.createElement(y.FormattedMessage,{id:"admin.email.regenerate",defaultMessage:"Re-Generate"}))))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"sendPushNotifications"},React.createElement(y.FormattedMessage,{id:"admin.email.pushTitle",defaultMessage:"Send Push Notifications: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"sendPushNotifications",value:"true",ref:"sendPushNotifications",defaultChecked:this.props.config.EmailSettings.SendPushNotifications,onChange:this.handleChange.bind(this,"sendPushNotifications_true")}),React.createElement(y.FormattedMessage,{id:"admin.email.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"sendPushNotifications",value:"false",defaultChecked:!this.props.config.EmailSettings.SendPushNotifications,onChange:this.handleChange.bind(this,"sendPushNotifications_false")}),React.createElement(y.FormattedMessage,{id:"admin.email.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.pushDesc",defaultMessage:"Typically set to true in production. When true, Mattermost attempts to send iOS and Android push notifications through the push notification server."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PushNotificationServer"},React.createElement(y.FormattedMessage,{id:"admin.email.pushServerTitle",defaultMessage:"Push Notification Server:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PushNotificationServer",ref:"PushNotificationServer",placeholder:e(R.pushServerEx),defaultValue:this.props.config.EmailSettings.PushNotificationServer,onChange:this.handleChange,disabled:!this.state.sendPushNotifications}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.email.pushServerDesc",defaultMessage:"Location of Mattermost push notification service you can set up behind your firewall using https://github.com/mattermost/push-proxy. For testing you can use https://push-test.mattermost.com, which connects to the sample Mattermost iOS app in the public Apple AppStore. Please do not use test service for production deployments."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(R.saving)},React.createElement(y.FormattedMessage,{id:"admin.email.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);C.propTypes={intl:y.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,y.injectIntl)(C)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,crypto:"crypto","mm-intl":308}],119:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({clientIdExample:{id:"admin.gitlab.clientIdExample",defaultMessage:'Ex "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"'},clientSecretExample:{id:"admin.gitlab.clientSecretExample",defaultMessage:'Ex "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"'},authExample:{id:"admin.gitlab.authExample",defaultMessage:'Ex ""'},tokenExample:{id:"admin.gitlab.tokenExample",defaultMessage:'Ex ""'},userExample:{id:"admin.gitlab.userExample",defaultMessage:'Ex ""'},saving:{id:"admin.gitlab.saving",defaultMessage:"Saving Config..."}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={Enable:a.props.config.GitLabSettings.Enable,saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"EnableTrue"===e&&(t.Enable=!0),"EnableFalse"===e&&(t.Enable=!1),this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.GitLabSettings.Enable=ReactDOM.findDOMNode(this.refs.Enable).checked,a.GitLabSettings.Secret=ReactDOM.findDOMNode(this.refs.Secret).value.trim(),a.GitLabSettings.Id=ReactDOM.findDOMNode(this.refs.Id).value.trim(),a.GitLabSettings.AuthEndpoint=ReactDOM.findDOMNode(this.refs.AuthEndpoint).value.trim(),a.GitLabSettings.TokenEndpoint=ReactDOM.findDOMNode(this.refs.TokenEndpoint).value.trim(),a.GitLabSettings.UserApiEndpoint=ReactDOM.findDOMNode(this.refs.UserApiEndpoint).value.trim(),g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";return this.state.saveNeeded&&(a="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.gitlab.settingsTitle",defaultMessage:"GitLab Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Enable"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.enableTitle",defaultMessage:"Enable Sign Up With GitLab: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Enable",value:"true",ref:"Enable",defaultChecked:this.props.config.GitLabSettings.Enable,onChange:this.handleChange.bind(this,"EnableTrue")}),React.createElement(_.FormattedMessage,{id:"admin.gitlab.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Enable",value:"false",defaultChecked:!this.props.config.GitLabSettings.Enable,onChange:this.handleChange.bind(this,"EnableFalse")}),React.createElement(_.FormattedMessage,{id:"admin.gitlab.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.enableDescription",defaultMessage:"When true, Mattermost allows team creation and account signup using GitLab OAuth."}),React.createElement("br",null)),React.createElement("div",{className:"help-text"},React.createElement(_.FormattedHTMLMessage,{id:"admin.gitlab.EnableHtmlDesc",defaultMessage:'<ol><li>Log in to your GitLab account and go to Applications -> Profile Settings.</li><li>Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete". </li><li>Then use "Secret" and "Id" fields from GitLab to complete the options below.</li><li>Complete the Endpoint URLs below. </li></ol>'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Id"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.clientIdTitle",defaultMessage:"Id:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"Id",ref:"Id",placeholder:e(E.clientIdExample),defaultValue:this.props.config.GitLabSettings.Id,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.clientIdDescription",defaultMessage:"Obtain this value via the instructions above for logging into GitLab"})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Secret"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.clientSecretTitle",defaultMessage:"Secret:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"Secret",ref:"Secret",placeholder:e(E.clientSecretExample),defaultValue:this.props.config.GitLabSettings.Secret,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.gitab.clientSecretDescription",defaultMessage:"Obtain this value via the instructions above for logging into GitLab."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AuthEndpoint"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.authTitle",defaultMessage:"Auth Endpoint:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AuthEndpoint",ref:"AuthEndpoint",placeholder:e(E.authExample),defaultValue:this.props.config.GitLabSettings.AuthEndpoint,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.authDescription",defaultMessage:"Enter https://<your-gitlab-url>/oauth/authorize (example https://example.com:3000/oauth/authorize).   Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"TokenEndpoint"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.tokenTitle",defaultMessage:"Token Endpoint:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"TokenEndpoint",ref:"TokenEndpoint",placeholder:e(E.tokenExample),defaultValue:this.props.config.GitLabSettings.TokenEndpoint,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.tokenDescription",defaultMessage:"Enter https://<your-gitlab-url>/oauth/token.   Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"UserApiEndpoint"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.userTitle",defaultMessage:"User API Endpoint:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"UserApiEndpoint",ref:"UserApiEndpoint",placeholder:e(E.userExample),defaultValue:this.props.config.GitLabSettings.UserApiEndpoint,onChange:this.handleChange,disabled:!this.state.Enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.gitlab.userDescription",defaultMessage:"Enter https://<your-gitlab-url>/api/v3/user.   Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(E.saving)},React.createElement(_.FormattedMessage,{id:"admin.gitlab.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],120:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("crypto"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({storeDisabled:{id:"admin.image.storeDisabled",defaultMessage:"Disable File Storage"},storeLocal:{id:"admin.image.storeLocal",defaultMessage:"Local File System"},storeAmazonS3:{id:"admin.image.storeAmazonS3",defaultMessage:"Amazon S3"},localExample:{id:"admin.image.localExample",defaultMessage:'Ex "./data/"'},amazonS3IdExample:{id:"admin.image.amazonS3IdExample",defaultMessage:'Ex "AKIADTOVBGERKLCBV"'},amazonS3SecretExample:{id:"admin.image.amazonS3SecretExample",defaultMessage:'Ex "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"'},amazonS3BucketExample:{id:"admin.image.amazonS3BucketExample",defaultMessage:'Ex "mattermost-media"'},amazonS3RegionExample:{id:"admin.image.amazonS3RegionExample",defaultMessage:'Ex "us-east-1"'},thumbWidthExample:{id:"admin.image.thumbWidthExample",defaultMessage:'Ex "120"'},thumbHeightExample:{id:"admin.image.thumbHeightExample",defaultMessage:'Ex "100"'},previewWidthExample:{id:"admin.image.previewWidthExample",defaultMessage:'Ex "1024"'},previewHeightExample:{id:"admin.image.previewHeightExample",defaultMessage:'Ex "0"'},profileWidthExample:{id:"admin.image.profileWidthExample",defaultMessage:'Ex "1024"'},profileHeightExample:{id:"admin.image.profileHeightExample",defaultMessage:'Ex "0"'},publicLinkExample:{id:"admin.image.publicLinkExample",defaultMessage:'Ex "gxHVDcKUyP2y1eiyW8S8na1UYQAfq6J6"'},saving:{id:"admin.image.saving",defaultMessage:"Saving Config..."}}),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleGenerate=a.handleGenerate.bind(a),a.state={saveNeeded:!1,serverError:null,DriverName:a.props.config.FileSettings.DriverName},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"DriverName"===e&&(t.DriverName=ReactDOM.findDOMNode(this.refs.DriverName).value),this.setState(t)}},{key:"handleGenerate",value:function(e){e.preventDefault(),ReactDOM.findDOMNode(this.refs.PublicLinkSalt).value=E.default.randomBytes(256).toString("base64").substring(0,32);var t={saveNeeded:!0,serverError:this.state.serverError};this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.FileSettings.DriverName=ReactDOM.findDOMNode(this.refs.DriverName).value,a.FileSettings.Directory=ReactDOM.findDOMNode(this.refs.Directory).value,a.FileSettings.AmazonS3AccessKeyId=ReactDOM.findDOMNode(this.refs.AmazonS3AccessKeyId).value,a.FileSettings.AmazonS3SecretAccessKey=ReactDOM.findDOMNode(this.refs.AmazonS3SecretAccessKey).value,a.FileSettings.AmazonS3Bucket=ReactDOM.findDOMNode(this.refs.AmazonS3Bucket).value,a.FileSettings.AmazonS3Region=ReactDOM.findDOMNode(this.refs.AmazonS3Region).value,a.FileSettings.EnablePublicLink=ReactDOM.findDOMNode(this.refs.EnablePublicLink).checked,a.FileSettings.PublicLinkSalt=ReactDOM.findDOMNode(this.refs.PublicLinkSalt).value.trim(),""===a.FileSettings.PublicLinkSalt&&(a.FileSettings.PublicLinkSalt=E.default.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.PublicLinkSalt).value=a.FileSettings.PublicLinkSalt);var s=120;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailWidth).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailWidth).value,10)),a.FileSettings.ThumbnailWidth=s,ReactDOM.findDOMNode(this.refs.ThumbnailWidth).value=s;var n=100;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailHeight).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.ThumbnailHeight).value,10)),a.FileSettings.ThumbnailHeight=n,ReactDOM.findDOMNode(this.refs.ThumbnailHeight).value=n;var r=1024;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.PreviewWidth).value,10))||(r=parseInt(ReactDOM.findDOMNode(this.refs.PreviewWidth).value,10)),a.FileSettings.PreviewWidth=r,ReactDOM.findDOMNode(this.refs.PreviewWidth).value=r;var l=0;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.PreviewHeight).value,10))||(l=parseInt(ReactDOM.findDOMNode(this.refs.PreviewHeight).value,10)),a.FileSettings.PreviewHeight=l,ReactDOM.findDOMNode(this.refs.PreviewHeight).value=l;var i=128;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ProfileWidth).value,10))||(i=parseInt(ReactDOM.findDOMNode(this.refs.ProfileWidth).value,10)),a.FileSettings.ProfileWidth=i,ReactDOM.findDOMNode(this.refs.ProfileWidth).value=i;var o=128;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.ProfileHeight).value,10))||(o=parseInt(ReactDOM.findDOMNode(this.refs.ProfileHeight).value,10)),a.FileSettings.ProfileHeight=o,ReactDOM.findDOMNode(this.refs.ProfileHeight).value=o,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";this.state.saveNeeded&&(a="btn btn-primary");var s=!1,n=!1;return"local"===this.state.DriverName&&(s=!0),"amazons3"===this.state.DriverName&&(n=!0),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(y.FormattedMessage,{id:"admin.image.fileSettings",defaultMessage:"File Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DriverName"},React.createElement(y.FormattedMessage,{id:"admin.image.storeTitle",defaultMessage:"Store Files In:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"DriverName",ref:"DriverName",defaultValue:this.props.config.FileSettings.DriverName,onChange:this.handleChange.bind(this,"DriverName")},React.createElement("option",{value:""},e(R.storeDisabled)),React.createElement("option",{value:"local"},e(R.storeLocal)),React.createElement("option",{value:"amazons3"},e(R.storeAmazonS3))))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Directory"},React.createElement(y.FormattedMessage,{id:"admin.image.localTitle",defaultMessage:"Local Directory Location:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"Directory",ref:"Directory",placeholder:e(R.localExample),defaultValue:this.props.config.FileSettings.Directory,onChange:this.handleChange,disabled:!s}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.localDescription",defaultMessage:"Directory to which image files are written. If blank, will be set to ./data/."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3AccessKeyId"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3IdTitle",defaultMessage:"Amazon S3 Access Key Id:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3AccessKeyId",ref:"AmazonS3AccessKeyId",placeholder:e(R.amazonS3IdExample),defaultValue:this.props.config.FileSettings.AmazonS3AccessKeyId,onChange:this.handleChange,disabled:!n}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3IdDescription",defaultMessage:"Obtain this credential from your Amazon EC2 administrator."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3SecretAccessKey"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3SecretTitle",defaultMessage:"Amazon S3 Secret Access Key:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3SecretAccessKey",ref:"AmazonS3SecretAccessKey",placeholder:e(R.amazonS3SecretExample),defaultValue:this.props.config.FileSettings.AmazonS3SecretAccessKey,onChange:this.handleChange,disabled:!n}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3SecretDescription",defaultMessage:"Obtain this credential from your Amazon EC2 administrator."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3Bucket"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3BucketTitle",defaultMessage:"Amazon S3 Bucket:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3Bucket",ref:"AmazonS3Bucket",placeholder:e(R.amazonS3BucketExample),defaultValue:this.props.config.FileSettings.AmazonS3Bucket,onChange:this.handleChange,disabled:!n}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3BucketDescription",defaultMessage:"Name you selected for your S3 bucket in AWS."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AmazonS3Region"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3RegionTitle",defaultMessage:"Amazon S3 Region:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AmazonS3Region",ref:"AmazonS3Region",placeholder:e(R.amazonS3RegionExample),defaultValue:this.props.config.FileSettings.AmazonS3Region,onChange:this.handleChange,disabled:!n}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.amazonS3RegionDescription",defaultMessage:"AWS region you selected for creating your S3 bucket."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ThumbnailWidth"},React.createElement(y.FormattedMessage,{id:"admin.image.thumbWidthTitle",defaultMessage:"Thumbnail Width:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ThumbnailWidth",ref:"ThumbnailWidth",placeholder:e(R.thumbWidthExample),defaultValue:this.props.config.FileSettings.ThumbnailWidth,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.thumbWidthDescription",defaultMessage:"Width of thumbnails generated from uploaded images. Updating this value changes how thumbnail images render in future, but does not change images created in the past."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ThumbnailHeight"},React.createElement(y.FormattedMessage,{id:"admin.image.thumbHeightTitle",defaultMessage:"Thumbnail Height:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ThumbnailHeight",ref:"ThumbnailHeight",placeholder:e(R.thumbHeightExample),defaultValue:this.props.config.FileSettings.ThumbnailHeight,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.thumbHeightDescription",defaultMessage:"Height of thumbnails generated from uploaded images. Updating this value changes how thumbnail images render in future, but does not change images created in the past."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PreviewWidth"},React.createElement(y.FormattedMessage,{id:"admin.image.previewWidthTitle",defaultMessage:"Preview Width:"})),React.createElement("div",{
className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PreviewWidth",ref:"PreviewWidth",placeholder:e(R.previewWidthExample),defaultValue:this.props.config.FileSettings.PreviewWidth,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.previewWidthDescription",defaultMessage:"Maximum width of preview image. Updating this value changes how preview images render in future, but does not change images created in the past."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PreviewHeight"},React.createElement(y.FormattedMessage,{id:"admin.image.previewHeightTitle",defaultMessage:"Preview Height:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PreviewHeight",ref:"PreviewHeight",placeholder:e(R.previewHeightExample),defaultValue:this.props.config.FileSettings.PreviewHeight,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.previewHeightDescription",defaultMessage:'Maximum height of preview image ("0": Sets to auto-size). Updating this value changes how preview images render in future, but does not change images created in the past.'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ProfileWidth"},React.createElement(y.FormattedMessage,{id:"admin.image.profileWidthTitle",defaultMessage:"Profile Width:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ProfileWidth",ref:"ProfileWidth",placeholder:e(R.profileWidthExample),defaultValue:this.props.config.FileSettings.ProfileWidth,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.profileWidthDescription",defaultMessage:"Width of profile picture."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ProfileHeight"},React.createElement(y.FormattedMessage,{id:"admin.image.profileHeightTitle",defaultMessage:"Profile Height:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ProfileHeight",ref:"ProfileHeight",placeholder:e(R.profileHeightExample),defaultValue:this.props.config.FileSettings.ProfileHeight,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.profileHeightDescription",defaultMessage:"Height of profile picture."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnablePublicLink"},React.createElement(y.FormattedMessage,{id:"admin.image.shareTitle",defaultMessage:"Share Public File Link: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePublicLink",value:"true",ref:"EnablePublicLink",defaultChecked:this.props.config.FileSettings.EnablePublicLink,onChange:this.handleChange}),React.createElement(y.FormattedMessage,{id:"admin.image.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePublicLink",value:"false",defaultChecked:!this.props.config.FileSettings.EnablePublicLink,onChange:this.handleChange}),React.createElement(y.FormattedMessage,{id:"admin.image.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.shareDescription",defaultMessage:"Allow users to share public links to files and images."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PublicLinkSalt"},React.createElement(y.FormattedMessage,{id:"admin.image.publicLinkTitle",defaultMessage:"Public Link Salt:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PublicLinkSalt",ref:"PublicLinkSalt",placeholder:e(R.publicLinkExample),defaultValue:this.props.config.FileSettings.PublicLinkSalt,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.image.publicLinkDescription",defaultMessage:'32-character salt added to signing of public image links. Randomly generated on install. Click "Re-Generate" to create new salt.'})),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerate},React.createElement(y.FormattedMessage,{id:"admin.image.regenerate",defaultMessage:"Re-Generate"}))))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(R.saving)},React.createElement(y.FormattedMessage,{id:"admin.image.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);C.propTypes={intl:y.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,y.injectIntl)(C)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,crypto:"crypto","mm-intl":308}],121:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=389,y=60,R=(0,_.defineMessages)({serverEx:{id:"admin.ldap.serverEx",defaultMessage:'Ex "10.0.0.23"'},portEx:{id:"admin.ldap.portEx",defaultMessage:'Ex "389"'},baseEx:{id:"admin.ldap.baseEx",defaultMessage:'Ex "dc=mydomain,dc=com"'},firstnameAttrEx:{id:"admin.ldap.firstnameAttrEx",defaultMessage:'Ex "givenName"'},lastnameAttrEx:{id:"admin.ldap.lastnameAttrEx",defaultMessage:'Ex "sn"'},emailAttrEx:{id:"admin.ldap.emailAttrEx",defaultMessage:'Ex "mail"'},usernameAttrEx:{id:"admin.ldap.usernameAttrEx",defaultMessage:'Ex "sAMAccountName"'},idAttrEx:{id:"admin.ldap.idAttrEx",defaultMessage:'Ex "sAMAccountName"'},queryEx:{id:"admin.ldap.queryEx",defaultMessage:'Ex "60"'},saving:{id:"admin.ldap.saving",defaultMessage:"Saving Config..."}}),C=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.handleSubmit=t.handleSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t.handleEnable=t.handleEnable.bind(t),t.handleDisable=t.handleDisable.bind(t),t.state={saveNeeded:!1,serverError:null,enable:t.props.config.LdapSettings.Enable},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"handleChange",value:function(){this.setState({saveNeeded:!0})}},{key:"handleEnable",value:function(){this.setState({saveNeeded:!0,enable:!0})}},{key:"handleDisable",value:function(){this.setState({saveNeeded:!0,enable:!1})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.LdapSettings.Enable=this.refs.Enable.checked,a.LdapSettings.LdapServer=this.refs.LdapServer.value.trim();var s=E;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.LdapPort).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.LdapPort).value,10)),a.LdapSettings.LdapPort=s,a.LdapSettings.BaseDN=this.refs.BaseDN.value.trim(),a.LdapSettings.BindUsername=this.refs.BindUsername.value.trim(),a.LdapSettings.BindPassword=this.refs.BindPassword.value.trim(),a.LdapSettings.FirstNameAttribute=this.refs.FirstNameAttribute.value.trim(),a.LdapSettings.LastNameAttribute=this.refs.LastNameAttribute.value.trim(),a.LdapSettings.EmailAttribute=this.refs.EmailAttribute.value.trim(),a.LdapSettings.UsernameAttribute=this.refs.UsernameAttribute.value.trim(),a.LdapSettings.IdAttribute=this.refs.IdAttribute.value.trim();var n=y;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.QueryTimeout).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.QueryTimeout).value,10)),a.LdapSettings.QueryTimeout=n,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,a="";this.state.serverError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var s="btn";this.state.saveNeeded&&(s="btn btn-primary");var n="true"===t.window.mm_license.IsLicensed&&"true"===t.window.mm_license.LDAP,r=void 0;return r=n?React.createElement("div",{className:"banner"},React.createElement("div",{className:"banner__content"},React.createElement("h4",{className:"banner__heading"},React.createElement(_.FormattedMessage,{id:"admin.ldap.bannerHeading",defaultMessage:"Note:"})),React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"admin.ldap.bannerDesc",defaultMessage:"If a user attribute changes on the LDAP server it will be updated the next time the user enters their credentials to log in to Mattermost. This includes if a user is made inactive or removed from an LDAP server. Synchronization with LDAP servers is planned in a future release."})))):React.createElement("div",{className:"banner warning"},React.createElement("div",{className:"banner__content"},React.createElement(_.FormattedHTMLMessage,{id:"admin.ldap.noLicense",defaultMessage:'<h4 className="banner__heading">Note:</h4><p>LDAP is an enterprise feature. Your current license does not support LDAP. Click <a href="http://mattermost.com"target="_blank">here</a> for information and pricing on enterprise licenses.</p>'}))),React.createElement("div",{className:"wrapper--fixed"},r,React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.ldap.title",defaultMessage:"LDAP Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Enable"},React.createElement(_.FormattedMessage,{id:"admin.ldap.enableTitle",defaultMessage:"Enable Login With LDAP:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Enable",value:"true",ref:"Enable",defaultChecked:this.props.config.LdapSettings.Enable,onChange:this.handleEnable,disabled:!n}),React.createElement(_.FormattedMessage,{id:"admin.ldap.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Enable",value:"false",defaultChecked:!this.props.config.LdapSettings.Enable,onChange:this.handleDisable}),React.createElement(_.FormattedMessage,{id:"admin.ldap.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.enableDesc",defaultMessage:"When true, Mattermost allows login using LDAP"})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"LdapServer"},React.createElement(_.FormattedMessage,{id:"admin.ldap.serverTitle",defaultMessage:"LDAP Server:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"LdapServer",ref:"LdapServer",placeholder:e(R.serverEx),defaultValue:this.props.config.LdapSettings.LdapServer,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.serverDesc",defaultMessage:"The domain or IP address of LDAP server."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"LdapPort"},React.createElement(_.FormattedMessage,{id:"admin.ldap.portTitle",defaultMessage:"LDAP Port:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"number",className:"form-control",id:"LdapPort",ref:"LdapPort",placeholder:e(R.portEx),defaultValue:this.props.config.LdapSettings.LdapPort,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.portDesc",defaultMessage:"The port Mattermost will use to connect to the LDAP server. Default is 389."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"BaseDN"},React.createElement(_.FormattedMessage,{id:"admin.ldap.baseTitle",defaultMessage:"BaseDN:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"BaseDN",ref:"BaseDN",placeholder:e(R.baseEx),defaultValue:this.props.config.LdapSettings.BaseDN,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.baseDesc",defaultMessage:"The Base DN is the Distinguished Name of the location where Mattermost should start its search for users in the LDAP tree."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"BindUsername"},React.createElement(_.FormattedMessage,{id:"admin.ldap.bindUserTitle",defaultMessage:"Bind Username:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"BindUsername",ref:"BindUsername",placeholder:"",defaultValue:this.props.config.LdapSettings.BindUsername,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.bindUserDesc",defaultMessage:"The username used to perform the LDAP search. This should typically be an account created specifically for use with Mattermost. It should have access limited to read the portion of the LDAP tree specified in the BaseDN field."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"BindPassword"},React.createElement(_.FormattedMessage,{id:"admin.ldap.bindPwdTitle",defaultMessage:"Bind Password:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"password",className:"form-control",id:"BindPassword",ref:"BindPassword",placeholder:"",defaultValue:this.props.config.LdapSettings.BindPassword,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.bindPwdDesc",defaultMessage:'Password of the user given in "Bind Username".'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"FirstNameAttribute"},React.createElement(_.FormattedMessage,{id:"admin.ldap.firstnameAttrTitle",defaultMessage:"First Name Attrubute"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"FirstNameAttribute",ref:"FirstNameAttribute",placeholder:e(R.firstnameAttrEx),defaultValue:this.props.config.LdapSettings.FirstNameAttribute,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.firstnameAttrDesc",defaultMessage:"The attribute in the LDAP server that will be used to populate the first name of users in Mattermost."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"LastNameAttribute"},React.createElement(_.FormattedMessage,{id:"admin.ldap.lastnameAttrTitle",defaultMessage:"Last Name Attribute:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"LastNameAttribute",ref:"LastNameAttribute",placeholder:e(R.lastnameAttrEx),defaultValue:this.props.config.LdapSettings.LastNameAttribute,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.lastnameAttrDesc",defaultMessage:"The attribute in the LDAP server that will be used to populate the last name of users in Mattermost."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EmailAttribute"},React.createElement(_.FormattedMessage,{id:"admin.ldap.emailAttrTitle",defaultMessage:"Email Attribute:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"EmailAttribute",ref:"EmailAttribute",placeholder:e(R.emailAttrEx),defaultValue:this.props.config.LdapSettings.EmailAttribute,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.emailAttrDesc",defaultMessage:"The attribute in the LDAP server that will be used to populate the email addresses of users in Mattermost."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"UsernameAttribute"},React.createElement(_.FormattedMessage,{id:"admin.ldap.usernameAttrTitle",defaultMessage:"Username Attribute:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"UsernameAttribute",ref:"UsernameAttribute",placeholder:e(R.usernameAttrEx),defaultValue:this.props.config.LdapSettings.UsernameAttribute,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.uernameAttrDesc",defaultMessage:"The attribute in the LDAP server that will be used to populate the username field in Mattermost. This may be the same as the ID Attribute."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"IdAttribute"},React.createElement(_.FormattedMessage,{id:"admin.ldap.idAttrTitle",defaultMessage:"Id Attribute: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"IdAttribute",ref:"IdAttribute",placeholder:e(R.idAttrEx),defaultValue:this.props.config.LdapSettings.IdAttribute,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.idAttrDesc",defaultMessage:'The attribute in the LDAP server that will be used as a unique identifier in Mattermost. It should be an LDAP attribute with a value that does not change, such as username or uid. If a user’s Id Attribute changes, it will create a new Mattermost account unassociated with their old one. This is the value used to log in to Mattermost in the "LDAP Username" field on the sign in page. Normally this attribute is the same as the “Username Attribute” field above. If your team typically uses domain\\\\username to sign in to other services with LDAP, you may choose to put domain\\\\username in this field to maintain consistency between sites.'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"QueryTimeout"},React.createElement(_.FormattedMessage,{id:"admin.ldap.queryTitle",defaultMessage:"Query Timeout (seconds):"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"number",className:"form-control",id:"QueryTimeout",ref:"QueryTimeout",placeholder:e(R.queryEx),defaultValue:this.props.config.LdapSettings.QueryTimeout,onChange:this.handleChange,disabled:!this.state.enable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.ldap.queryDesc",defaultMessage:"The timeout value for queries to the LDAP server. Increase if you are getting timeout errors caused by a slow LDAP server."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},a,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:s,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(R.saving)},React.createElement(_.FormattedMessage,{id:"admin.ldap.save",defaultMessage:"Save"}))))))}}]),a}(React.Component);C.defaultProps={},C.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(C)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],122:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({saving:{id:"admin.support.saving",defaultMessage:"Saving Config..."}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.SupportSettings.TermsOfServiceLink=ReactDOM.findDOMNode(this.refs.TermsOfServiceLink).value.trim(),a.SupportSettings.PrivacyPolicyLink=ReactDOM.findDOMNode(this.refs.PrivacyPolicyLink).value.trim(),a.SupportSettings.AboutLink=ReactDOM.findDOMNode(this.refs.AboutLink).value.trim(),a.SupportSettings.HelpLink=ReactDOM.findDOMNode(this.refs.HelpLink).value.trim(),a.SupportSettings.ReportAProblemLink=ReactDOM.findDOMNode(this.refs.ReportAProblemLink).value.trim(),a.SupportSettings.SupportEmail=ReactDOM.findDOMNode(this.refs.SupportEmail).value.trim(),g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.support.title",defaultMessage:"Legal and Support Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"TermsOfServiceLink"},React.createElement(_.FormattedMessage,{id:"admin.support.termsTitle",defaultMessage:"Terms of Service link:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"TermsOfServiceLink",ref:"TermsOfServiceLink",defaultValue:this.props.config.SupportSettings.TermsOfServiceLink,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.support.termsDesc",defaultMessage:"Link to Terms of Service available to users on desktop and on mobile. Leaving this blank will hide the option to display a notice."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PrivacyPolicyLink"},React.createElement(_.FormattedMessage,{id:"admin.support.privacyTitle",defaultMessage:"Privacy Policy link:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PrivacyPolicyLink",ref:"PrivacyPolicyLink",defaultValue:this.props.config.SupportSettings.PrivacyPolicyLink,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.support.privacyDesc",defaultMessage:"Link to Privacy Policy available to users on desktop and on mobile. Leaving this blank will hide the option to display a notice."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AboutLink"},React.createElement(_.FormattedMessage,{id:"admin.support.aboutTitle",defaultMessage:"About link:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AboutLink",ref:"AboutLink",defaultValue:this.props.config.SupportSettings.AboutLink,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.support.aboutDesc",defaultMessage:"Link to About page for more information on your Mattermost deployment, for example its purpose and audience within your organization. Defaults to Mattermost information page."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"HelpLink"},React.createElement(_.FormattedMessage,{id:"admin.support.helpTitle",defaultMessage:"Help link:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"HelpLink",ref:"HelpLink",defaultValue:this.props.config.SupportSettings.HelpLink,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.support.helpDesc",defaultMessage:"Link to help documentation from team site main menu. Typically not changed unless your organization chooses to create custom documentation."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ReportAProblemLink"},React.createElement(_.FormattedMessage,{id:"admin.support.problemTitle",defaultMessage:"Report a Problem link:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ReportAProblemLink",ref:"ReportAProblemLink",defaultValue:this.props.config.SupportSettings.ReportAProblemLink,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.support.problemDesc",defaultMessage:"Link to help documentation from team site main menu. By default this points to the peer-to-peer troubleshooting forum where users can search for, find and request help with technical issues."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SupportEmail"},React.createElement(_.FormattedMessage,{id:"admin.support.emailTitle",defaultMessage:"Support email:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SupportEmail",ref:"SupportEmail",defaultValue:this.props.config.SupportSettings.SupportEmail,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.support.emailHelp",defaultMessage:"Email shown during tutorial for end users to ask support questions."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+this.props.intl.formatMessage(E.saving)},React.createElement(_.FormattedMessage,{id:"admin.support.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],123:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/utils.jsx"),g=s(f),b=e("../../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({removing:{id:"admin.license.removing",defaultMessage:"Removing License..."},uploading:{id:"admin.license.uploading",defaultMessage:"Uploading License..."}}),y=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.handleChange=t.handleChange.bind(t),t.handleSubmit=t.handleSubmit.bind(t),t.handleRemove=t.handleRemove.bind(t),t.state={fileSelected:!1,serverError:null},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"handleChange",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.fileInput));e.prop("files").length>0&&this.setState({fileSelected:!0})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=$(ReactDOM.findDOMNode(this.refs.fileInput));if(0!==a.prop("files").length){var s=a.prop("files")[0];$("#upload-button").button("loading");var n=new FormData;n.append("license",s,s.name),v.uploadLicenseFile(n,function(){g.clearFileInput(a[0]),
$("#upload-button").button("reset"),t.setState({serverError:null}),window.location.reload(!0)},function(e){g.clearFileInput(a[0]),$("#upload-button").button("reset"),t.setState({serverError:e.message})})}}},{key:"handleRemove",value:function(e){var t=this;e.preventDefault(),$("#remove-button").button("loading"),v.removeLicenseFile(function(){$("#remove-button").button("reset"),t.setState({serverError:null}),window.location.reload(!0)},function(e){$("#remove-button").button("reset"),t.setState({serverError:e.message})})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";this.state.fileSelected&&(a="btn btn-primary");var s=void 0,n=void 0,r=void 0;return"true"===t.window.mm_license.IsLicensed?(s=React.createElement(_.FormattedMessage,{id:"admin.license.enterpriseEdition",defaultMessage:"Mattermost Enterprise Edition. Designed for enterprise-scale communication."}),n=React.createElement(_.FormattedHTMLMessage,{id:"admin.license.entrepriseType",defaultMessage:'<div><p>This compiled release of Mattermost platform is provided under a <a href="http://mattermost.com" target="_blank">commercial license</a> from Mattermost, Inc. based on your subscription level and is subject to the <a href="{terms}" target="_blank">Terms of Service.</a></p> <p>Your subscription details are as follows:</p> Name: {name}<br /> Company or organization name: {company}<br/> Number of users: {users}<br/> License issued: {issued}<br/> Start date of license: {start}<br/> Expiry date of license: {expires}<br/> LDAP: {ldap}<br/></div>'}),r=React.createElement("div",{className:"col-sm-8"},React.createElement("button",{className:"btn btn-danger",onClick:this.handleRemove,id:"remove-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+this.props.intl.formatMessage(E.removing)},React.createElement(_.FormattedMessage,{id:"admin.license.keyRemove",defaultMessage:"Remove Enterprise License and Downgrade Server"})),React.createElement("br",null),React.createElement("br",null),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedHTMLMessage,{id:"admin.licence.keyMigration",defaultMessage:'If you’re migrating servers you may need to remove your license key from this server in order to install it on a new server. To start, <a href="http://mattermost.com" target="_blank">disable all Enterprise Edition features on this server</a>. This will enable the ability to remove the license key and downgrade this server from Enterprise Edition to Team Edition.'})))):(s=React.createElement(_.FormattedMessage,{id:"admin.license.teamEdition",defaultMessage:"Mattermost Team Edition. Designed for teams from 5 to 50 users."}),n=React.createElement(_.FormattedHTMLMessage,{id:"admin.license.teamType",defaultMessage:"<span><p>This compiled release of Mattermost platform is offered under an MIT license.</p> <p>See MIT-COMPILED-LICENSE.txt in your root install directory for details. See NOTICES.txt for information about open source software used in this system.</p></span>"}),r=React.createElement("div",{className:"col-sm-8"},React.createElement("input",{className:"pull-left",ref:"fileInput",type:"file",accept:".mattermost-license",onChange:this.handleChange}),React.createElement("button",{className:a+" pull-left",disabled:!this.state.fileSelected,onClick:this.handleSubmit,id:"upload-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+this.props.intl.formatMessage(E.uploading)},React.createElement(_.FormattedMessage,{id:"admin.license.upload",defaultMessage:"Upload"})),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null),e,React.createElement("p",{className:"help-text"},React.createElement(_.FormattedHTMLMessage,{id:"admin.license.uploadDesc",defaultMessage:'Upload a license key for Mattermost Enterprise Edition to upgrade this server. <a href="http://mattermost.com" target="_blank">Visit us online</a> to learn more about the benefits of Enterprise Edition or to purchase a key.'})))),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.license.title",defaultMessage:"Edition and License"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4"},React.createElement(_.FormattedMessage,{id:"admin.license.edition",defaultMessage:"Edition: "})),React.createElement("div",{className:"col-sm-8"},s)),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4"},React.createElement(_.FormattedMessage,{id:"admin.license.type",defaultMessage:"License: "})),React.createElement("div",{className:"col-sm-8"},n)),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4"},React.createElement(_.FormattedMessage,{id:"admin.license.key",defaultMessage:"License Key: "})),r)))}}]),a}(React.Component);y.propTypes={intl:_.intlShape.isRequired},a.default=(0,_.injectIntl)(y)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/client.jsx":338,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],124:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.initChart=a.initChart.bind(a),a.chart=null,a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.initChart(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.chart&&(this.chart.destroy(),this.initChart(e))}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.destroy()}},{key:"initChart",value:function(e){var t=ReactDOM.findDOMNode(this),a=t.getContext("2d");this.chart=new Chart(a).Line(e.data,e.options||{})}},{key:"render",value:function(){return React.createElement("canvas",{width:this.props.width,height:this.props.height})}}]),t}(React.Component);a.default=h,h.propTypes={width:React.PropTypes.string,height:React.PropTypes.string,data:React.PropTypes.object,options:React.PropTypes.object}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],125:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({locationPlaceholder:{id:"admin.log.locationPlaceholder",defaultMessage:"Enter your file location"},formatPlaceholder:{id:"admin.log.formatPlaceholder",defaultMessage:"Enter your file format"},saving:{id:"admin.log.saving",defaultMessage:"Saving Config..."}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={consoleEnable:a.props.config.LogSettings.EnableConsole,fileEnable:a.props.config.LogSettings.EnableFile,saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"console_true"===e&&(t.consoleEnable=!0),"console_false"===e&&(t.consoleEnable=!1),"file_true"===e&&(t.fileEnable=!0),"file_false"===e&&(t.fileEnable=!1),this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.LogSettings.EnableConsole=ReactDOM.findDOMNode(this.refs.consoleEnable).checked,a.LogSettings.ConsoleLevel=ReactDOM.findDOMNode(this.refs.consoleLevel).value,a.LogSettings.EnableFile=ReactDOM.findDOMNode(this.refs.fileEnable).checked,a.LogSettings.FileLevel=ReactDOM.findDOMNode(this.refs.fileLevel).value,a.LogSettings.FileLocation=ReactDOM.findDOMNode(this.refs.fileLocation).value.trim(),a.LogSettings.FileFormat=ReactDOM.findDOMNode(this.refs.fileFormat).value.trim(),g.saveConfig(a,function(){v.getConfig(),t.setState({consoleEnable:a.LogSettings.EnableConsole,fileEnable:a.LogSettings.EnableFile,serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({consoleEnable:a.LogSettings.EnableConsole,fileEnable:a.LogSettings.EnableFile,serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";return this.state.saveNeeded&&(a="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.log.logSettings",defaultMessage:"Log Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"consoleEnable"},React.createElement(_.FormattedMessage,{id:"admin.log.consoleTitle",defaultMessage:"Log To The Console: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"consoleEnable",value:"true",ref:"consoleEnable",defaultChecked:this.props.config.LogSettings.EnableConsole,onChange:this.handleChange.bind(this,"console_true")}),React.createElement(_.FormattedMessage,{id:"admin.log.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"consoleEnable",value:"false",defaultChecked:!this.props.config.LogSettings.EnableConsole,onChange:this.handleChange.bind(this,"console_false")}),React.createElement(_.FormattedMessage,{id:"admin.log.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.consoleDescription",defaultMessage:"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout)."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"consoleLevel"},React.createElement(_.FormattedMessage,{id:"admin.log.levelTitle",defaultMessage:"Console Log Level:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"consoleLevel",ref:"consoleLevel",defaultValue:this.props.config.LogSettings.consoleLevel,onChange:this.handleChange,disabled:!this.state.consoleEnable},React.createElement("option",{value:"DEBUG"},"DEBUG"),React.createElement("option",{value:"INFO"},"INFO"),React.createElement("option",{value:"ERROR"},"ERROR")),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.levelDescription",defaultMessage:"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4"},React.createElement(_.FormattedMessage,{id:"admin.log.fileTitle",defaultMessage:"Log To File: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"fileEnable",ref:"fileEnable",value:"true",defaultChecked:this.props.config.LogSettings.EnableFile,onChange:this.handleChange.bind(this,"file_true")}),React.createElement(_.FormattedMessage,{id:"admin.log.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"fileEnable",value:"false",defaultChecked:!this.props.config.LogSettings.EnableFile,onChange:this.handleChange.bind(this,"file_false")}),React.createElement(_.FormattedMessage,{id:"admin.log.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.fileDescription",defaultMessage:"Typically set to true in production.  When true, log files are written to the log file specified in file location field below."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"fileLevel"},React.createElement(_.FormattedMessage,{id:"admin.log.fileLevelTitle",defaultMessage:"File Log Level:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{className:"form-control",id:"fileLevel",ref:"fileLevel",defaultValue:this.props.config.LogSettings.FileLevel,onChange:this.handleChange,disabled:!this.state.fileEnable},React.createElement("option",{value:"DEBUG"},"DEBUG"),React.createElement("option",{value:"INFO"},"INFO"),React.createElement("option",{value:"ERROR"},"ERROR")),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.fileLevelDescription",defaultMessage:"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"fileLocation"},React.createElement(_.FormattedMessage,{id:"admin.log.locationTitle",defaultMessage:"File Location:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"fileLocation",ref:"fileLocation",placeholder:e(E.locationPlaceholder),defaultValue:this.props.config.LogSettings.FileLocation,onChange:this.handleChange,disabled:!this.state.fileEnable}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.locationDescription",defaultMessage:"File to which log files are written. If blank, will be set to ./logs/mattermost, which writes logs to mattermost.log. Log rotation is enabled and every 10,000 lines of log information is written to new files stored in the same directory, for example mattermost.2015-09-23.001, mattermost.2015-09-23.002, and so forth."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"fileFormat"},React.createElement(_.FormattedMessage,{id:"admin.log.formatTitle",defaultMessage:"File Format:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"fileFormat",ref:"fileFormat",placeholder:e(E.formatPlaceholder),defaultValue:this.props.config.LogSettings.FileFormat,onChange:this.handleChange,disabled:!this.state.fileEnable}),React.createElement("div",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatDescription",defaultMessage:'Format of log message output. If blank will be set to "[%D %T] [%L] %M", where:'}),React.createElement("div",{className:"help-text"},React.createElement("table",{className:"table table-bordered",cellPadding:"5"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%T"),React.createElement("td",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatTime",defaultMessage:"Time (15:04:05 MST)"}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%D"),React.createElement("td",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatDateLong",defaultMessage:"Date (2006/01/02)"}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%d"),React.createElement("td",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatDateShort",defaultMessage:"Date (01/02/06)"}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%L"),React.createElement("td",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatLevel",defaultMessage:"Level (DEBG, INFO, EROR)"}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%S"),React.createElement("td",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatSource",defaultMessage:"Source"}))),React.createElement("tr",null,React.createElement("td",{className:"help-text"},"%M"),React.createElement("td",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.log.formatMessage",defaultMessage:"Message"}))))))))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(E.saving)},React.createElement(_.FormattedMessage,{id:"admin.log.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],126:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../stores/admin_store.jsx"),g=n(f),b=e("../loading_screen.jsx"),v=n(b),_=e("../../utils/async_client.jsx"),E=s(_),y=e("mm-intl"),R=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.onLogListenerChange=a.onLogListenerChange.bind(a),a.reload=a.reload.bind(a),a.state={logs:g.default.getLogs()},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){g.default.addLogChangeListener(this.onLogListenerChange),E.getLogs()}},{key:"componentWillUnmount",value:function(){g.default.removeLogChangeListener(this.onLogListenerChange)}},{key:"onLogListenerChange",value:function(){this.setState({logs:g.default.getLogs()})}},{key:"reload",value:function(){g.default.saveLogs(null),this.setState({logs:null}),E.getLogs()}},{key:"render",value:function(){var e=null;if(null===this.state.logs)e=React.createElement(v.default,null);else{e=[];for(var t=0;t<this.state.logs.length;t++){var a={whiteSpace:"nowrap",fontFamily:"monospace"};this.state.logs[t].indexOf("[EROR]")>0&&(a.color="red"),e.push(React.createElement("br",{key:"br_"+t})),e.push(React.createElement("span",{key:"log_"+t,style:a},this.state.logs[t]))}}return React.createElement("div",{className:"panel"},React.createElement("h3",null,React.createElement(y.FormattedMessage,{id:"admin.logs.title",defaultMessage:"Server Logs"})),React.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.reload},React.createElement(y.FormattedMessage,{id:"admin.logs.reload",defaultMessage:"Reload"})),React.createElement("div",{className:"log__panel"},e))}}]),t}(React.Component);a.default=R},{"../../stores/admin_store.jsx":323,"../../utils/async_client.jsx":336,"../loading_screen.jsx":173,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],127:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({saving:{id:"admin.privacy.saving",defaultMessage:"Saving Config..."}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.PrivacySettings.ShowEmailAddress=ReactDOM.findDOMNode(this.refs.ShowEmailAddress).checked,a.PrivacySettings.ShowFullName=ReactDOM.findDOMNode(this.refs.ShowFullName).checked,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t="btn";return this.state.saveNeeded&&(t="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.privacy.title",defaultMessage:"Privacy Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ShowEmailAddress"},React.createElement(_.FormattedMessage,{id:"admin.privacy.showEmailTitle",defaultMessage:"Show Email Address: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowEmailAddress",value:"true",ref:"ShowEmailAddress",defaultChecked:this.props.config.PrivacySettings.ShowEmailAddress,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.privacy.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowEmailAddress",value:"false",defaultChecked:!this.props.config.PrivacySettings.ShowEmailAddress,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.privacy.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.privacy.showEmailDescription",defaultMessage:"When false, hides email address of users from other users in the user interface, including team owners and team administrators. Used when system is set up for managing teams where some users choose to keep their contact information private."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ShowFullName"},React.createElement(_.FormattedMessage,{id:"admin.privacy.showFullNameTitle",defaultMessage:"Show Full Name: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowFullName",value:"true",ref:"ShowFullName",defaultChecked:this.props.config.PrivacySettings.ShowFullName,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.privacy.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"ShowFullName",value:"false",defaultChecked:!this.props.config.PrivacySettings.ShowFullName,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.privacy.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.privacy.showFullNameDescription",defaultMessage:"When false, hides full name of users from other users, including team owners and team administrators. Username is shown in place of full name."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},e,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:t,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+this.props.intl.formatMessage(E.saving)},React.createElement(_.FormattedMessage,{id:"admin.privacy.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],128:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({queriesExample:{id:"admin.rate.queriesExample",defaultMessage:'Ex "10"'},memoryExample:{id:"admin.rate.memoryExample",defaultMessage:'Ex "10000"'},httpHeaderExample:{id:"admin.rate.httpHeaderExample",defaultMessage:'Ex "X-Real-IP", "X-Forwarded-For"'},saving:{id:"admin.rate.saving",defaultMessage:"Saving Config..."}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={EnableRateLimiter:a.props.config.RateLimitSettings.EnableRateLimiter,VaryByRemoteAddr:a.props.config.RateLimitSettings.VaryByRemoteAddr,saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(e){var t={saveNeeded:!0,serverError:this.state.serverError};"EnableRateLimiterTrue"===e&&(t.EnableRateLimiter=!0),"EnableRateLimiterFalse"===e&&(t.EnableRateLimiter=!1),"VaryByRemoteAddrTrue"===e&&(t.VaryByRemoteAddr=!0),"VaryByRemoteAddrFalse"===e&&(t.VaryByRemoteAddr=!1),this.setState(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.RateLimitSettings.EnableRateLimiter=ReactDOM.findDOMNode(this.refs.EnableRateLimiter).checked,a.RateLimitSettings.VaryByRemoteAddr=ReactDOM.findDOMNode(this.refs.VaryByRemoteAddr).checked,a.RateLimitSettings.VaryByHeader=ReactDOM.findDOMNode(this.refs.VaryByHeader).value.trim();var s=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.PerSec).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.PerSec).value,10)),a.RateLimitSettings.PerSec=s,ReactDOM.findDOMNode(this.refs.PerSec).value=s;var n=1e4;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MemoryStoreSize).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.MemoryStoreSize).value,10)),a.RateLimitSettings.MemoryStoreSize=n,ReactDOM.findDOMNode(this.refs.MemoryStoreSize).value=n,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";return this.state.saveNeeded&&(a="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("div",{className:"banner"},React.createElement("div",{className:"banner__content"},React.createElement("h4",{className:"banner__heading"},React.createElement(_.FormattedMessage,{id:"admin.rate.noteTitle",defaultMessage:"Note:"})),React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"admin.rate.noteDescription",defaultMessage:"Changing properties in this section will require a server restart before taking effect."})))),React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.rate.title",defaultMessage:"Rate Limit Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableRateLimiter"},React.createElement(_.FormattedMessage,{id:"admin.rate.enableLimiterTitle",defaultMessage:"Enable Rate Limiter: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableRateLimiter",value:"true",ref:"EnableRateLimiter",defaultChecked:this.props.config.RateLimitSettings.EnableRateLimiter,onChange:this.handleChange.bind(this,"EnableRateLimiterTrue")
}),React.createElement(_.FormattedMessage,{id:"admin.rate.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableRateLimiter",value:"false",defaultChecked:!this.props.config.RateLimitSettings.EnableRateLimiter,onChange:this.handleChange.bind(this,"EnableRateLimiterFalse")}),React.createElement(_.FormattedMessage,{id:"admin.rate.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.rate.enableLimiterDescription",defaultMessage:"When true, APIs are throttled at rates specified below."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"PerSec"},React.createElement(_.FormattedMessage,{id:"admin.rate.queriesTitle",defaultMessage:"Number Of Queries Per Second:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"PerSec",ref:"PerSec",placeholder:e(E.queriesExample),defaultValue:this.props.config.RateLimitSettings.PerSec,onChange:this.handleChange,disabled:!this.state.EnableRateLimiter}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.rate.queriesDescription",defaultMessage:"Throttles API at this number of requests per second."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MemoryStoreSize"},React.createElement(_.FormattedMessage,{id:"admin.rate.memoryTitle",defaultMessage:"Memory Store Size:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MemoryStoreSize",ref:"MemoryStoreSize",placeholder:e(E.memoryExample),defaultValue:this.props.config.RateLimitSettings.MemoryStoreSize,onChange:this.handleChange,disabled:!this.state.EnableRateLimiter}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.rate.memoryDescription",defaultMessage:'Maximum number of users sessions connected to the system as determined by "Vary By Remote Address" and "Vary By Header" settings below.'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"VaryByRemoteAddr"},React.createElement(_.FormattedMessage,{id:"admin.rate.remoteTitle",defaultMessage:"Vary By Remote Address: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"VaryByRemoteAddr",value:"true",ref:"VaryByRemoteAddr",defaultChecked:this.props.config.RateLimitSettings.VaryByRemoteAddr,onChange:this.handleChange.bind(this,"VaryByRemoteAddrTrue"),disabled:!this.state.EnableRateLimiter}),React.createElement(_.FormattedMessage,{id:"admin.rate.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"VaryByRemoteAddr",value:"false",defaultChecked:!this.props.config.RateLimitSettings.VaryByRemoteAddr,onChange:this.handleChange.bind(this,"VaryByRemoteAddrFalse"),disabled:!this.state.EnableRateLimiter}),React.createElement(_.FormattedMessage,{id:"admin.rate.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.rate.remoteDescription",defaultMessage:"When true, rate limit API access by IP address."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"VaryByHeader"},React.createElement(_.FormattedMessage,{id:"admin.rate.httpHeaderTitle",defaultMessage:"Vary By HTTP Header:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"VaryByHeader",ref:"VaryByHeader",placeholder:e(E.httpHeaderExample),defaultValue:this.props.config.RateLimitSettings.VaryByHeader,onChange:this.handleChange,disabled:!this.state.EnableRateLimiter||this.state.VaryByRemoteAddr}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.rate.httpHeaderDescription",defaultMessage:'When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring NGINX set to "X-Real-IP", when configuring AmazonELB set to "X-Forwarded-For").'})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(E.saving)},React.createElement(_.FormattedMessage,{id:"admin.rate.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],129:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/constants.jsx"),v=n(b),_=e("mm-intl"),E=ReactBootstrap.Modal,y=(0,_.defineMessages)({submit:{id:"admin.reset_password.submit",defaultMessage:"Please enter at least {chars} characters."}}),R=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.doSubmit=a.doSubmit.bind(a),a.doCancel=a.doCancel.bind(a),a.state={serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"doSubmit",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.password).value;if(!a||a.length<v.default.MIN_PASSWORD_LENGTH)return void this.setState({serverError:this.props.intl.formatMessage(y.submit,{chars:v.default.MIN_PASSWORD_LENGTH})});this.setState({serverError:null});var s={};s.new_password=a,s.name=this.props.team.name,s.user_id=this.props.user.id,g.resetPassword(s,function(){t.props.onModalSubmit(ReactDOM.findDOMNode(t.refs.password).value)},function(e){t.setState({serverError:e.message})})}},{key:"doCancel",value:function(){this.setState({serverError:null}),this.props.onModalDismissed()}},{key:"render",value:function(){if(null==this.props.user)return React.createElement("div",null);var e="input-group input-group--limit",t=null;return this.state.serverError&&(e+=" has-error",t=React.createElement("div",{className:"form-group has-error"},React.createElement("p",{className:"input__help error"},this.state.serverError))),React.createElement(E,{show:this.props.show,onHide:this.doCancel},React.createElement(E.Header,{closeButton:!0},React.createElement(E.Title,null,React.createElement(_.FormattedMessage,{id:"admin.reset_password.title",defaultMessage:"Reset Password"}))),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(E.Body,null,React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-10"},React.createElement("div",{className:e},React.createElement("span",{"data-toggle":"tooltip",title:"New Password",className:"input-group-addon"},React.createElement(_.FormattedMessage,{id:"admin.reset_password.newPassword",defaultMessage:"New Password"})),React.createElement("input",{type:"password",ref:"password",className:"form-control",maxLength:"22",autoFocus:!0,tabIndex:"1"})),t))),React.createElement(E.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},React.createElement(_.FormattedMessage,{id:"admin.reset_password.close",defaultMessage:"Close"})),React.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},React.createElement(_.FormattedMessage,{id:"admin.reset_password.select",defaultMessage:"Select"})))))}}]),t}(React.Component);R.defaultProps={show:!1},R.propTypes={intl:_.intlShape.isRequired,user:React.PropTypes.object,team:React.PropTypes.object,show:React.PropTypes.bool.isRequired,onModalSubmit:React.PropTypes.func,onModalDismissed:React.PropTypes.func},a.default=(0,_.injectIntl)(R)},{"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],130:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("mm-intl"),f=ReactBootstrap.Modal,g=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.doSubmit=a.doSubmit.bind(a),a.doCancel=a.doCancel.bind(a),a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"doSubmit",value:function(e){e.preventDefault(),this.props.onModalSubmit(ReactDOM.findDOMNode(this.refs.team).value)}},{key:"doCancel",value:function(){this.props.onModalDismissed()}},{key:"render",value:function(){if(null==this.props.teams)return React.createElement("div",null);var e=[];for(var t in this.props.teams)if(this.props.teams.hasOwnProperty(t)){var a=this.props.teams[t];e.push(React.createElement("option",{key:"opt_"+a.id,value:a.id},a.name))}return React.createElement(f,{show:this.props.show,onHide:this.doCancel},React.createElement(f.Header,{closeButton:!0},React.createElement(f.Title,null,React.createElement(h.FormattedMessage,{id:"admin.select_team.selectTeam",defaultMessage:"Select Team"}))),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(f.Body,null,React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},React.createElement("select",{ref:"team",size:"10",className:"form-control"},e)))),React.createElement(f.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},React.createElement(h.FormattedMessage,{id:"admin.select_team.close",defaultMessage:"Close"})),React.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},React.createElement(h.FormattedMessage,{id:"admin.select_team.select",defaultMessage:"Select"})))))}}]),t}(React.Component);a.default=g,g.defaultProps={show:!1},g.propTypes={teams:React.PropTypes.object,show:React.PropTypes.bool.isRequired,onModalSubmit:React.PropTypes.func,onModalDismissed:React.PropTypes.func}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],131:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=30,y=10,R=10,C=(0,_.defineMessages)({listenExample:{id:"admin.service.listenExample",defaultMessage:'Ex ":8065"'},attemptExample:{id:"admin.service.attemptExample",defaultMessage:'Ex "10"'},segmentExample:{id:"admin.service.segmentExample",defaultMessage:'Ex "g3fgGOXJAQ43QV7rAh6iwQCkV4cA1Gs"'},googleExample:{id:"admin.service.googleExample",defaultMessage:'Ex "7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV"'},sessionDaysEx:{id:"admin.service.sessionDaysEx",defaultMessage:'Ex "30"'},saving:{id:"admin.service.saving",defaultMessage:"Saving Config..."}}),w=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.ServiceSettings.ListenAddress=ReactDOM.findDOMNode(this.refs.ListenAddress).value.trim(),""===a.ServiceSettings.ListenAddress&&(a.ServiceSettings.ListenAddress=":8065",ReactDOM.findDOMNode(this.refs.ListenAddress).value=a.ServiceSettings.ListenAddress),a.ServiceSettings.SegmentDeveloperKey=ReactDOM.findDOMNode(this.refs.SegmentDeveloperKey).value.trim(),a.ServiceSettings.GoogleDeveloperKey=ReactDOM.findDOMNode(this.refs.GoogleDeveloperKey).value.trim(),a.ServiceSettings.EnableIncomingWebhooks=ReactDOM.findDOMNode(this.refs.EnableIncomingWebhooks).checked,a.ServiceSettings.EnableOutgoingWebhooks=ReactDOM.findDOMNode(this.refs.EnableOutgoingWebhooks).checked,a.ServiceSettings.EnablePostUsernameOverride=ReactDOM.findDOMNode(this.refs.EnablePostUsernameOverride).checked,a.ServiceSettings.EnablePostIconOverride=ReactDOM.findDOMNode(this.refs.EnablePostIconOverride).checked,a.ServiceSettings.EnableTesting=ReactDOM.findDOMNode(this.refs.EnableTesting).checked,a.ServiceSettings.EnableDeveloper=ReactDOM.findDOMNode(this.refs.EnableDeveloper).checked,a.ServiceSettings.EnableSecurityFixAlert=ReactDOM.findDOMNode(this.refs.EnableSecurityFixAlert).checked;var s=y;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaximumLoginAttempts).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.MaximumLoginAttempts).value,10)),1>s&&(s=1),a.ServiceSettings.MaximumLoginAttempts=s,ReactDOM.findDOMNode(this.refs.MaximumLoginAttempts).value=s;var n=E;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.SessionLengthWebInDays).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.SessionLengthWebInDays).value,10)),1>n&&(n=1),a.ServiceSettings.SessionLengthWebInDays=n,ReactDOM.findDOMNode(this.refs.SessionLengthWebInDays).value=n;var r=E;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.SessionLengthMobileInDays).value,10))||(r=parseInt(ReactDOM.findDOMNode(this.refs.SessionLengthMobileInDays).value,10)),1>r&&(r=1),a.ServiceSettings.SessionLengthMobileInDays=r,ReactDOM.findDOMNode(this.refs.SessionLengthMobileInDays).value=r;var l=E;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.SessionLengthSSOInDays).value,10))||(l=parseInt(ReactDOM.findDOMNode(this.refs.SessionLengthSSOInDays).value,10)),1>l&&(l=1),a.ServiceSettings.SessionLengthSSOInDays=l,ReactDOM.findDOMNode(this.refs.SessionLengthSSOInDays).value=l;var i=R;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.SessionCacheInMinutes).value,10))||(i=parseInt(ReactDOM.findDOMNode(this.refs.SessionCacheInMinutes).value,10)),-1>i&&(i=-1),a.ServiceSettings.SessionCacheInMinutes=i,ReactDOM.findDOMNode(this.refs.SessionCacheInMinutes).value=i,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";return this.state.saveNeeded&&(a="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.service.title",defaultMessage:"Service Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"ListenAddress"},React.createElement(_.FormattedMessage,{id:"admin.service.listenAddress",defaultMessage:"Listen Address:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"ListenAddress",ref:"ListenAddress",placeholder:e(C.listenExample),defaultValue:this.props.config.ServiceSettings.ListenAddress,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.listenDescription",defaultMessage:'The address to which to bind and listen. Entering ":8065" will bind to all interfaces or you can choose one like "127.0.0.1:8065".  Changing this will require a server restart before taking effect.'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaximumLoginAttempts"},React.createElement(_.FormattedMessage,{id:"admin.service.attemptTitle",defaultMessage:"Maximum Login Attempts:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaximumLoginAttempts",ref:"MaximumLoginAttempts",placeholder:e(C.attemptExample),defaultValue:this.props.config.ServiceSettings.MaximumLoginAttempts,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.attemptDescription",defaultMessage:"Login attempts allowed before user is locked out and required to reset password via email."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SegmentDeveloperKey"},React.createElement(_.FormattedMessage,{id:"admin.service.segmentTitle",defaultMessage:"Segment Developer Key:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SegmentDeveloperKey",ref:"SegmentDeveloperKey",placeholder:e(C.segmentExample),defaultValue:this.props.config.ServiceSettings.SegmentDeveloperKey,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.segmentDescription",defaultMessage:"For users running a SaaS services, sign up for a key at Segment.com to track metrics."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"GoogleDeveloperKey"},React.createElement(_.FormattedMessage,{id:"admin.service.googleTitle",defaultMessage:"Google Developer Key:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"GoogleDeveloperKey",ref:"GoogleDeveloperKey",placeholder:e(C.googleExample),defaultValue:this.props.config.ServiceSettings.GoogleDeveloperKey,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedHTMLMessage,{id:"admin.service.googleDescription",defaultMessage:'Set this key to enable embedding of YouTube video previews based on hyperlinks appearing in messages or comments. Instructions to obtain a key available at <a href="https://www.youtube.com/watch?v=Im69kzhpR3I" target="_blank">https://www.youtube.com/watch?v=Im69kzhpR3I</a>. Leaving the field blank disables the automatic generation of YouTube video previews from links.'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableIncomingWebhooks"},React.createElement(_.FormattedMessage,{id:"admin.service.webhooksTitle",defaultMessage:"Enable Incoming Webhooks: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableIncomingWebhooks",value:"true",ref:"EnableIncomingWebhooks",defaultChecked:this.props.config.ServiceSettings.EnableIncomingWebhooks,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableIncomingWebhooks",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableIncomingWebhooks,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.webhooksDescription",defaultMessage:"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableOutgoingWebhooks"},React.createElement(_.FormattedMessage,{id:"admin.service.outWebhooksTitle",defaultMessage:"Enable Outgoing Webhooks: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableOutgoingWebhooks",value:"true",ref:"EnableOutgoingWebhooks",defaultChecked:this.props.config.ServiceSettings.EnableOutgoingWebhooks,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableOutgoingWebhooks",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableOutgoingWebhooks,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.outWebhooksDesc",defaultMessage:"When true, outgoing webhooks will be allowed."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnablePostUsernameOverride"},React.createElement(_.FormattedMessage,{id:"admin.service.overrideTitle",defaultMessage:"Enable Overriding Usernames from Webhooks: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostUsernameOverride",value:"true",ref:"EnablePostUsernameOverride",defaultChecked:this.props.config.ServiceSettings.EnablePostUsernameOverride,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostUsernameOverride",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnablePostUsernameOverride,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.overrideDescription",defaultMessage:"When true, webhooks will be allowed to change the username they are posting as. Note, combined with allowing icon overriding, this could open users up to phishing attacks."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnablePostIconOverride"},React.createElement(_.FormattedMessage,{id:"admin.service.iconTitle",defaultMessage:"Enable Overriding Icon from Webhooks: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostIconOverride",value:"true",ref:"EnablePostIconOverride",defaultChecked:this.props.config.ServiceSettings.EnablePostIconOverride,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnablePostIconOverride",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnablePostIconOverride,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.iconDescription",defaultMessage:"When true, webhooks will be allowed to change the icon they post with. Note, combined with allowing username overriding, this could open users up to phishing attacks."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableTesting"},React.createElement(_.FormattedMessage,{id:"admin.service.testingTitle",defaultMessage:"Enable Testing: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTesting",value:"true",ref:"EnableTesting",defaultChecked:this.props.config.ServiceSettings.EnableTesting,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTesting",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableTesting,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.testingDescription",defaultMessage:"(Developer Option) When true, /loadtest slash command is enabled to load test accounts and test data. Changing this will require a server restart before taking effect."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableDeveloper"},React.createElement(_.FormattedMessage,{id:"admin.service.developerTitle",defaultMessage:"Enable Developer Mode: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableDeveloper",value:"true",ref:"EnableDeveloper",defaultChecked:this.props.config.ServiceSettings.EnableDeveloper,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableDeveloper",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableDeveloper,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.developerDesc",defaultMessage:"(Developer Option) When true, extra information around errors will be displayed in the UI."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableSecurityFixAlert"},React.createElement(_.FormattedMessage,{id:"admin.service.securityTitle",defaultMessage:"Enable Security Alerts: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableSecurityFixAlert",value:"true",ref:"EnableSecurityFixAlert",defaultChecked:this.props.config.ServiceSettings.EnableSecurityFixAlert,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableSecurityFixAlert",value:"false",defaultChecked:!this.props.config.ServiceSettings.EnableSecurityFixAlert,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.service.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.securityDesc",defaultMessage:"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SessionLengthWebInDays"},React.createElement(_.FormattedMessage,{id:"admin.service.webSessionDays",defaultMessage:"Session Length for Web in Days:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SessionLengthWebInDays",ref:"SessionLengthWebInDays",placeholder:e(C.sessionDaysEx),defaultValue:this.props.config.ServiceSettings.SessionLengthWebInDays,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.webSessionDaysDesc",defaultMessage:"The web session will expire after the number of days specified and will require a user to login again."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SessionLengthMobileInDays"},React.createElement(_.FormattedMessage,{id:"admin.service.mobileSessionDays",defaultMessage:"Session Length for Mobile Device in Days:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SessionLengthMobileInDays",ref:"SessionLengthMobileInDays",placeholder:e(C.sessionDaysEx),defaultValue:this.props.config.ServiceSettings.SessionLengthMobileInDays,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.mobileSessionDaysDesc",defaultMessage:"The native mobile session will expire after the number of days specified and will require a user to login again."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SessionLengthSSOInDays"},React.createElement(_.FormattedMessage,{id:"admin.service.ssoSessionDays",defaultMessage:"Session Length for SSO in Days:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SessionLengthSSOInDays",ref:"SessionLengthSSOInDays",placeholder:e(C.sessionDaysEx),defaultValue:this.props.config.ServiceSettings.SessionLengthSSOInDays,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.ssoSessionDaysDesc",defaultMessage:"The SSO session will expire after the number of days specified and will require a user to login again."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",
htmlFor:"SessionCacheInMinutes"},React.createElement(_.FormattedMessage,{id:"admin.service.sessionCache",defaultMessage:"Session Cache in Minutes:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SessionCacheInMinutes",ref:"SessionCacheInMinutes",placeholder:e(C.sessionDaysEx),defaultValue:this.props.config.ServiceSettings.SessionCacheInMinutes,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.service.sessionCacheDesc",defaultMessage:"The number of minutes to cache a session in memory."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(C.saving)},React.createElement(_.FormattedMessage,{id:"admin.service.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);w.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(w)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],132:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("crypto"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({warning:{id:"admin.sql.warning",defaultMessage:"Warning: re-generating this salt may cause some columns in the database to return empty results."},maxConnectionsExample:{id:"admin.sql.maxConnectionsExample",defaultMessage:'Ex "10"'},maxOpenExample:{id:"admin.sql.maxOpenExample",defaultMessage:'Ex "10"'},keyExample:{id:"admin.sql.keyExample",defaultMessage:'Ex "gxHVDcKUyP2y1eiyW8S8na1UYQAfq6J6"'},saving:{id:"admin.sql.saving",defaultMessage:"Saving Config..."}}),C=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.handleChange=t.handleChange.bind(t),t.handleSubmit=t.handleSubmit.bind(t),t.handleGenerate=t.handleGenerate.bind(t),t.state={saveNeeded:!1,serverError:null},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.SqlSettings.Trace=ReactDOM.findDOMNode(this.refs.Trace).checked,a.SqlSettings.AtRestEncryptKey=ReactDOM.findDOMNode(this.refs.AtRestEncryptKey).value.trim(),""===a.SqlSettings.AtRestEncryptKey&&(a.SqlSettings.AtRestEncryptKey=E.default.randomBytes(256).toString("base64").substring(0,32),ReactDOM.findDOMNode(this.refs.AtRestEncryptKey).value=a.SqlSettings.AtRestEncryptKey);var s=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaxOpenConns).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.MaxOpenConns).value,10)),a.SqlSettings.MaxOpenConns=s,ReactDOM.findDOMNode(this.refs.MaxOpenConns).value=s;var n=10;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaxIdleConns).value,10))||(n=parseInt(ReactDOM.findDOMNode(this.refs.MaxIdleConns).value,10)),a.SqlSettings.MaxIdleConns=n,ReactDOM.findDOMNode(this.refs.MaxIdleConns).value=n,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"handleGenerate",value:function(e){e.preventDefault();var a=t.window.confirm(this.props.intl.formatMessage(R.warning));if(a!==!1){ReactDOM.findDOMNode(this.refs.AtRestEncryptKey).value=E.default.randomBytes(256).toString("base64").substring(0,32);var s={saveNeeded:!0,serverError:this.state.serverError};this.setState(s)}}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";this.state.saveNeeded&&(a="btn btn-primary");var s="**********"+this.props.config.SqlSettings.DataSource.substring(this.props.config.SqlSettings.DataSource.indexOf("@")),n="";return this.props.config.SqlSettings.DataSourceReplicas.forEach(function(e){n+="[**********"+e.substring(e.indexOf("@"))+"] "}),0===this.props.config.SqlSettings.DataSourceReplicas.length&&(n="none"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("div",{className:"banner"},React.createElement("div",{className:"banner__content"},React.createElement("h4",{className:"banner__heading"},React.createElement(y.FormattedMessage,{id:"admin.sql.noteTitle",defaultMessage:"Note:"})),React.createElement("p",null,React.createElement(y.FormattedMessage,{id:"admin.sql.noteDescription",defaultMessage:"Changing properties in this section will require a server restart before taking effect."})))),React.createElement("h3",null,React.createElement(y.FormattedMessage,{id:"admin.sql.title",defaultMessage:"SQL Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DriverName"},React.createElement(y.FormattedMessage,{id:"admin.sql.driverName",defaultMessage:"Driver Name:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("p",{className:"help-text"},this.props.config.SqlSettings.DriverName))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DataSource"},React.createElement(y.FormattedMessage,{id:"admin.sql.dataSource",defaultMessage:"Data Source:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("p",{className:"help-text"},s))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"DataSourceReplicas"},React.createElement(y.FormattedMessage,{id:"admin.sql.replicas",defaultMessage:"Data Source Replicas:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("p",{className:"help-text"},n))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaxIdleConns"},React.createElement(y.FormattedMessage,{id:"admin.sql.maxConnectionsTitle",defaultMessage:"Maximum Idle Connections:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaxIdleConns",ref:"MaxIdleConns",placeholder:e(R.maxConnectionsExample),defaultValue:this.props.config.SqlSettings.MaxIdleConns,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.sql.maxConnectionsDescription",defaultMessage:"Maximum number of idle connections held open to the database."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaxOpenConns"},React.createElement(y.FormattedMessage,{id:"admin.sql.maxOpenTitle",defaultMessage:"Maximum Open Connections:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaxOpenConns",ref:"MaxOpenConns",placeholder:e(R.maxOpenExample),defaultValue:this.props.config.SqlSettings.MaxOpenConns,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.sql.maxOpenDescription",defaultMessage:"Maximum number of open connections held open to the database."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"AtRestEncryptKey"},React.createElement(y.FormattedMessage,{id:"admin.sql.keyTitle",defaultMessage:"At Rest Encrypt Key:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"AtRestEncryptKey",ref:"AtRestEncryptKey",placeholder:e(R.keyExample),defaultValue:this.props.config.SqlSettings.AtRestEncryptKey,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.sql.keyDescription",defaultMessage:"32-character salt available to encrypt and decrypt sensitive fields in database."})),React.createElement("div",{className:"help-text"},React.createElement("button",{className:"btn btn-default",onClick:this.handleGenerate},React.createElement(y.FormattedMessage,{id:"admin.sql.regenerate",defaultMessage:"Re-Generate"}))))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"Trace"},React.createElement(y.FormattedMessage,{id:"admin.sql.traceTitle",defaultMessage:"Trace: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Trace",value:"true",ref:"Trace",defaultChecked:this.props.config.SqlSettings.Trace,onChange:this.handleChange}),React.createElement(y.FormattedMessage,{id:"admin.sql.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"Trace",value:"false",defaultChecked:!this.props.config.SqlSettings.Trace,onChange:this.handleChange}),React.createElement(y.FormattedMessage,{id:"admin.sql.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(y.FormattedMessage,{id:"admin.sql.traceDescription",defaultMessage:"(Development Mode) When true, executing SQL statements are written to the log."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(R.saving)},React.createElement(y.FormattedMessage,{id:"admin.sql.save",defaultMessage:"Save"}))))))}}]),a}(React.Component);C.propTypes={intl:y.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,y.injectIntl)(C)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,crypto:"crypto","mm-intl":308}],133:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./analytics.jsx"),g=n(f),b=e("../../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({totalPosts:{id:"admin.system_analytics.totalPosts",defaultMessage:"Total Posts"},activeUsers:{id:"admin.system_analytics.activeUsers",defaultMessage:"Active Users With Posts"},title:{id:"admin.system_analytics.title",defaultMessage:"the System"}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getData=a.getData.bind(a),a.state={users:null,serverError:null,channel_open_count:null,channel_private_count:null,post_count:null,post_counts_day:null,user_counts_with_posts_day:null,recent_active_users:null,newly_created_users:null,unique_user_count:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=this.props.intl.formatMessage;v.getSystemAnalytics("standard",function(t){for(var a in t)"channel_open_count"===t[a].name&&e.setState({channel_open_count:t[a].value}),"channel_private_count"===t[a].name&&e.setState({channel_private_count:t[a].value}),"post_count"===t[a].name&&e.setState({post_count:t[a].value}),"unique_user_count"===t[a].name&&e.setState({unique_user_count:t[a].value})},function(t){e.setState({serverError:t.message})}),v.getSystemAnalytics("post_counts_day",function(a){a.reverse();var s={labels:[],datasets:[{label:t(E.totalPosts),fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]};for(var n in a)if(a[n]){var r=a[n];s.labels.push(r.name),s.datasets[0].data.push(r.value)}e.setState({post_counts_day:s})},function(t){e.setState({serverError:t.message})}),v.getSystemAnalytics("user_counts_with_posts_day",function(a){a.reverse();var s={labels:[],datasets:[{label:t(E.activeUsers),fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]};for(var n in a)if(a[n]){var r=a[n];s.labels.push(r.name),s.datasets[0].data.push(r.value)}e.setState({user_counts_with_posts_day:s})},function(t){e.setState({serverError:t.message})})}},{key:"componentWillReceiveProps",value:function(){this.setState({serverError:null,channel_open_count:null,channel_private_count:null,post_count:null,post_counts_day:null,user_counts_with_posts_day:null,unique_user_count:null}),this.getData()}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(g.default,{title:this.props.intl.formatMessage(E.title),channelOpenCount:this.state.channel_open_count,channelPrivateCount:this.state.channel_private_count,postCount:this.state.post_count,postCountsDay:this.state.post_counts_day,userCountsWithPostsDay:this.state.user_counts_with_posts_day,uniqueUserCount:this.state.unique_user_count,serverError:this.state.serverError}))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,team:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/client.jsx":338,"./analytics.jsx":117,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],134:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./analytics.jsx"),g=n(f),b=e("../../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({totalPosts:{id:"admin.team_analytics.totalPosts",defaultMessage:"Total Posts"},activeUsers:{id:"admin.team_analytics.activeUsers",defaultMessage:"Active Users With Posts"}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getData=a.getData.bind(a),a.state={users:null,serverError:null,channel_open_count:null,channel_private_count:null,post_count:null,post_counts_day:null,user_counts_with_posts_day:null,recent_active_users:null,newly_created_users:null,unique_user_count:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.getData(this.props.team.id)}},{key:"getData",value:function(e){var t=this,a=this.props.intl.formatMessage;v.getTeamAnalytics(e,"standard",function(e){for(var a in e)"channel_open_count"===e[a].name&&t.setState({channel_open_count:e[a].value}),"channel_private_count"===e[a].name&&t.setState({channel_private_count:e[a].value}),"post_count"===e[a].name&&t.setState({post_count:e[a].value}),"unique_user_count"===e[a].name&&t.setState({unique_user_count:e[a].value})},function(e){t.setState({serverError:e.message})}),v.getTeamAnalytics(e,"post_counts_day",function(e){e.reverse();var s={labels:[],datasets:[{label:a(E.totalPosts),fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]};for(var n in e)if(e[n]){var r=e[n];s.labels.push(r.name),s.datasets[0].data.push(r.value)}t.setState({post_counts_day:s})},function(e){t.setState({serverError:e.message})}),v.getTeamAnalytics(e,"user_counts_with_posts_day",function(e){e.reverse();var s={labels:[],datasets:[{label:a(E.activeUsers),fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]};for(var n in e)if(e[n]){var r=e[n];s.labels.push(r.name),s.datasets[0].data.push(r.value)}t.setState({user_counts_with_posts_day:s})},function(e){t.setState({serverError:e.message})}),v.getProfilesForTeam(e,function(e){t.setState({users:e});var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push(e[s]);a.sort(function(e,t){return e.last_activity_at<t.last_activity_at?1:e.last_activity_at>t.last_activity_at?-1:0});for(var n=[],r=0;r<a.length&&!(null!=a[r].last_activity_at&&(n.push(a[r]),r>19));r++);t.setState({recent_active_users:n}),a.sort(function(e,t){return e.create_at<t.create_at?1:e.create_at>t.create_at?-1:0});for(var l=[],r=0;r<a.length&&(l.push(a[r]),!(r>19));r++);t.setState({newly_created_users:l})},function(e){t.setState({serverError:e.message})})}},{key:"componentWillReceiveProps",value:function(e){this.setState({users:null,serverError:null,channel_open_count:null,channel_private_count:null,post_count:null,post_counts_day:null,user_counts_with_posts_day:null,recent_active_users:null,newly_created_users:null,unique_user_count:null}),this.getData(e.team.id)}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(g.default,{title:this.props.team.name,users:this.state.users,channelOpenCount:this.state.channel_open_count,channelPrivateCount:this.state.channel_private_count,postCount:this.state.post_count,postCountsDay:this.state.post_counts_day,userCountsWithPostsDay:this.state.user_counts_with_posts_day,recentActiveUsers:this.state.recent_active_users,newlyCreatedUsers:this.state.newly_created_users,uniqueUserCount:this.state.unique_user_count,serverError:this.state.serverError}))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,team:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/client.jsx":338,"./analytics.jsx":117,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],135:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/async_client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({siteNameExample:{id:"admin.team.siteNameExample",defaultMessage:'Ex "Mattermost"'},maxUsersExample:{id:"admin.team.maxUsersExample",defaultMessage:'Ex "25"'},restrictExample:{id:"admin.team.restrictExample",defaultMessage:'Ex "corp.mattermost.com, mattermost.org"'},saving:{id:"admin.team.saving",defaultMessage:"Saving Config..."}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={saveNeeded:!1,serverError:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleChange",value:function(){var e={saveNeeded:!0,serverError:this.state.serverError};this.setState(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$("#save-button").button("loading");var a=this.props.config;a.TeamSettings.SiteName=ReactDOM.findDOMNode(this.refs.SiteName).value.trim(),a.TeamSettings.RestrictCreationToDomains=ReactDOM.findDOMNode(this.refs.RestrictCreationToDomains).value.trim(),a.TeamSettings.EnableTeamCreation=ReactDOM.findDOMNode(this.refs.EnableTeamCreation).checked,a.TeamSettings.EnableUserCreation=ReactDOM.findDOMNode(this.refs.EnableUserCreation).checked,a.TeamSettings.RestrictTeamNames=ReactDOM.findDOMNode(this.refs.RestrictTeamNames).checked,a.TeamSettings.EnableTeamListing=ReactDOM.findDOMNode(this.refs.EnableTeamListing).checked;var s=50;isNaN(parseInt(ReactDOM.findDOMNode(this.refs.MaxUsersPerTeam).value,10))||(s=parseInt(ReactDOM.findDOMNode(this.refs.MaxUsersPerTeam).value,10)),a.TeamSettings.MaxUsersPerTeam=s,ReactDOM.findDOMNode(this.refs.MaxUsersPerTeam).value=s,g.saveConfig(a,function(){v.getConfig(),t.setState({serverError:null,saveNeeded:!1}),$("#save-button").button("reset")},function(e){t.setState({serverError:e.message,saveNeeded:!0}),$("#save-button").button("reset")})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t="";this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a="btn";return this.state.saveNeeded&&(a="btn btn-primary"),React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"admin.team.title",defaultMessage:"Team Settings"})),React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"SiteName"},React.createElement(_.FormattedMessage,{id:"admin.team.siteNameTitle",defaultMessage:"Site Name:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"SiteName",ref:"SiteName",placeholder:e(E.siteNameExample),defaultValue:this.props.config.TeamSettings.SiteName,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.siteNameDescription",defaultMessage:"Name of service shown in login screens and UI."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"MaxUsersPerTeam"},React.createElement(_.FormattedMessage,{id:"admin.team.maxUsersTitle",defaultMessage:"Max Users Per Team:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"MaxUsersPerTeam",ref:"MaxUsersPerTeam",placeholder:e(E.maxUsersExample),defaultValue:this.props.config.TeamSettings.MaxUsersPerTeam,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.maxUsersDescription",defaultMessage:"Maximum total number of users per team, including both active and inactive users."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableTeamCreation"},React.createElement(_.FormattedMessage,{id:"admin.team.teamCreationTitle",defaultMessage:"Enable Team Creation: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamCreation",value:"true",ref:"EnableTeamCreation",defaultChecked:this.props.config.TeamSettings.EnableTeamCreation,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamCreation",value:"false",defaultChecked:!this.props.config.TeamSettings.EnableTeamCreation,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.teamCreationDescription",defaultMessage:"When false, the ability to create teams is disabled. The create team button displays error when pressed."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableUserCreation"},React.createElement(_.FormattedMessage,{id:"admin.team.userCreationTitle",defaultMessage:"Enable User Creation: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableUserCreation",value:"true",ref:"EnableUserCreation",defaultChecked:this.props.config.TeamSettings.EnableUserCreation,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableUserCreation",value:"false",defaultChecked:!this.props.config.TeamSettings.EnableUserCreation,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.userCreationDescription",defaultMessage:"When false, the ability to create accounts is disabled. The create account button displays error when pressed."})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"RestrictCreationToDomains"},React.createElement(_.FormattedMessage,{id:"admin.team.restrictTitle",defaultMessage:"Restrict Creation To Domains:"})),React.createElement("div",{className:"col-sm-8"},React.createElement("input",{type:"text",className:"form-control",id:"RestrictCreationToDomains",ref:"RestrictCreationToDomains",placeholder:e(E.restrictExample),defaultValue:this.props.config.TeamSettings.RestrictCreationToDomains,onChange:this.handleChange}),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.restrictDescription",defaultMessage:'Teams and user accounts can only be created from a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org").'})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"RestrictTeamNames"},React.createElement(_.FormattedMessage,{id:"admin.team.restrictNameTitle",defaultMessage:"Restrict Team Names: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"RestrictTeamNames",value:"true",ref:"RestrictTeamNames",defaultChecked:this.props.config.TeamSettings.RestrictTeamNames,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"RestrictTeamNames",value:"false",defaultChecked:!this.props.config.TeamSettings.RestrictTeamNames,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.restrictNameDesc",defaultMessage:"When true, You cannot create a team name with reserved words like www, admin, support, test, channel, etc"})))),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label col-sm-4",htmlFor:"EnableTeamListing"},React.createElement(_.FormattedMessage,{id:"admin.team.dirTitle",defaultMessage:"Enable Team Directory: "})),React.createElement("div",{className:"col-sm-8"},React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamListing",value:"true",ref:"EnableTeamListing",defaultChecked:this.props.config.TeamSettings.EnableTeamListing,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.true",defaultMessage:"true"})),React.createElement("label",{className:"radio-inline"},React.createElement("input",{type:"radio",name:"EnableTeamListing",value:"false",defaultChecked:!this.props.config.TeamSettings.EnableTeamListing,onChange:this.handleChange}),React.createElement(_.FormattedMessage,{id:"admin.team.false",defaultMessage:"false"})),React.createElement("p",{className:"help-text"},React.createElement(_.FormattedMessage,{id:"admin.team.dirDesc",defaultMessage:"When true, teams that are configured to show in team directory will show on main page inplace of creating a new team."})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"col-sm-12"},t,React.createElement("button",{disabled:!this.state.saveNeeded,type:"submit",className:a,onClick:this.handleSubmit,id:"save-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+e(E.saving)},React.createElement(_.FormattedMessage,{id:"admin.team.save",defaultMessage:"Save"}))))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,config:React.PropTypes.object},a.default=(0,_.injectIntl)(y)},{"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],136:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{
value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../loading_screen.jsx"),v=n(b),_=e("./user_item.jsx"),E=n(_),y=e("./reset_password_modal.jsx"),R=n(y),C=e("mm-intl"),w=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getTeamProfiles=a.getTeamProfiles.bind(a),a.getCurrentTeamProfiles=a.getCurrentTeamProfiles.bind(a),a.doPasswordReset=a.doPasswordReset.bind(a),a.doPasswordResetDismiss=a.doPasswordResetDismiss.bind(a),a.doPasswordResetSubmit=a.doPasswordResetSubmit.bind(a),a.state={teamId:e.team.id,users:null,serverError:null,showPasswordModal:!1,user:null},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.getCurrentTeamProfiles()}},{key:"getCurrentTeamProfiles",value:function(){this.getTeamProfiles(this.props.team.id)}},{key:"getTeamProfiles",value:function(e){var t=this;g.getProfilesForTeam(e,function(e){var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push(e[s]);a.sort(function(e,t){return e.username<t.username?-1:e.username>t.username?1:0}),t.setState({teamId:t.state.teamId,users:a,serverError:t.state.serverError,showPasswordModal:t.state.showPasswordModal,user:t.state.user})},function(e){t.setState({teamId:t.state.teamId,users:null,serverError:e.message,showPasswordModal:t.state.showPasswordModal,user:t.state.user})})}},{key:"doPasswordReset",value:function(e){this.setState({teamId:this.state.teamId,users:this.state.users,serverError:this.state.serverError,showPasswordModal:!0,user:e})}},{key:"doPasswordResetDismiss",value:function(){this.setState({teamId:this.state.teamId,users:this.state.users,serverError:this.state.serverError,showPasswordModal:!1,user:null})}},{key:"doPasswordResetSubmit",value:function(){this.setState({teamId:this.state.teamId,users:this.state.users,serverError:this.state.serverError,showPasswordModal:!1,user:null})}},{key:"componentWillReceiveProps",value:function(e){this.getTeamProfiles(e.team.id)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t="";if(this.state.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),null==this.state.users)return React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(C.FormattedMessage,{id:"admin.userList.title",defaultMessage:"Users for {team}",values:{team:this.props.team.name}})),t,React.createElement(v.default,null));var a=this.state.users.map(function(t){return React.createElement(E.default,{key:"user_"+t.id,user:t,refreshProfiles:e.getCurrentTeamProfiles,doPasswordReset:e.doPasswordReset})});return React.createElement("div",{className:"wrapper--fixed"},React.createElement("h3",null,React.createElement(C.FormattedMessage,{id:"admin.userList.title2",defaultMessage:"Users for {team} ({count})",values:{team:this.props.team.name,count:this.state.users.length}})),t,React.createElement("form",{className:"form-horizontal",role:"form"},React.createElement("table",{className:"table more-table member-list-holder"},React.createElement("tbody",null,a))),React.createElement(R.default,{user:this.state.user,show:this.state.showPasswordModal,team:this.props.team,onModalSubmit:this.doPasswordResetSubmit,onModalDismissed:this.doPasswordResetDismiss}))}}]),t}(React.Component);a.default=w,w.propTypes={team:React.PropTypes.object}},{"../../utils/client.jsx":338,"../loading_screen.jsx":173,"./reset_password_modal.jsx":129,"./user_item.jsx":137,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],137:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/utils.jsx"),v=s(b),_=e("mm-intl"),E=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleMakeMember=a.handleMakeMember.bind(a),a.handleMakeActive=a.handleMakeActive.bind(a),a.handleMakeNotActive=a.handleMakeNotActive.bind(a),a.handleMakeAdmin=a.handleMakeAdmin.bind(a),a.handleMakeSystemAdmin=a.handleMakeSystemAdmin.bind(a),a.handleResetPassword=a.handleResetPassword.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleMakeMember",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.id,new_roles:""};g.updateRoles(a,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeActive",value:function(e){var t=this;e.preventDefault(),g.updateActive(this.props.user.id,!0,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeNotActive",value:function(e){var t=this;e.preventDefault(),g.updateActive(this.props.user.id,!1,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeAdmin",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.id,new_roles:"admin"};g.updateRoles(a,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleMakeSystemAdmin",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.id,new_roles:"system_admin"};g.updateRoles(a,function(){t.props.refreshProfiles()},function(e){t.setState({serverError:e.message})})}},{key:"handleResetPassword",value:function(e){e.preventDefault(),this.props.doPasswordReset(this.props.user)}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"has-error"},React.createElement("label",{className:"has-error control-label"},this.state.serverError)));var t=this.props.user,a=React.createElement(_.FormattedMessage,{id:"admin.user_item.member",defaultMessage:"Member"});t.roles.length>0&&(a=v.isSystemAdmin(t.roles)?React.createElement(_.FormattedMessage,{id:"admin.user_item.sysAdmin",defaultMessage:"System Admin"}):v.isAdmin(t.roles)?React.createElement(_.FormattedMessage,{id:"admin.user_item.teamAdmin",defaultMessage:"Team Admin"}):t.roles.charAt(0).toUpperCase()+t.roles.slice(1));var s=t.email,n="admin"===t.roles||"system_admin"===t.roles,r=""===t.roles||"system_admin"===t.roles,l=""===t.roles||"admin"===t.roles,i=!1,o="system_admin"!==t.roles;t.delete_at>0&&(a=React.createElement(_.FormattedMessage,{id:"admin.user_item.inactive",defaultMessage:"Inactive"}),n=!1,r=!1,l=!1,i=!0,o=!1);var c=null;l&&(c=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeSystemAdmin},React.createElement(_.FormattedMessage,{id:"admin.user_item.makeSysAdmin",defaultMessage:"Make System Admin"}))));var u=null;r&&(u=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeAdmin},React.createElement(_.FormattedMessage,{id:"admin.user_item.makeTeamAdmin",defaultMessage:"Make Team Admin"}))));var d=null;n&&(d=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeMember},React.createElement(_.FormattedMessage,{id:"admin.user_item.makeMember",defaultMessage:"Make Member"}))));var m=null;i&&(m=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeActive},React.createElement(_.FormattedMessage,{id:"admin.user_item.makeActive",defaultMessage:"Make Active"}))));var p=null;return o&&(p=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeNotActive},React.createElement(_.FormattedMessage,{id:"admin.user_item.makeInactive",defaultMessage:"Make Inactive"})))),React.createElement("tr",null,React.createElement("td",{className:"row member-div"},React.createElement("img",{className:"post-profile-img pull-left",src:"/api/v1/users/"+t.id+"/image?time="+t.update_at+"&"+v.getSessionIndex(),height:"36",width:"36"}),React.createElement("span",{className:"member-name"},v.getDisplayName(t)),React.createElement("span",{className:"member-email"},s),React.createElement("div",{className:"dropdown member-drop"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",null,a," "),React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu member-menu",role:"menu"},u,d,m,p,c,React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleResetPassword},React.createElement(_.FormattedMessage,{id:"admin.user_item.resetPwd",defaultMessage:"Reset Password"}))))),e))}}]),t}(React.Component);a.default=E,E.propTypes={user:React.PropTypes.object.isRequired,refreshProfiles:React.PropTypes.func.isRequired,doPasswordReset:React.PropTypes.func.isRequired}},{"../../utils/client.jsx":338,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],138:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/constants.jsx"),g=n(f),b=e("./file_info_preview.jsx"),v=n(b),_=e("../utils/utils.jsx"),E=s(_),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleFileInfoChanged=a.handleFileInfoChanged.bind(a),a.handleLoadError=a.handleLoadError.bind(a),a.stop=a.stop.bind(a),a.state={canPlay:!0},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.handleFileInfoChanged(this.props.fileInfo)}},{key:"componentDidMount",value:function(){this.refs.source&&$(ReactDOM.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}},{key:"componentWillReceiveProps",value:function(e){this.props.fileUrl!==e.fileUrl&&this.handleFileInfoChanged(e.fileInfo)}},{key:"handleFileInfoChanged",value:function(e){var t=ReactDOM.findDOMNode(this.refs.video);t||(t=document.createElement("video"));var a=t.canPlayType(e.mime_type);this.setState({canPlay:"probably"===a||"maybe"===a})}},{key:"componentDidUpdate",value:function(){this.refs.source&&$(ReactDOM.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}},{key:"handleLoadError",value:function(){this.setState({canPlay:!1})}},{key:"stop",value:function(){if(this.refs.video){var e=ReactDOM.findDOMNode(this.refs.video);e.pause(),e.currentTime=0}}},{key:"render",value:function(){if(!this.state.canPlay)return React.createElement(v.default,{filename:this.props.filename,fileUrl:this.props.fileUrl,fileInfo:this.props.fileInfo});var e=g.default.WEB_VIDEO_WIDTH,t=g.default.WEB_VIDEO_HEIGHT;return E.isMobile()&&(e=g.default.MOBILE_VIDEO_WIDTH,t=g.default.MOBILE_VIDEO_HEIGHT),React.createElement("video",{key:this.props.filename,ref:"video",style:{maxHeight:this.props.maxHeight},"data-setup":"{}",controls:"controls",width:e,height:t},React.createElement("source",{ref:"source",src:this.props.fileUrl}))}}]),t}(React.Component);a.default=y,y.propTypes={filename:React.PropTypes.string.isRequired,fileUrl:React.PropTypes.string.isRequired,fileInfo:React.PropTypes.object.isRequired,maxHeight:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]).isRequired}},{"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./file_info_preview.jsx":165,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],139:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("mm-intl"),v=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleAllow=a.handleAllow.bind(a),a.handleDeny=a.handleDeny.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleAllow",value:function(){var e=this.props.responseType,t=this.props.clientId,a=this.props.redirectUri,s=this.props.state,n=this.props.scope;g.allowOAuth2(e,t,a,s,n,function(e){e.redirect&&window.location.replace(e.redirect)},function(){})}},{key:"handleDeny",value:function(){window.location.replace(this.props.redirectUri+"?error=access_denied")}},{key:"render",value:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"oauth-prompt"},React.createElement("div",{className:"prompt__heading"},React.createElement("div",{className:"prompt__app-icon"},React.createElement("img",{src:"/static/images/icon50x50.png",width:"50",height:"50",alt:""})),React.createElement("div",{className:"text"},React.createElement(b.FormattedMessage,{id:"authorize.title",defaultMessage:"An application would like to connect to your {teamName} account",values:{teamName:this.props.teamName}}))),React.createElement("p",null,React.createElement(b.FormattedHTMLMessage,{id:"authorize.app",defaultMessage:"The app <strong>{appName}</strong> would like the ability to access and modify your basic information.",values:{appName:this.props.appName}})),React.createElement("h2",{className:"prompt__allow"},React.createElement(b.FormattedHTMLMessage,{id:"authorize.access",defaultMessage:"Allow <strong>{appName}</strong> access?",values:{appName:this.props.appName}})),React.createElement("div",{className:"prompt__buttons"},React.createElement("button",{type:"submit",className:"btn authorize-btn",onClick:this.handleDeny},React.createElement(b.FormattedMessage,{id:"authorize.deny",defaultMessage:"Deny"})),React.createElement("button",{type:"submit",className:"btn btn-primary authorize-btn",onClick:this.handleAllow},React.createElement(b.FormattedMessage,{id:"authorize.allow",defaultMessage:"Allow"})))))}}]),t}(React.Component);a.default=v,v.propTypes={appName:React.PropTypes.string,teamName:React.PropTypes.string,responseType:React.PropTypes.string,clientId:React.PropTypes.string,redirectUri:React.PropTypes.string,state:React.PropTypes.string,scope:React.PropTypes.string}},{"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],140:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./tutorial/tutorial_intro_screens.jsx"),g=n(f),b=e("./create_post.jsx"),v=n(b),_=e("./posts_view_container.jsx"),E=n(_),y=e("./post_focus_view.jsx"),R=n(y),C=e("./channel_header.jsx"),w=n(C),S=e("./navbar.jsx"),k=n(S),N=e("./file_upload_overlay.jsx"),M=n(N),x=e("../stores/preference_store.jsx"),j=n(x),T=e("../stores/channel_store.jsx"),P=n(T),O=e("../stores/user_store.jsx"),I=n(O),D=e("../utils/utils.jsx"),L=s(D),A=e("../utils/constants.jsx"),F=n(A),U=F.default.TutorialSteps,$=F.default.Preferences,H=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.onPreferenceChange=a.onPreferenceChange.bind(a),a.onChannelChange=a.onChannelChange.bind(a);var s=j.default.getInt($.TUTORIAL_STEP,I.default.getCurrentId(),999);return a.state={showTutorialScreens:s===U.INTRO_SCREENS,showPostFocus:P.default.getPostMode()===P.default.POST_MODE_FOCUS},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){j.default.addChangeListener(this.onPreferenceChange),P.default.addChangeListener(this.onChannelChange)}},{key:"componentWillUnmount",value:function(){j.default.removeChangeListener(this.onPreferenceChange),P.default.removeChangeListener(this.onChannelChange)}},{key:"onPreferenceChange",value:function(){var e=j.default.getInt($.TUTORIAL_STEP,I.default.getCurrentId(),999);this.setState({showTutorialScreens:e<=U.INTRO_SCREENS})}},{key:"onChannelChange",value:function(){this.setState({showPostFocus:P.default.getPostMode()===P.default.POST_MODE_FOCUS})}},{key:"render",value:function(){var e=P.default.getCurrent(),t=null,a=void 0,s=void 0;return this.state.showTutorialScreens?(a=React.createElement(g.default,null),s=null):this.state.showPostFocus?(a=React.createElement(R.default,null),t=function(t){t.preventDefault(),L.switchChannel(e)},s=React.createElement("div",{id:"archive-link-home",onClick:t},React.createElement("a",{href:""},"You are viewing the Archives. Click here to jump to recent messages. ",React.createElement("i",{className:"fa fa-arrow-down"})))):(a=React.createElement(E.default,null),s=React.createElement("div",{className:"post-create__container",id:"post-create"},React.createElement(v.default,null))),React.createElement("div",{className:"inner__wrap channel__wrap"},React.createElement("div",{className:"row header"},React.createElement("div",{id:"navbar"},React.createElement(k.default,null))),React.createElement("div",{className:"row main"},React.createElement(M.default,{id:"file_upload_overlay",overlayType:"center"}),React.createElement("div",{id:"app-content",className:"app__content"},React.createElement("div",{id:"channel-header"},React.createElement(w.default,null)),a,s)))}}]),t}(React.Component);a.default=H,H.defaultProps={},H.propTypes={}},{"../stores/channel_store.jsx":325,"../stores/preference_store.jsx":330,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./channel_header.jsx":142,"./create_post.jsx":154,"./file_upload_overlay.jsx":168,"./navbar.jsx":185,"./post_focus_view.jsx":201,"./posts_view_container.jsx":205,"./tutorial/tutorial_intro_screens.jsx":258,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],141:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=ReactBootstrap.Modal,v=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.onURLChanged=a.onURLChanged.bind(a),a.doSubmit=a.doSubmit.bind(a),a.doCancel=a.doCancel.bind(a),a.state={currentURL:e.currentURL,urlError:"",userEdit:!1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.userEdit||this.setState({currentURL:e.currentURL})}},{key:"componentDidUpdate",value:function(e){this.props.show===!0&&e.show===!1&&ReactDOM.findDOMNode(this.refs.urlinput).select()}},{key:"onURLChanged",value:function(e){var t=e.target.value.trim();this.setState({currentURL:t.replace(/[^A-Za-z0-9-_]/g,"").toLowerCase(),userEdit:!0})}},{key:"getURLError",value:function(e){var t=[];return e.length<2&&t.push(React.createElement("span",{key:"error1"},"Must be longer than two characters",React.createElement("br",null))),("-"===e.charAt(0)||"_"===e.charAt(0))&&t.push(React.createElement("span",{key:"error2"},"Must start with a letter or number",React.createElement("br",null))),e.length>1&&("-"===e.charAt(e.length-1)||"_"===e.charAt(e.length-1))&&t.push(React.createElement("span",{key:"error3"},"Must end with a letter or number",React.createElement("br",null))),e.indexOf("__")>-1&&t.push(React.createElement("span",{key:"error4"},"Can not contain two underscores in a row.",React.createElement("br",null))),0===t.length&&t.push(React.createElement("span",{key:"errorlast"},"Invalid URL",React.createElement("br",null))),t}},{key:"doSubmit",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.urlinput).value,a=g.cleanUpUrlable(t);return a!==t||t.length<2||t.indexOf("__")>-1?void this.setState({urlError:this.getURLError(t)}):(this.setState({urlError:"",userEdit:!1}),void this.props.onModalSubmit(t))}},{key:"doCancel",value:function(){this.setState({urlError:"",userEdit:!1}),this.props.onModalDismissed()}},{key:"render",value:function(){var e="input-group input-group--limit",t=null,a=null;this.state.urlError&&(e+=" has-error",t=React.createElement("p",{className:"input__help error"},this.state.urlError)),this.props.serverError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("p",{className:"input__help error"},this.props.serverError)));var s=g.getTeamURLFromAddressBar(),n=g.getShortenedTeamURL();return React.createElement(b,{show:this.props.show,onHide:this.doCancel},React.createElement(b.Header,{closeButton:!0},React.createElement(b.Title,null,this.props.title)),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(b.Body,null,React.createElement("div",{className:"modal-intro"},this.props.description),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-2 form__label control-label"},this.props.urlLabel),React.createElement("div",{className:"col-sm-10"},React.createElement("div",{className:e},React.createElement("span",{"data-toggle":"tooltip",title:s,className:"input-group-addon"},n),React.createElement("input",{type:"text",ref:"urlinput",className:"form-control",maxLength:"22",onChange:this.onURLChanged,value:this.state.currentURL,autoFocus:!0,tabIndex:"1"})),t,a))),React.createElement(b.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},"Close"),React.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},this.props.submitButtonText))))}}]),t}(React.Component);a.default=v,v.defaultProps={show:!1,title:"Change URL",desciption:"",urlLabel:"URL",submitButtonText:"Save",currentURL:"",serverError:""},v.propTypes={show:React.PropTypes.bool.isRequired,title:React.PropTypes.string,description:React.PropTypes.string,urlLabel:React.PropTypes.string,submitButtonText:React.PropTypes.string,currentURL:React.PropTypes.string,serverError:React.PropTypes.string,onModalSubmit:React.PropTypes.func.isRequired,onModalDismissed:React.PropTypes.func.isRequired}},{"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],142:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./search_bar.jsx"),g=n(f),b=e("./message_wrapper.jsx"),v=n(b),_=e("./popover_list_members.jsx"),E=n(_),y=e("./edit_channel_header_modal.jsx"),R=n(y),C=e("./edit_channel_purpose_modal.jsx"),w=n(C),S=e("./channel_info_modal.jsx"),k=n(S),N=e("./channel_invite_modal.jsx"),M=n(N),x=e("./channel_members_modal.jsx"),j=n(x),T=e("./channel_notifications_modal.jsx"),P=n(T),O=e("./delete_channel_modal.jsx"),I=n(O),D=e("./toggle_modal_button.jsx"),L=n(D),A=e("../stores/channel_store.jsx"),F=n(A),U=e("../stores/user_store.jsx"),H=n(U),B=e("../stores/search_store.jsx"),q=n(B),G=e("../stores/preference_store.jsx"),V=n(G),W=e("../dispatcher/app_dispatcher.jsx"),z=n(W),K=e("../utils/utils.jsx"),Y=s(K),J=e("../utils/text_formatting.jsx"),Z=s(J),X=e("../utils/async_client.jsx"),Q=s(X),ee=e("../utils/client.jsx"),te=s(ee),ae=e("../utils/constants.jsx"),se=n(ae),ne=se.default.ActionTypes,re=ReactBootstrap.Popover,le=ReactBootstrap.OverlayTrigger,ie=ReactBootstrap.Tooltip,oe=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.onListenerChange=a.onListenerChange.bind(a),a.handleLeave=a.handleLeave.bind(a),a.searchMentions=a.searchMentions.bind(a);var s=a.getStateFromStores();return s.showEditChannelPurposeModal=!1,s.showMembersModal=!1,a.state=s,a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStores",value:function(){var e=F.default.getCurrentExtraInfo();return{channel:F.default.getCurrent(),memberChannel:F.default.getCurrentMember(),memberTeam:H.default.getCurrentUser(),users:e.members,userCount:e.member_count,searchVisible:null!==q.default.getSearchResults()}}},{key:"componentDidMount",value:function(){F.default.addChangeListener(this.onListenerChange),F.default.addExtraInfoChangeListener(this.onListenerChange),q.default.addSearchChangeListener(this.onListenerChange),H.default.addChangeListener(this.onListenerChange),V.default.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){F.default.removeChangeListener(this.onListenerChange),F.default.removeExtraInfoChangeListener(this.onListenerChange),q.default.removeSearchChangeListener(this.onListenerChange),H.default.removeChangeListener(this.onListenerChange),V.default.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();Y.areObjectsEqual(e,this.state)||this.setState(e),$(".channel-header__info .description").popover({placement:"bottom",trigger:"hover",html:!0,delay:{show:500,hide:500}})}},{key:"handleLeave",value:function(){var e=this;te.leaveChannel(this.state.channel.id,function(){z.default.handleViewAction({type:ne.LEAVE_CHANNEL,id:e.state.channel.id});var t=F.default.getByName("town-square");Y.switchChannel(t)},function(e){Q.dispatchError(e,"handleLeave")})}},{key:"searchMentions",value:function(e){e.preventDefault();var t=H.default.getCurrentUser(),a="";if(t.notify_props&&t.notify_props.mention_keys){var s=H.default.getCurrentMentionKeys();"true"===t.notify_props.all&&-1!==s.indexOf("@all")&&s.splice(s.indexOf("@all"),1),"true"===t.notify_props.channel&&-1!==s.indexOf("@channel")&&s.splice(s.indexOf("@channel"),1),a=s.join(" ")}z.default.handleServerAction({type:ne.RECIEVED_SEARCH_TERM,term:a,do_search:!0,is_mention_search:!0})}},{key:"render",value:function(){var e=this;if(null===this.state.channel)return null;var t=this.state.channel,a=React.createElement(ie,{id:"recentMentionsTooltip"},"Recent Mentions"),s=React.createElement(re,{id:"hader-popover",bStyle:"info",bSize:"large",placement:"bottom",className:"description",onMouseOver:function(){return e.refs.headerOverlay.show()},onMouseOut:function(){return e.refs.headerOverlay.hide()}},React.createElement(v.default,{message:t.header})),n=t.display_name,r=H.default.getCurrentId(),l=Y.isAdmin(this.state.memberChannel.roles)||Y.isAdmin(this.state.memberTeam.roles),i="D"===this.state.channel.type;if(i&&this.state.users.length>1){var o=void 0;o=this.state.users[0].id===r?this.state.users[1]:this.state.users[0],n=Y.displayUsername(o.id)}var c="Channel";"P"===t.type&&(c="Group");var u=[];return i?u.push(React.createElement("li",{key:"edit_header_direct",role:"presentation"},React.createElement(L.default,{role:"menuitem",dialogType:R.default,dialogProps:{channel:t}},"Set Channel Header..."))):(u.push(React.createElement("li",{key:"view_info",role:"presentation"},React.createElement(L.default,{role:"menuitem",dialogType:k.default,dialogProps:{channel:t}},"View Info"))),F.default.isDefault(t)||(u.push(React.createElement("li",{key:"add_members",role:"presentation"},React.createElement(L.default,{role:"menuitem",dialogType:M.default,dialogProps:{channel:t}},"Add Members"))),l&&u.push(React.createElement("li",{key:"manage_members",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return e.setState({showMembersModal:!0})}},"Manage Members")))),u.push(React.createElement("li",{key:"set_channel_header",role:"presentation"},React.createElement(L.default,{role:"menuitem",dialogType:R.default,dialogProps:{channel:t}},"Set "+c+" Header..."))),u.push(React.createElement("li",{key:"set_channel_purpose",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return e.setState({showEditChannelPurposeModal:!0})}},"Set ",c," Purpose..."))),u.push(React.createElement("li",{key:"notification_preferences",role:"presentation"},React.createElement(L.default,{role:"menuitem",dialogType:P.default,dialogProps:{channel:t}},"Notification Preferences"))),l&&(u.push(React.createElement("li",{key:"rename_channel",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#rename_channel","data-display":t.display_name,"data-name":t.name,"data-channelid":t.id},"Rename ",c,"..."))),F.default.isDefault(t)||u.push(React.createElement("li",{key:"delete_channel",role:"presentation"},React.createElement(L.default,{role:"menuitem",dialogType:I.default,dialogProps:{channel:t}},"Delete ",c,"...")))),F.default.isDefault(t)||u.push(React.createElement("li",{key:"leave_channel",role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleLeave},"Leave ",c)))),React.createElement("div",null,React.createElement("table",{className:"channel-header alt"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("th",null,React.createElement("div",{className:"channel-header__info"},React.createElement("div",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",
type:"button",id:"channel_header_dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("strong",{className:"heading"},n," "),React.createElement("span",{className:"glyphicon glyphicon-chevron-down header-dropdown__icon"})),React.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"channel_header_dropdown"},u)),React.createElement(le,{trigger:["hover","focus"],placement:"bottom",overlay:s,ref:"headerOverlay"},React.createElement("div",{onClick:Z.handleClick,className:"description",dangerouslySetInnerHTML:{__html:Z.formatText(t.header,{singleline:!0,mentionHighlight:!1})}})))),React.createElement("th",null,React.createElement(E.default,{members:this.state.users,memberCount:this.state.userCount,channelId:t.id})),React.createElement("th",{className:"search-bar__container"},React.createElement(g.default,null)),React.createElement("th",null,React.createElement("div",{className:"dropdown channel-header__links"},React.createElement(le,{delayShow:se.default.OVERLAY_TIME_DELAY,placement:"bottom",overlay:a},React.createElement("a",{href:"#",type:"button",onClick:this.searchMentions},"@"))))))),React.createElement(w.default,{show:this.state.showEditChannelPurposeModal,onModalDismissed:function(){return e.setState({showEditChannelPurposeModal:!1})},channel:t}),React.createElement(j.default,{show:this.state.showMembersModal,onModalDismissed:function(){return e.setState({showMembersModal:!1})},channel:t}))}}]),t}(React.Component);a.default=oe},{"../dispatcher/app_dispatcher.jsx":281,"../stores/channel_store.jsx":325,"../stores/preference_store.jsx":330,"../stores/search_store.jsx":331,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/text_formatting.jsx":343,"../utils/utils.jsx":344,"./channel_info_modal.jsx":143,"./channel_invite_modal.jsx":144,"./channel_members_modal.jsx":146,"./channel_notifications_modal.jsx":147,"./delete_channel_modal.jsx":155,"./edit_channel_header_modal.jsx":158,"./edit_channel_purpose_modal.jsx":159,"./message_wrapper.jsx":181,"./popover_list_members.jsx":193,"./search_bar.jsx":214,"./toggle_modal_button.jsx":257,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],143:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=ReactBootstrap.Modal,v=function(e){function t(){return(0,o.default)(this,t),(0,m.default)(this,(0,l.default)(t).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.channel;e||(e={display_name:"No Channel Found",name:"No Channel Found",purpose:"No Channel Found",id:"No Channel Found"});var t=g.getShortenedTeamURL()+e.name;return React.createElement(b,{show:this.props.show,onHide:this.props.onHide},React.createElement(b.Header,{closeButtton:!0},e.display_name),React.createElement(b.Body,{ref:"modalBody"},React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel Name:"),React.createElement("div",{className:"col-sm-9"},e.display_name)),React.createElement("div",{className:"row form-group"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel URL:"),React.createElement("div",{className:"col-sm-9"},t)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel ID:"),React.createElement("div",{className:"col-sm-9"},e.id)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 info__label"},"Channel Purpose:"),React.createElement("div",{className:"col-sm-9"},e.purpose))),React.createElement(b.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onHide},"Close")))}}]),t}(React.Component);a.default=v,v.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired,channel:React.PropTypes.object.isRequired}},{"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],144:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./member_list.jsx"),g=n(f),b=e("./loading_screen.jsx"),v=n(b),_=e("../stores/user_store.jsx"),E=n(_),y=e("../stores/channel_store.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=e("../utils/client.jsx"),k=s(S),N=e("../utils/async_client.jsx"),M=s(N),x=ReactBootstrap.Modal,j=function(e){function t(){(0,o.default)(this,t);var e=(0,m.default)(this,(0,l.default)(t).call(this));return e.onListenerChange=e.onListenerChange.bind(e),e.handleInvite=e.handleInvite.bind(e),e.state={},e}return(0,h.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.show||e.show?w.areObjectsEqual(this.props,e)&&w.areObjectsEqual(this.state,t)?!1:!0:!1}},{key:"getStateFromStores",value:function(){var e=E.default.getActiveOnlyProfiles();if($.isEmptyObject(e))return{loading:!0};var t=R.default.getCurrentExtraInfo();if(t.member_count!==t.members.length)return M.getChannelExtraInfo(this.props.channel.id,-1),{loading:!0};var a=t.members.map(function(e){return e.id}),s=[];for(var n in e)-1===a.indexOf(n)&&s.push(e[n]);return s.sort(function(e,t){return e.username.localeCompare(t.username)}),{nonmembers:s,loading:!1}}},{key:"onShow",value:function(){$(window).width()>768?($(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-200)):$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-150)}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillReceiveProps",value:function(e){!this.props.show&&e.show?(R.default.addExtraInfoChangeListener(this.onListenerChange),R.default.addChangeListener(this.onListenerChange),E.default.addChangeListener(this.onListenerChange),this.onListenerChange()):this.props.show&&!e.show&&(R.default.removeExtraInfoChangeListener(this.onListenerChange),R.default.removeChangeListener(this.onListenerChange),E.default.removeChangeListener(this.onListenerChange))}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();w.areObjectsEqual(this.state,e)||this.setState(e)}},{key:"handleInvite",value:function(e){var t=this,a={};a.user_id=e,k.addChannelMember(this.props.channel.id,a,function(){t.setState({inviteError:null}),M.getChannelExtraInfo()},function(e){t.setState({inviteError:e.message})})}},{key:"render",value:function(){var e=null;this.state.inviteError&&(e=React.createElement("label",{className:"has-error control-label"},this.state.inviteError));var t=R.default.getCurrentMember(),a=!1;t&&(a=w.isAdmin(t.roles)||w.isAdmin(E.default.getCurrentUser().roles));var s;return s=this.state.loading?React.createElement(v.default,null):React.createElement(g.default,{memberList:this.state.nonmembers,isAdmin:a,handleInvite:this.handleInvite}),React.createElement(x,{dialogClassName:"more-modal",show:this.props.show,onHide:this.props.onHide},React.createElement(x.Header,{closeButton:!0},React.createElement(x.Title,null,"Add New Members to ",React.createElement("span",{className:"name"},this.props.channel.display_name))),React.createElement(x.Body,{ref:"modalBody"},e,s),React.createElement(x.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onHide},"Close")))}}]),t}(React.Component);a.default=j,j.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired,channel:React.PropTypes.object.isRequired}},{"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./loading_screen.jsx":173,"./member_list.jsx":177,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],145:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/async_client.jsx"),g=s(f),b=e("../stores/socket_store.jsx"),v=n(b),_=e("../stores/channel_store.jsx"),E=n(_),y=e("../stores/post_store.jsx"),R=n(y),C=e("../stores/user_store.jsx"),w=n(C),S=e("../stores/preference_store.jsx"),k=n(S),N=e("../utils/utils.jsx"),M=s(N),x=e("../utils/constants.jsx"),j=n(x),T=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.intervalId=null,a.onSocketChange=a.onSocketChange.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){g.getPosts(E.default.getCurrentId()),g.getChannels(),g.getChannelExtraInfo(),g.findTeams(),g.getMyTeam(),setTimeout(function(){return g.getStatuses()},3e3),R.default.clearPendingPosts(),this.intervalId=setInterval(function(){return g.getStatuses()},3e4);var e=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);e&&$("body").addClass("ios"),window.isActive=!0,$(window).on("focus",function(){g.updateLastViewedAt(),window.isActive=!0}),$(window).on("blur",function(){window.isActive=!1}),v.default.addChangeListener(this.onSocketChange);var t=w.default.getCurrentUser();$.isPlainObject(t.theme_props)&&!$.isEmptyObject(t.theme_props)?M.applyTheme(t.theme_props):M.applyTheme(j.default.THEMES.default);var a=k.default.get(j.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"selected_font",j.default.DEFAULT_FONT);M.applyFont(a),$("body").on("mouseenter mouseleave",".post",function(e){"mouseenter"===e.type?($(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--after"),$(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--before")):($(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--after"),$(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--before"))}),$("body").on("mouseenter mouseleave",".post.post--comment.same--root",function(e){"mouseenter"===e.type?($(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--comment"),$(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--comment")):($(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--comment"),$(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--comment"))}),$(window).on("keydown.preventBackspace",function(e){8!==e.which||$(e.target).is("input, textarea")||e.preventDefault()})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId),$(window).off("focus"),$(window).off("blur"),v.default.removeChangeListener(this.onSocketChange),$("body").off("click.userpopover"),$("body").off("mouseenter mouseleave",".post"),$("body").off("mouseenter mouseleave",".post.post--comment.same--root"),$(".modal").off("show.bs.modal"),$(window).off("keydown.preventBackspace")}},{key:"onSocketChange",value:function(e){e&&e.user_id&&e.user_id!==w.default.getCurrentId()&&w.default.setStatus(e.user_id,"online")}},{key:"render",value:function(){return React.createElement("div",null)}}]),t}(React.Component);a.default=T},{"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/preference_store.jsx":330,"../stores/socket_store.jsx":332,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],146:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./loading_screen.jsx"),g=n(f),b=e("./member_list.jsx"),v=n(b),_=e("./channel_invite_modal.jsx"),E=n(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("../stores/channel_store.jsx"),w=n(C),S=e("../utils/async_client.jsx"),k=s(S),N=e("../utils/client.jsx"),M=s(N),x=e("../utils/utils.jsx"),j=s(x),T=ReactBootstrap.Modal,P=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getStateFromStores=a.getStateFromStores.bind(a),a.onChange=a.onChange.bind(a),a.handleRemove=a.handleRemove.bind(a),a.state={showInviteModal:!1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return j.areObjectsEqual(this.props,e)&&j.areObjectsEqual(this.state,t)?!1:!0}},{key:"getStateFromStores",value:function(){function e(e,t){return e.username<t.username?-1:e.username>t.username?1:0}var t=w.default.getCurrentExtraInfo();if(t.member_count!==t.members.length)return k.getChannelExtraInfo(this.props.channel.id,-1),{loading:!0};var a=R.default.getActiveOnlyProfiles(),s=t.members,n=[];for(var r in a)if(a.hasOwnProperty(r)){for(var l=!1,i=0;i<s.length;i++)if(s[i].id===r){l=!0;break}l||n.push(a[r])}return s.sort(e),n.sort(e),{nonmemberList:n,memberList:s,loading:!1}}},{key:"onShow",value:function(){$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"componentWillReceiveProps",value:function(e){!this.props.show&&e.show?(w.default.addExtraInfoChangeListener(this.onChange),w.default.addChangeListener(this.onChange),this.onChange()):this.props.show&&!e.show&&(w.default.removeExtraInfoChangeListener(this.onChange),w.default.removeChangeListener(this.onChange))}},{key:"onChange",value:function(){var e=this.getStateFromStores();j.areObjectsEqual(this.state,e)||this.setState(e)}},{key:"handleRemove",value:function(e){for(var t=this,a=this.state.memberList,s=!1,n=0;n<a.length;n++)if(a[n].id===e){s=!0;break}if(s){var r={};r.user_id=e,M.removeChannelMember(w.default.getCurrentId(),r,function(){for(var s=void 0,n=0;n<a.length;n++)if(e===a[n].id){s=a[n],a.splice(n,1);break}var r=t.state.nonmemberList;s&&r.push(s),t.setState({memberList:a,nonmemberList:r}),k.getChannelExtraInfo()},function(e){t.setState({inviteError:e.message})})}}},{key:"render",value:function(){var e=this,t=1e3;j.windowHeight()<=1200&&(t=j.windowHeight()-300);var a=w.default.getCurrentMember(),s=!1;a&&(s=j.isAdmin(a.roles)||j.isAdmin(R.default.getCurrentUser().roles));var n=void 0;return n=this.state.loading?React.createElement(g.default,null):React.createElement("div",{className:"team-member-list"},React.createElement(v.default,{memberList:this.state.memberList,isAdmin:s,handleRemove:this.handleRemove})),React.createElement("div",null,React.createElement(T,{dialogClassName:"more-modal",show:this.props.show,onHide:this.props.onModalDismissed},React.createElement(T.Header,{closeButton:!0},React.createElement(T.Title,null,React.createElement("span",{className:"name"},this.props.channel.display_name)," Members"),React.createElement("a",{className:"btn btn-md btn-primary",href:"#",onClick:function(){e.setState({showInviteModal:!0}),e.props.onModalDismissed()}},React.createElement("i",{className:"glyphicon glyphicon-envelope"})," Add New Members")),React.createElement(T.Body,{ref:"modalBody",style:{maxHeight:t}},n),React.createElement(T.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onModalDismissed},"Close"))),React.createElement(E.default,{show:this.state.showInviteModal,onHide:function(){return e.setState({showInviteModal:!1})},channel:this.props.channel}))}}]),t}(React.Component);a.default=P,P.defaultProps={show:!1},P.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired,channel:React.PropTypes.object.isRequired}},{"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./channel_invite_modal.jsx":144,"./loading_screen.jsx":173,"./member_list.jsx":177,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],147:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./setting_item_min.jsx"),g=n(f),b=e("./setting_item_max.jsx"),v=n(b),_=e("../utils/client.jsx"),E=s(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("../stores/channel_store.jsx"),w=n(C),S=ReactBootstrap.Modal,k=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.onListenerChange=a.onListenerChange.bind(a),a.updateSection=a.updateSection.bind(a),a.handleSubmitNotifyLevel=a.handleSubmitNotifyLevel.bind(a),a.handleUpdateNotifyLevel=a.handleUpdateNotifyLevel.bind(a),a.createNotifyLevelSection=a.createNotifyLevelSection.bind(a),a.handleSubmitMarkUnreadLevel=a.handleSubmitMarkUnreadLevel.bind(a),a.handleUpdateMarkUnreadLevel=a.handleUpdateMarkUnreadLevel.bind(a),a.createMarkUnreadLevelSection=a.createMarkUnreadLevelSection.bind(a);var s=w.default.getMember(e.channel.id);return a.state={notifyLevel:s.notify_props.desktop,markUnreadLevel:s.notify_props.mark_unread,channelId:w.default.getCurrentId(),activeSection:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){!this.props.show&&e.show?(this.onListenerChange(),w.default.addChangeListener(this.onListenerChange)):w.default.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=w.default.getCurrentId();if(e){var t={channelId:e},a=w.default.getMember(e);(a.notify_props.desktop!==this.state.notifyLevel||a.notify_props.mark_unread!==this.state.mark_unread)&&(t.notifyLevel=a.notify_props.desktop,t.markUnreadLevel=a.notify_props.mark_unread),this.setState(t)}}},{key:"updateSection",value:function(e){this.setState({activeSection:e})}},{key:"handleSubmitNotifyLevel",value:function(){var e=this,t=this.state.channelId,a=this.state.notifyLevel;if(w.default.getMember(t).notify_props.desktop===a)return void this.updateSection("");var s={};s.channel_id=t,s.user_id=R.default.getCurrentId(),s.desktop=a,E.updateNotifyProps(s,function(){var s=w.default.getMember(t);s.notify_props.desktop=a,w.default.setChannelMember(s),e.updateSection("")},function(t){e.setState({serverError:t.message})})}},{key:"handleUpdateNotifyLevel",value:function(e){this.setState({notifyLevel:e})}},{key:"createNotifyLevelSection",value:function(e){var t,a=R.default.getCurrentUser(),s=a.notify_props.desktop,n=void 0;if(n="all"===s?"For all activity":"mention"===s?"Only for mentions":"Never","desktop"===this.state.activeSection){var r=[!1,!1,!1,!1];"default"===this.state.notifyLevel?r[0]=!0:"all"===this.state.notifyLevel?r[1]=!0:"mention"===this.state.notifyLevel?r[2]=!0:r[3]=!0;var l=[];l.push(React.createElement("div",{key:"channel-notification-level-radio"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[0],onChange:this.handleUpdateNotifyLevel.bind(this,"default")}),"Global default ("+n+")"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[1],onChange:this.handleUpdateNotifyLevel.bind(this,"all")}),"For all activity"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[2],onChange:this.handleUpdateNotifyLevel.bind(this,"mention")}),"Only for mentions"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[3],onChange:this.handleUpdateNotifyLevel.bind(this,"none")}),"Never")))),t=function(e){this.updateSection(""),this.onListenerChange(),e.preventDefault()}.bind(this);var i=React.createElement("span",null,'Selecting an option other than "Default" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.');return React.createElement(v.default,{title:"Send desktop notifications",inputs:l,submit:this.handleSubmitNotifyLevel,server_error:e,updateSection:t,extraInfo:i})}var o;return o="default"===this.state.notifyLevel?"Global default ("+n+")":"mention"===this.state.notifyLevel?"Only for mentions":"all"===this.state.notifyLevel?"For all activity":"Never",t=function(e){this.updateSection("desktop"),e.preventDefault()}.bind(this),React.createElement(g.default,{title:"Send desktop notifications",describe:o,updateSection:t})}},{key:"handleSubmitMarkUnreadLevel",value:function(){var e=this,t=this.state.channelId,a=this.state.markUnreadLevel;if(w.default.getMember(t).notify_props.mark_unread===a)return void this.updateSection("");var s={channel_id:t,user_id:R.default.getCurrentId(),mark_unread:a};E.updateNotifyProps(s,function(){var s=w.default.getMember(t);s.notify_props.mark_unread=a,w.default.setChannelMember(s),e.updateSection("")},function(t){e.setState({serverError:t.message})})}},{key:"handleUpdateMarkUnreadLevel",value:function(e){this.setState({markUnreadLevel:e})}},{key:"createMarkUnreadLevelSection",value:function(e){var t=void 0;if("markUnreadLevel"===this.state.activeSection){var a=[React.createElement("div",{key:"channel-notification-unread-radio"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:"all"===this.state.markUnreadLevel,onChange:this.handleUpdateMarkUnreadLevel.bind(this,"all")}),"For all unread messages"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:"mention"===this.state.markUnreadLevel,onChange:this.handleUpdateMarkUnreadLevel.bind(this,"mention")}),"Only for mentions"),React.createElement("br",null)))],s=function(e){this.updateSection(""),this.onListenerChange(),e.preventDefault()}.bind(this),n=React.createElement("span",null,'The channel name is bolded in the sidebar when there are unread messages. Selecting "Only for mentions" will bold the channel only when you are mentioned.');t=React.createElement(v.default,{title:"Mark Channel Unread",inputs:a,submit:this.handleSubmitMarkUnreadLevel,server_error:e,updateSection:s,extraInfo:n})}else{var r=void 0;r=this.state.markUnreadLevel&&"all"!==this.state.markUnreadLevel?"Only for mentions":"For all unread messages";var s=function(e){this.updateSection("markUnreadLevel"),e.preventDefault()}.bind(this);t=React.createElement(g.default,{title:"Mark Channel Unread",describe:r,updateSection:s})}return t}},{key:"render",value:function(){var e=null;return this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement(S,{show:this.props.show,dialogClassName:"settings-modal",onHide:this.props.onHide},React.createElement(S.Header,{closeButton:!0},React.createElement(S.Title,null,"Notification Preferences for ",React.createElement("span",{className:"name"},this.props.channel.display_name))),React.createElement(S.Body,null,React.createElement("div",{className:"settings-table"},React.createElement("div",{className:"settings-content"},React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("br",null),React.createElement("div",{className:"divider-dark first"}),this.createNotifyLevelSection(e),React.createElement("div",{className:"divider-light"}),this.createMarkUnreadLevelSection(e),React.createElement("div",{className:"divider-dark"})))),e))}}]),t}(React.Component);a.default=k,k.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired,channel:React.PropTypes.object.isRequired}},{"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/client.jsx":338,"./setting_item_max.jsx":218,"./setting_item_min.jsx":219,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],148:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../components/center_panel.jsx"),f=s(h),g=e("../components/sidebar.jsx"),b=s(g),v=e("../components/sidebar_right.jsx"),_=s(v),E=e("../components/sidebar_right_menu.jsx"),y=s(E),R=function(e){function t(e){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"sidebar--right",id:"sidebar-right"},React.createElement(_.default,null)),React.createElement("div",{className:"sidebar--menu",id:"sidebar-menu"},React.createElement(y.default,null)),React.createElement("div",{className:"sidebar--left",id:"sidebar-left"},React.createElement(b.default,null)),React.createElement(f.default,null))}}]),t}(React.Component);a.default=R,R.defaultProps={},R.propTypes={}},{"../components/center_panel.jsx":140,"../components/sidebar.jsx":223,"../components/sidebar_right.jsx":225,"../components/sidebar_right_menu.jsx":226,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],149:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./email_to_sso.jsx"),f=s(h),g=e("./sso_to_email.jsx"),b=s(g),v=e("mm-intl"),_=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=void 0;return e=""===this.props.email?React.createElement("p",null,React.createElement(v.FormattedMessage,{id:"claim.account.noEmail",defaultMessage:"No email specified"})):""===this.props.currentType&&""!==this.props.newType?React.createElement(f.default,{email:this.props.email,type:this.props.newType,teamName:this.props.teamName,teamDisplayName:this.props.teamDisplayName}):React.createElement(b.default,{email:this.props.email,currentType:this.props.currentType,teamName:this.props.teamName,teamDisplayName:this.props.teamDisplayName}),React.createElement("div",null,e)}}]),t}(React.Component);a.default=_,_.defaultProps={},_.propTypes={currentType:React.PropTypes.string.isRequired,newType:React.PropTypes.string.isRequired,email:React.PropTypes.string.isRequired,teamName:React.PropTypes.string.isRequired,teamDisplayName:React.PropTypes.string.isRequired}},{"./email_to_sso.jsx":150,"./sso_to_email.jsx":151,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],150:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/utils.jsx"),g=s(f),b=e("../../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({pwdError:{id:"claim.email_to_sso.pwdError",defaultMessage:"Please enter your password."},pwd:{id:"claim.email_to_sso.pwd",defaultMessage:"Password"}}),y=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.submit=t.submit.bind(t),t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"submit",value:function(e){var t=this;e.preventDefault();var a={},s=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!s)return a.error=this.props.intl.formatMessage(E.pwdError),void this.setState(a);a.error=null,this.setState(a);var n={};n.password=s,n.email=this.props.email,n.team_name=this.props.teamName,n.service=this.props.type,v.switchToSSO(n,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){t.setState({error:e})})}},{key:"render",value:function(){var e=null;
this.state.error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";e&&(a+=" has-error");var s=g.toTitleCase(this.props.type)+" SSO";return React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"claim.email_to_sso.title",defaultMessage:"Switch Email/Password Account to {uiType}",values:{uiType:s}})),React.createElement("form",{onSubmit:this.submit},React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"claim.email_to_sso.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with {type} SSO",values:{type:g.toTitleCase(this.props.type)}})),React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"claim.email_to_sso.enterPwd",defaultMessage:"Enter the password for your {team} {site} account",values:{team:this.props.teamDisplayName,site:t.window.mm_config.SiteName}})),React.createElement("div",{className:a},React.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:this.props.intl.formatMessage(E.pwd),spellCheck:"false"})),e,React.createElement("button",{type:"submit",className:"btn btn-primary"},React.createElement(_.FormattedMessage,{id:"claim.email_to_sso.switchTo",defaultMessage:"Switch account to {uiType}",values:{uiType:s}})))))}}]),a}(React.Component);y.defaultProps={},y.propTypes={intl:_.intlShape.isRequired,type:React.PropTypes.string.isRequired,email:React.PropTypes.string.isRequired,teamName:React.PropTypes.string.isRequired,teamDisplayName:React.PropTypes.string.isRequired},a.default=(0,_.injectIntl)(y)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/client.jsx":338,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],151:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/utils.jsx"),g=s(f),b=e("../../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({enterPwd:{id:"claim.sso_to_email.enterPwd",defaultMessage:"Please enter a password."},pwdNotMatch:{id:"claim.sso_to_email.pwdNotMatch",defaultMessage:"Password do not match."},newPwd:{id:"claim.sso_to_email.newPwd",defaultMessage:"New Password"},confirm:{id:"claim.sso_to_email.confirm",defaultMessage:"Confirm Password"}}),y=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.submit=t.submit.bind(t),t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"submit",value:function(e){var t=this,a=this.props.intl.formatMessage;e.preventDefault();var s={},n=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!n)return s.error=a(E.enterPwd),void this.setState(s);var r=ReactDOM.findDOMNode(this.refs.passwordconfirm).value.trim();if(!r||n!==r)return s.error=a(E.pwdNotMatch),void this.setState(s);s.error=null,this.setState(s);var l={};l.password=n,l.email=this.props.email,l.team_name=this.props.teamName,v.switchToEmail(l,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){t.setState({error:e})})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,a=null;this.state.error&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var s="form-group";a&&(s+=" has-error");var n=g.toTitleCase(this.props.currentType)+" SSO";return React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"claim.sso_to_email.title",defaultMessage:"Switch {type} Account to Email",values:{type:n}})),React.createElement("form",{onSubmit:this.submit},React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"claim.sso_to_email.description",defaultMessage:"Upon changing your account type, you will only be able to login with your email and password."})),React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"claim.sso_to_email_newPwd",defaultMessage:"Enter a new password for your {team} {site} account",values:{team:this.props.teamDisplayName,site:t.window.mm_config.SiteName}})),React.createElement("div",{className:s},React.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:e(E.newPwd),spellCheck:"false"})),React.createElement("div",{className:s},React.createElement("input",{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:e(E.confirm),spellCheck:"false"})),a,React.createElement("button",{type:"submit",className:"btn btn-primary"},React.createElement(_.FormattedMessage,{id:"claim.sso_to_email.switchTo",defaultMessage:"Switch {type} to email and password",values:{type:n}})))))}}]),a}(React.Component);y.defaultProps={},y.propTypes={intl:_.intlShape.isRequired,currentType:React.PropTypes.string.isRequired,email:React.PropTypes.string.isRequired,teamName:React.PropTypes.string.isRequired,teamDisplayName:React.PropTypes.string.isRequired},a.default=(0,_.injectIntl)(y)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/client.jsx":338,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],152:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=ReactBootstrap.Modal,f=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.handleConfirm=a.handleConfirm.bind(a),a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"handleConfirm",value:function(){this.props.onConfirm()}},{key:"render",value:function(){return React.createElement(h,{className:"modal-confirm",show:this.props.show,onHide:this.props.onCancel},React.createElement(h.Header,{closeButton:!1},React.createElement(h.Title,null,this.props.title)),React.createElement(h.Body,null,this.props.message),React.createElement(h.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onCancel},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.props.onConfirm},this.props.confirm_button)))}}]),t}(React.Component);a.default=f,f.defaultProps={title:"",message:"",confirm_button:""},f.propTypes={show:React.PropTypes.bool.isRequired,title:React.PropTypes.string,message:React.PropTypes.string,confirm_button:React.PropTypes.string,onConfirm:React.PropTypes.func.isRequired,onCancel:React.PropTypes.func.isRequired}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],153:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../dispatcher/app_dispatcher.jsx"),g=n(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/async_client.jsx"),E=s(_),y=e("../stores/socket_store.jsx"),R=n(y),C=e("../stores/channel_store.jsx"),w=n(C),S=e("../stores/user_store.jsx"),k=n(S),N=e("../stores/post_store.jsx"),M=n(N),x=e("../stores/preference_store.jsx"),j=n(x),T=e("./textbox.jsx"),P=n(T),O=e("./msg_typing.jsx"),I=n(O),D=e("./file_upload.jsx"),L=n(D),A=e("./file_preview.jsx"),F=n(A),U=e("../utils/utils.jsx"),H=s(U),B=e("../utils/constants.jsx"),q=n(B),G=q.default.ActionTypes,V=q.default.KeyCodes,W=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.lastTime=0,a.handleSubmit=a.handleSubmit.bind(a),a.commentMsgKeyPress=a.commentMsgKeyPress.bind(a),a.handleUserInput=a.handleUserInput.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleUploadStart=a.handleUploadStart.bind(a),a.handleFileUploadComplete=a.handleFileUploadComplete.bind(a),a.handleUploadError=a.handleUploadError.bind(a),a.removePreview=a.removePreview.bind(a),a.getFileCount=a.getFileCount.bind(a),a.handleResize=a.handleResize.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),M.default.clearCommentDraftUploads();var s=M.default.getCommentDraft(a.props.rootId);return a.state={messageText:s.message,uploadsInProgress:s.uploadsInProgress,previews:s.previews,submitting:!1,windowWidth:H.windowWidth(),ctrlSend:j.default.getBool(q.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){j.default.addChangeListener(this.onPreferenceChange),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){j.default.removeChangeListener(this.onPreferenceChange),window.removeEventListener("resize",this.handleResize)}},{key:"onPreferenceChange",value:function(){this.setState({ctrlSend:j.default.getBool(q.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")})}},{key:"handleResize",value:function(){this.setState({windowWidth:H.windowWidth()})}},{key:"componentDidUpdate",value:function(e,t){t.uploadsInProgress<this.state.uploadsInProgress&&($(".post-right__scroll").scrollTop($(".post-right__scroll")[0].scrollHeight),this.state.windowWidth>768&&$(".post-right__scroll").perfectScrollbar("update"))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!(this.state.uploadsInProgress.length>0||this.state.submitting)){var t={};if(t.filenames=[],t.message=this.state.messageText,0!==t.message.trim().length||0!==this.state.previews.length){if(t.message.length>q.default.CHARACTER_LIMIT)return void this.setState({postError:"Comment length must be less than "+q.default.CHARACTER_LIMIT+" characters."});var a=k.default.getCurrentId();t.channel_id=this.props.channelId,t.root_id=this.props.rootId,t.parent_id=this.props.rootId,t.filenames=this.state.previews;var s=H.getTimestamp();t.pending_post_id=a+":"+s,t.user_id=a,t.create_at=s,M.default.storePendingPost(t),M.default.storeCommentDraft(this.props.rootId,null),v.createPost(t,w.default.getCurrent(),function(e){E.getPosts(this.props.channelId);var t=w.default.get(this.props.channelId),a=w.default.getMember(this.props.channelId);a.msg_count=t.total_msg_count,a.last_viewed_at=Date.now(),w.default.setChannelMember(a),g.default.handleServerAction({type:G.RECIEVED_POST,post:e})}.bind(this),function(e){var a={};"api.post.create_post.root_id.app_error"===e.id?(M.default.removePendingPost(t.channel_id,t.pending_post_id),$("#post_deleted").length>0&&$("#post_deleted").modal("show")):(t.state=q.default.POST_FAILED,M.default.updatePendingPost(t)),a.submitting=!1,this.setState(a)}.bind(this)),this.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null})}}}},{key:"commentMsgKeyPress",value:function(e){(this.state.ctrlSend&&e.ctrlKey||!this.state.ctrlSend)&&(e.which!==V.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),ReactDOM.findDOMNode(this.refs.textbox).blur(),this.handleSubmit(e)));var t=Date.now();t-this.lastTime>q.default.UPDATE_TYPING_MS&&(R.default.sendMessage({channel_id:this.props.channelId,action:"typing",props:{parent_id:this.props.rootId}}),this.lastTime=t)}},{key:"handleUserInput",value:function(e){var t=M.default.getCommentDraft(this.props.rootId);t.message=e,M.default.storeCommentDraft(this.props.rootId,t),$(".post-right__scroll").scrollTop($(".post-right__scroll")[0].scrollHeight),$(".post-right__scroll").perfectScrollbar("update"),this.setState({messageText:e})}},{key:"handleKeyDown",value:function(e){if(this.state.ctrlSend&&e.keyCode===V.ENTER&&e.ctrlKey===!0)return void this.commentMsgKeyPress(e);if(e.keyCode===V.UP&&""===this.state.messageText){e.preventDefault();var t=w.default.getCurrentId(),a=M.default.getCurrentUsersLatestPost(t,this.props.rootId);if(!a)return;g.default.handleViewAction({type:G.RECIEVED_EDIT_POST,refocusId:"#reply_textbox",title:"Comment",message:a.message,postId:a.id,channelId:a.channel_id,comments:M.default.getCommentCount(a)})}}},{key:"handleUploadStart",value:function(e){var t=M.default.getCommentDraft(this.props.rootId);t.uploadsInProgress=t.uploadsInProgress.concat(e),M.default.storeCommentDraft(this.props.rootId,t),this.setState({uploadsInProgress:t.uploadsInProgress})}},{key:"handleFileUploadComplete",value:function(e,t){for(var a=M.default.getCommentDraft(this.props.rootId),s=0;s<t.length;s++){var n=a.uploadsInProgress.indexOf(t[s]);-1!==n&&a.uploadsInProgress.splice(n,1)}a.previews=a.previews.concat(e),M.default.storeCommentDraft(this.props.rootId,a),this.setState({uploadsInProgress:a.uploadsInProgress,previews:a.previews})}},{key:"handleUploadError",value:function(e,t){if(-1===t)this.setState({serverError:e});else{var a=M.default.getCommentDraft(this.props.rootId),s=a.uploadsInProgress.indexOf(t);-1!==s&&a.uploadsInProgress.splice(s,1),M.default.storeCommentDraft(this.props.rootId,a),this.setState({uploadsInProgress:a.uploadsInProgress,serverError:e})}}},{key:"removePreview",value:function(e){var t=this.state.previews,a=this.state.uploadsInProgress,s=t.indexOf(e);-1===s?(s=a.indexOf(e),-1!==s&&(a.splice(s,1),this.refs.fileUpload.cancelUpload(e))):t.splice(s,1);var n=M.default.getCommentDraft(this.props.rootId);n.previews=t,n.uploadsInProgress=a,M.default.storeCommentDraft(this.props.rootId,n),this.setState({previews:t,uploadsInProgress:a})}},{key:"componentWillReceiveProps",value:function(e){if(e.rootId!==this.props.rootId){var t=M.default.getCommentDraft(e.rootId);this.setState({messageText:t.message,uploadsInProgress:t.uploadsInProgress,previews:t.previews})}}},{key:"getFileCount",value:function(){return this.state.previews.length+this.state.uploadsInProgress.length}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t=null;this.state.postError&&(t=React.createElement("label",{className:"control-label"},this.state.postError));var a=null;(this.state.previews.length>0||this.state.uploadsInProgress.length>0)&&(a=React.createElement(F.default,{files:this.state.previews,onRemove:this.removePreview,uploadsInProgress:this.state.uploadsInProgress}));var s="post-create-footer";t&&(s+=" has-error");var n=null;return this.state.uploadsInProgress.length>0&&(n=React.createElement("span",{className:"pull-right post-right-comments-upload-in-progress"},1===this.state.uploadsInProgress.length?"File uploading":"Files uploading")),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"post-create"},React.createElement("div",{id:this.props.rootId,className:"post-create-body comment-create-body"},React.createElement("div",{className:"post-body__cell"},React.createElement(P.default,{onUserInput:this.handleUserInput,onKeyPress:this.commentMsgKeyPress,onKeyDown:this.handleKeyDown,messageText:this.state.messageText,createMessage:"Add a comment...",initialText:"",supportsCommands:!1,id:"reply_textbox",ref:"textbox"}),React.createElement(L.default,{ref:"fileUpload",getFileCount:this.getFileCount,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,postType:"comment",channelId:this.props.channelId}))),React.createElement(I.default,{channelId:this.props.channelId,parentId:this.props.rootId}),React.createElement("div",{className:s},React.createElement("input",{type:"button",className:"btn btn-primary comment-btn pull-right",value:"Add Comment",onClick:this.handleSubmit}),n,a,t,e)))}}]),t}(React.Component);a.default=W,W.propTypes={channelId:React.PropTypes.string.isRequired,rootId:React.PropTypes.string.isRequired}},{"../dispatcher/app_dispatcher.jsx":281,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/preference_store.jsx":330,"../stores/socket_store.jsx":332,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./file_preview.jsx":166,"./file_upload.jsx":167,"./msg_typing.jsx":184,"./textbox.jsx":255,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],154:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/assign"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("./msg_typing.jsx"),v=n(b),_=e("./textbox.jsx"),E=n(_),y=e("./file_upload.jsx"),R=n(y),C=e("./file_preview.jsx"),w=n(C),S=e("./tutorial/tutorial_tip.jsx"),k=n(S),N=e("../dispatcher/app_dispatcher.jsx"),M=n(N),x=e("../dispatcher/event_helpers.jsx"),j=s(x),T=e("../utils/client.jsx"),P=s(T),O=e("../utils/async_client.jsx"),I=s(O),D=e("../utils/utils.jsx"),L=s(D),A=e("../stores/channel_store.jsx"),F=n(A),U=e("../stores/post_store.jsx"),H=n(U),B=e("../stores/user_store.jsx"),q=n(B),G=e("../stores/preference_store.jsx"),V=n(G),W=e("../stores/socket_store.jsx"),z=n(W),K=e("../utils/constants.jsx"),Y=n(K),J=Y.default.Preferences,Z=Y.default.TutorialSteps,X=Y.default.ActionTypes,Q=Y.default.KeyCodes,ee=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));a.lastTime=0,a.getCurrentDraft=a.getCurrentDraft.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.postMsgKeyPress=a.postMsgKeyPress.bind(a),a.handleUserInput=a.handleUserInput.bind(a),a.resizePostHolder=a.resizePostHolder.bind(a),a.handleUploadStart=a.handleUploadStart.bind(a),a.handleFileUploadComplete=a.handleFileUploadComplete.bind(a),a.handleUploadError=a.handleUploadError.bind(a),a.removePreview=a.removePreview.bind(a),a.onChange=a.onChange.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.getFileCount=a.getFileCount.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleResize=a.handleResize.bind(a),a.sendMessage=a.sendMessage.bind(a),H.default.clearDraftUploads();var s=a.getCurrentDraft();return a.state={channelId:F.default.getCurrentId(),messageText:s.messageText,uploadsInProgress:s.uploadsInProgress,previews:s.previews,submitting:!1,initialText:s.messageText,windowWidth:L.windowWidth(),windowHeight:L.windowHeight(),ctrlSend:!1,showTutorialTip:!1},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"handleResize",value:function(){this.setState({windowWidth:L.windowWidth(),windowHeight:L.windowHeight()})}},{key:"componentDidUpdate",value:function(e,t){return t.previews.length!==this.state.previews.length?void this.resizePostHolder():t.uploadsInProgress!==this.state.uploadsInProgress?void this.resizePostHolder():t.windowWidth!==this.state.windowWidth||t.windowHeight!==this.state.windowHeight?void this.resizePostHolder():void 0}},{key:"getCurrentDraft",value:function(){var e=H.default.getCurrentDraft(),t={previews:[],messageText:"",uploadsInProgress:[]};return e&&(e.message&&(t.messageText=e.message),e.previews&&(t.previews=e.previews),e.uploadsInProgress&&(t.uploadsInProgress=e.uploadsInProgress)),t}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!(this.state.uploadsInProgress.length>0||this.state.submitting)){var a={};if(a.filenames=[],a.message=this.state.messageText,0!==a.message.trim().length||0!==this.state.previews.length){if(a.message.length>Y.default.CHARACTER_LIMIT)return void this.setState({postError:"Post length must be less than "+Y.default.CHARACTER_LIMIT+" characters."});this.setState({submitting:!0,serverError:null}),0===a.message.indexOf("/")?P.executeCommand(this.state.channelId,a.message,!1,function(e){return"not implemented"===e.response?void t.sendMessage(a):(H.default.storeDraft(e.channel_id,null),t.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null}),void(e.goto_location.length>0&&(window.location.href=e.goto_location)))},function(e){if(e.sendMessage)t.sendMessage(a);else{var s={};s.serverError=e.message,s.submitting=!1,t.setState(s)}}):this.sendMessage(a)}}}},{key:"sendMessage",value:function(e){var t=this;e.channel_id=this.state.channelId,e.filenames=this.state.previews;var a=L.getTimestamp(),s=q.default.getCurrentId();e.pending_post_id=s+":"+a,e.user_id=s,e.create_at=a,e.root_id=this.state.rootId,e.parent_id=this.state.parentId;var n=F.default.get(this.state.channelId);j.emitUserPostedEvent(e),this.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null}),P.createPost(e,n,function(e){I.getPosts();var t=F.default.getMember(n.id);t.msg_count=n.total_msg_count,t.last_viewed_at=Date.now(),F.default.setChannelMember(t),j.emitPostRecievedEvent(e)},function(a){var s={};"api.post.create_post.root_id.app_error"===a.id?($("#post_deleted").length>0&&$("#post_deleted").modal("show"),H.default.removePendingPost(e.pending_post_id)):(e.state=Y.default.POST_FAILED,H.default.updatePendingPost(e)),s.submitting=!1,t.setState(s)})}},{key:"postMsgKeyPress",value:function(e){(this.state.ctrlSend&&e.ctrlKey||!this.state.ctrlSend)&&(e.which!==Q.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),ReactDOM.findDOMNode(this.refs.textbox).blur(),this.handleSubmit(e)));var t=Date.now();t-this.lastTime>Y.default.UPDATE_TYPING_MS&&(z.default.sendMessage({channel_id:this.state.channelId,action:"typing",props:{parent_id:""},state:{}}),this.lastTime=t)}},{key:"handleUserInput",value:function(e){this.setState({messageText:e});var t=H.default.getCurrentDraft();t.message=e,H.default.storeCurrentDraft(t)}},{key:"resizePostHolder",value:function(){this.state.windowWidth>960&&$("#post_textbox").focus()}},{key:"handleUploadStart",value:function(e,t){var a=H.default.getDraft(t);a.uploadsInProgress=a.uploadsInProgress.concat(e),H.default.storeDraft(t,a),this.setState({uploadsInProgress:a.uploadsInProgress})}},{key:"handleFileUploadComplete",value:function(e,t,a){for(var s=H.default.getDraft(a),n=0;n<t.length;n++){var r=s.uploadsInProgress.indexOf(t[n]);-1!==r&&s.uploadsInProgress.splice(r,1)}s.previews=s.previews.concat(e),H.default.storeDraft(a,s),this.setState({uploadsInProgress:s.uploadsInProgress,previews:s.previews})}},{key:"handleUploadError",value:function(e,t){var a=e;if(a&&"string"!=typeof a&&(a=e.message),-1===t)this.setState({serverError:a});else{var s=H.default.getDraft(this.state.channelId),n=s.uploadsInProgress.indexOf(t);-1!==n&&s.uploadsInProgress.splice(n,1),H.default.storeDraft(this.state.channelId,s),this.setState({uploadsInProgress:s.uploadsInProgress,serverError:a})}}},{key:"removePreview",value:function(e){var t=(0,l.default)([],this.state.previews),a=this.state.uploadsInProgress,s=t.indexOf(e);-1===s?(s=a.indexOf(e),-1!==s&&(a.splice(s,1),this.refs.fileUpload.cancelUpload(e))):t.splice(s,1);var n=H.default.getCurrentDraft();n.previews=t,n.uploadsInProgress=a,H.default.storeCurrentDraft(n),this.setState({previews:t,uploadsInProgress:a})}},{key:"componentWillMount",value:function(){var e=V.default.getInt(J.TUTORIAL_STEP,q.default.getCurrentId(),999);this.setState({ctrlSend:V.default.getBool(Y.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),showTutorialTip:e===Z.POST_POPOVER})}},{key:"componentDidMount",value:function(){F.default.addChangeListener(this.onChange),V.default.addChangeListener(this.onPreferenceChange),this.resizePostHolder(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){F.default.removeChangeListener(this.onChange),V.default.removeChangeListener(this.onPreferenceChange),window.removeEventListener("resize",this.handleResize)}},{key:"onChange",value:function(){var e=F.default.getCurrentId();if(this.state.channelId!==e){var t=this.getCurrentDraft();this.setState({channelId:e,messageText:t.messageText,initialText:t.messageText,submitting:!1,serverError:null,postError:null,previews:t.previews,uploadsInProgress:t.uploadsInProgress})}}},{key:"onPreferenceChange",value:function(){var e=V.default.getInt(J.TUTORIAL_STEP,q.default.getCurrentId(),999);this.setState({showTutorialTip:e===Z.POST_POPOVER,ctrlSend:V.default.getBool(Y.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")})}},{key:"getFileCount",value:function(e){if(e===this.state.channelId)return this.state.previews.length+this.state.uploadsInProgress.length;var t=H.default.getDraft(e);return t.previews.length+t.uploadsInProgress.length}},{key:"handleKeyDown",value:function(e){if(this.state.ctrlSend&&e.keyCode===Q.ENTER&&e.ctrlKey===!0)return void this.postMsgKeyPress(e);if(e.keyCode===Q.UP&&""===this.state.messageText){e.preventDefault();var t=F.default.getCurrentId(),a=H.default.getCurrentUsersLatestPost(t);if(!a)return;var s=a.root_id&&a.root_id.length>0?"Comment":"Post";M.default.handleViewAction({type:X.RECIEVED_EDIT_POST,refocusId:"#post_textbox",title:s,message:a.message,postId:a.id,channelId:a.channel_id,comments:H.default.getCommentCount(a)})}}},{key:"createTutorialTip",value:function(){var e=[];return e.push(React.createElement("div",null,React.createElement("h4",null,"Sending Messages"),React.createElement("p",null,"Type here to write a message and press ",React.createElement("strong",null,"Enter")," to post it."),React.createElement("p",null,"Click the ",React.createElement("strong",null,"Attachment")," button to upload an image or a file."))),React.createElement(k.default,{placement:"top",screens:e,overlayClass:"tip-overlay--chat"})}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t=null;this.state.postError&&(t=React.createElement("label",{className:"control-label"},this.state.postError));var a=null;(this.state.previews.length>0||this.state.uploadsInProgress.length>0)&&(a=React.createElement(w.default,{files:this.state.previews,onRemove:this.removePreview,uploadsInProgress:this.state.uploadsInProgress}));var s="post-create-footer";t&&(s+=" has-error");var n=null;return this.state.showTutorialTip&&(n=this.createTutorialTip()),React.createElement("form",{id:"create_post",ref:"topDiv",role:"form",onSubmit:this.handleSubmit},React.createElement("div",{className:"post-create"},React.createElement("div",{className:"post-create-body"},React.createElement("div",{className:"post-body__cell"},React.createElement(E.default,{onUserInput:this.handleUserInput,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onHeightChange:this.resizePostHolder,messageText:this.state.messageText,createMessage:"Write a message...",channelId:this.state.channelId,id:"post_textbox",ref:"textbox"}),React.createElement(R.default,{ref:"fileUpload",getFileCount:this.getFileCount,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,postType:"post",channelId:""})),React.createElement("a",{className:"send-button theme",onClick:this.handleSubmit},React.createElement("i",{className:"fa fa-paper-plane"})),n),React.createElement("div",{className:s},React.createElement(v.default,{channelId:this.state.channelId,parentId:""}),a,t,e)))}}]),t}(React.Component);a.default=ee},{"../dispatcher/app_dispatcher.jsx":281,"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/preference_store.jsx":330,"../stores/socket_store.jsx":332,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./file_preview.jsx":166,"./file_upload.jsx":167,"./msg_typing.jsx":184,"./textbox.jsx":255,"./tutorial/tutorial_tip.jsx":259,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],155:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/async_client.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../stores/team_store.jsx"),E=n(_),y=e("../utils/utils.jsx"),R=s(y),C=ReactBootstrap.Modal,w=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleDelete",value:function(){26===this.props.channel.id.length&&v.deleteChannel(this.props.channel.id,function(){g.getChannels(!0),window.location.href=E.default.getCurrentTeamUrl()+"/channels/town-square"},function(e){g.dispatchError(e,"handleDelete")})}},{key:"render",value:function(){var e=R.getChannelTerm(this.props.channel.type).toLowerCase();return React.createElement(C,{show:this.props.show,onHide:this.props.onHide},React.createElement(C.Header,{closeButton:!0},React.createElement("h4",{className:"modal-title"},"Confirm DELETE Channel")),React.createElement(C.Body,null,"Are you sure you wish to delete the "+this.props.channel.display_name+" "+e+"?"),React.createElement(C.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onHide},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete},"Delete")));
}}]),t}(React.Component);a.default=w,w.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired,channel:React.PropTypes.object.isRequired}},{"../stores/team_store.jsx":334,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],156:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("../stores/post_store.jsx"),v=n(b),_=e("../stores/modal_store.jsx"),E=n(_),y=e("../utils/utils.jsx"),R=s(y),C=e("../utils/async_client.jsx"),w=s(C),S=e("../dispatcher/app_dispatcher.jsx"),k=n(S),N=e("../utils/constants.jsx"),M=n(N),x=ReactBootstrap.Modal,j=M.default.ActionTypes,T=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a.handleToggle=a.handleToggle.bind(a),a.handleHide=a.handleHide.bind(a),a.onListenerChange=a.onListenerChange.bind(a),a.selectedList=null,a.state={show:!1,post:null,commentCount:0,error:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){E.default.addModalListener(j.TOGGLE_DELETE_POST_MODAL,this.handleToggle),v.default.addSelectedPostChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){v.default.removeSelectedPostChangeListener(this.onListenerChange),E.default.removeModalListener(j.TOGGLE_DELETE_POST_MODAL,this.handleToggle)}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.show&&!t.show&&setTimeout(function(){$(ReactDOM.findDOMNode(a.refs.deletePostBtn)).focus()},0)}},{key:"handleDelete",value:function(){var e=this;g.deletePost(this.state.post.channel_id,this.state.post.id,function(){var t=e.selectedList;if(t&&t.order&&t.order.length>0){var a=t.posts[t.order[0]];a.id===e.state.post.id&&!e.state.root_id||a.root_id===e.state.post.id?(k.default.handleServerAction({type:j.RECIEVED_SEARCH,results:null}),k.default.handleServerAction({type:j.RECIEVED_POST_SELECTED,results:null})):a.id===e.state.post.id&&e.state.root_id&&a.root_id&&a.root_id.length>0&&t.posts[a.root_id]&&(t.order=[a.root_id],delete t.posts[a.id],k.default.handleServerAction({type:j.RECIEVED_POST_SELECTED,post_list:t}),k.default.handleServerAction({type:j.RECIEVED_SEARCH,results:null}))}v.default.removePost(e.state.post.id,e.state.post.channel_id),w.getPosts(e.state.post.channel_id)},function(e){w.dispatchError(e,"deletePost")}),this.handleHide()}},{key:"handleToggle",value:function(e,t){this.setState({show:e,post:t.post,commentCount:t.commentCount,error:""})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"onListenerChange",value:function(){var e=v.default.getSelectedPost();R.areObjectsEqual(this.selectedList,e)||(this.selectedList=e)}},{key:"render",value:function(){if(!this.state.post)return null;var e=null;this.state.error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var t="";this.state.commentCount>0&&(t="This post has "+this.state.commentCount+" comment(s) on it.");var a=R.getPostTerm(this.state.post);return React.createElement(x,{show:this.state.show,onHide:this.handleHide},React.createElement(x.Header,{closeButton:!0},React.createElement(x.Title,null,"Confirm "+a+" Delete")),React.createElement(x.Body,null,"Are you sure you want to delete this "+a.toLowerCase()+"?",React.createElement("br",null),React.createElement("br",null),t,e),React.createElement(x.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},"Cancel"),React.createElement("button",{ref:"deletePostBtn",type:"button",className:"btn btn-danger",onClick:this.handleDelete},"Delete")))}}]),t}(React.Component);a.default=T},{"../dispatcher/app_dispatcher.jsx":281,"../stores/modal_store.jsx":328,"../stores/post_store.jsx":329,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],157:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/text_formatting.jsx"),g=s(f),b=e("../stores/user_store.jsx"),v=n(b),_=function(e){function a(e){(0,o.default)(this,a);var s=(0,m.default)(this,(0,l.default)(a).call(this,e));v.default.setCurrentUser(t.window.mm_user||{}),s.state={text:""};var n={text:"## 404"};return e.site?$.get("/static/help/"+e.site+"_"+t.window.mm_locale+".md").then(function(e){s.setState({text:e})},function(){s.setState(n)}):s.setState(n),s}return(0,h.default)(a,e),(0,u.default)(a,[{key:"render",value:function(){return React.createElement("div",{dangerouslySetInnerHTML:{__html:g.formatText(this.state.text)}})}}]),a}(React.Component);a.default=_,_.defaultProps={site:""},_.propTypes={site:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/user_store.jsx":335,"../utils/text_formatting.jsx":343,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],158:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../dispatcher/app_dispatcher.jsx"),g=n(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/constants.jsx"),E=n(_),y=e("../utils/utils.jsx"),R=s(y),C=ReactBootstrap.Modal,w=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.onShow=a.onShow.bind(a),a.onHide=a.onHide.bind(a),a.state={header:e.channel.header,serverError:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.props.show&&this.onShow()}},{key:"componentWillReceiveProps",value:function(e){this.props.channel.header!==e.channel.header&&this.setState({header:e.channel.header})}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"handleChange",value:function(e){this.setState({header:e.target.value})}},{key:"handleSubmit",value:function(){var e=this;v.updateChannelHeader(this.props.channel.id,this.state.header,function(t){e.setState({serverError:""}),e.onHide(),g.default.handleServerAction({type:E.default.ActionTypes.RECIEVED_CHANNEL,channel:t})},function(t){"Invalid channel_header parameter"===t.message?e.setState({serverError:"This channel header is too long, please enter a shorter one"}):e.setState({serverError:t.message})})}},{key:"onShow",value:function(){var e=ReactDOM.findDOMNode(this.refs.textarea);R.placeCaretAtEnd(e)}},{key:"onHide",value:function(){this.setState({serverError:"",header:this.props.channel.header}),this.props.onHide()}},{key:"render",value:function(){var e=null;return this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("br",null),React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement(C,{show:this.props.show,onHide:this.onHide},React.createElement(C.Header,{closeButton:!0},React.createElement(C.Title,null,"Edit Header for "+this.props.channel.display_name)),React.createElement(C.Body,null,React.createElement("p",null,"Edit the text appearing next to the channel name in the channel header."),React.createElement("textarea",{ref:"textarea",className:"form-control no-resize",rows:"6",id:"edit_header",maxLength:"1024",value:this.state.header,onChange:this.handleChange}),e),React.createElement(C.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.onHide},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit},"Save")))}}]),t}(React.Component);a.default=w,w.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired,channel:React.PropTypes.object.isRequired}},{"../dispatcher/app_dispatcher.jsx":281,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],159:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/async_client.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/utils.jsx"),E=s(_),y=ReactBootstrap.Modal,R=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleHide=a.handleHide.bind(a),a.handleSave=a.handleSave.bind(a),a.state={serverError:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidUpdate",value:function(){this.props.show&&$(ReactDOM.findDOMNode(this.refs.purpose)).focus()}},{key:"handleHide",value:function(){this.setState({serverError:""}),this.props.onModalDismissed&&this.props.onModalDismissed()}},{key:"handleSave",value:function(){var e=this;if(this.props.channel){var t={channel_id:this.props.channel.id,channel_purpose:ReactDOM.findDOMNode(this.refs.purpose).value.trim()};v.updateChannelPurpose(t,function(){g.getChannel(e.props.channel.id),e.handleHide()},function(t){"Invalid channel_purpose parameter"===t.message?e.setState({serverError:"This channel purpose is too long, please enter a shorter one"}):e.setState({serverError:t.message})})}}},{key:"render",value:function(){if(!this.props.show)return null;var e=null;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("br",null),React.createElement("label",{className:"control-label"},this.state.serverError)));var t=React.createElement("span",null,"Edit Purpose");return this.props.channel.display_name&&(t=React.createElement("span",null,"Edit Purpose for ",React.createElement("span",{className:"name"},this.props.channel.display_name))),React.createElement(y,{className:"modal-edit-channel-purpose",ref:"modal",show:this.props.show,onHide:this.handleHide},React.createElement(y.Header,{closeButton:!0},React.createElement(y.Title,null,t)),React.createElement(y.Body,null,React.createElement("p",null,"Describe how this "+E.getChannelTerm(this.props.channel.channelType)+' should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join.'),React.createElement("textarea",{ref:"purpose",className:"form-control no-resize",rows:"6",maxLength:"128",defaultValue:this.props.channel.purpose}),e),React.createElement(y.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleSave},"Save")))}}]),t}(React.Component);a.default=R,R.propTypes={show:React.PropTypes.bool.isRequired,channel:React.PropTypes.object,onModalDismissed:React.PropTypes.func.isRequired}},{"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],160:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("../utils/async_client.jsx"),v=s(b),_=e("../dispatcher/event_helpers.jsx"),E=s(_),y=e("./textbox.jsx"),R=n(y),C=e("../stores/browser_store.jsx"),w=n(C),S=e("../stores/post_store.jsx"),k=n(S),N=e("../stores/preference_store.jsx"),M=n(N),x=e("../utils/constants.jsx"),j=n(x),T=j.default.KeyCodes,P=function(e){function t(){(0,o.default)(this,t);var e=(0,m.default)(this,(0,l.default)(t).call(this));return e.handleEdit=e.handleEdit.bind(e),e.handleEditInput=e.handleEditInput.bind(e),e.handleEditKeyPress=e.handleEditKeyPress.bind(e),e.handleUserInput=e.handleUserInput.bind(e),e.handleEditPostEvent=e.handleEditPostEvent.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e.onPreferenceChange=e.onPreferenceChange.bind(e),e.state={editText:"",title:"",post_id:"",channel_id:"",comments:0,refocusId:""},e}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleEdit",value:function(){var e={};if(e.message=this.state.editText.trim(),0===e.message.length){var t=this.state;return delete t.editText,w.default.setItem("edit_state_transfer",t),$("#edit_post").modal("hide"),void E.showDeletePostModal(k.default.getPost(this.state.channel_id,this.state.post_id),this.state.comments)}e.id=this.state.post_id,e.channel_id=this.state.channel_id,g.updatePost(e,function(){v.getPosts(e.channel_id),window.scrollTo(0,0)},function(e){v.dispatchError(e,"updatePost")}),$("#edit_post").modal("hide")}},{key:"handleEditInput",value:function(e){this.setState({editText:e})}},{key:"handleEditKeyPress",value:function(e){this.state.ctrlSend||e.which!==T.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),ReactDOM.findDOMNode(this.refs.editbox).blur(),this.handleEdit(e))}},{key:"handleUserInput",value:function(e){this.setState({editText:e.target.value})}},{key:"handleEditPostEvent",value:function(e){this.setState({editText:e.message||"",title:e.title||"",post_id:e.postId||"",channel_id:e.channelId||"",comments:e.comments||0,refocusId:e.refocusId||""}),$(ReactDOM.findDOMNode(this.refs.modal)).modal("show")}},{key:"handleKeyDown",value:function(e){this.state.ctrlSend&&e.keyCode===T.ENTER&&e.ctrlKey===!0&&this.handleEdit(e)}},{key:"onPreferenceChange",value:function(){this.setState({ctrlSend:M.default.getBool(j.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")})}},{key:"componentDidMount",value:function(){var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",function(){e.setState({editText:"",title:"",channel_id:"",post_id:"",comments:0,refocusId:"",error:""})}),$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",function(t){var a=t.relatedTarget;a&&e.setState({editText:$(a).attr("data-message"),title:$(a).attr("data-title"),channel_id:$(a).attr("data-channelid"),post_id:$(a).attr("data-postid"),comments:$(a).attr("data-comments"),refocusId:$(a).attr("data-refocusid")})}),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",function(){e.refs.editbox.resize(),$("#edit_textbox").get(0).focus()}),$(ReactDOM.findDOMNode(this.refs.modal)).on("hide.bs.modal",function(){""!==e.state.refocusId&&setTimeout(function(){$(e.state.refocusId).get(0).focus()})}),k.default.addEditPostListener(this.handleEditPostEvent),M.default.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){k.default.removeEditPostListner(this.handleEditPostEvent),M.default.removeChangeListener(this.onPreferenceChange)}},{key:"render",value:function(){var e=React.createElement("div",{className:"form-group"},React.createElement("br",null));return this.state.error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("br",null),React.createElement("label",{className:"control-label"},this.state.error))),React.createElement("div",{className:"modal fade edit-modal",ref:"modal",id:"edit_post",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog modal-push-down"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.handleEditClose},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Edit ",this.state.title)),React.createElement("div",{className:"edit-modal-body modal-body"},React.createElement(R.default,{onUserInput:this.handleEditInput,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,messageText:this.state.editText,createMessage:"Edit the post...",supportsCommands:!1,id:"edit_textbox",ref:"editbox"}),e),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleEdit},"Save")))))}}]),t}(React.Component);a.default=P},{"../dispatcher/event_helpers.jsx":282,"../stores/browser_store.jsx":324,"../stores/post_store.jsx":329,"../stores/preference_store.jsx":330,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"./textbox.jsx":255,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],161:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("mm-intl"),f=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));return t.handleResend=t.handleResend.bind(t),t.state={},t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"handleResend",value:function(){var e=window.location.href.replace("&resend_success=true","");window.location.href=e+"&resend=true"}},{key:"render",value:function(){var e="",a="",s="",n="";return"true"===this.props.isVerified?(e=React.createElement(h.FormattedMessage,{id:"email_verify.verified",defaultMessage:"{siteName} Email Verified",values:{siteName:t.window.mm_config.SiteName}}),a=React.createElement(h.FormattedHTMLMessage,{id:"email_verify.verifiedBody",defaultMessage:"<p>Your email has been verified! Click <a href={url}>here</a> to log in.</p>",values:{url:this.props.teamURL+"?email="+this.props.userEmail}})):(e=React.createElement(h.FormattedMessage,{id:"email_verify.almost",defaultMessage:"{siteName}: You are almost done",values:{siteName:t.window.mm_config.SiteName}}),a=React.createElement("p",null,React.createElement(h.FormattedMessage,{id:"email_verify.notVerifiedBody",defaultMessage:"Please verify your email address. Check your inbox for an email."})),s=React.createElement("button",{onClick:this.handleResend,className:"btn btn-primary"},React.createElement(h.FormattedMessage,{id:"email_verify.resend",defaultMessage:"Resend Email"})),this.props.resendSuccess&&(n=React.createElement("div",null,React.createElement("br",null),React.createElement("p",{className:"alert alert-success"},React.createElement("i",{className:"fa fa-check"}),React.createElement(h.FormattedMessage,{id:"email_verify.sent",defaultMessage:" Verification email sent."}))))),React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,e),React.createElement("div",null,a,s,n)))}}]),a}(React.Component);a.default=f,f.defaultProps={isVerified:"false",teamURL:"",userEmail:"",resendSuccess:"false"},f.propTypes={isVerified:React.PropTypes.string,teamURL:React.PropTypes.string,userEmail:React.PropTypes.string,resendSuccess:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],162:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../stores/error_store.jsx"),f=s(h),g=e("mm-intl"),b=(0,g.defineMessages)({preview:{id:"error_bar.preview_mode",defaultMessage:"Preview Mode: Email notifications have not been configured"}}),v=function(e){function a(){(0,i.default)(this,a);var e=(0,d.default)(this,(0,r.default)(a).call(this));return e.onErrorChange=e.onErrorChange.bind(e),e.handleClose=e.handleClose.bind(e),e.state=f.default.getLastError(),e}return(0,p.default)(a,e),(0,c.default)(a,[{key:"isValidError",value:function(e){return e&&e.message?e.connErrorCount&&e.connErrorCount>=1&&e.connErrorCount<7?!1:!0:!1}},{key:"isConnectionError",value:function(e){return e.connErrorCount&&0!==e.connErrorCount&&e.connErrorCount>7?!0:!1}},{key:"componentWillMount",value:function(){"false"===t.window.mm_config.SendEmailNotifications&&(f.default.storeLastError({message:this.props.intl.formatMessage(b.preview)}),this.onErrorChange())}},{key:"componentDidMount",value:function(){f.default.addChangeListener(this.onErrorChange)}},{key:"componentWillUnmount",value:function(){f.default.removeChangeListener(this.onErrorChange)}},{key:"onErrorChange",value:function(){var e=f.default.getLastError();e?this.setState(e):this.setState({message:null})}},{key:"handleClose",value:function(e){e&&e.preventDefault(),f.default.clearLastError(),this.setState({message:null})}},{key:"render",value:function(){return this.isValidError(this.state)?React.createElement("div",{className:"error-bar"},React.createElement("span",null,this.state.message),React.createElement("a",{href:"#",className:"error-bar__close",onClick:this.handleClose},"×")):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{intl:ReactIntl.intlShape.isRequired}}}]),a}(React.Component);a.default=v,a.default=ReactIntl.injectIntl(v)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/error_store.jsx":326,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],163:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/constants.jsx"),E=n(_),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.loadFiles=a.loadFiles.bind(a),a.playGif=a.playGif.bind(a),a.stopGif=a.stopGif.bind(a),a.addBackgroundImage=a.addBackgroundImage.bind(a),a.canSetState=!1,a.state={fileSize:-1,mime:"",playing:!1,loading:!1,format:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.loadFiles()}},{key:"componentDidUpdate",value:function(e){this.props.filename!==e.filename&&this.loadFiles()}},{key:"loadFiles",value:function(){this.canSetState=!0;var e=this.props.filename;if(e){var t=this.getFileInfoFromName(e),a=g.getFileType(t.ext);if("image"===a){var s=this;$("<img/>").attr("src",t.path+"_thumb.jpg?"+g.getSessionIndex()).load(function(e,t){return function(){if($(this).remove(),t in s.refs){var a=ReactDOM.findDOMNode(s.refs[t]);$(a).removeClass("post__load"),$(a).addClass("post__image");var n=this.width||$(this).width(),r=this.height||$(this).height();n<E.default.THUMBNAIL_WIDTH&&r<E.default.THUMBNAIL_HEIGHT?$(a).addClass("small"):$(a).addClass("normal"),s.addBackgroundImage(t,e)}}}(t.path,e))}}}},{key:"componentWillUnmount",value:function(){this.canSetState=!1}},{key:"shouldComponentUpdate",value:function(e,t){return g.areObjectsEqual(e,this.props)&&t.fileSize!==this.state.fileSize&&this.refs.fileSize?(ReactDOM.findDOMNode(this.refs.fileSize).innerHTML=g.fileSizeToString(t.fileSize),!1):!0}},{key:"playGif",value:function(e,t){var a=this,s=new Image,n=g.getFileUrl(t);this.setState({loading:!0}),s.load(n),s.onload=function(){var e={playing:!0,loading:!1};switch(!0){case s.width>s.height:e.format="landscape";break;case s.height>s.width:e.format="portrait";break;default:e.format="quadrat"}a.setState(e),setTimeout(function(){return a.removeBackgroundImage.bind(a)(t)},100)},s.onError=function(){return a.setState({loading:!1})},e.stopPropagation()}},{key:"stopGif",value:function(e,t){this.setState({playing:!1}),this.addBackgroundImage(t),e.stopPropagation()}},{key:"getFileInfoFromName",value:function(e){var t=g.splitFileLocation(e);return t.path=g.getWindowLocationOrigin()+"/api/v1/files/get"+t.path,t}},{key:"addBackgroundImage",value:function(e,t){var a=t;if(e in this.refs){t||(a=this.getFileInfoFromName(e).path);var s=ReactDOM.findDOMNode(this.refs[e]),n=new RegExp(" ","g"),r=new RegExp("\\(","g"),l=new RegExp("\\)","g"),i=a.replace(n,"%20").replace(r,"%28").replace(l,"%29");$(s).css("background-image","url("+i+"_thumb.jpg?"+g.getSessionIndex()+")")}}},{key:"removeBackgroundImage",value:function(e){e in this.refs&&$(ReactDOM.findDOMNode(this.refs[e])).css("background-image","initial")}},{key:"render",value:function(){var e=this,t=this.props.filename,a=g.splitFileLocation(t),s=g.getFileUrl(t),n=g.getFileType(a.ext),r="",l="",i="";"image/gif"===this.state.mime&&(r=React.createElement("div",{className:"file-playback-controls play",onClick:function(a){return e.playGif(a,t)}},"►")),this.state.playing&&(l=React.createElement("img",{className:"file__loaded "+this.state.format,src:s}),r=React.createElement("div",{className:"file-playback-controls stop",onClick:function(a){return e.stopGif(a,t)}},"■")),this.state.loading&&(i=React.createElement("img",{className:"spinner file__loading",src:"/static/images/load.gif"}),r="");var o;o="image"===n?this.state.playing?React.createElement("div",{ref:t,className:"post__load",style:{backgroundImage:"url(/static/images/load.gif)"}},r,l):React.createElement("div",{ref:t,className:"post__load",style:{backgroundImage:"url(/static/images/load.gif)"}},i,r,l):React.createElement("div",{className:"file-icon "+g.getIconClassName(n)});var c="";this.state.fileSize<0?v.getFileInfo(t,function(e){this.canSetState&&this.setState({fileSize:parseInt(e.size,10),mime:e.mime})}.bind(this),function(){}):c=g.fileSizeToString(this.state.fileSize);var u,d=decodeURIComponent(g.getFileName(t));return u=d.length>35?d.substring(0,Math.min(35,d.length))+"...":d,React.createElement("div",{className:"post-image__column",key:t},React.createElement("a",{className:"post-image__thumbnail",href:"#",onClick:function(){return e.props.handleImageClick(e.props.index)}},o),React.createElement("div",{className:"post-image__details"},React.createElement("a",{href:s,download:d,"data-toggle":"tooltip",title:'Download "'+d+'"',className:"post-image__name"},u),React.createElement("div",null,React.createElement("a",{href:s,download:d,className:"post-image__download"},React.createElement("span",{className:"fa fa-download"})),React.createElement("span",{className:"post-image__type"},a.ext.toUpperCase()),React.createElement("span",{className:"post-image__size"},c))))}}]),t}(React.Component);a.default=y,y.propTypes={filename:React.PropTypes.string.isRequired,index:React.PropTypes.number.isRequired,handleImageClick:React.PropTypes.func}},{"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],164:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./view_image.jsx"),f=s(h),g=e("./file_attachment.jsx"),b=s(g),v=e("../utils/constants.jsx"),_=s(v),E=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.handleImageClick=a.handleImageClick.bind(a),a.state={showPreviewModal:!1,startImgId:0},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"handleImageClick",value:function(e){this.setState({showPreviewModal:!0,startImgId:e})}},{key:"render",value:function(){for(var e=this,t=this.props.filenames,a=[],s=0;s<t.length&&s<_.default.MAX_DISPLAY_FILES;s++)a.push(React.createElement(b.default,{
key:"file_attachment_"+s,filename:t[s],index:s,handleImageClick:this.handleImageClick}));return React.createElement("div",null,React.createElement("div",{className:"post-image__columns"},a),React.createElement(f.default,{show:this.state.showPreviewModal,onModalDismissed:function(){return e.setState({showPreviewModal:!1})},channelId:this.props.channelId,userId:this.props.userId,startId:this.state.startImgId,filenames:t}))}}]),t}(React.Component);a.default=E,E.propTypes={filenames:React.PropTypes.arrayOf(React.PropTypes.string).isRequired,channelId:React.PropTypes.string,userId:React.PropTypes.string}},{"../utils/constants.jsx":339,"./file_attachment.jsx":163,"./view_image.jsx":278,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],165:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){var t=e.filename,a=e.fileUrl,s=e.fileInfo,n=[];""!==s.extension&&n.push("File type "+s.extension.toUpperCase()),n.push("Size "+l.fileSizeToString(s.size));var r=n.join(", "),i=decodeURIComponent(l.getFileName(t));return React.createElement("div",{className:"file-details__container"},React.createElement("a",{className:"file-details__preview",href:a,target:"_blank"},React.createElement("span",{className:"file-details__preview-helper"}),React.createElement("img",{src:l.getPreviewImagePath(t)})),React.createElement("div",{className:"file-details"},React.createElement("div",{className:"file-details__name"},i),React.createElement("div",{className:"file-details__info"},r)))}Object.defineProperty(a,"__esModule",{value:!0}),a.default=n;var r=e("../utils/utils.jsx"),l=s(r)},{"../utils/utils.jsx":344}],166:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleRemove=a.handleRemove.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidUpdate",value:function(){this.props.uploadsInProgress.length>0&&ReactDOM.findDOMNode(this.refs[this.props.uploadsInProgress[0]]).scrollIntoView()}},{key:"handleRemove",value:function(e){var t=e.target.parentNode.parentNode;t.hasAttribute("data-filename")?this.props.onRemove(t.getAttribute("data-filename")):t.hasAttribute("data-client-id")&&this.props.onRemove(t.getAttribute("data-client-id"))}},{key:"render",value:function(){var e=this,t=[];return this.props.files.forEach(function(a){var s=a,n=s,r=s.split("."),l=r[r.length-1],i=g.getFileType(l);s=g.getFileUrl(s),"image"===i?t.push(React.createElement("div",{key:s,className:"preview-div","data-filename":n},React.createElement("img",{className:"preview-img",src:s}),React.createElement("a",{className:"remove-preview",onClick:e.handleRemove},React.createElement("i",{className:"glyphicon glyphicon-remove"})))):t.push(React.createElement("div",{key:s,className:"preview-div custom-file","data-filename":n},React.createElement("div",{className:"file-icon "+g.getIconClassName(i)}),React.createElement("a",{className:"remove-preview",onClick:e.handleRemove},React.createElement("i",{className:"glyphicon glyphicon-remove"}))))}),this.props.uploadsInProgress.forEach(function(a){t.push(React.createElement("div",{ref:a,key:a,className:"preview-div","data-client-id":a},React.createElement("img",{className:"spinner",src:"/static/images/load.gif"}),React.createElement("a",{className:"remove-preview",onClick:e.handleRemove},React.createElement("i",{className:"glyphicon glyphicon-remove"}))))}),React.createElement("div",{className:"preview-container"},t)}}]),t}(React.Component);a.default=b,b.defaultProps={files:[],uploadsInProgress:[]},b.propTypes={onRemove:React.PropTypes.func.isRequired,files:React.PropTypes.array,uploadsInProgress:React.PropTypes.array}},{"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],167:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("../utils/constants.jsx"),v=n(b),_=e("../stores/channel_store.jsx"),E=n(_),y=e("../utils/utils.jsx"),R=s(y),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.uploadFiles=a.uploadFiles.bind(a),a.handleChange=a.handleChange.bind(a),a.handleDrop=a.handleDrop.bind(a),a.state={requests:{}},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"fileUploadSuccess",value:function(e,t){this.props.onFileUpload(t.filenames,t.client_ids,e);for(var a=this.state.requests,s=0;s<t.client_ids.length;s++)delete a[t.client_ids[s]];this.setState({requests:a})}},{key:"fileUploadFail",value:function(e,t){this.props.onUploadError(t,e)}},{key:"uploadFiles",value:function(e){this.props.onUploadError(null);for(var t=this.props.channelId||E.default.getCurrentId(),a=v.default.MAX_UPLOAD_FILES-this.props.getFileCount(t),s=0,n=[],r=0;r<e.length&&a>s;r++)if(e[r].size>v.default.MAX_FILE_SIZE)n.push(e[r]);else{var l=R.generateId(),i=new FormData;i.append("channel_id",t),i.append("files",e[r],e[r].name),i.append("client_ids",l);var o=g.uploadFile(i,this.fileUploadSuccess.bind(this,t),this.fileUploadFail.bind(this,l)),c=this.state.requests;c[l]=o,this.setState({requests:c}),this.props.onUploadStart([l],t),s+=1}if(e.length>a)this.props.onUploadError("Uploads limited to "+v.default.MAX_UPLOAD_FILES+" files maximum. Please use additional posts for more files.");else if(n.length>1){var u=n.map(function(e){return e.name}).join(", ");this.props.onUploadError("Files above "+v.default.MAX_FILE_SIZE/1e6+"MB could not be uploaded: "+u)}else n.length>0&&this.props.onUploadError("File above "+v.default.MAX_FILE_SIZE/1e6+"MB could not be uploaded: "+n[0].name)}},{key:"handleChange",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.fileInput));this.uploadFiles(e.prop("files")),R.clearFileInput(e[0])}},{key:"handleDrop",value:function(e){this.props.onUploadError(null);var t=e.originalEvent.dataTransfer.files;"string"!=typeof t&&t.length&&this.uploadFiles(t)}},{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this.refs.input),t=this;"post"===this.props.postType?$(".row.main").dragster({enter:function(e,t){var a=t.originalEvent.dataTransfer;R.isFileTransfer(a)&&$(".center-file-overlay").removeClass("hidden")},leave:function(e,t){var a=t.originalEvent.dataTransfer;R.isFileTransfer(a)&&$(".center-file-overlay").addClass("hidden")},drop:function(e,a){$(".center-file-overlay").addClass("hidden"),t.handleDrop(a)}}):"comment"===this.props.postType&&$(".post-right__container").dragster({enter:function(e,t){var a=t.originalEvent.dataTransfer;R.isFileTransfer(a)&&$(".right-file-overlay").removeClass("hidden")},leave:function(e,t){var a=t.originalEvent.dataTransfer;R.isFileTransfer(a)&&$(".right-file-overlay").addClass("hidden")},drop:function(e,a){$(".right-file-overlay").addClass("hidden"),t.handleDrop(a)}}),document.addEventListener("paste",function(a){if(a.clipboardData){var s=$(e.parentNode.parentNode).find(".custom-textarea")[0];if(s===a.target||$.contains(s,a.target)){t.props.onUploadError(null);var n=a.clipboardData.items,r=0;if(n){for(var l=0;l<n.length;l++)if(-1!==n[l].type.indexOf("image")){var i=n[l].type.split("/")[1].toLowerCase();if(v.default.IMAGE_TYPES.indexOf(i)<0)continue;r++}var o=Math.min(v.default.MAX_UPLOAD_FILES-t.props.getFileCount(E.default.getCurrentId()),r);r>o&&t.props.onUploadError("Uploads limited to "+v.default.MAX_UPLOAD_FILES+" files maximum. Please use additional posts for more files.");for(var c=0;c<n.length&&o>c;c++)if(-1!==n[c].type.indexOf("image")){var u=n[c].getAsFile(),d=n[c].type.split("/")[1].toLowerCase();if(v.default.IMAGE_TYPES.indexOf(d)<0)continue;var m=t.props.channelId||E.default.getCurrentId(),p=R.generateId(),h=new FormData;h.append("channel_id",m);var f,b=new Date;f=b.getHours()<10?"0"+b.getHours():String(b.getHours());var _;_=b.getMinutes()<10?"0"+b.getMinutes():String(b.getMinutes());var y="Image Pasted at "+b.getFullYear()+"-"+b.getMonth()+"-"+b.getDate()+" "+f+"-"+_+"."+d;h.append("files",u,y),h.append("client_ids",p);var C=g.uploadFile(h,t.fileUploadSuccess.bind(t,m),t.fileUploadFail.bind(t,p)),w=t.state.requests;w[p]=C,t.setState({requests:w}),t.props.onUploadStart([p],m)}}}}})}},{key:"componentWillUnmount",value:function(){var e=void 0;e="post"===this.props.postType?$(".row.main"):$(".post-right__container"),e.off("dragenter dragleave dragover drop dragster:enter dragster:leave dragster:over dragster:drop")}},{key:"cancelUpload",value:function(e){var t=this.state.requests,a=t[e];a&&(a.abort(),delete t[e],this.setState({requests:t}))}},{key:"render",value:function(){var e=!0;R.isMobileApp()&&(e=!1);var t="";return R.isIosChrome()&&(t="image/*"),React.createElement("span",{ref:"input",className:"btn btn-file"},React.createElement("span",null,React.createElement("i",{className:"glyphicon glyphicon-paperclip"})),React.createElement("input",{ref:"fileInput",type:"file",onChange:this.handleChange,multiple:e,accept:t}))}}]),t}(React.Component);a.default=C,C.propTypes={onUploadError:React.PropTypes.func,getFileCount:React.PropTypes.func,onFileUpload:React.PropTypes.func,onUploadStart:React.PropTypes.func,onTextDrop:React.PropTypes.func,channelId:React.PropTypes.string,postType:React.PropTypes.string}},{"../stores/channel_store.jsx":325,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],168:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e="file-overlay hidden";return"right"===this.props.overlayType?e+=" right-file-overlay":"center"===this.props.overlayType&&(e+=" center-file-overlay"),React.createElement("div",{className:e},React.createElement("div",{className:"overlay__indent"},React.createElement("div",{className:"overlay__circle"},React.createElement("img",{className:"overlay__files",src:"/static/images/filesOverlay.png",alt:"Files"}),React.createElement("span",null,React.createElement("i",{className:"fa fa-upload"}),"Drop a file to upload it."),React.createElement("img",{className:"overlay__logo",src:"/static/images/logoWhite.png",width:"100",alt:"Logo"}))))}}]),t}(React.Component);a.default=h,h.propTypes={overlayType:React.PropTypes.string}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],169:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({submitError:{id:"find_team.submitError",defaultMessage:"Please enter a valid email address"},placeholder:{id:"find_team.placeholder",defaultMessage:"you@domain.com"}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.state={},a.handleSubmit=a.handleSubmit.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={},a=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();return a&&g.isEmail(a)?(t.email_error="",void v.findTeamsSendEmail(a,function(){t.sent=!0,this.setState(t)}.bind(this),function(e){t.email_error=e.message,this.setState(t)}.bind(this))):(t.email_error=this.props.intl.formatMessage(E.submitError),void this.setState(t))}},{key:"render",value:function(){var e=null,t="form-group";return this.state.email_error&&(e=React.createElement("label",{className:"control-label"},this.state.email_error),t="form-group has-error"),this.state.sent?React.createElement("div",null,React.createElement("h4",null,React.createElement(_.FormattedMessage,{id:"find_team.findTitle",defaultMessage:"Find Your Team"})),React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"find_team.findDescription",defaultMessage:"An email was sent with links to any teams to which you are a member."}))):React.createElement("div",null,React.createElement("h4",null,React.createElement(_.FormattedMessage,{id:"find_team.findTitle",defaultMessage:"Find Your Team"})),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"find_team.getLinks",defaultMessage:"Get an email with links to any teams to which you are a member."})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},React.createElement(_.FormattedMessage,{id:"find_team.email",defaultMessage:"Email"})),React.createElement("div",{className:t},React.createElement("input",{type:"text",ref:"email",className:"form-control",placeholder:this.props.intl.formatMessage(E.placeholder),maxLength:"128",spellCheck:"false"}),e)),React.createElement("button",{className:"btn btn-md btn-primary",type:"submit"},React.createElement(_.FormattedMessage,{id:"find_team.send",defaultMessage:"Send"}))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired},a.default=(0,_.injectIntl)(y)},{"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],170:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=ReactBootstrap.Modal,f=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.onHide=a.onHide.bind(a),a.copyLink=a.copyLink.bind(a),a.state={copiedLink:!1},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"onHide",value:function(){this.setState({copiedLink:!1}),this.props.onHide()}},{key:"copyLink",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.textarea));e.select();try{var t=document.execCommand("copy");t?this.setState({copiedLink:!0}):this.setState({copiedLink:!1})}catch(e){this.setState({copiedLink:!1})}}},{key:"render",value:function(){var e=null;this.props.helpText&&(e=React.createElement("p",null,this.props.helpText,React.createElement("br",null),React.createElement("br",null)));var t=null;document.queryCommandSupported("copy")&&(t=React.createElement("button",{"data-copy-btn":"true",type:"button",className:"btn btn-primary pull-left",onClick:this.copyLink},"Copy Link"));var a=null;return this.state.copiedLink&&(a=React.createElement("p",{className:"alert alert-success copy-link-confirm"},React.createElement("i",{className:"fa fa-check"})," Link copied to clipboard.")),React.createElement(h,{show:this.props.show,onHide:this.onHide},React.createElement(h.Header,{closeButton:!0},React.createElement("h4",{className:"modal-title"},this.props.title)),React.createElement(h.Body,null,e,React.createElement("textarea",{className:"form-control no-resize min-height",readOnly:"true",ref:"textarea",value:this.props.link})),React.createElement(h.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.onHide},"Close"),t,a))}}]),t}(React.Component);a.default=f,f.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired,title:React.PropTypes.string.isRequired,helpText:React.PropTypes.string,link:React.PropTypes.string.isRequired},f.defaultProps={helpText:null}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],171:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../utils/constants.jsx"),f=s(h),g=e("./get_link_modal.jsx"),b=s(g),v=e("../stores/modal_store.jsx"),_=s(v),E=e("../stores/team_store.jsx"),y=s(E),R=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.handleToggle=a.handleToggle.bind(a),a.state={show:!1},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){_.default.addModalListener(f.default.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){_.default.removeModalListener(f.default.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e){this.setState({show:e})}},{key:"render",value:function(){var e=this;return React.createElement(b.default,{show:this.state.show,onHide:function(){return e.setState({show:!1})},title:"Team Invite Link",helpText:"Send teammates the link below for them to sign-up to this team site.",link:y.default.getCurrentInviteLink()})}}]),t}(React.Component);a.default=R},{"../stores/modal_store.jsx":328,"../stores/team_store.jsx":334,"../utils/constants.jsx":339,"./get_link_modal.jsx":170,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],172:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/constants.jsx"),v=n(b),_=e("../utils/client.jsx"),E=s(_),y=e("../dispatcher/event_helpers.jsx"),R=s(y),C=e("../stores/modal_store.jsx"),w=n(C),S=e("../stores/user_store.jsx"),k=n(S),N=e("../stores/channel_store.jsx"),M=n(N),x=e("../stores/team_store.jsx"),j=n(x),T=e("./confirm_modal.jsx"),P=n(T),O=v.default.ActionTypes,I=ReactBootstrap.Modal,D=function(e){function a(e){(0,o.default)(this,a);var s=(0,m.default)(this,(0,l.default)(a).call(this,e));return s.handleToggle=s.handleToggle.bind(s),s.handleSubmit=s.handleSubmit.bind(s),s.handleHide=s.handleHide.bind(s),s.addInviteFields=s.addInviteFields.bind(s),s.clearFields=s.clearFields.bind(s),s.removeInviteFields=s.removeInviteFields.bind(s),s.showGetTeamInviteLinkModal=s.showGetTeamInviteLinkModal.bind(s),s.state={show:!1,inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{},emailEnabled:"true"===t.window.mm_config.SendEmailNotifications,userCreationEnabled:"true"===t.window.mm_config.EnableUserCreation,showConfirmModal:!1,isSendingEmails:!1},s}return(0,h.default)(a,e),(0,u.default)(a,[{key:"componentDidMount",value:function(){w.default.addModalListener(O.TOGGLE_INVITE_MEMBER_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){w.default.removeModalListener(O.TOGGLE_INVITE_MEMBER_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e){this.setState({show:e})}},{key:"handleSubmit",value:function(){var e=this;if(this.state.emailEnabled){for(var t=this.state.inviteIds,a=t.length,s=[],n=this.state.emailErrors,r=this.state.firstNameErrors,l=this.state.lastNameErrors,i=!0,o=0;a>o;o++){var c=t[o],u={};u.email=ReactDOM.findDOMNode(this.refs["email"+c]).value.trim(),u.email&&g.isEmail(u.email)?n[c]="":(n[c]="Please enter a valid email address",i=!1),u.firstName=ReactDOM.findDOMNode(this.refs["first_name"+c]).value.trim(),u.lastName=ReactDOM.findDOMNode(this.refs["last_name"+c]).value.trim(),s.push(u)}if(this.setState({emailErrors:n,firstNameErrors:r,lastNameErrors:l}),i&&0!==s.length){var d={};d.invites=s,this.setState({isSendingEmails:!0}),E.inviteMembers(d,function(){e.handleHide(!1),e.setState({isSendingEmails:!1})},function(t){"This person is already on your team"===t.message?(n[t.detailed_error]=t.message,e.setState({emailErrors:n})):e.setState({serverError:t.message}),e.setState({isSendingEmails:!1})})}}}},{key:"handleHide",value:function(e){if(e){for(var t=!1,a=0;a<this.state.inviteIds.length;a++){var s=this.state.inviteIds[a];if(""!==ReactDOM.findDOMNode(this.refs["email"+s]).value.trim()){t=!0;break}}if(t)return void this.setState({showConfirmModal:!0})}this.clearFields(),this.setState({show:!1,showConfirmModal:!1})}},{key:"componentDidUpdate",value:function(e,t){!t.show&&this.state.show&&($(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-200),$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar())}},{key:"addInviteFields",value:function(){var e=this.state.idCount+1,t=this.state.inviteIds;t.push(e),this.setState({inviteIds:t,idCount:e})}},{key:"clearFields",value:function(){for(var e=this.state.inviteIds,t=0;t<e.length;t++){var a=e[t];ReactDOM.findDOMNode(this.refs["email"+a]).value="",ReactDOM.findDOMNode(this.refs["first_name"+a]).value="",ReactDOM.findDOMNode(this.refs["last_name"+a]).value=""}this.setState({inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{}})}},{key:"removeInviteFields",value:function(e){var t=this.state.idCount,a=this.state.inviteIds,s=a.indexOf(e);s>-1&&a.splice(s,1),a.length||a.push(++t),this.setState({inviteIds:a,idCount:t})}},{key:"showGetTeamInviteLinkModal",value:function(){this.handleHide(!1),R.showGetTeamInviteLinkModal()}},{key:"render",value:function(){var e=this,t=k.default.getCurrentUser();if(null!=t){for(var a=[],s=this.state.inviteIds,n=0;n<s.length;n++){var r=s[n],l=null;this.state.emailErrors[r]&&(l=React.createElement("label",{className:"control-label"},this.state.emailErrors[r]));var i=null;this.state.firstNameErrors[r]&&(i=React.createElement("label",{className:"control-label"},this.state.firstNameErrors[r]));var o=null;this.state.lastNameErrors[r]&&(o=React.createElement("label",{className:"control-label"},this.state.lastNameErrors[r]));var c=null;r&&(c=React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-link remove__member",onClick:this.removeInviteFields.bind(this,r)},React.createElement("span",{className:"fa fa-trash"}))));var u="form-group invite";l&&(u+=" has-error");var d=null,m="form-group";i&&(m+=" has-error");var p="form-group";o&&(p+=" has-error"),d=React.createElement("div",{className:"row--invite"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:m},React.createElement("input",{type:"text",className:"form-control",ref:"first_name"+r,placeholder:"First name",maxLength:"64",disabled:!this.state.emailEnabled||!this.state.userCreationEnabled,spellCheck:"false"}),i)),React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:p},React.createElement("input",{type:"text",className:"form-control",ref:"last_name"+r,placeholder:"Last name",maxLength:"64",disabled:!this.state.emailEnabled||!this.state.userCreationEnabled,spellCheck:"false"}),o))),a[r]=React.createElement("div",{key:"key"+r},c,React.createElement("div",{className:u},React.createElement("input",{onKeyUp:this.displayNameKeyUp,type:"text",ref:"email"+r,className:"form-control",placeholder:"email@domain.com",maxLength:"64",disabled:!this.state.emailEnabled||!this.state.userCreationEnabled,spellCheck:"false"}),l),d)}var h=null;this.state.serverError&&(h=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var f=null,g=null,b="";if(M.default.getByName(v.default.DEFAULT_CHANNEL)&&(b=M.default.getByName(v.default.DEFAULT_CHANNEL).display_name),this.state.emailEnabled&&this.state.userCreationEnabled){f=React.createElement("div",null,h,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.addInviteFields},"Add another"),React.createElement("br",null),React.createElement("br",null),React.createElement("span",null,"People invited automatically join the ",React.createElement("strong",null,b)," channel."));var _="Send Invitation";this.state.isSendingEmails?_=React.createElement("span",null,React.createElement("i",{className:"fa fa-spinner fa-spin"})," Sending"):this.state.inviteIds.length>1&&(_="Send Invitations"),g=React.createElement("button",{onClick:this.handleSubmit,type:"button",className:"btn btn-primary",disabled:this.state.isSendingEmails},_)}else if(this.state.userCreationEnabled){var E=null;if(t&&"O"===j.default.getCurrent().type){var y=React.createElement("a",{href:"#",onClick:this.showGetTeamInviteLinkModal},"Team Invite Link");E=React.createElement("p",null,"You can also invite people using the ",y,".")}f=React.createElement("div",null,React.createElement("p",null,"Email is currently disabled for your team, and email invitations cannot be sent. Contact your system administrator to enable email and email invitations."),E)}else f=React.createElement("div",null,React.createElement("p",null,"User creation has been disabled for your team. Please ask your team administrator for details."));return React.createElement("div",null,React.createElement(I,{dialogClassName:"modal-invite-member",show:this.state.show,onHide:this.handleHide.bind(this,!0),enforceFocus:!this.state.showConfirmModal,backdrop:this.state.isSendingEmails?"static":!0},React.createElement(I.Header,{closeButton:!this.state.isSendingEmails},React.createElement(I.Title,null,"Invite New Member")),React.createElement(I.Body,{ref:"modalBody"},React.createElement("form",{role:"form"},a),f),React.createElement(I.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide.bind(this,!0),disabled:this.state.isSendingEmails},"Cancel"),g)),React.createElement(P.default,{title:"Discard Invitations?",message:"You have unsent invitations, are you sure you want to discard them?",confirm_button:"Yes, Discard",show:this.state.showConfirmModal,onConfirm:this.handleHide.bind(this,!1),onCancel:function(){return e.setState({showConfirmModal:!1})}}))}return null}}]),a}(React.Component);a.default=D,D.propTypes={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/modal_store.jsx":328,"../stores/team_store.jsx":334,"../stores/user_store.jsx":335,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./confirm_modal.jsx":152,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],173:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("mm-intl"),f=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return React.createElement("div",{className:"loading-screen",style:{position:this.props.position}},React.createElement("div",{className:"loading__content"},React.createElement("h3",null,React.createElement(h.FormattedMessage,{id:"loading_screen.loading",defaultMessage:"Loading"})),React.createElement("div",{className:"round round-1"}),React.createElement("div",{className:"round round-2"}),React.createElement("div",{className:"round round-3"})))}}]),t}(React.Component);a.default=f,f.defaultProps={position:"relative"},f.propTypes={position:React.PropTypes.oneOf(["absolute","fixed","relative","static","inherit"])}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],174:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./login_email.jsx"),g=n(f),b=e("./login_ldap.jsx"),v=n(b),_=e("../utils/utils.jsx"),E=s(_),y=e("../utils/constants.jsx"),R=n(y),C=e("mm-intl"),w=function(e){
function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"render",value:function(){var e=this.props.teamDisplayName,a=this.props.teamName,s=[];"true"===t.window.mm_config.EnableSignUpWithGitLab&&s.push(React.createElement("a",{className:"btn btn-custom-login gitlab",key:"gitlab",href:"/"+a+"/login/gitlab"},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(C.FormattedMessage,{id:"login.gitlab",defaultMessage:"with GitLab"})))),"true"===t.window.mm_config.EnableSignUpWithGoogle&&s.push(React.createElement("a",{className:"btn btn-custom-login google",key:"google",href:"/"+a+"/login/google"},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(C.FormattedMessage,{id:"login.google",defaultMessage:"with Google Apps"}))));var n=E.getUrlParameter("extra"),r="";if(n){var l=void 0;n===R.default.SIGNIN_CHANGE?l=React.createElement(C.FormattedMessage,{id:"login.changed",defaultMessage:" Sign-in method changed successfully"}):n===R.default.SIGNIN_VERIFIED&&(l=React.createElement(C.FormattedMessage,{id:"login.verified",defaultMessage:" Email Verified"})),null!=l&&(r=React.createElement("div",{className:"alert alert-success"},React.createElement("i",{className:"fa fa-check"}),l))}var i=void 0;"true"===t.window.mm_config.EnableSignUpWithEmail&&(i=React.createElement(g.default,{teamName:this.props.teamName})),s.length>0&&i&&(s=React.createElement("div",null,s,React.createElement("div",{className:"or__container"},React.createElement("span",null,React.createElement(C.FormattedMessage,{id:"login.or",defaultMessage:"or"})))));var o=void 0;i&&(o=React.createElement("div",{className:"form-group"},React.createElement("a",{href:"/"+a+"/reset_password"},React.createElement(C.FormattedMessage,{id:"login.forgot",defaultMessage:"I forgot my password"}))));var c=null;this.props.inviteId&&(c=React.createElement("div",null,React.createElement("span",null,React.createElement(C.FormattedMessage,{id:"login.noAccount",defaultMessage:"Don't have an account? "}),React.createElement("a",{href:"/signup_user_complete/?id="+this.props.inviteId,className:"signup-team-login"},React.createElement(C.FormattedMessage,{id:"login.create",defaultMessage:"Create one now"})))));var u=null;"true"!==t.window.mm_config.EnableTeamCreation||E.isMobileApp()||(u=React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"/",className:"signup-team-login"},React.createElement(C.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a new team"}))));var d=null;"true"===t.window.mm_config.EnableLdap&&(d=React.createElement(v.default,{teamName:this.props.teamName}));var m=null;return E.isMobileApp()||(m=React.createElement("div",{className:"form-group margin--extra form-group--small"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},React.createElement(C.FormattedMessage,{id:"login.find",defaultMessage:"Find your other teams"}))))),React.createElement("div",{className:"signup-team__container"},React.createElement("h5",{className:"margin--less"},React.createElement(C.FormattedMessage,{id:"login.signTo",defaultMessage:"Sign in to:"})),React.createElement("h2",{className:"signup-team__name"},e),React.createElement("h2",{className:"signup-team__subdomain"},React.createElement(C.FormattedMessage,{id:"login.on",defaultMessage:"on {siteName}",values:{siteName:t.window.mm_config.SiteName}})),r,s,i,d,c,m,o,u)}}]),a}(React.Component);a.default=w,w.defaultProps={teamName:"",teamDisplayName:""},w.propTypes={teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string,inviteId:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./login_email.jsx":175,"./login_ldap.jsx":176,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],175:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../stores/user_store.jsx"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({badTeam:{id:"login_email.badTeam",defaultMessage:"Bad team name"},emailReq:{id:"login_email.emailReq",defaultMessage:"An email is required"},pwdReq:{id:"login_email.pwdReq",defaultMessage:"A password is required"},email:{id:"login_email.email",defaultMessage:"Email"},pwd:{id:"login_email.pwd",defaultMessage:"Password"}}),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.state={serverError:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.intl.formatMessage,s={},n=this.props.teamName;if(!n)return s.serverError=a(R.badTeam),void this.setState(s);var r=this.refs.email.value.trim();if(!r)return s.serverError=a(R.emailReq),void this.setState(s);var l=this.refs.password.value.trim();return l?(s.serverError="",this.setState(s),void v.loginByEmail(n,r,l,function(){E.default.setLastEmail(r);var e=g.getUrlParameter("redirect");e?window.location.href=decodeURIComponent(e):window.location.href="/"+n+"/channels/town-square"},function(e){return"api.user.login.not_verified.app_error"===e.id?void(window.location.href="/verify_email?teamname="+encodeURIComponent(n)+"&email="+encodeURIComponent(r)):(s.serverError=e.message,t.valid=!1,void t.setState(s))})):(s.serverError=a(R.pwdReq),void this.setState(s))}},{key:"render",value:function(){var e=void 0,t="";this.state.serverError&&(e=React.createElement("label",{className:"control-label"},this.state.serverError),t=" has-error");var a=E.default.getLastEmail(),s=!1,n=!1;""===a?s=!0:n=!0;var r=g.getUrlParameter("email");r&&(a=decodeURIComponent(r));var l=this.props.intl.formatMessage;return React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"signup__email-container"},React.createElement("div",{className:"form-group"+t},e),React.createElement("div",{className:"form-group"+t},React.createElement("input",{autoFocus:s,type:"email",className:"form-control",name:"email",defaultValue:a,ref:"email",placeholder:l(R.email),spellCheck:"false"})),React.createElement("div",{className:"form-group"+t},React.createElement("input",{autoFocus:n,type:"password",className:"form-control",name:"password",ref:"password",placeholder:l(R.pwd),spellCheck:"false"})),React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn btn-primary"},React.createElement(y.FormattedMessage,{id:"login_email.signin",defaultMessage:"Sign in"})))))}}]),t}(React.Component);C.defaultProps={},C.propTypes={intl:y.intlShape.isRequired,teamName:React.PropTypes.string.isRequired},a.default=(0,y.injectIntl)(C)},{"../stores/user_store.jsx":335,"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],176:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({badTeam:{id:"login_ldap.badTeam",defaultMessage:"Bad team name"},idReq:{id:"login_ldap.idlReq",defaultMessage:"An LDAP ID is required"},pwdReq:{id:"login_ldap.pwdReq",defaultMessage:"An LDAP password is required"},username:{id:"login_ldap.username",defaultMessage:"LDAP Username"},pwd:{id:"login_ldap.pwd",defaultMessage:"LDAP Password"}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.state={serverError:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.intl.formatMessage,s={},n=this.props.teamName;if(!n)return s.serverError=a(E.badTeam),void this.setState(s);var r=this.refs.id.value.trim();if(!r)return s.serverError=a(E.idReq),void this.setState(s);var l=this.refs.password.value.trim();return l?(s.serverError="",this.setState(s),void v.loginByLdap(n,r,l,function(){var e=g.getUrlParameter("redirect");e?window.location.href=decodeURIComponent(e):window.location.href="/"+n+"/channels/town-square"},function(e){s.serverError=e.message,t.setState(s)})):(s.serverError=a(E.pwdReq),void this.setState(s))}},{key:"render",value:function(){var e=void 0,t="";this.state.serverError&&(e=React.createElement("label",{className:"control-label"},this.state.serverError),t=" has-error");var a=this.props.intl.formatMessage;return React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"signup__email-container"},React.createElement("div",{className:"form-group"+t},e),React.createElement("div",{className:"form-group"+t},React.createElement("input",{autoFocus:!0,className:"form-control",ref:"id",placeholder:a(E.username),spellCheck:"false"})),React.createElement("div",{className:"form-group"+t},React.createElement("input",{type:"password",className:"form-control",ref:"password",placeholder:a(E.pwd),spellCheck:"false"})),React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn btn-primary"},React.createElement(_.FormattedMessage,{id:"login_ldap.signin",defaultMessage:"Sign in"})))))}}]),t}(React.Component);y.defaultProps={},y.propTypes={intl:_.intlShape.isRequired,teamName:React.PropTypes.string.isRequired},a.default=(0,_.injectIntl)(y)},{"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],177:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./member_list_item.jsx"),f=s(h),g=function(e){function t(e){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=[];null!==this.props.memberList&&(e=this.props.memberList);var t=null;return 0===e.length&&(t=React.createElement("tr",null,React.createElement("td",null,"No users to add."))),React.createElement("table",{className:"table more-table member-list-holder"},React.createElement("tbody",null,e.map(function(e){return React.createElement(f.default,{key:e.id,member:e,isAdmin:this.props.isAdmin,handleInvite:this.props.handleInvite,handleRemove:this.props.handleRemove,handleMakeAdmin:this.props.handleMakeAdmin})},this),t))}}]),t}(React.Component);a.default=g,g.propTypes={memberList:React.PropTypes.array,isAdmin:React.PropTypes.bool,handleInvite:React.PropTypes.func,handleRemove:React.PropTypes.func,handleMakeAdmin:React.PropTypes.func}},{"./member_list_item.jsx":178,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],178:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../utils/utils.jsx"),v=s(b),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleInvite=a.handleInvite.bind(a),a.handleRemove=a.handleRemove.bind(a),a.handleMakeAdmin=a.handleMakeAdmin.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleInvite",value:function(e){e.preventDefault(),this.props.handleInvite(this.props.member.id)}},{key:"handleRemove",value:function(e){e.preventDefault(),this.props.handleRemove(this.props.member.id)}},{key:"handleMakeAdmin",value:function(e){e.preventDefault(),this.props.handleMakeAdmin(this.props.member.id)}},{key:"render",value:function(){var e,t=this.props.member,a=this.props.isAdmin,s=v.isAdmin(t.roles),n=g.default.getCurrentUser().update_at;if(this.props.handleInvite)e=React.createElement("a",{onClick:this.handleInvite,className:"btn btn-sm btn-primary"},React.createElement("i",{className:"glyphicon glyphicon-envelope"})," Add");else if(a&&!s&&t.id!==g.default.getCurrentId()){var r=this,l=null;this.props.handleMakeAdmin&&(l=React.createElement("li",{role:"presentation"},React.createElement("a",{href:"",role:"menuitem",onClick:r.handleMakeAdmin},"Make Admin")));var i=null;this.props.handleRemove&&(i=React.createElement("li",{role:"presentation"},React.createElement("a",{href:"",role:"menuitem",onClick:r.handleRemove},"Remove Member"))),e=React.createElement("div",{className:"dropdown member-drop"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{className:"fa fa-pencil"}),React.createElement("span",{className:"text-capitalize"},t.roles||"Member"," ")),React.createElement("ul",{className:"dropdown-menu member-menu",role:"menu"},l,i))}else e=React.createElement("div",{className:"member-role text-capitalize"},React.createElement("span",{className:"fa fa-pencil hidden"}),t.roles||"Member");return React.createElement("tr",null,React.createElement("td",{className:"direct-channel"},React.createElement("img",{className:"profile-img pull-left",src:"/api/v1/users/"+t.id+"/image?time="+n+"&"+v.getSessionIndex(),height:"36",width:"36"}),React.createElement("div",{className:"member-name"},v.displayUsername(t.id)),React.createElement("div",{className:"member-description"},t.email)),React.createElement("td",{className:"td--action lg"},e))}}]),t}(React.Component);a.default=_,_.propTypes={handleInvite:React.PropTypes.func,handleRemove:React.PropTypes.func,handleMakeAdmin:React.PropTypes.func,member:React.PropTypes.object,isAdmin:React.PropTypes.bool}},{"../stores/user_store.jsx":335,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],179:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/keys"),r=s(n),l=e("babel-runtime/core-js/get-iterator"),i=s(l),o=e("babel-runtime/core-js/object/get-prototype-of"),c=s(o),u=e("babel-runtime/helpers/classCallCheck"),d=s(u),m=e("babel-runtime/helpers/createClass"),p=s(m),h=e("babel-runtime/helpers/possibleConstructorReturn"),f=s(h),g=e("babel-runtime/helpers/inherits"),b=s(g);Object.defineProperty(a,"__esModule",{value:!0});var v=e("./member_list_team_item.jsx"),_=s(v),E=e("../stores/user_store.jsx"),y=s(E),R=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(0,c.default)(t).call(this,e));return a.getUsers=a.getUsers.bind(a),a.onChange=a.onChange.bind(a),a.state={users:a.getUsers()},a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){y.default.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){y.default.removeChangeListener(this.onChange)}},{key:"getUsers",value:function(){var e=y.default.getProfiles(),t=[],a=!0,s=!1,n=void 0;try{for(var l,o=(0,i.default)((0,r.default)(e));!(a=(l=o.next()).done);a=!0){var c=l.value;t.push(e[c])}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}return t.sort(function(e,t){return e.username.localeCompare(t.username)}),t}},{key:"onChange",value:function(){this.setState({users:this.getUsers()})}},{key:"render",value:function(){var e=this.state.users.map(function(e){return React.createElement(_.default,{key:e.id,user:e})});return React.createElement("table",{className:"table more-table member-list-holder"},React.createElement("tbody",null,e))}}]),t}(React.Component);a.default=R},{"../stores/user_store.jsx":335,"./member_list_team_item.jsx":180,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],180:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/async_client.jsx"),E=s(_),y=e("../utils/utils.jsx"),R=s(y),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleMakeMember=a.handleMakeMember.bind(a),a.handleMakeActive=a.handleMakeActive.bind(a),a.handleMakeNotActive=a.handleMakeNotActive.bind(a),a.handleMakeAdmin=a.handleMakeAdmin.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleMakeMember",value:function(){var e=this,t={user_id:this.props.user.id,new_roles:""};v.updateRoles(t,function(){E.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"handleMakeActive",value:function(){var e=this;v.updateActive(this.props.user.id,!0,function(){E.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"handleMakeNotActive",value:function(){var e=this;v.updateActive(this.props.user.id,!1,function(){E.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"handleMakeAdmin",value:function(){var e=this,t={user_id:this.props.user.id,new_roles:"admin"};v.updateRoles(t,function(){E.getProfiles()},function(t){e.setState({serverError:t.message})})}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"has-error"},React.createElement("label",{className:"has-error control-label"},this.state.serverError)));var t=this.props.user,a="Member",s=g.default.getCurrentUser().update_at;t.roles.length>0&&(a=R.isSystemAdmin(t.roles)?"System Admin":R.isAdmin(t.roles)?"Team Admin":t.roles.charAt(0).toUpperCase()+t.roles.slice(1));var n=t.email,r="admin"===t.roles||"system_admin"===t.roles,l=""===t.roles||"system_admin"===t.roles,i=!1,o="system_admin"!==t.roles;t.delete_at>0&&(a="Inactive",r=!1,l=!1,i=!0,o=!1);var c=null;l&&(c=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeAdmin},"Make Team Admin")));var u=null;r&&(u=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeMember},"Make Member")));var d=null;i&&(d=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeActive},"Make Active")));var m=null;return o&&(m=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleMakeNotActive},"Make Inactive"))),React.createElement("tr",null,React.createElement("td",{className:"row member-div"},React.createElement("img",{className:"post-profile-img pull-left",src:"/api/v1/users/"+t.id+"/image?time="+s+"&"+R.getSessionIndex(),height:"36",width:"36"}),React.createElement("span",{className:"member-name"},R.displayUsername(t.id)),React.createElement("span",{className:"member-email"},n),React.createElement("div",{className:"dropdown member-drop"},React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{className:"fa fa-pencil"}),React.createElement("span",null,a," ")),React.createElement("ul",{className:"dropdown-menu member-menu",role:"menu"},c,u,d,m)),e))}}]),t}(React.Component);a.default=C,C.propTypes={user:React.PropTypes.object.isRequired}},{"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],181:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/text_formatting.jsx"),g=s(f),b=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.message?React.createElement("div",{dangerouslySetInnerHTML:{__html:g.formatText(this.props.message,this.props.options)}}):React.createElement("div",null)}}]),t}(React.Component);a.default=b,b.defaultProps={message:""},b.propTypes={message:React.PropTypes.string,options:React.PropTypes.object}},{"../utils/text_formatting.jsx":343,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],182:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){return{channels:C.default.getMoreAll(),serverError:null}}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../utils/utils.jsx"),b=s(g),v=e("../utils/client.jsx"),_=s(v),E=e("../utils/async_client.jsx"),y=s(E),R=e("../stores/channel_store.jsx"),C=n(R),w=e("./loading_screen.jsx"),S=n(w),k=e("./new_channel_flow.jsx"),N=n(k),M=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(0,i.default)(t).call(this,e));a.onListenerChange=a.onListenerChange.bind(a),a.handleJoin=a.handleJoin.bind(a),a.handleNewChannel=a.handleNewChannel.bind(a);var s=r();return s.channelType="",s.joiningChannel=-1,s.showNewChannelModal=!1,a.state=s,a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){C.default.addMoreChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",function(){y.getMoreChannels(!0)});var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",function(t){var a=t.relatedTarget;e.setState({channelType:$(a).attr("data-channeltype")})})}},{key:"componentWillUnmount",value:function(){C.default.removeMoreChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=r();b.areObjectsEqual(e.channels,this.state.channels)||this.setState(e)}},{key:"handleJoin",value:function(e,t){var a=this;this.setState({joiningChannel:t}),_.joinChannel(e.id,function(){$(ReactDOM.findDOMNode(a.refs.modal)).modal("hide"),y.getChannel(e.id),b.switchChannel(e),a.setState({joiningChannel:-1})},function(e){a.setState({joiningChannel:-1,serverError:e.message})})}},{key:"handleNewChannel",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).modal("hide"),this.setState({showNewChannelModal:!0})}},{key:"render",value:function(){var e,t=this;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var a,s=this;if(null!=this.state.channels){var n=this.state.channels;a=n.loading?React.createElement(S.default,null):n.length?React.createElement("table",{className:"more-table table"},React.createElement("tbody",null,n.map(function(e,t){var a;return a=s.state.joiningChannel===t?React.createElement("img",{className:"join-channel-loading-gif",src:"/static/images/load.gif"}):React.createElement("button",{onClick:s.handleJoin.bind(s,e,t),className:"btn btn-primary"},"Join"),React.createElement("tr",{key:e.id},React.createElement("td",null,React.createElement("p",{className:"more-name"},e.display_name),React.createElement("p",{className:"more-purpose"},e.purpose)),React.createElement("td",{className:"td--action"},a))}))):React.createElement("div",{className:"no-channel-message"},React.createElement("p",{className:"primary-message"},"No more channels to join"),React.createElement("p",{className:"secondary-message"},"Click 'Create New Channel' to make a new one"))}return React.createElement("div",{className:"modal fade",id:"more_channels",ref:"modal",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h4",{className:"modal-title"},"More Channels"),React.createElement("button",{type:"button",className:"btn btn-primary channel-create-btn",onClick:this.handleNewChannel},"Create New Channel"),React.createElement(N.default,{show:this.state.showNewChannelModal,channelType:this.state.channelType,onModalDismissed:function(){return t.setState({showNewChannelModal:!1})}})),React.createElement("div",{className:"modal-body"},a,e),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close")))))}}]),t}(React.Component);a.default=M},{"../stores/channel_store.jsx":325,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./loading_screen.jsx":173,"./new_channel_flow.jsx":187,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],183:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../utils/utils.jsx"),v=s(b),_=ReactBootstrap.Modal,E=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleFilterChange=a.handleFilterChange.bind(a),a.handleHide=a.handleHide.bind(a),a.handleShowDirectChannel=a.handleShowDirectChannel.bind(a),a.handleUserChange=a.handleUserChange.bind(a),a.createRowForUser=a.createRowForUser.bind(a),a.state={users:a.getUsersFromStore(),filter:"",loadingDMChannel:-1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getUsersFromStore",value:function(){var e=g.default.getCurrentId(),t=g.default.getActiveOnlyProfiles(),a=[];for(var s in t)s!==e&&a.push(t[s]);return a.sort(function(e,t){return e.username.localeCompare(t.username)}),a}},{key:"componentDidMount",value:function(){g.default.addChangeListener(this.handleUserChange)}},{key:"componentWillUnmount",value:function(){g.default.addChangeListener(this.handleUserChange)}},{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&this.onShow()}},{key:"onShow",value:function(){v.isMobile()?$(ReactDOM.findDOMNode(this.refs.userList)).css("max-height",$(window).height()-250):($(ReactDOM.findDOMNode(this.refs.userList)).perfectScrollbar(),$(ReactDOM.findDOMNode(this.refs.userList)).css("max-height",$(window).height()-300))}},{key:"handleFilterChange",value:function(){var e=ReactDOM.findDOMNode(this.refs.filter).value;$(window).width()>768&&$(ReactDOM.findDOMNode(this.refs.userList)).scrollTop(0),e!==this.state.filter&&this.setState({filter:e})}},{key:"handleHide",value:function(){this.props.onModalDismissed&&this.props.onModalDismissed(),this.setState({filter:""})}},{key:"handleShowDirectChannel",value:function(e,t){var a=this;t.preventDefault(),-1===this.state.loadingDMChannel&&(this.setState({loadingDMChannel:e.id}),v.openDirectChannelToUser(e,function(e){v.switchChannel(e),a.setState({loadingDMChannel:-1}),a.handleHide()},function(){a.setState({loadingDMChannel:-1})}))}},{key:"handleUserChange",value:function(){this.setState({users:this.getUsersFromStore()})}},{key:"createRowForUser",value:function(e){var t=[],a=v.getFullName(e);if(a&&t.push(React.createElement("span",{key:e.id+"__full-name",className:"full-name"},a)),e.nickname){var s=a?" - ":"";t.push(React.createElement("span",{key:e.nickname+"__nickname"},s+e.nickname))}var n=void 0;return n=this.state.loadingDMChannel===e.id?React.createElement("img",{
className:"channel-loading-gif",src:"/static/images/load.gif"}):React.createElement("button",{type:"button",className:"btn btn-primary btn-message",onClick:this.handleShowDirectChannel.bind(this,e)},"Message"),React.createElement("tr",{key:"direct-channel-row-user"+e.id},React.createElement("td",{key:e.id,className:"direct-channel"},React.createElement("img",{className:"profile-img pull-left",width:"38",height:"38",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at+"&"+v.getSessionIndex()}),React.createElement("div",{className:"more-name"},e.username),React.createElement("div",{className:"more-description"},t)),React.createElement("td",{className:"td--action lg"},n))}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=this.state.users;this.state.filter&&!function(){var a=e.state.filter.toLowerCase();t=t.filter(function(e){return-1!==e.username.toLowerCase().indexOf(a)||-1!==e.first_name.toLowerCase().indexOf(a)||-1!==e.last_name.toLowerCase().indexOf(a)||-1!==e.nickname.toLowerCase().indexOf(a)})}();var a=t.map(this.createRowForUser);0===a.length&&a.push(React.createElement("tr",{key:"no-users-found"},React.createElement("td",null,"No users found :(")));var s="Member";1!==t.length&&(s+="s");var n=void 0;return n=t.length===this.state.users.length?t.length+" "+s:t.length+" "+s+" of "+this.state.users.length+" Total",React.createElement(_,{dialogClassName:"more-modal",show:this.props.show,onHide:this.handleHide},React.createElement(_.Header,{closeButton:!0},React.createElement(_.Title,null,"Direct Messages")),React.createElement(_.Body,{ref:"modalBody"},React.createElement("div",{className:"filter-row"},React.createElement("div",{className:"col-sm-6"},React.createElement("input",{ref:"filter",className:"form-control filter-textbox",placeholder:"Search members",onInput:this.handleFilterChange})),React.createElement("div",{className:"col-sm-6"},React.createElement("span",{className:"member-count"},n))),React.createElement("div",{ref:"userList",className:"user-list"},React.createElement("table",{className:"more-table table"},React.createElement("tbody",null,a)))),React.createElement(_.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},"Close")))}}]),t}(React.Component);a.default=E,E.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func}},{"../stores/user_store.jsx":335,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],184:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/keys"),r=s(n),l=e("babel-runtime/core-js/object/get-prototype-of"),i=s(l),o=e("babel-runtime/helpers/classCallCheck"),c=s(o),u=e("babel-runtime/helpers/createClass"),d=s(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=s(m),h=e("babel-runtime/helpers/inherits"),f=s(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../stores/socket_store.jsx"),b=s(g),v=e("../stores/user_store.jsx"),_=s(v),E=e("../utils/constants.jsx"),y=s(E),R=y.default.SocketEvents,C=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(0,i.default)(t).call(this,e));return a.onChange=a.onChange.bind(a),a.updateTypingText=a.updateTypingText.bind(a),a.componentWillReceiveProps=a.componentWillReceiveProps.bind(a),a.typingUsers={},a.state={text:""},a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){b.default.addChangeListener(this.onChange)}},{key:"componentWillReceiveProps",value:function(e){if(this.props.channelId!==e.channelId){for(var t in this.typingUsers)this.typingUsers.hasOwnProperty(t)&&clearTimeout(this.typingUsers[t]);this.typingUsers={},this.setState({text:""})}}},{key:"componentWillUnmount",value:function(){b.default.removeChangeListener(this.onChange)}},{key:"onChange",value:function(e){var t="Someone";e.action===R.TYPING&&this.props.channelId===e.channel_id&&this.props.parentId===e.props.parent_id?(_.default.hasProfile(e.user_id)&&(t=_.default.getProfile(e.user_id).username),this.typingUsers[t]&&clearTimeout(this.typingUsers[t]),this.typingUsers[t]=setTimeout(function(e){delete this.typingUsers[e],this.updateTypingText()}.bind(this,t),y.default.UPDATE_TYPING_MS),this.updateTypingText()):e.action===R.POSTED&&e.channel_id===this.props.channelId&&(_.default.hasProfile(e.user_id)&&(t=_.default.getProfile(e.user_id).username),clearTimeout(this.typingUsers[t]),delete this.typingUsers[t],this.updateTypingText())}},{key:"updateTypingText",value:function(){var e=(0,r.default)(this.typingUsers),t="";switch(e.length){case 0:t="";break;case 1:t=e[0]+" is typing...";break;default:var a=e.pop();t=e.join(", ")+" and "+a+" are typing..."}this.setState({text:t})}},{key:"render",value:function(){return React.createElement("span",{className:"msg-typing"},this.state.text)}}]),t}(React.Component);a.default=C,C.propTypes={channelId:React.PropTypes.string,parentId:React.PropTypes.string}},{"../stores/socket_store.jsx":332,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],185:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./edit_channel_header_modal.jsx"),g=n(f),b=e("./edit_channel_purpose_modal.jsx"),v=n(b),_=e("./message_wrapper.jsx"),E=n(_),y=e("./notify_counts.jsx"),R=n(y),C=e("./channel_members_modal.jsx"),w=n(C),S=e("./channel_info_modal.jsx"),k=n(S),N=e("./channel_invite_modal.jsx"),M=n(N),x=e("./channel_notifications_modal.jsx"),j=n(x),T=e("./delete_channel_modal.jsx"),P=n(T),O=e("./toggle_modal_button.jsx"),I=n(O),D=e("../stores/user_store.jsx"),L=n(D),A=e("../stores/channel_store.jsx"),F=n(A),U=e("../stores/team_store.jsx"),H=n(U),B=e("../utils/client.jsx"),q=s(B),G=e("../utils/async_client.jsx"),V=s(G),W=e("../utils/utils.jsx"),z=s(W),K=e("../utils/constants.jsx"),Y=n(K),J=e("../dispatcher/app_dispatcher.jsx"),Z=n(J),X=Y.default.ActionTypes,Q=ReactBootstrap.Popover,ee=ReactBootstrap.OverlayTrigger,te=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.onChange=a.onChange.bind(a),a.handleLeave=a.handleLeave.bind(a),a.showSearch=a.showSearch.bind(a),a.showEditChannelHeaderModal=a.showEditChannelHeaderModal.bind(a),a.createCollapseButtons=a.createCollapseButtons.bind(a),a.createDropdown=a.createDropdown.bind(a);var s=a.getStateFromStores();return s.showEditChannelPurposeModal=!1,s.showEditChannelHeaderModal=!1,s.showMembersModal=!1,a.state=s,a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStores",value:function(){return{channel:F.default.getCurrent(),member:F.default.getCurrentMember(),users:F.default.getCurrentExtraInfo().members}}},{key:"componentDidMount",value:function(){F.default.addChangeListener(this.onChange),F.default.addExtraInfoChangeListener(this.onChange),$(".inner__wrap").click(this.hideSidebars)}},{key:"componentWillUnmount",value:function(){F.default.removeChangeListener(this.onChange),F.default.removeExtraInfoChangeListener(this.onChange)}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleLeave",value:function(){q.leaveChannel(this.state.channel.id,function(){V.getChannels(!0),window.location.href=H.default.getCurrentTeamUrl()+"/channels/town-square"},function(e){V.dispatchError(e,"handleLeave")})}},{key:"hideSidebars",value:function(e){var t=$(window).outerWidth();768>=t&&(Z.default.handleServerAction({type:X.RECIEVED_SEARCH,results:null}),Z.default.handleServerAction({type:X.RECIEVED_POST_SELECTED,results:null}),"navbar-toggle"!==e.target.className&&"icon-bar"!==e.target.className&&($(".inner__wrap").removeClass("move--right move--left move--left-small"),$(".sidebar--left").removeClass("move--right"),$(".sidebar--right").removeClass("move--left"),$(".sidebar--menu").removeClass("move--left")))}},{key:"toggleLeftSidebar",value:function(){$(".inner__wrap").toggleClass("move--right"),$(".sidebar--left").toggleClass("move--right")}},{key:"toggleRightSidebar",value:function(){$(".inner__wrap").toggleClass("move--left-small"),$(".sidebar--menu").toggleClass("move--left")}},{key:"showSearch",value:function(){Z.default.handleServerAction({type:X.SHOW_SEARCH})}},{key:"onChange",value:function(){this.setState(this.getStateFromStores()),$("#navbar .navbar-brand .description").popover({placement:"bottom",trigger:"click",html:!0})}},{key:"showEditChannelHeaderModal",value:function(){this.refs.headerOverlay&&this.refs.headerOverlay.hide(),this.setState({showEditChannelHeaderModal:!0})}},{key:"createDropdown",value:function(e,t,a,s,n){var r=this;if(e){var l=React.createElement("li",{role:"presentation"},React.createElement(I.default,{role:"menuitem",dialogType:k.default,dialogProps:{channel:e}},"View Info")),i=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.showEditChannelHeaderModal},"Set Channel Header...")),o=null;s||(o=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return r.setState({showEditChannelPurposeModal:!0})}},"Set Channel Purpose...")));var c,u;s||F.default.isDefault(e)||(c=React.createElement("li",{role:"presentation"},React.createElement(I.default,{role:"menuitem",dialogType:M.default,dialogProps:{channel:e}},"Add Members")),u=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:this.handleLeave},"Leave Channel")));var d,m,p;!s&&a&&(F.default.isDefault(e)||(d=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#",onClick:function(){return r.setState({showMembersModal:!0})}},"Manage Members")),p=React.createElement("li",{role:"presentation"},React.createElement(I.default,{role:"menuitem",dialogType:P.default,dialogProps:{channel:e}},"Delete Channel..."))),m=React.createElement("li",{role:"presentation"},React.createElement("a",{role:"menuitem",href:"#","data-toggle":"modal","data-target":"#rename_channel","data-display":e.display_name,"data-name":e.name,"data-channelid":e.id},"Rename Channel...")));var h;return s||(h=React.createElement("li",{role:"presentation"},React.createElement(I.default,{role:"menuitem",dialogType:j.default,dialogProps:{channel:e}},"Notification Preferences"))),React.createElement("div",{className:"navbar-brand"},React.createElement("div",{className:"dropdown"},React.createElement(ee,{ref:"headerOverlay",trigger:"click",placement:"bottom",overlay:n,className:"description",rootClose:!0},React.createElement("div",{className:"description info-popover"})),React.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{className:"heading"},t," "),React.createElement("span",{className:"glyphicon glyphicon-chevron-down header-dropdown__icon"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},l,c,d,i,o,h,m,p,u)))}return React.createElement("div",{className:"navbar-brand"},React.createElement("a",{href:H.default.getCurrentTeamUrl()+"/channels/town-square",className:"heading"},t))}},{key:"createCollapseButtons",value:function(e){var t=[];return null==e?t.push(React.createElement("button",{key:"navbar-toggle-collapse",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#navbar-collapse-1"},React.createElement("span",{className:"sr-only"},"Toggle sidebar"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}))):(t.push(React.createElement("button",{key:"navbar-toggle-sidebar",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:this.toggleLeftSidebar},React.createElement("span",{className:"sr-only"},"Toggle sidebar"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement(R.default,null))),t.push(React.createElement("button",{key:"navbar-toggle-menu",type:"button",className:"navbar-toggle menu-toggle pull-right","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:this.toggleRightSidebar},React.createElement("span",{dangerouslySetInnerHTML:{__html:Y.default.MENU_ICON}})))),t}},{key:"render",value:function(){var e,t=this,a=L.default.getCurrentId(),s=this.state.channel,n=this.props.teamDisplayName,r=!1,l=!1,i=null,o=null;s&&(e=React.createElement(Q,{bsStyle:"info",placement:"bottom",id:"header-popover"},React.createElement(E.default,{message:s.header,options:{singleline:!0,mentionHighlight:!1}})),r=z.isAdmin(this.state.member.roles),"O"===s.type?n=s.display_name:"P"===s.type?n=s.display_name:"D"===s.type&&(l=!0,this.state.users.length>1&&(n=this.state.users[0].id===a?L.default.getProfile(this.state.users[1].id).username:L.default.getProfile(this.state.users[0].id).username)),0===s.header.length&&(e=React.createElement(Q,{bsStyle:"info",placement:"bottom",id:"header-popover"},React.createElement("div",null,"No channel header yet.",React.createElement("br",null),React.createElement("a",{href:"#",onClick:this.showEditChannelHeaderModal},"Click here")," to add one."))),i=React.createElement(g.default,{show:this.state.showEditChannelHeaderModal,onHide:function(){return t.setState({showEditChannelHeaderModal:!1})},channel:s}),o=React.createElement(v.default,{show:this.state.showEditChannelPurposeModal,onModalDismissed:function(){return t.setState({showEditChannelPurposeModal:!1})},channel:s}));var c=this.createCollapseButtons(a),u=React.createElement("button",{type:"button",className:"navbar-toggle pull-right",onClick:this.showSearch},React.createElement("span",{className:"glyphicon glyphicon-search icon--white"})),d=this.createDropdown(s,n,r,l,e);return React.createElement("div",null,React.createElement("nav",{className:"navbar navbar-default navbar-fixed-top",role:"navigation"},React.createElement("div",{className:"container-fluid theme"},React.createElement("div",{className:"navbar-header"},c,u,d))),i,o,React.createElement(w.default,{show:this.state.showMembersModal,onModalDismissed:function(){return t.setState({showMembersModal:!1})},channel:{channel:s}}))}}]),t}(React.Component);a.default=te,te.defaultProps={teamDisplayName:""},te.propTypes={teamDisplayName:React.PropTypes.string}},{"../dispatcher/app_dispatcher.jsx":281,"../stores/channel_store.jsx":325,"../stores/team_store.jsx":334,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./channel_info_modal.jsx":143,"./channel_invite_modal.jsx":144,"./channel_members_modal.jsx":146,"./channel_notifications_modal.jsx":147,"./delete_channel_modal.jsx":155,"./edit_channel_header_modal.jsx":158,"./edit_channel_purpose_modal.jsx":159,"./message_wrapper.jsx":181,"./notify_counts.jsx":189,"./toggle_modal_button.jsx":257,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],186:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=[],t=y.default.getTeams();for(var a in t)t.hasOwnProperty(a)&&e.push(t[a]);return e.sort(b.sortByDisplayName),{teams:e}}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../utils/utils.jsx"),b=s(g),v=e("../utils/client.jsx"),_=s(v),E=e("../stores/user_store.jsx"),y=n(E),R=e("../stores/team_store.jsx"),C=n(R),w=e("../dispatcher/event_helpers.jsx"),S=s(w),k=e("./about_build_modal.jsx"),N=n(k),M=e("./team_members_modal.jsx"),x=n(M),j=e("./toggle_modal_button.jsx"),T=n(j),P=e("./user_settings/user_settings_modal.jsx"),O=n(P),I=e("../utils/constants.jsx"),D=n(I),L=function(e){function a(e){(0,c.default)(this,a);var t=(0,p.default)(this,(0,i.default)(a).call(this,e));t.blockToggle=!1,t.handleLogoutClick=t.handleLogoutClick.bind(t),t.handleAboutModal=t.handleAboutModal.bind(t),t.onListenerChange=t.onListenerChange.bind(t),t.aboutModalDismissed=t.aboutModalDismissed.bind(t);var s=r();return s.showUserSettingsModal=!1,s.showAboutModal=!1,t.state=s,t}return(0,f.default)(a,e),(0,d.default)(a,[{key:"handleLogoutClick",value:function(e){e.preventDefault(),_.logout()}},{key:"handleAboutModal",value:function(){this.setState({showAboutModal:!0})}},{key:"aboutModalDismissed",value:function(){this.setState({showAboutModal:!1})}},{key:"componentDidMount",value:function(){var e=this;y.default.addTeamsChangeListener(this.onListenerChange),C.default.addChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.dropdown)).on("hide.bs.dropdown",function(){$(".sidebar--left .dropdown-menu").scrollTop(0),e.blockToggle=!0,setTimeout(function(){e.blockToggle=!1},100)})}},{key:"componentWillUnmount",value:function(){y.default.removeTeamsChangeListener(this.onListenerChange),C.default.removeChangeListener(this.onListenerChange),$(ReactDOM.findDOMNode(this.refs.dropdown)).off("hide.bs.dropdown")}},{key:"onListenerChange",value:function(){var e=r();b.areObjectsEqual(e,this.state)||this.setState(e)}},{key:"render",value:function(){var e=this,a="",s="",n="",r="",l="",i=y.default.getCurrentUser(),o=!1,c=!1,u=null;null!=i&&(o=b.isAdmin(i.roles),c=b.isSystemAdmin(i.roles),s=React.createElement("li",null,React.createElement("a",{href:"#",onClick:S.showInviteMemberModal},"Invite New Member")),this.props.teamType===D.default.OPEN_TEAM&&(a=React.createElement("li",null,React.createElement("a",{href:"#",onClick:S.showGetTeamInviteLinkModal},"Get Team Invite Link")))),o&&(n=React.createElement("li",null,React.createElement(T.default,{dialogType:x.default},"Manage Members")),l=React.createElement("li",{className:"divider"}),u=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_settings"},"Team Settings"))),c&&(r=React.createElement("li",null,React.createElement("a",{href:"/admin_console?"+b.getSessionIndex()},"System Console")));var d=[];this.state.teams.length>1&&(d.push(React.createElement("li",{className:"divider",key:"div"})),this.state.teams.forEach(function(t){t.name!==e.props.teamName&&d.push(React.createElement("li",{key:t.name},React.createElement("a",{href:b.getWindowLocationOrigin()+"/"+t.name},"Switch to "+t.display_name)))})),"true"===t.window.mm_config.EnableTeamCreation&&d.push(React.createElement("li",{key:"newTeam_li"},React.createElement("a",{key:"newTeam_a",target:"_blank",href:b.getWindowLocationOrigin()+"/signup_team"},"Create a New Team")));var m=null;t.window.mm_config.HelpLink&&(m=React.createElement("li",null,React.createElement("a",{target:"_blank",href:t.window.mm_config.HelpLink},"Help")));var p=null;return t.window.mm_config.ReportAProblemLink&&(p=React.createElement("li",null,React.createElement("a",{target:"_blank",href:t.window.mm_config.ReportAProblemLink},"Report a Problem"))),React.createElement("ul",{className:"nav navbar-nav navbar-right"},React.createElement("li",{ref:"dropdown",className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},React.createElement("span",{className:"dropdown__icon",dangerouslySetInnerHTML:{__html:D.default.MENU_ICON}})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:function(){return e.setState({showUserSettingsModal:!0})}},"Account Settings")),s,a,React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleLogoutClick},"Logout")),l,u,n,r,d,React.createElement("li",{className:"divider"}),m,p,React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleAboutModal},"About Mattermost")),React.createElement(O.default,{show:this.state.showUserSettingsModal,onModalDismissed:function(){return e.setState({showUserSettingsModal:!1})}}),React.createElement(N.default,{show:this.state.showAboutModal,onModalDismissed:this.aboutModalDismissed}))))}}]),a}(React.Component);a.default=L,L.defaultProps={teamType:""},L.propTypes={teamType:React.PropTypes.string,teamDisplayName:React.PropTypes.string,teamName:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/event_helpers.jsx":282,"../stores/team_store.jsx":334,"../stores/user_store.jsx":335,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./about_build_modal.jsx":110,"./team_members_modal.jsx":242,"./toggle_modal_button.jsx":257,"./user_settings/user_settings_modal.jsx":275,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],187:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/async_client.jsx"),v=s(b),_=e("../utils/client.jsx"),E=s(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("./new_channel_modal.jsx"),w=n(C),S=e("./change_url_modal.jsx"),k=n(S),N=1,M=2,x=3,j=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.doSubmit=a.doSubmit.bind(a),a.typeSwitched=a.typeSwitched.bind(a),a.urlChangeRequested=a.urlChangeRequested.bind(a),a.urlChangeSubmitted=a.urlChangeSubmitted.bind(a),a.urlChangeDismissed=a.urlChangeDismissed.bind(a),a.channelDataChanged=a.channelDataChanged.bind(a),a.state={serverError:"",channelType:"O",flowState:N,channelDisplayName:"",channelName:"",channelPurpose:"",nameModified:!1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.show===!0&&this.props.show===!1&&this.setState({serverError:"",channelType:e.channelType,flowState:N,channelDisplayName:"",channelName:"",channelPurpose:"",nameModified:!1})}},{key:"doSubmit",value:function(){var e=this,t={};if(t.display_name=this.state.channelDisplayName,!t.display_name)return void this.setState({serverError:"Invalid Channel Name"});if(t.name=this.state.channelName,t.name.length<2)return void this.setState({flowState:x});var a=R.default.getCurrentUser();t.team_id=a.team_id,t.purpose=this.state.channelPurpose,t.type=this.state.channelType,E.createChannel(t,function(t){e.props.onModalDismissed(),v.getChannel(t.id),g.switchChannel(t)},function(t){return"Name must be 2 or more lowercase alphanumeric characters"===t.message&&e.setState({flowState:x}),"A channel with that handle already exists"===t.message?void e.setState({serverError:"A channel with that URL already exists"}):void e.setState({serverError:t.message})})}},{key:"typeSwitched",value:function(){"P"===this.state.channelType?this.setState({channelType:"O"}):this.setState({channelType:"P"})}},{key:"urlChangeRequested",value:function(){this.setState({flowState:M})}},{key:"urlChangeSubmitted",value:function(e){this.state.flowState===x?this.setState({channelName:e,nameModified:!0},this.doSubmit):this.setState({flowState:N,serverError:"",channelName:e,nameModified:!0})}},{key:"urlChangeDismissed",value:function(){this.setState({flowState:N})}},{key:"channelDataChanged",value:function(e){this.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose}),this.state.nameModified||this.setState({channelName:g.cleanUpUrlable(e.displayName.trim())})}},{key:"render",value:function(){var e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose},t=!1,a=!1,s=!1,n="",r="",l="";if(this.props.show)switch(this.state.flowState){case N:"O"===this.state.channelType?(t=!0,l="Channel"):(a=!0,l="Group");break;case M:s=!0,n="Change "+l+" URL",r="Change "+l+" URL";break;case x:s=!0,n="Set "+l+" URL",r="Create "+l}return React.createElement("span",null,React.createElement(w.default,{show:t,channelType:"O",channelData:e,serverError:this.state.serverError,onSubmitChannel:this.doSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),React.createElement(w.default,{show:a,channelType:"P",channelData:e,serverError:this.state.serverError,onSubmitChannel:this.doSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),React.createElement(k.default,{show:s,title:n,description:"Some characters are not allowed in URLs and may be removed.",urlLabel:l+" URL",submitButtonText:r,currentURL:this.state.channelName,serverError:this.state.serverError,onModalSubmit:this.urlChangeSubmitted,onModalDismissed:this.urlChangeDismissed}))}}]),t}(React.Component);a.default=j,j.defaultProps={show:!1,channelType:"O"},j.propTypes={show:React.PropTypes.bool.isRequired,channelType:React.PropTypes.string.isRequired,onModalDismissed:React.PropTypes.func.isRequired}},{"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./change_url_modal.jsx":141,"./new_channel_modal.jsx":188,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],188:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=ReactBootstrap.Modal,v=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleChange=a.handleChange.bind(a),a.state={displayNameError:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.show===!0&&this.props.show===!1&&this.setState({displayNameError:""})}},{key:"componentDidMount",value:function(){g.isBrowserIE()&&$("body").addClass("browser--IE")}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.display_name).value.trim();return t.length<1?void this.setState({displayNameError:"This field is required"}):void this.props.onSubmitChannel()}},{key:"handleChange",value:function(){var e={displayName:ReactDOM.findDOMNode(this.refs.display_name).value,purpose:ReactDOM.findDOMNode(this.refs.channel_purpose).value};this.props.onDataChanged(e)}},{key:"render",value:function(){var e=null,t=null,a="form-group";this.state.displayNameError&&(e=React.createElement("p",{className:"input__help error"},this.state.displayNameError),a+=" has-error"),this.props.serverError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("p",{className:"input__help error"},this.props.serverError)));var s="",n="";switch(this.props.channelType){case"P":s="Group",n=React.createElement("div",{className:"modal-intro"},"Create a new private group with restricted membership. ",React.createElement("a",{href:"#",onClick:this.props.onTypeSwitched},"Create a public channel"));break;case"O":s="Channel",n=React.createElement("div",{className:"modal-intro"},"Create a new public channel anyone can join. ",React.createElement("a",{href:"#",onClick:this.props.onTypeSwitched},"Create a private group"))}var r=g.getShortenedTeamURL();return React.createElement("span",null,React.createElement(b,{show:this.props.show,bsSize:"large",onHide:this.props.onModalDismissed},React.createElement(b.Header,{closeButton:!0},React.createElement(b.Title,null,"New "+s)),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(b.Body,null,React.createElement("div",null,n),React.createElement("div",{className:a},React.createElement("label",{className:"col-sm-3 form__label control-label"},"Name"),React.createElement("div",{className:"col-sm-9"},React.createElement("input",{onChange:this.handleChange,type:"text",ref:"display_name",className:"form-control",placeholder:'E.g.: "Bugs", "Marketing", "办公室恋情"',maxLength:"22",value:this.props.channelData.displayName,autoFocus:!0,tabIndex:"1"}),e,React.createElement("p",{className:"input__help dark"},"URL: "+r+this.props.channelData.name+" (",React.createElement("a",{href:"#",onClick:this.props.onChangeURLPressed},"Edit"),")"))),React.createElement("div",{className:"form-group less"},React.createElement("div",{className:"col-sm-3"},React.createElement("label",{className:"form__label control-label"},"Purpose"),React.createElement("label",{className:"form__label light"},"(optional)")),React.createElement("div",{className:"col-sm-9"},React.createElement("textarea",{className:"form-control no-resize",ref:"channel_purpose",rows:"4",placeholder:"Purpose",maxLength:"128",value:this.props.channelData.purpose,onChange:this.handleChange,tabIndex:"2"}),React.createElement("p",{className:"input__help"},"Describe how this "+s+" should be used."),t))),React.createElement(b.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onModalDismissed},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},"Create New "+s)))))}}]),t}(React.Component);a.default=v,v.defaultProps={show:!1,channelType:"O",serverError:""},v.propTypes={show:React.PropTypes.bool.isRequired,channelType:React.PropTypes.string.isRequired,channelData:React.PropTypes.object.isRequired,serverError:React.PropTypes.string,onSubmitChannel:React.PropTypes.func.isRequired,onModalDismissed:React.PropTypes.func.isRequired,onTypeSwitched:React.PropTypes.func.isRequired,
onChangeURLPressed:React.PropTypes.func.isRequired,onDataChanged:React.PropTypes.func.isRequired}},{"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],189:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=0,t=_.default.getAll(),a=_.default.getAllMembers();return t.forEach(function(t){var s=a[t.id];"D"===t.type?e+=t.total_msg_count-s.msg_count:s.mention_count>0?e+=s.mention_count:"mention"!==s.notify_props.mark_unread&&t.total_msg_count-s.msg_count>0&&(e+=1)}),{count:e}}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../utils/utils.jsx"),b=s(g),v=e("../stores/channel_store.jsx"),_=n(v),E=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(0,i.default)(t).call(this,e));return a.onListenerChange=a.onListenerChange.bind(a),a.state=r(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){_.default.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){_.default.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=r();b.areObjectsEqual(e,this.state)||this.setState(e)}},{key:"render",value:function(){return this.state.count?React.createElement("span",{className:"badge badge-notify"},this.state.count):null}}]),t}(React.Component);a.default=E},{"../stores/channel_store.jsx":325,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],190:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./password_reset_send_link.jsx"),f=s(h),g=e("./password_reset_form.jsx"),b=s(g),v=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return"false"===this.props.isReset?React.createElement(f.default,{teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName}):React.createElement(b.default,{teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName,hash:this.props.hash,data:this.props.data})}}]),t}(React.Component);a.default=v,v.defaultProps={isReset:"",teamName:"",teamDisplayName:"",hash:"",data:""},v.propTypes={isReset:React.PropTypes.string,teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string,hash:React.PropTypes.string,data:React.PropTypes.string}},{"./password_reset_form.jsx":191,"./password_reset_send_link.jsx":192,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],191:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("../utils/constants.jsx"),v=n(b),_=e("mm-intl"),E=(0,_.defineMessages)({error:{id:"password_form.error",defaultMessage:"Please enter at least {chars} characters."},update:{id:"password_form.update",defaultMessage:"Your password has been updated successfully."},pwd:{id:"password_form.pwd",defaultMessage:"Password"}}),y=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.handlePasswordReset=t.handlePasswordReset.bind(t),t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"handlePasswordReset",value:function(e){e.preventDefault();var t=this.props.intl.formatMessage,a={},s=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!s||s.length<v.default.MIN_PASSWORD_LENGTH)return a.error=t(E.error,{chars:v.default.MIN_PASSWORD_LENGTH}),void this.setState(a);a.error=null,this.setState(a);var n={};n.new_password=s,n.hash=this.props.hash,n.data=this.props.data,n.name=this.props.teamName,g.resetPassword(n,function(){this.setState({error:null,updateText:t(E.update)})}.bind(this),function(e){this.setState({error:e.message,updateText:null})}.bind(this))}},{key:"render",value:function(){var e=null;this.state.updateText&&(e=React.createElement("div",{className:"form-group"},React.createElement("br",null),React.createElement("label",{className:"control-label reset-form"},this.state.updateText,React.createElement(_.FormattedHTMLMessage,{id:"password_form.click",defaultMessage:"Click <a href={url}>here</a> to log in.",values:{url:"/"+this.props.teamName+"/login"}}))));var a=null;this.state.error&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var s="form-group";a&&(s+=" has-error");var n=this.props.intl.formatMessage;return React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"password_form.title",defaultMessage:"Password Reset"})),React.createElement("form",{onSubmit:this.handlePasswordReset},React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"password_form.enter",defaultMessage:"Enter a new password for your {teamDisplayName} {siteName} account.",values:{teamDisplayName:this.props.teamDisplayName,siteName:t.window.mm_config.SiteName}})),React.createElement("div",{className:s},React.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:n(E.pwd),spellCheck:"false"})),a,React.createElement("button",{type:"submit",className:"btn btn-primary"},React.createElement(_.FormattedMessage,{id:"password_form.change",defaultMessage:"Change my password"})),e)))}}]),a}(React.Component);y.defaultProps={teamName:"",teamDisplayName:"",hash:"",data:""},y.propTypes={intl:_.intlShape.isRequired,teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string,hash:React.PropTypes.string,data:React.PropTypes.string},a.default=(0,_.injectIntl)(y)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":338,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],192:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({error:{id:"password_send.error",defaultMessage:"Please enter a valid email address."},link:{id:"password_send.link",defaultMessage:"<p>A password reset link has been sent to <b>{email}</b> for your <b>{teamDisplayName}</b> team on {hostname}.</p>"},checkInbox:{id:"password_send.checkInbox",defaultMessage:"Please check your inbox."},email:{id:"password_send.email",defaultMessage:"Email"}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleSendLink=a.handleSendLink.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSendLink",value:function(e){e.preventDefault();var t={},a=this.props.intl.formatMessage,s=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();if(!s||!g.isEmail(s))return t.error=a(E.error),void this.setState(t);t.error=null,this.setState(t);var n={};n.email=s,n.name=this.props.teamName,v.sendPasswordReset(n,function(){this.setState({error:null,updateText:a(E.link,{email:s,teamDisplayName:this.props.teamDisplayName,hostname:window.location.hostname}),moreUpdateText:a(E.checkInbox)}),$(ReactDOM.findDOMNode(this.refs.reset_form)).hide()}.bind(this),function(e){this.setState({error:e.message,update_text:null,moreUpdateText:null})}.bind(this))}},{key:"render",value:function(){var e=null;this.state.updateText&&(e=React.createElement("div",{className:"reset-form alert alert-success",dangerouslySetInnerHTML:{__html:this.state.updateText+this.state.moreUpdateText}}));var t=null;this.state.error&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";t&&(a+=" has-error");var s=this.props.intl.formatMessage;return React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,React.createElement(_.FormattedMessage,{id:"password_send.title",defaultMessage:"Password Reset"})),e,React.createElement("form",{onSubmit:this.handleSendLink,ref:"reset_form"},React.createElement("p",null,React.createElement(_.FormattedMessage,{id:"password_send.description",defaultMessage:"To reset your password, enter the email address you used to sign up for {teamName}.",values:{teamName:this.props.teamDisplayName}})),React.createElement("div",{className:a},React.createElement("input",{type:"email",className:"form-control",name:"email",ref:"email",placeholder:s(E.email),spellCheck:"false"})),t,React.createElement("button",{type:"submit",className:"btn btn-primary"},React.createElement(_.FormattedMessage,{id:"password_send.reset",defaultMessage:"Reset my password"})))))}}]),t}(React.Component);y.defaultProps={teamName:"",teamDisplayName:""},y.propTypes={intl:_.intlShape.isRequired,teamName:React.PropTypes.string,teamDisplayName:React.PropTypes.string},a.default=(0,_.injectIntl)(y)},{"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],193:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../utils/utils.jsx"),v=s(b),_=e("../utils/constants.jsx"),E=n(_),y=e("../stores/channel_store.jsx"),R=n(y),C=ReactBootstrap.Popover,w=ReactBootstrap.Overlay,S=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleShowDirectChannel=a.handleShowDirectChannel.bind(a),a.closePopover=a.closePopover.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.setState({showPopover:!1})}},{key:"componentDidMount",value:function(){var e=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(t){var a=void 0;a=t instanceof this.constructor?t:$(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type),e.call(this,t),t.currentTarget&&a.$tip&&a.$tip.one("mouseenter",function(){clearTimeout(a.timeout),a.$tip.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(a,a)})})}}},{key:"componentDidUpdate",value:function(){$(ReactDOM.findDOMNode(this.refs.memebersPopover)).find(".popover-content").perfectScrollbar()}},{key:"handleShowDirectChannel",value:function(e,t){var a=this;t.preventDefault(),v.openDirectChannelToUser(e,function(e,t){v.switchChannel(e),t&&a.closePopover()},function(){a.closePopover()})}},{key:"closePopover",value:function(){this.setState({showPopover:!1})}},{key:"render",value:function(){var e=this,t=[],a=this.props.members,s=g.default.getProfilesUsernameMap(),n=g.default.getCurrentId(),r=R.default.getCurrent();a&&s&&(a.sort(function(e,t){var a=v.displayUsername(e.id),s=v.displayUsername(t.id);return a.localeCompare(s)}),a.forEach(function(a,l){var i="";n!==a.id&&"D"!==r.type&&(i=React.createElement("a",{href:"#",className:"btn-message",onClick:function(t){return e.handleShowDirectChannel(a,t)}},"Message"));var o="";s[a.username]&&(o=v.displayUsername(s[a.username].id)),o&&s[a.username].delete_at<=0&&t.push(React.createElement("div",{className:"text-nowrap",key:"popover-member-"+l},React.createElement("img",{className:"profile-img rounded pull-left",width:"26px",height:"26px",src:"/api/v1/users/"+a.id+"/image?time="+a.update_at+"&"+v.getSessionIndex()}),React.createElement("div",{className:"pull-left"},React.createElement("div",{className:"more-name"},o)),React.createElement("div",{className:"pull-right"},i)))}));var l=this.props.memberCount,i="-";return!l&&a&&(l=a.length),l>E.default.MAX_CHANNEL_POPOVER_COUNT?i=E.default.MAX_CHANNEL_POPOVER_COUNT+"+":l>0&&(i=l.toString()),React.createElement("div",null,React.createElement("div",{id:"member_popover",ref:"member_popover_target",onClick:function(t){return e.setState({popoverTarget:t.target,showPopover:!e.state.showPopover})}},React.createElement("div",null,i,React.createElement("span",{className:"fa fa-user","aria-hidden":"true"}))),React.createElement(w,{rootClose:!0,onHide:this.closePopover,show:this.state.showPopover,target:function(){return e.state.popoverTarget},placement:"bottom"},React.createElement(C,{ref:"memebersPopover",title:"Members",id:"member-list-popover"},t)))}}]),t}(React.Component);a.default=S,S.propTypes={members:React.PropTypes.array.isRequired,memberCount:React.PropTypes.number,channelId:React.PropTypes.string.isRequired}},{"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],194:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./post_header.jsx"),g=n(f),b=e("./post_body.jsx"),v=n(b),_=e("../dispatcher/app_dispatcher.jsx"),E=n(_),y=e("../utils/constants.jsx"),R=n(y),C=e("../stores/user_store.jsx"),w=n(C),S=e("../stores/post_store.jsx"),k=n(S),N=e("../stores/channel_store.jsx"),M=n(N),x=e("../utils/client.jsx"),j=s(x),T=e("../utils/async_client.jsx"),P=s(T),O=e("../utils/utils.jsx"),I=s(O),D=R.default.ActionTypes,L=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.handleCommentClick=t.handleCommentClick.bind(t),t.forceUpdateInfo=t.forceUpdateInfo.bind(t),t.retryPost=t.retryPost.bind(t),t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"handleCommentClick",value:function(e){e.preventDefault();var t={};t.order=[this.props.post.id],t.posts=this.props.posts,E.default.handleServerAction({type:D.RECIEVED_POST_SELECTED,post_list:t}),E.default.handleServerAction({type:D.RECIEVED_SEARCH,results:null})}},{key:"forceUpdateInfo",value:function(){this.refs.info.forceUpdate(),this.refs.header.forceUpdate()}},{key:"retryPost",value:function(e){var t=this;e.preventDefault();var a=this.props.post;j.createPost(a,a.channel_id,function(e){P.getPosts();var t=M.default.get(a.channel_id),s=M.default.getMember(a.channel_id);s.msg_count=t.total_msg_count,s.last_viewed_at=I.getTimestamp(),M.default.setChannelMember(s),E.default.handleServerAction({type:D.RECIEVED_POST,post:e})},function(){a.state=R.default.POST_FAILED,k.default.updatePendingPost(a),t.forceUpdate()}),a.state=R.default.POST_LOADING,k.default.updatePendingPost(a),this.forceUpdate()}},{key:"shouldComponentUpdate",value:function(e){return I.areObjectsEqual(e.post,this.props.post)?e.sameRoot!==this.props.sameRoot?!0:e.sameUser!==this.props.sameUser?!0:e.displayNameType!==this.props.displayNameType?!0:this.getCommentCount(e)!==this.getCommentCount(this.props)?!0:e.shouldHighlight!==this.props.shouldHighlight?!0:!1:!0}},{key:"getCommentCount",value:function(e){var t=e.post,a=e.parentPost,s=e.posts,n=0,r=void 0;r=a?t.root_id:t.id;for(var l in s)s[l].root_id===r&&(n+=1);return n}},{key:"render",value:function(){var e=this.props.post,a=this.props.parentPost,s=this.props.posts;e.props||(e.props={});var n="Post";e.root_id&&e.root_id.length>0&&(n="Comment");var r=this.getCommentCount(this.props),l=void 0;l=this.props.sameRoot?"same--root":"other--root";var i="";"Post"!==n?i="post--comment":r>0&&(i="post--root");var o="";w.default.getCurrentId()!==e.user_id||e.props.from_webhook||I.isSystemMessage(e)||(o="current--user");var c=w.default.getProfile(e.user_id),u=w.default.getCurrentUser().update_at;c&&(u=c.update_at);var d="";this.props.sameUser&&(d="same--user");var m="";this.props.shouldHighlight&&(m="post--highlight");var p="";I.isSystemMessage(e)&&(p="post--system");var h=null;if(!this.props.hideProfilePic){var f="/api/v1/users/"+e.user_id+"/image?time="+u+"&"+I.getSessionIndex();e.props&&e.props.from_webhook&&"true"===t.window.mm_config.EnablePostIconOverride?e.props.override_icon_url&&(f=e.props.override_icon_url):I.isSystemMessage(e)&&(f=R.default.SYSTEM_MESSAGE_PROFILE_IMAGE),h=React.createElement("img",{src:f,height:"36",width:"36"})}return React.createElement("div",null,React.createElement("div",{id:"post_"+e.id,className:"post "+d+" "+l+" "+i+" "+o+" "+m+" "+p},React.createElement("div",{className:"post__content"},React.createElement("div",{className:"post__img"},h),React.createElement("div",null,React.createElement(g.default,{ref:"header",post:e,sameRoot:this.props.sameRoot,commentCount:r,handleCommentClick:this.handleCommentClick,isLastComment:this.props.isLastComment}),React.createElement(v.default,{post:e,sameRoot:this.props.sameRoot,parentPost:a,posts:s,handleCommentClick:this.handleCommentClick,retryPost:this.retryPost})))))}}]),a}(React.Component);a.default=L,L.propTypes={post:React.PropTypes.object,posts:React.PropTypes.object,parentPost:React.PropTypes.object,sameUser:React.PropTypes.bool,sameRoot:React.PropTypes.bool,hideProfilePic:React.PropTypes.bool,isLastComment:React.PropTypes.bool,shouldHighlight:React.PropTypes.bool,displayNameType:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":281,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./post_body.jsx":198,"./post_header.jsx":202,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],195:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/text_formatting.jsx"),g=s(f),b=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getFieldsTable=a.getFieldsTable.bind(a),a.getInitState=a.getInitState.bind(a),a.shouldCollapse=a.shouldCollapse.bind(a),a.toggleCollapseState=a.toggleCollapseState.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){$(this.refs.attachment).on("click",".attachment-link-more",this.toggleCollapseState)}},{key:"componentWillUnmount",value:function(){$(this.refs.attachment).off("click",".attachment-link-more",this.toggleCollapseState)}},{key:"componentWillMount",value:function(){this.setState(this.getInitState())}},{key:"getInitState",value:function(){var e=this.shouldCollapse(),t=g.formatText(this.props.attachment.text||""),a=t+(e?'<a class="attachment-link-more" href="#">▲ collapse text</a>':""),s=e?this.getCollapsedText():t;return{shouldCollapse:e,collapsedText:s,uncollapsedText:a,text:e?s:a,collapsed:e}}},{key:"toggleCollapseState",value:function(e){e.preventDefault();var t=this.state;t.text=t.collapsed?t.uncollapsedText:t.collapsedText,t.collapsed=!t.collapsed,this.setState(t)}},{key:"shouldCollapse",value:function(){var e=this.props.attachment.text||"";return(e.match(/\n/g)||[]).length>=5||e.length>700}},{key:"getCollapsedText",value:function(){var e=this.props.attachment.text||"";return(e.match(/\n/g)||[]).length>=5?e=e.split("\n").splice(0,5).join("\n"):e.length>700&&(e=e.substr(0,700)),g.formatText(e)+'<a class="attachment-link-more" href="#">▼ read more</a>'}},{key:"getFieldsTable",value:function(){var e=this.props.attachment.fields;if(!e||!e.length)return"";var t=e.filter(function(e){return e.short}).length>0,a=void 0,s=void 0;return t?!function(){var t=[],n=[];e.forEach(function(e,a){t.push(React.createElement("th",{className:"attachment___field-caption",key:"attachment__field-caption-"+a},e.title)),n.push(React.createElement("td",{className:"attachment___field",key:"attachment__field-"+a,dangerouslySetInnerHTML:{__html:g.formatText(e.value||"")}}))}),a=React.createElement("tr",null,t),s=React.createElement("tr",null,n)}():(s=[],e.forEach(function(e,t){s.push(React.createElement("tr",{key:"attachment__field-"+t},React.createElement("td",{className:"attachment___field-caption"},e.title),React.createElement("td",{className:"attachment___field",dangerouslySetInnerHTML:{__html:g.formatText(e.value||"")}})))})),React.createElement("table",{className:"attachment___fields"},React.createElement("thead",null,a),React.createElement("tbody",null,s))}},{key:"render",value:function(){var e=this.props.attachment,t=void 0;e.pretext&&(t=React.createElement("div",{className:"attachment__thumb-pretext",dangerouslySetInnerHTML:{__html:g.formatText(e.pretext)}}));var a=[];(e.author_name||e.author_icon)&&(e.author_icon&&a.push(React.createElement("img",{className:"attachment__author-icon",src:e.author_icon,key:"attachment__author-icon",height:"14",width:"14"})),e.author_name&&a.push(React.createElement("span",{className:"attachment__author-name",key:"attachment__author-name"},e.author_name))),e.author_link&&(a=React.createElement("a",{href:e.author_link,target:"_blank"},a));var s=void 0;e.title&&(s=e.title_link?React.createElement("h1",{className:"attachment__title"},React.createElement("a",{className:"attachment__title-link",href:e.title_link,target:"_blank"},e.title)):React.createElement("h1",{className:"attachment__title"},e.title));var n=void 0;e.text&&(n=React.createElement("div",{className:"attachment__text",dangerouslySetInnerHTML:{__html:this.state.text}}));var r=void 0;e.image_url&&(r=React.createElement("img",{className:"attachment__image",src:e.image_url}));var l=void 0;e.thumb_url&&(l=React.createElement("div",{className:"attachment__thumb-container"},React.createElement("img",{src:e.thumb_url})));var i=this.getFieldsTable(),o=void 0;return e.color&&"#"===e.color[0]&&(o={borderLeftColor:e.color}),React.createElement("div",{className:"attachment",ref:"attachment"},t,React.createElement("div",{className:"attachment__content"},React.createElement("div",{className:o?"clearfix attachment__container":"clearfix attachment__container attachment__container--"+e.color,style:o},a,s,React.createElement("div",null,React.createElement("div",{className:l?"attachment__body":"attachment__body attachment__body--no_thumb"},n,r,i),l,React.createElement("div",{style:{clear:"both"}})))))}}]),t}(React.Component);a.default=b,b.propTypes={attachment:React.PropTypes.object.isRequired}},{"../utils/text_formatting.jsx":343,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],196:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./post_attachment.jsx"),f=s(h),g=function(e){function t(e){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=[];return this.props.attachments.forEach(function(t,a){e.push(React.createElement(f.default,{attachment:t,key:"att_"+a}))}),React.createElement("div",{className:"attachment_list"},e)}}]),t}(React.Component);a.default=g,g.propTypes={attachments:React.PropTypes.array.isRequired}},{"./post_attachment.jsx":195,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],197:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.fetchData=a.fetchData.bind(a),a.isLoading=!1,a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.setState({data:{}})}},{key:"componentWillReceiveProps",value:function(e){e.link!==this.props.link&&(this.isLoading=!1,this.fetchData(e.link))}},{key:"componentDidMount",value:function(){this.fetchData(this.props.link)}},{key:"fetchData",value:function(e){var t=this;if(!this.isLoading){this.isLoading=!0;var a="https://noembed.com/embed?nowrap=on";return a+="&url="+encodeURIComponent(e),a+="&maxheight="+this.props.provider.height,$.ajax({url:a,dataType:"jsonp",success:function(e){t.isLoading=!1,e.error?t.setState({data:{}}):t.setState({data:e})},error:function(){t.setState({data:{}})}})}}},{key:"render",value:function(){var e={},t=void 0;return $.isEmptyObject(this.state.data)?t=React.createElement("div",{style:{height:this.props.provider.height}}):(e=this.state.data,t=React.createElement("div",{style:{height:this.props.provider.height},dangerouslySetInnerHTML:{__html:e.html}})),React.createElement("div",{className:"attachment attachment--oembed",ref:"attachment"},React.createElement("div",{className:"attachment__content"},React.createElement("div",{className:"clearfix attachment__container"},React.createElement("h1",{className:"attachment__title"},React.createElement("a",{className:"attachment__title-link",href:e.url,target:"_blank"},e.title)),React.createElement("div",null,React.createElement("div",{className:"attachment__body attachment__body--no_thumb"},t)))))}}]),t}(React.Component);a.default=h,h.propTypes={link:React.PropTypes.string.isRequired,provider:React.PropTypes.object.isRequired}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],198:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/keys"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("./file_attachment_list.jsx"),v=n(b),_=e("../stores/user_store.jsx"),E=n(_),y=e("../utils/utils.jsx"),R=s(y),C=e("../utils/emoticons.jsx"),w=s(C),S=e("../utils/constants.jsx"),k=n(S),N=e("../utils/text_formatting.jsx"),M=s(N),x=e("twemoji"),j=n(x),T=e("./post_body_additional_content.jsx"),P=n(T),O=e("./youtube_video.jsx"),I=n(O),D=e("./providers.json"),L=n(D),A=k.default.PRE_RELEASE_FEATURES,F=function(e){function a(e){(0,u.default)(this,a);var t=(0,h.default)(this,(0,o.default)(a).call(this,e));t.isImgLoading=!1,t.handleUserChange=t.handleUserChange.bind(t),t.parseEmojis=t.parseEmojis.bind(t),t.createEmbed=t.createEmbed.bind(t),t.createImageEmbed=t.createImageEmbed.bind(t),t.loadImg=t.loadImg.bind(t);var s=R.extractLinks(t.props.post.message),n=E.default.getProfiles();return t.state={links:s.links,message:s.text,post:t.props.post,hasUserProfiles:n&&(0,l.default)(n).length>1},t}return(0,g.default)(a,e),(0,m.default)(a,[{key:"getAllChildNodes",value:function(e){function t(e){a.push(e);for(var s=0,n=e.childNodes.length;n>s;++s)t(e.childNodes[s])}var a=[];return t(e),a}},{key:"parseEmojis",value:function(){j.default.parse(ReactDOM.findDOMNode(this),{className:"emoji twemoji",base:"",folder:w.getImagePathForEmoticon()})}},{
key:"componentWillMount",value:function(){0===this.props.post.filenames.length&&this.state.links&&this.state.links.length>0&&(this.embed=this.createEmbed(this.state.links[0]))}},{key:"componentDidMount",value:function(){this.parseEmojis(),E.default.addChangeListener(this.handleUserChange)}},{key:"componentDidUpdate",value:function(){this.parseEmojis()}},{key:"componentWillUnmount",value:function(){E.default.removeChangeListener(this.handleUserChange)}},{key:"handleUserChange",value:function(){if(!this.state.hasProfiles){var e=E.default.getProfiles();this.setState({hasProfiles:e&&(0,l.default)(e).length>1})}}},{key:"componentWillReceiveProps",value:function(e){var t=R.extractLinks(e.post.message);0===this.props.post.filenames.length&&this.state.links&&this.state.links.length>0&&(this.embed=this.createEmbed(t.links[0])),this.setState({links:t.links,message:t.text})}},{key:"createEmbed",value:function(e){var t=this.state.post;if(!e)return"oEmbed"===t.type&&(t.props.oEmbedLink="",t.type=""),null;var a=e.trim();if(R.isFeatureEnabled(A.EMBED_PREVIEW)){var s=this.getOembedProvider(a);if(null!=s)return t.props.oEmbedLink=a,t.type="oEmbed",this.setState({post:t,provider:s}),""}if(I.default.isYoutubeLink(e))return React.createElement(I.default,{channelId:t.channel_id,link:e});for(var n=0;n<k.default.IMAGE_TYPES.length;n++){var r=k.default.IMAGE_TYPES[n],l=e.substring(e.length-(r.length+1));if(l==="."+r||l==="="+r)return this.createImageEmbed(e,this.state.imgLoaded)}return null}},{key:"getOembedProvider",value:function(e){for(var t=0;t<L.default.length;t++)for(var a=0;a<L.default[t].patterns.length;a++)if(e.match(L.default[t].patterns[a]))return L.default[t];return null}},{key:"loadImg",value:function(e){var t=this;if(!this.isImgLoading){this.isImgLoading=!0;var a=new Image;a.onload=function(){t.embed=t.createImageEmbed(e,!0),t.setState({imgLoaded:!0})},a.src=e}}},{key:"createImageEmbed",value:function(e,t){return t?React.createElement("img",{className:"img-div",src:e}):(this.loadImg(e),React.createElement("img",{className:"img-div placeholder",height:"500px"}))}},{key:"render",value:function(){var e=this.props.post,a=this.props.post.filenames,s=this.props.parentPost,n="",r="";if(s){var l=E.default.getProfile(s.user_id),i="",o="...";if(null!=l){var c=l.username;s.props&&s.props.from_webhook&&s.props.override_username&&"true"===t.window.mm_config.EnablePostUsernameOverride&&(c=s.props.override_username),i="s"===c.slice(-1)?"'":"'s",o=React.createElement("a",{className:"theme",onClick:R.searchForTerm.bind(null,c)},c)}var u="";s.message?u=R.replaceHtmlEntities(s.message):s.filenames.length&&(u=s.filenames[0].split("/").pop(),2===s.filenames.length?u+=" plus 1 other file":s.filenames.length>2&&(u+=" plus "+(s.filenames.length-1)+" other files")),n=React.createElement("div",{className:"post__link"},React.createElement("span",null,"Commented on ",o,i," message: ",React.createElement("a",{className:"theme",onClick:this.props.handleCommentClick},u)))}var d=void 0;e.state===k.default.POST_FAILED?(r+=" post--fail",d=React.createElement("a",{className:"theme post-retry pull-right",href:"#",onClick:this.props.retryPost},"Retry")):e.state===k.default.POST_LOADING&&(r+=" post-waiting",d=React.createElement("img",{className:"post-loading-gif pull-right",src:"/static/images/load.gif"}));var m="";return a&&a.length>0&&(m=React.createElement(v.default,{filenames:a,channelId:e.channel_id,userId:e.user_id})),React.createElement("div",null,n,React.createElement("div",{className:"post__body"},React.createElement("div",{key:e.id+"_message",id:e.id+"_message",className:r},d,React.createElement("span",{ref:"message_span",onClick:M.handleClick,dangerouslySetInnerHTML:{__html:M.formatText(this.state.message)}})),React.createElement(P.default,{post:this.state.post,provider:this.state.provider}),m,this.embed))}}]),a}(React.Component);a.default=F,F.propTypes={post:React.PropTypes.object.isRequired,parentPost:React.PropTypes.object,retryPost:React.PropTypes.func.isRequired,handleCommentClick:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/emoticons.jsx":341,"../utils/text_formatting.jsx":343,"../utils/utils.jsx":344,"./file_attachment_list.jsx":164,"./post_body_additional_content.jsx":199,"./providers.json":206,"./youtube_video.jsx":280,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,twemoji:"twemoji"}],199:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./post_attachment_list.jsx"),f=s(h),g=e("./post_attachment_oembed.jsx"),b=s(g),v=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.getSlackAttachment=a.getSlackAttachment.bind(a),a.getOembedAttachment=a.getOembedAttachment.bind(a),a.getComponent=a.getComponent.bind(a),a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.setState({type:this.props.post.type,shouldRender:Boolean(this.props.post.type)})}},{key:"getSlackAttachment",value:function(){var e=this.props.post.props&&this.props.post.props.attachments||[];return React.createElement(f.default,{key:"post_body_additional_content"+this.props.post.id,attachments:e})}},{key:"getOembedAttachment",value:function(){var e=this.props.post.props&&this.props.post.props.oEmbedLink||"";return React.createElement(b.default,{key:"post_body_additional_content"+this.props.post.id,provider:this.props.provider,link:e})}},{key:"getComponent",value:function(){switch(this.props.post.type){case"slack_attachment":return this.getSlackAttachment();case"oEmbed":return this.getOembedAttachment();default:return""}}},{key:"render",value:function(){var e=[];if(Boolean(this.props.post.type)){var t=this.getComponent();t&&(e=t)}return React.createElement("div",null,e)}}]),t}(React.Component);a.default=v,v.propTypes={post:React.PropTypes.object.isRequired,provider:React.PropTypes.object}},{"./post_attachment_list.jsx":196,"./post_attachment_oembed.jsx":197,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],200:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../stores/user_store.jsx"),f=s(h),g=e("../dispatcher/app_dispatcher.jsx"),b=s(g),v=e("../utils/constants.jsx"),_=s(v),E=_.default.ActionTypes,y=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.handleClose=a.handleClose.bind(a),a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",function(){e.handleClose()})}},{key:"handleClose",value:function(){b.default.handleServerAction({type:E.RECIEVED_SEARCH,results:null}),b.default.handleServerAction({type:E.RECIEVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),b.default.handleServerAction({type:E.RECIEVED_POST_SELECTED,results:null})}},{key:"render",value:function(){var e=f.default.getCurrentUser();return null!=e?React.createElement("div",{className:"modal fade",ref:"modal",id:"post_deleted",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",id:"myModalLabel"},"Comment could not be posted")),React.createElement("div",{className:"modal-body"},React.createElement("p",null,"Someone deleted the message on which you tried to post a comment.")),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},"Okay"))))):React.createElement("div",null)}}]),t}(React.Component);a.default=y},{"../dispatcher/app_dispatcher.jsx":281,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],201:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./posts_view.jsx"),g=n(f),b=e("../stores/post_store.jsx"),v=n(b),_=e("../stores/channel_store.jsx"),E=n(_),y=e("../dispatcher/event_helpers.jsx"),R=s(y),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));a.onChannelChange=a.onChannelChange.bind(a),a.onPostsChange=a.onPostsChange.bind(a),a.handlePostsViewScroll=a.handlePostsViewScroll.bind(a),a.loadMorePostsTop=a.loadMorePostsTop.bind(a),a.loadMorePostsBottom=a.loadMorePostsBottom.bind(a);var s=v.default.getFocusedPostId();return a.state={scrollType:g.default.SCROLL_TYPE_POST,scrollPostId:s,postList:v.default.getVisiblePosts(s),atTop:v.default.getVisibilityAtTop(s),atBottom:v.default.getVisibilityAtBottom(s)},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){E.default.addChangeListener(this.onChannelChange),v.default.addChangeListener(this.onPostsChange)}},{key:"componentWillUnmount",value:function(){E.default.removeChangeListener(this.onChannelChange),v.default.removeChangeListener(this.onPostsChange)}},{key:"onChannelChange",value:function(){this.setState({scrollType:g.default.SCROLL_TYPE_POST})}},{key:"onPostsChange",value:function(){var e=v.default.getFocusedPostId();null!=e&&this.setState({scrollPostId:e,postList:v.default.getVisiblePosts(e),atTop:v.default.getVisibilityAtTop(e),atBottom:v.default.getVisibilityAtBottom(e)})}},{key:"handlePostsViewScroll",value:function(){this.setState({scrollType:g.default.SCROLL_TYPE_FREE})}},{key:"loadMorePostsTop",value:function(){R.emitLoadMorePostsFocusedTopEvent()}},{key:"loadMorePostsBottom",value:function(){R.emitLoadMorePostsFocusedBottomEvent()}},{key:"getIntroMessage",value:function(){return React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of Channel Archives"))}},{key:"render",value:function(){var e={};return e[this.state.scrollPostId]=!0,React.createElement("div",{id:"post-list"},React.createElement(g.default,{key:"postfocusview",isActive:!0,postList:this.state.postList,scrollType:this.state.scrollType,scrollPostId:this.state.scrollPostId,postViewScrolled:this.handlePostsViewScroll,loadMorePostsTopClicked:this.loadMorePostsTop,loadMorePostsBottomClicked:this.loadMorePostsBottom,showMoreMessagesTop:!this.state.atTop,showMoreMessagesBottom:!this.state.atBottom,introText:this.getIntroMessage(),messageSeparatorTime:0,postsToHighlight:e}))}}]),t}(React.Component);a.default=C,C.defaultProps={},C.propTypes={}},{"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"./posts_view.jsx":204,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],202:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./user_profile.jsx"),g=n(f),b=e("./post_info.jsx"),v=n(b),_=e("../utils/utils.jsx"),E=s(_),y=e("../utils/constants.jsx"),R=n(y),C=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"render",value:function(){var e=this.props.post,a=React.createElement(g.default,{userId:e.user_id}),s=void 0;return e.props&&e.props.from_webhook?(e.props.override_username&&"true"===t.window.mm_config.EnablePostUsernameOverride&&(a=React.createElement(g.default,{userId:e.user_id,overwriteName:e.props.override_username,disablePopover:!0})),s=React.createElement("li",{className:"col col__name bot-indicator"},"BOT")):E.isSystemMessage(e)&&(a=React.createElement(g.default,{userId:"",overwriteName:R.default.SYSTEM_MESSAGE_PROFILE_NAME,overwriteImage:R.default.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),React.createElement("ul",{className:"post__header"},React.createElement("li",{className:"col col__name"},a),s,React.createElement("li",{className:"col"},React.createElement(v.default,{post:e,commentCount:this.props.commentCount,handleCommentClick:this.props.handleCommentClick,allowReply:"true",isLastComment:this.props.isLastComment})))}}]),a}(React.Component);a.default=C,C.defaultProps={post:null,commentCount:0,isLastComment:!1},C.propTypes={post:React.PropTypes.object,commentCount:React.PropTypes.number,isLastComment:React.PropTypes.bool,handleCommentClick:React.PropTypes.func}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./post_info.jsx":203,"./user_profile.jsx":261,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],203:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/user_store.jsx"),g=n(f),b=e("../stores/team_store.jsx"),v=n(b),_=e("../utils/utils.jsx"),E=s(_),y=e("./time_since.jsx"),R=n(y),C=e("../dispatcher/event_helpers.jsx"),w=s(C),S=e("../utils/constants.jsx"),k=n(S),N=ReactBootstrap.Overlay,M=ReactBootstrap.Popover,x=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.state={copiedLink:!1,show:!1},a.handlePermalinkCopy=a.handlePermalinkCopy.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"createReplyLink",value:function(){if("true"===this.props.allowReply){var e="";return this.props.commentCount>=1&&(e=" post__reply--hide"),React.createElement("div",{className:"post__reply"+e},React.createElement("a",{onClick:this.props.handleCommentClick,href:"#"},React.createElement("span",{dangerouslySetInnerHTML:{__html:k.default.REPLY_ICON}})))}}},{key:"createDropdown",value:function(){var e=this,t=this.props.post,a=g.default.getCurrentId()===t.user_id,s=E.isAdmin(g.default.getCurrentUser().roles);if(t.state===k.default.POST_FAILED||t.state===k.default.POST_LOADING||t.state===k.default.POST_DELETED)return"";var n="Post";t.root_id&&t.root_id.length>0&&(n="Comment");var r=[],l=0;return"Post"===n&&(l=this.props.commentCount),r.push(React.createElement("li",{key:"copyLink",role:"presentation"},React.createElement("a",{href:"#",onClick:function(t){return e.setState({target:t.target,show:!e.state.show})}},"Permalink"))),(a||s)&&r.push(React.createElement("li",{key:"deletePost",role:"presentation"},React.createElement("a",{href:"#",role:"menuitem",onClick:function(){return w.showDeletePostModal(t,l)}},"Delete"))),a&&r.push(React.createElement("li",{key:"editPost",role:"presentation"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#post_textbox","data-title":n,"data-message":t.message,"data-postid":t.id,"data-channelid":t.channel_id,"data-comments":l},"Edit"))),0===r.length?"":React.createElement("div",null,React.createElement("a",{href:"#",className:"dropdown-toggle post__dropdown theme",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),React.createElement("ul",{className:"dropdown-menu",role:"menu"},r))}},{key:"handlePermalinkCopy",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.permalinkbox));e.select();try{var t=document.execCommand("copy");t?this.setState({copiedLink:!0,show:!1}):this.setState({copiedLink:!1})}catch(e){this.setState({copiedLink:!1})}}},{key:"render",value:function(){var e=this,t=this.props.post,a="",s="",n=this.props.commentCount;this.props.commentCount>=1?s=" icon--show":n="",t.state!==k.default.POST_FAILED&&t.state!==k.default.POST_LOADING&&t.state!==k.default.POST_DELETED&&(a=React.createElement("a",{href:"#",className:"comment-icon__container"+s,onClick:this.props.handleCommentClick},React.createElement("span",{className:"comment-icon",dangerouslySetInnerHTML:{__html:k.default.COMMENT_ICON}}),n));var r=this.createDropdown(),l=this.createReplyLink(),i=v.default.getCurrentTeamUrl()+"/pl/"+t.id,o=this.state.copiedLink?React.createElement("div",null,"Copy ",React.createElement("i",{className:"fa fa-check"})):"Copy",c=React.createElement(M,{id:"permalink-overlay",className:"permalink-popover",placement:"left",title:""},React.createElement("div",{className:"form-inline"},React.createElement("input",{type:"text",readOnly:"true",ref:"permalinkbox",className:"permalink-text form-control no-resize",rows:"1",value:i}),React.createElement("button",{"data-copy-btn":"true",type:"button",className:"btn btn-primary",onClick:this.handlePermalinkCopy,"data-clipboard-text":i},o))),u=20;return React.createElement("ul",{className:"post__header post__header--info"},React.createElement("li",{className:"col"},React.createElement(R.default,{eventTime:t.create_at})),React.createElement("li",{className:"col col__reply"},l,React.createElement("div",{className:"dropdown",ref:"dotMenu"},r),a,React.createElement(N,{show:this.state.show,target:function(){return ReactDOM.findDOMNode(e.refs.dotMenu)},onHide:function(){return e.setState({show:!1})},placement:"left",container:this,containerPadding:u,rootClose:!0},c)))}}]),t}(React.Component);a.default=x,x.defaultProps={post:null,commentCount:0,isLastComment:!1,allowReply:!1},x.propTypes={post:React.PropTypes.object,commentCount:React.PropTypes.number,isLastComment:React.PropTypes.bool,allowReply:React.PropTypes.string,handleCommentClick:React.PropTypes.func}},{"../dispatcher/event_helpers.jsx":282,"../stores/team_store.jsx":334,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./time_since.jsx":256,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],204:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.isScrolling,a=e.post;if($(window).width()>768)return React.createElement("noscript",null);if(!a)return React.createElement("noscript",null);var s=w.getDateForUnixTicks(a.create_at).toDateString(),n="post-list__timestamp";return t&&(n+=" scrolling"),React.createElement("div",{className:n},React.createElement("span",null,s))}function l(e){var t=e.isScrolling,a=e.atBottom,s=e.onClick;if($(window).width()>768)return React.createElement("noscript",null);var n="post-list__arrows";return t&&!a&&(n+=" scrolling"),React.createElement("div",{className:n,onClick:s})}var i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../stores/user_store.jsx"),v=n(b),_=e("../stores/preference_store.jsx"),E=n(_),y=e("../dispatcher/event_helpers.jsx"),R=s(y),C=e("../utils/utils.jsx"),w=s(C),S=e("./post.jsx"),k=n(S),N=e("../utils/constants.jsx"),M=n(N),x=e("../utils/delayed_action.jsx"),j=n(x),T=M.default.Preferences,P=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));return a.updateState=a.updateState.bind(a),a.handleScroll=a.handleScroll.bind(a),a.handleScrollStop=a.handleScrollStop.bind(a),a.isAtBottom=a.isAtBottom.bind(a),a.loadMorePostsTop=a.loadMorePostsTop.bind(a),a.loadMorePostsBottom=a.loadMorePostsBottom.bind(a),a.createPosts=a.createPosts.bind(a),a.updateScrolling=a.updateScrolling.bind(a),a.handleResize=a.handleResize.bind(a),a.scrollToBottom=a.scrollToBottom.bind(a),a.scrollToBottomAnimated=a.scrollToBottomAnimated.bind(a),a.jumpToPostNode=null,a.wasAtBottom=!0,a.scrollHeight=0,a.scrollStopAction=new j.default(a.handleScrollStop),a.state={displayNameType:E.default.get(T.CATEGORY_DISPLAY_SETTINGS,"name_format","false"),isScrolling:!1,topPostId:null},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"updateState",value:function(){this.setState({displayNameType:E.default.get(T.CATEGORY_DISPLAY_SETTINGS,"name_format","false")})}},{key:"isAtBottom",value:function(){var e=10;return this.refs.postlist.clientHeight+this.refs.postlist.scrollTop>=this.refs.postlist.scrollHeight-e}},{key:"handleScroll",value:function(){for(var e=this.refs.postlistcontent.childNodes,t=0;t<e.length;t++)if(e[t].offsetTop>this.refs.postlist.scrollTop+this.refs.postlist.offsetHeight/3){this.jumpToPostNode=e[t];break}this.wasAtBottom=this.isAtBottom(),!this.jumpToPostNode&&e.length>0&&(this.jumpToPostNode=e[e.length-1]),this.props.postViewScrolled(this.isAtBottom()),this.prevScrollHeight=this.refs.postlist.scrollHeight,this.prevOffsetTop=this.jumpToPostNode.offsetTop,this.updateFloatingTimestamp(),this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction.fireAfter(1e3)}},{key:"handleScrollStop",value:function(){this.setState({isScrolling:!1})}},{key:"updateFloatingTimestamp",value:function(){if(!($(window).width()>768)&&this.props.postList)for(var e=0;e<this.props.postList.order.length;e++){var t=this.props.postList.order[e],a=ReactDOM.findDOMNode(this.refs[t]);if(!a||a.offsetTop+a.clientHeight<=this.refs.postlist.scrollTop){var s=void 0;s=e>0?this.props.postList.order[e-1]:t,s!==this.state.topPostId&&this.setState({topPostId:s});break}}}},{key:"loadMorePostsTop",value:function(){this.props.loadMorePostsTopClicked()}},{key:"loadMorePostsBottom",value:function(){this.props.loadMorePostsBottomClicked()}},{key:"createPosts",value:function(e,t){for(var a=this,s=[],n=new Date(0),r=v.default.getCurrentId(),l=!1,i=function(i){var o=e[t[i]],c=e[o.parent_id],u=e[t[i+1]],d=w.isSystemMessage(o)?"":o.user_id;if(c&&c.state===M.default.POST_DELETED)return"continue";var m=!1,p=!1,h=!1;if(u){var f=w.isComment(o),g=w.isComment(u),b=Boolean(o.props&&o.props.from_webhook),v=Boolean(u.props&&u.props.from_webhook),_=w.isSystemMessage(u)?"":u.user_id,E="";u.props&&u.props.override_username&&(E=u.props.override_username);var y="";o.props&&o.props.override_username&&(y=o.props.override_username),_===d&&o.create_at-u.create_at<=3e5&&b===v&&E===y&&(m=!0),!f||u.id!==o.root_id&&u.root_id!==o.root_id||(p=!0),f||g||!m||(p=!0),_!==d||g||f||b!==v||E!==y||(h=!0)}var C=w.isComment(o)&&(0===i||e[t[i-1]].root_id!==o.root_id),S=o.id?o.id:i,N=a.props.postsToHighlight&&a.props.postsToHighlight.hasOwnProperty(o.id),x=React.createElement(k.default,{key:S+"postKey",ref:o.id,sameUser:m,sameRoot:p,post:o,parentPost:c,posts:e,hideProfilePic:h,isLastComment:C,shouldHighlight:N,onClick:function(){return R.emitPostFocusEvent(o.id)},displayNameType:a.state.displayNameType}),j=w.getDateForUnixTicks(o.create_at);if(j.toDateString()!==n.toDateString()&&s.push(React.createElement("div",{key:j.toDateString(),className:"date-separator"},React.createElement("hr",{className:"separator__hr"}),React.createElement("div",{className:"separator__text"},j.toDateString()))),d!==r&&0!==a.props.messageSeparatorTime&&o.create_at>a.props.messageSeparatorTime&&!l){l=!0;var T="";w.isBrowserIE()||(T="new_message_"+o.id),s.push(React.createElement("div",{id:T,key:"unviewed",ref:"newMessageSeparator",className:"new-separator"},React.createElement("hr",{className:"separator__hr"}),React.createElement("div",{className:"separator__text"},"New Messages")))}s.push(x),n=j},o=t.length-1;o>=0;o--){i(o)}return s}},{key:"updateScrolling",value:function(){var e=this;this.props.scrollType===t.SCROLL_TYPE_BOTTOM?this.scrollToBottom():this.props.scrollType===t.SCROLL_TYPE_NEW_MESSAGE?window.requestAnimationFrame(function(){if(e.refs.newMessageSeparator){var t=e.refs.postlist;t.scrollTop=e.refs.newMessageSeparator.offsetTop}else e.refs.postlist.scrollTop=e.refs.postlist.scrollHeight}):this.props.scrollType===t.SCROLL_TYPE_POST&&this.props.scrollPostId?window.requestAnimationFrame(function(){var t=ReactDOM.findDOMNode(e.refs[e.props.scrollPostId]);null!=t&&(t.scrollIntoView(),e.refs.postlist.scrollTop===t.offsetTop?e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3:e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3+(e.refs.postlist.scrollTop-t.offsetTop))}):this.props.scrollType===t.SCROLL_TYPE_SIDEBAR_OPEN?this.wasAtBottom?this.refs.postlist.scrollTop=this.refs.postlist.scrollHeight:window.requestAnimationFrame(function(){e.jumpToPostNode.scrollIntoView(),e.refs.postlist.scrollTop===e.jumpToPostNode.offsetTop?e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3:e.refs.postlist.scrollTop-=e.refs.postlist.offsetHeight/3+(e.refs.postlist.scrollTop-e.jumpToPostNode.offsetTop)}):this.refs.postlist.scrollHeight!==this.prevScrollHeight&&window.requestAnimationFrame(function(){e.jumpToPostNode&&e.jumpToPostNode.offsetTop!==e.prevOffsetTop&&(e.refs.postlist.scrollTop+=e.refs.postlist.scrollHeight-e.prevScrollHeight)})}},{key:"handleResize",value:function(){this.updateScrolling()}},{key:"scrollToBottom",value:function(){var e=this;window.requestAnimationFrame(function(){e.refs.postlist.scrollTop=e.refs.postlist.scrollHeight})}},{key:"scrollToBottomAnimated",value:function(){var e=$(this.refs.postlist);e.animate({scrollTop:this.refs.postlist.scrollHeight},"500")}},{key:"componentDidMount",value:function(){null!=this.props.postList&&this.updateScrolling(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(){null!=this.props.postList&&this.updateScrolling()}},{key:"componentWillReceiveProps",value:function(e){!this.props.isActive&&e.isActive?(this.updateState(),E.default.addChangeListener(this.updateState)):this.props.isActive&&!e.isActive&&E.default.removeChangeListener(this.updateState)}},{key:"shouldComponentUpdate",value:function(e,a){return this.props.isActive!==e.isActive?!0:this.props.postList!==e.postList?!0:this.props.scrollPostId!==e.scrollPostId?!0:this.props.scrollType!==e.scrollType&&e.scrollType!==t.SCROLL_TYPE_FREE?!0:this.props.messageSeparatorTime!==e.messageSeparatorTime?!0:w.areObjectsEqual(this.props.postList,e.postList)?a.displayNameType!==this.state.displayNameType?!0:this.state.topPostId!==a.topPostId?!0:this.state.isScrolling!==a.isScrolling?!0:!1:!0}},{key:"render",value:function(){var e=[],t=[],a=void 0,s=void 0,n=void 0,i="inactive";null!=this.props.postList&&(e=this.props.postList.posts,t=this.props.postList.order,a=this.props.showMoreMessagesTop?React.createElement("a",{ref:"loadmoretop",className:"more-messages-text theme",href:"#",onClick:this.loadMorePostsTop},"Load more messages"):this.props.introText,s=this.props.showMoreMessagesBottom?React.createElement("a",{ref:"loadmorebottom",className:"more-messages-text theme",href:"#",onClick:this.loadMorePostsBottom},"Load more messages"):null,n=this.createPosts(e,t),this.props.isActive&&(i=""));var o=null;return this.state.topPostId&&(o=this.props.postList.posts[this.state.topPostId]),React.createElement("div",{className:i},React.createElement(r,{isScrolling:this.state.isScrolling,post:o}),React.createElement(l,{isScrolling:this.state.isScrolling,atBottom:this.wasAtBottom,onClick:this.scrollToBottomAnimated}),React.createElement("div",{ref:"postlist",className:"post-list-holder-by-time",onScroll:this.handleScroll},React.createElement("div",{className:"post-list__table"},React.createElement("div",{ref:"postlistcontent",className:"post-list__content"},a,n,s))))}}],[{key:"SCROLL_TYPE_FREE",get:function(){return 1}},{key:"SCROLL_TYPE_BOTTOM",get:function(){return 2}},{key:"SCROLL_TYPE_SIDEBAR_OPEN",get:function(){return 3}},{key:"SCROLL_TYPE_NEW_MESSAGE",get:function(){return 4}},{key:"SCROLL_TYPE_POST",get:function(){return 5}}]),t}(React.Component);a.default=P,P.defaultProps={},P.propTypes={isActive:React.PropTypes.bool,postList:React.PropTypes.object,scrollPostId:React.PropTypes.string,scrollType:React.PropTypes.number,postViewScrolled:React.PropTypes.func.isRequired,loadMorePostsTopClicked:React.PropTypes.func.isRequired,loadMorePostsBottomClicked:React.PropTypes.func.isRequired,showMoreMessagesTop:React.PropTypes.bool,showMoreMessagesBottom:React.PropTypes.bool,introText:React.PropTypes.element,messageSeparatorTime:React.PropTypes.number,postsToHighlight:React.PropTypes.object}},{"../dispatcher/event_helpers.jsx":282,"../stores/preference_store.jsx":330,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/delayed_action.jsx":340,"../utils/utils.jsx":344,"./post.jsx":194,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],205:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{
default:e}}var r=e("babel-runtime/core-js/object/assign"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("./posts_view.jsx"),v=n(b),_=e("./loading_screen.jsx"),E=n(_),y=e("../stores/channel_store.jsx"),R=n(y),C=e("../stores/post_store.jsx"),w=n(C),S=e("../utils/utils.jsx"),k=s(S),N=e("../dispatcher/event_helpers.jsx"),M=s(N),x=e("../utils/constants.jsx"),j=n(x),T=e("../utils/channel_intro_messages.jsx"),P=function(e){function t(){(0,u.default)(this,t);var e=(0,h.default)(this,(0,o.default)(t).call(this));e.onChannelChange=e.onChannelChange.bind(e),e.onChannelLeave=e.onChannelLeave.bind(e),e.onPostsChange=e.onPostsChange.bind(e),e.handlePostsViewScroll=e.handlePostsViewScroll.bind(e),e.loadMorePostsTop=e.loadMorePostsTop.bind(e),e.handlePostsViewJumpRequest=e.handlePostsViewJumpRequest.bind(e);var a=R.default.getCurrentId(),s={scrollType:v.default.SCROLL_TYPE_BOTTOM,scrollPost:null};return a?(0,l.default)(s,{currentChannelIndex:0,channels:[a],postLists:[e.getChannelPosts(a)],atTop:[w.default.getVisibilityAtTop(a)]}):(0,l.default)(s,{currentChannelIndex:null,channels:[],postLists:[],atTop:[]}),s.showInviteModal=!1,e.state=s,e}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){R.default.addChangeListener(this.onChannelChange),R.default.addLeaveListener(this.onChannelLeave),w.default.addChangeListener(this.onPostsChange),w.default.addPostsViewJumpListener(this.handlePostsViewJumpRequest)}},{key:"componentWillUnmount",value:function(){R.default.removeChangeListener(this.onChannelChange),R.default.removeLeaveListener(this.onChannelLeave),w.default.removeChangeListener(this.onPostsChange),w.default.removePostsViewJumpListener(this.handlePostsViewJumpRequest)}},{key:"handlePostsViewJumpRequest",value:function(e,t){switch(e){case j.default.PostsViewJumpTypes.BOTTOM:this.setState({scrollType:v.default.SCROLL_TYPE_BOTTOM});break;case j.default.PostsViewJumpTypes.POST:this.setState({scrollType:v.default.SCROLL_TYPE_POST,scrollPost:t});break;case j.default.PostsViewJumpTypes.SIDEBAR_OPEN:this.setState({scrollType:v.default.SCROLL_TYPE_SIDEBAR_OPEN})}}},{key:"onChannelChange",value:function(){var e=this.state.postLists.slice(),t=this.state.atTop.slice(),a=this.state.channels.slice(),s=R.default.getCurrentId();if(s!==a[this.state.currentChannelIndex]){var n=Number.MAX_VALUE,r=R.default.getMember(s);null!=r&&(n=r.last_viewed_at);var l=a.indexOf(s);-1===l&&(l=a.length,a.push(s),t[l]=w.default.getVisibilityAtTop(s)),e[l]=this.getChannelPosts(s),this.setState({currentChannelIndex:l,currentLastViewed:n,scrollType:v.default.SCROLL_TYPE_NEW_MESSAGE,channels:a,postLists:e,atTop:t})}}},{key:"onChannelLeave",value:function(e){var t=this.state.postLists.slice(),a=this.state.channels.slice(),s=this.state.atTop.slice(),n=a.indexOf(e);-1!==n&&(t.splice(n,1),a.splice(n,1),s.splice(n,1)),this.setState({channels:a,postLists:t,atTop:s})}},{key:"onPostsChange",value:function(){var e=this.state.channels,t=this.state.postLists.slice(),a=this.state.atTop.slice(),s=e[this.state.currentChannelIndex],n=this.getChannelPosts(s);t[this.state.currentChannelIndex]=n,a[this.state.currentChannelIndex]=w.default.getVisibilityAtTop(s),this.setState({postLists:t,atTop:a})}},{key:"getChannelPosts",value:function(e){return w.default.getVisiblePosts(e)}},{key:"loadMorePostsTop",value:function(){M.emitLoadMorePostsEvent()}},{key:"handlePostsViewScroll",value:function(e){e?this.setState({scrollType:v.default.SCROLL_TYPE_BOTTOM}):this.setState({scrollType:v.default.SCROLL_TYPE_FREE})}},{key:"shouldComponentUpdate",value:function(e,t){return k.areObjectsEqual(this.state,t)?!1:!0}},{key:"render",value:function(){for(var e=this.state.postLists,t=this.state.channels,a=t[this.state.currentChannelIndex],s=R.default.get(a),n=[],r=0;r<t.length;r++){var l=t[r]===a;n.push(React.createElement(v.default,{key:"postsviewkey"+r,isActive:l,postList:e[r],scrollType:this.state.scrollType,scrollPostId:this.state.scrollPost,postViewScrolled:this.handlePostsViewScroll,loadMorePostsTopClicked:this.loadMorePostsTop,loadMorePostsBottomClicked:function(){},showMoreMessagesTop:!this.state.atTop[this.state.currentChannelIndex],showMoreMessagesBottom:!1,introText:s?(0,T.createChannelIntroMessage)(s):null,messageSeparatorTime:this.state.currentLastViewed})),!e[r]&&l&&n.push(React.createElement(E.default,{position:"absolute",key:"loading"}))}return React.createElement("div",{id:"post-list"},n)}}]),t}(React.Component);a.default=P},{"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../utils/channel_intro_messages.jsx":337,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./loading_screen.jsx":173,"./posts_view.jsx":204,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],206:[function(e,t,a){t.exports=[{patterns:["http://(?:www\\.)?xkcd\\.com/\\d+/?"],name:"XKCD",height:110},{patterns:["https?://soundcloud.com/.*/.*"],name:"SoundCloud",height:140},{patterns:["https?://(?:www\\.)?flickr\\.com/.*","https?://flic\\.kr/p/[a-zA-Z0-9]+"],name:"Flickr",height:110},{patterns:["http://www\\.ted\\.com/talks/.+\\.html"],name:"TED",height:110},{patterns:["http://(?:www\\.)?theverge\\.com/\\d{4}/\\d{1,2}/\\d{1,2}/\\d+/[^/]+/?$"],name:"The Verge",height:110},{patterns:["http://.*\\.viddler\\.com/.*"],name:"Viddler",height:110},{patterns:["https?://(?:www\\.)?avclub\\.com/article/[^/]+/?$"],name:"The AV Club",height:110},{patterns:["https?://(?:www\\.)?wired\\.com/([^/]+/)?\\d+/\\d+/[^/]+/?$"],name:"Wired",height:110},{patterns:["http://www\\.theonion\\.com/articles/[^/]+/?"],name:"The Onion",height:110},{patterns:["http://yfrog\\.com/[0-9a-zA-Z]+/?$"],name:"YFrog",height:110},{patterns:["http://www\\.duffelblog\\.com/\\d{4}/\\d{1,2}/[^/]+/?$"],name:"The Duffel Blog",height:110},{patterns:["http://www\\.clickhole\\.com/article/[^/]+/?"],name:"Clickhole",height:110},{patterns:["https?://(?:www.)?skitch.com/([^/]+)/[^/]+/.+","http://skit.ch/[^/]+"],name:"Skitch",height:110},{patterns:["https?://(alpha|posts|photos)\\.app\\.net/.*"],name:"ADN",height:110},{patterns:["https?://gist\\.github\\.com/(?:[-0-9a-zA-Z]+/)?([0-9a-fA-f]+)"],name:"Gist",height:110},{patterns:["https?://www\\.(dropbox\\.com/s/.+\\.(?:jpg|png|gif))","https?://db\\.tt/[a-zA-Z0-9]+"],name:"Dropbox",height:110},{patterns:["https?://[^\\.]+\\.wikipedia\\.org/wiki/(?!Talk:)[^#]+(?:#(.+))?"],name:"Wikipedia",height:110},{patterns:["http://www.traileraddict.com/trailer/[^/]+/trailer"],name:"TrailerAddict",height:110},{patterns:["http://lockerz\\.com/[sd]/\\d+"],name:"Lockerz",height:110},{patterns:["http://gifuk\\.com/s/[0-9a-f]{16}"],name:"GIFUK",height:110},{patterns:["http://trailers\\.apple\\.com/trailers/[^/]+/[^/]+"],name:"iTunes Movie Trailers",height:110},{patterns:["http://gfycat\\.com/([a-zA-Z]+)"],name:"Gfycat",height:110},{patterns:["http://bash\\.org/\\?(\\d+)"],name:"Bash.org",height:110},{patterns:["http://arstechnica\\.com/[^/]+/\\d+/\\d+/[^/]+/?$"],name:"Ars Technica",height:110},{patterns:["http://imgur\\.com/gallery/[0-9a-zA-Z]+"],name:"Imgur",height:110},{patterns:["http://www\\.asciiartfarts\\.com/[0-9]+\\.html"],name:"ASCII Art Farts",height:110},{patterns:["http://www\\.monoprice\\.com/products/product\\.asp\\?.*p_id=\\d+"],name:"Monoprice",height:110},{patterns:["http://boingboing\\.net/\\d{4}/\\d{2}/\\d{2}/[^/]+\\.html"],name:"Boing Boing",height:110},{patterns:["https?://github\\.com/([^/]+)/([^/]+)/commit/(.+)","http://git\\.io/[_0-9a-zA-Z]+"],name:"Github Commit",height:110},{patterns:["https?://open\\.spotify\\.com/(track|album)/([0-9a-zA-Z]{22})"],name:"Spotify",height:110},{patterns:["https?://path\\.com/p/([0-9a-zA-Z]+)$"],name:"Path",height:110},{patterns:["http://www.funnyordie.com/videos/[^/]+/.+"],name:"Funny or Die",height:110},{patterns:["http://(?:www\\.)?twitpic\\.com/([^/]+)"],name:"Twitpic",height:110},{patterns:["https?://www\\.giantbomb\\.com/videos/[^/]+/\\d+-\\d+/?"],name:"GiantBomb",height:110},{patterns:["http://(?:www\\.)?beeradvocate\\.com/beer/profile/\\d+/\\d+"],name:"Beer Advocate",height:110},{patterns:["http://(?:www\\.)?imdb.com/title/(tt\\d+)"],name:"IMDB",height:110},{patterns:["http://cl\\.ly/(?:image/)?[0-9a-zA-Z]+/?$"],name:"CloudApp",height:110},{patterns:["http://clyp\\.it/.*"],name:"Clyp",height:110},{patterns:["http://www\\.hulu\\.com/watch/.*"],name:"Hulu",height:110},{patterns:["https?://(?:www|mobile\\.)?twitter\\.com/(?:#!/)?[^/]+/status(?:es)?/(\\d+)/?$","https?://t\\.co/[a-zA-Z0-9]+"],name:"Twitter",height:110},{patterns:["https?://(?:www\\.)?vimeo\\.com/.+"],name:"Vimeo",height:110},{patterns:["http://www\\.amazon\\.com/(?:.+/)?[gd]p/(?:product/)?(?:tags-on-product/)?([a-zA-Z0-9]+)","http://amzn\\.com/([^/]+)"],name:"Amazon",height:110},{patterns:["http://qik\\.com/video/.*"],name:"Qik",height:110},{patterns:["http://www\\.rdio\\.com/artist/[^/]+/album/[^/]+/?","http://www\\.rdio\\.com/artist/[^/]+/album/[^/]+/track/[^/]+/?","http://www\\.rdio\\.com/people/[^/]+/playlists/\\d+/[^/]+"],name:"Rdio",height:110},{patterns:["http://www\\.slideshare\\.net/.*/.*"],name:"SlideShare",height:110},{patterns:["http://imgur\\.com/([0-9a-zA-Z]+)$"],name:"Imgur",height:110},{patterns:["https?://instagr(?:\\.am|am\\.com)/p/.+"],name:"Instagram",height:110},{patterns:["http://www\\.twitlonger\\.com/show/[a-zA-Z0-9]+","http://tl\\.gd/[^/]+"],name:"Twitlonger",height:110},{patterns:["https?://vine.co/v/[a-zA-Z0-9]+"],name:"Vine",height:490},{patterns:["http://www\\.urbandictionary\\.com/define\\.php\\?term=.+"],name:"Urban Dictionary",height:110},{patterns:["http://picplz\\.com/user/[^/]+/pic/[^/]+"],name:"Picplz",height:110},{patterns:["https?://(?:www\\.)?twitter\\.com/(?:#!/)?[^/]+/status(?:es)?/(\\d+)/photo/\\d+(?:/large|/)?$","https?://pic\\.twitter\\.com/.+"],name:"Twitter",height:110}]},{}],207:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("../stores/modal_store.jsx"),v=n(b),_=e("../utils/constants.jsx"),E=n(_),y=ReactBootstrap.Modal,R=E.default.ActionTypes,C=function(e){function t(){(0,o.default)(this,t);var e=(0,m.default)(this,(0,l.default)(t).call(this));return e.handleSubmit=e.handleSubmit.bind(e),e.onHide=e.onHide.bind(e),e.save=e.save.bind(e),e.updateShow=e.updateShow.bind(e),e.state={clientId:"",clientSecret:"",saved:!1,show:!1},e}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){v.default.addModalListener(R.TOGGLE_REGISTER_APP_MODAL,this.updateShow)}},{key:"componentWillUnmount",value:function(){v.default.removeModalListener(R.TOGGLE_REGISTER_APP_MODAL,this.updateShow)}},{key:"updateShow",value:function(e){if(!e){if(""!==this.state.clientId&&!this.state.saved)return;this.setState({clientId:"",clientSecret:"",saved:!1,homepageError:null,callbackError:null,serverError:null,nameError:null})}this.setState({show:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state;a.serverError=null;var s={},n=this.refs.name.value;if(!n||0===n.length)return a.nameError="Application name must be filled in.",void this.setState(a);a.nameError=null,s.name=n;var r=this.refs.homepage.value;if(!r||0===r.length)return a.homepageError="Homepage must be filled in.",void this.setState(a);a.homepageError=null,s.homepage=r;var l=this.refs.desc.value;s.description=l;var i=this.refs.callback.value.trim();return i&&0!==i.length?(a.callbackError=null,s.callback_urls=i.split("\n"),void g.registerOAuthApp(s,function(e){a.clientId=e.id,a.clientSecret=e.client_secret,t.setState(a)},function(e){a.serverError=e.message,t.setState(a)})):(a.callbackError="At least one callback URL must be filled in.",void this.setState(a))}},{key:"onHide",value:function(e){return this.state.saved||""===this.state.clientId?void this.setState({clientId:"",clientSecret:"",saved:!1}):void e.preventDefault()}},{key:"save",value:function(){this.setState({saved:this.refs.save.checked})}},{key:"render",value:function(){var e,t=this;this.state.nameError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.nameError)));var a;this.state.homepageError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.homepageError)));var s;this.state.callbackError&&(s=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.callbackError)));var n;this.state.serverError&&(n=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var r="",l="";if(""===this.state.clientId)r=React.createElement("div",{className:"settings-modal"},React.createElement("div",{className:"form-horizontal user-settings"},React.createElement("h4",{className:"padding-bottom x3"},"Register a New Application"),React.createElement("div",{className:"row"},React.createElement("label",{className:"col-sm-4 control-label"},"Application Name"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{ref:"name",className:"form-control",type:"text",placeholder:"Required"}),e)),React.createElement("div",{className:"row padding-top x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Homepage URL"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{ref:"homepage",className:"form-control",type:"text",placeholder:"Required"}),a)),React.createElement("div",{className:"row padding-top x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Description"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{ref:"desc",className:"form-control",type:"text",placeholder:"Optional"}))),React.createElement("div",{className:"row padding-top padding-bottom x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Callback URL"),React.createElement("div",{className:"col-sm-7"},React.createElement("textarea",{ref:"callback",className:"form-control",type:"text",placeholder:"Required",rows:"5"}),s)),n)),l=React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return t.updateShow(!1)}},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},"Register"));else{var i=" disabled";this.state.saved&&(i=""),r=React.createElement("div",{className:"form-horizontal user-settings"},React.createElement("h4",{className:"padding-bottom x3"},"Your Application Credentials"),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("label",{className:"col-sm-4 control-label"},"Client ID"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",value:this.state.clientId,readOnly:"true"}))),React.createElement("br",null),React.createElement("div",{className:"row padding-top x2"},React.createElement("label",{className:"col-sm-4 control-label"},"Client Secret"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",value:this.state.clientSecret,readOnly:"true"}))),React.createElement("br",null),React.createElement("br",null),React.createElement("strong",null,"Save these somewhere SAFE and SECURE. Treat your Client ID as your app's username and your Client Secret as the app's password."),React.createElement("br",null),React.createElement("br",null),React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{ref:"save",type:"checkbox",checked:this.state.saved,onChange:this.save}),"I have saved both my Client Id and Client Secret somewhere safe"))),l=React.createElement("a",{className:"btn btn-sm btn-primary pull-right"+i,href:"#",onClick:function(e){e.preventDefault(),t.updateShow(!1)}},"Close")}return React.createElement("span",null,React.createElement(y,{show:this.state.show,onHide:function(){return t.updateShow(!1)}},React.createElement(y.Header,{closeButton:!0},React.createElement(y.Title,null,"Developer Applications")),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(y.Body,null,r),React.createElement(y.Footer,null,l))))}}]),t}(React.Component);a.default=C},{"../stores/modal_store.jsx":328,"../utils/client.jsx":338,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],208:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/channel_store.jsx"),g=n(f),b=e("../stores/user_store.jsx"),v=n(b),_=e("../stores/browser_store.jsx"),E=n(_),y=e("../utils/utils.jsx"),R=s(y),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleShow=a.handleShow.bind(a),a.handleClose=a.handleClose.bind(a),a.state={channelName:"",remover:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleShow",value:function(){var e={};E.default.getItem("channel-removed-state")&&(e=E.default.getItem("channel-removed-state"),E.default.removeItem("channel-removed-state"));var t=g.default.getByName("town-square");setTimeout(function(){return R.switchChannel(t)},1),this.setState(e)}},{key:"handleClose",value:function(){this.setState({channelName:"",remover:""})}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this)).on("show.bs.modal",this.handleShow),$(ReactDOM.findDOMNode(this)).on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this)).off("show.bs.modal",this.handleShow),$(ReactDOM.findDOMNode(this)).off("hidden.bs.modal",this.handleClose)}},{key:"render",value:function(){var e=v.default.getCurrentUser(),t="the channel";this.state.channelName&&(t=this.state.channelName);var a="Someone";return this.state.remover&&(a=this.state.remover),null!=e?React.createElement("div",{className:"modal fade",ref:"modal",id:"removed_from_channel",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title"},"Removed from ",React.createElement("span",{className:"name"},t))),React.createElement("div",{className:"modal-body"},React.createElement("p",null,a," removed you from ",t)),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},"Okay"))))):React.createElement("div",null)}}]),t}(React.Component);a.default=C},{"../stores/browser_store.jsx":324,"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],209:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/async_client.jsx"),E=s(_),y=e("../stores/channel_store.jsx"),R=n(y),C=e("../utils/constants.jsx"),w=n(C),S=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.onNameChange=a.onNameChange.bind(a),a.onDisplayNameChange=a.onDisplayNameChange.bind(a),a.displayNameKeyUp=a.displayNameKeyUp.bind(a),a.handleClose=a.handleClose.bind(a),a.handleShow=a.handleShow.bind(a),a.handleShown=a.handleShown.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.state={displayName:"",channelName:"",channelId:"",serverError:"",nameError:"",displayNameError:"",invalid:!1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),26===this.state.channelId.length){var a=R.default.get(this.state.channelId),s=a.name,n=a.displayName,r={serverError:""};if(a.display_name=this.state.displayName.trim(),a.display_name?a.display_name.length>22?(r.displayNameError="This field must be less than 22 characters",r.invalid=!0):r.displayNameError="":(r.displayNameError="This field is required",r.invalid=!0),a.name=this.state.channelName.trim(),a.name)if(a.name.length>22)r.nameError="This field must be less than 22 characters",r.invalid=!0;else{var l=g.cleanUpUrlable(a.name);l===a.name?r.nameError="":(r.nameError="Must be lowercase alphanumeric characters",r.invalid=!0)}else r.nameError="This field is required",r.invalid=!0;this.setState(r),r.invalid||s===a.name&&n===a.display_name||v.updateChannel(a,function(){$(ReactDOM.findDOMNode(t.refs.modal)).modal("hide"),E.getChannel(a.id),g.updateAddressBar(a.name),ReactDOM.findDOMNode(t.refs.displayName).value="",ReactDOM.findDOMNode(t.refs.channelName).value=""},function(e){r.serverError=e.message,r.invalid=!0,t.setState(r)})}}},{key:"onNameChange",value:function(){this.setState({channelName:ReactDOM.findDOMNode(this.refs.channelName).value})}},{key:"onDisplayNameChange",value:function(){this.setState({displayName:ReactDOM.findDOMNode(this.refs.displayName).value})}},{key:"displayNameKeyUp",value:function(){if(this.state.channelName!==w.default.DEFAULT_CHANNEL){var e=ReactDOM.findDOMNode(this.refs.displayName).value.trim(),t=g.cleanUpUrlable(e);ReactDOM.findDOMNode(this.refs.channelName).value=t,this.setState({channelName:t})}}},{key:"handleClose",value:function(){this.setState({displayName:"",channelName:"",channelId:"",serverError:"",nameError:"",displayNameError:"",invalid:!1})}},{key:"handleShow",value:function(e){var t=$(e.relatedTarget);this.setState({displayName:t.attr("data-display"),channelName:t.attr("data-name"),channelId:t.attr("data-channelid")})}},{key:"handleShown",value:function(){$("#rename_channel #display_name").focus()}},{key:"componentDidMount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).on("show.bs.modal",this.handleShow),$(ReactDOM.findDOMNode(this.refs.modal)).on("hidden.bs.modal",this.handleClose),$(ReactDOM.findDOMNode(this.refs.modal)).on("shown.bs.modal",this.handleShown)}},{key:"componentWillUnmount",value:function(){$(ReactDOM.findDOMNode(this.refs.modal)).off("hidden.bs.modal",this.handleClose)}},{key:"render",value:function(){var e=null,t="form-group";this.state.displayNameError&&(e=React.createElement("label",{className:"control-label"},this.state.displayNameError),t+=" has-error");var a=null,s="form-group";this.state.nameError&&(a=React.createElement("label",{className:"control-label"},this.state.nameError),s+=" has-error");var n=null;this.state.serverError&&(n=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var r="Handle",l="form-control",i=!1;return this.state.channelName===w.default.DEFAULT_CHANNEL&&(r+=" - Cannot be changed for the default channel",l+=" disabled-input",i=!0),React.createElement("div",{className:"modal fade",ref:"modal",id:"rename_channel",tabIndex:"-1",role:"dialog","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},"×"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h4",{className:"modal-title"},"Rename Channel")),React.createElement("form",{role:"form"},React.createElement("div",{className:"modal-body"},React.createElement("div",{className:t},React.createElement("label",{className:"control-label"},"Display Name"),React.createElement("input",{onKeyUp:this.displayNameKeyUp,onChange:this.onDisplayNameChange,type:"text",ref:"displayName",id:"display_name",className:"form-control",placeholder:"Enter display name",value:this.state.displayName,maxLength:"64"}),e),React.createElement("div",{className:s},React.createElement("label",{className:"control-label"},r),React.createElement("input",{onChange:this.onNameChange,type:"text",className:l,ref:"channelName",placeholder:"lowercase alphanumeric's only",value:this.state.channelName,maxLength:"64",readOnly:i}),a),n),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary"},"Save"))))))}}]),t}(React.Component);a.default=S},{"../stores/channel_store.jsx":325,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],210:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/post_store.jsx"),g=n(f),b=e("../stores/channel_store.jsx"),v=n(b),_=e("./user_profile.jsx"),E=n(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("../dispatcher/app_dispatcher.jsx"),w=n(C),S=e("../utils/utils.jsx"),k=s(S),N=e("../utils/constants.jsx"),M=n(N),x=e("./file_attachment_list.jsx"),j=n(x),T=e("../utils/client.jsx"),P=s(T),O=e("../utils/async_client.jsx"),I=s(O),D=e("../utils/text_formatting.jsx"),L=s(D),A=e("twemoji"),F=n(A),U=e("../dispatcher/event_helpers.jsx"),$=s(U),H=M.default.ActionTypes,B=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.retryComment=a.retryComment.bind(a),a.parseEmojis=a.parseEmojis.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"retryComment",value:function(e){var t=this;e.preventDefault();var a=this.props.post;P.createPost(a,a.channel_id,function(e){I.getPosts(a.channel_id);var t=v.default.get(a.channel_id),s=v.default.getMember(a.channel_id);s.msg_count=t.total_msg_count,s.last_viewed_at=(new Date).getTime(),v.default.setChannelMember(s),w.default.handleServerAction({type:H.RECIEVED_POST,post:e})},function(){a.state=M.default.POST_FAILED,g.default.updatePendingPost(a),t.forceUpdate()}),a.state=M.default.POST_LOADING,g.default.updatePendingPost(a),this.forceUpdate()}},{key:"parseEmojis",value:function(){F.default.parse(ReactDOM.findDOMNode(this),{size:M.default.EMOJI_SIZE})}},{key:"componentDidMount",value:function(){this.parseEmojis()}},{key:"shouldComponentUpdate",value:function(e){return k.areObjectsEqual(e.post,this.props.post)?!1:!0}},{key:"componentDidUpdate",value:function(){this.parseEmojis()}},{key:"createDropdown",value:function(){var e=this.props.post;if(e.state===M.default.POST_FAILED||e.state===M.default.POST_LOADING||e.state===M.default.POST_DELETED)return"";var t=R.default.getCurrentId()===e.user_id,a=k.isAdmin(R.default.getCurrentUser().roles),s=[];return t&&s.push(React.createElement("li",{role:"presentation",key:"edit-button"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#reply_textbox","data-title":"Comment","data-message":e.message,"data-postid":e.id,"data-channelid":e.channel_id},"Edit"))),(t||a)&&s.push(React.createElement("li",{role:"presentation",key:"delete-button"},React.createElement("a",{href:"#",role:"menuitem",onClick:function(){return $.showDeletePostModal(e,0)}},"Delete"))),0===s.length?"":React.createElement("div",{className:"dropdown"},React.createElement("a",{href:"#",className:"post__dropdown dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),React.createElement("ul",{className:"dropdown-menu",role:"menu"},s))}},{key:"render",value:function(){var e=this.props.post,t="";R.default.getCurrentId()===e.user_id&&(t="current--user");var a,s=R.default.getCurrentUser().update_at,n="";e.state===M.default.POST_FAILED?(n+=" post-fail",a=React.createElement("a",{className:"theme post-retry pull-right",href:"#",onClick:this.retryComment},"Retry")):e.state===M.default.POST_LOADING&&(n+=" post-waiting",a=React.createElement("img",{className:"post-loading-gif pull-right",src:"/static/images/load.gif"}));var r,l=this.createDropdown();return e.filenames&&e.filenames.length>0&&(r=React.createElement(j.default,{filenames:e.filenames,channelId:e.channel_id,userId:e.user_id})),React.createElement("div",{className:"post "+t},React.createElement("div",{className:"post__content"},React.createElement("div",{className:"post__img"},React.createElement("img",{src:"/api/v1/users/"+e.user_id+"/image?time="+s+"&"+k.getSessionIndex(),height:"36",width:"36"})),React.createElement("div",null,React.createElement("ul",{className:"post__header"},React.createElement("li",{className:"col__name"},React.createElement("strong",null,React.createElement(E.default,{userId:e.user_id}))),React.createElement("li",{className:"col"},React.createElement("time",{className:"post__time"},k.displayCommentDateTime(e.create_at))),React.createElement("li",{className:"col col__reply"},l)),React.createElement("div",{className:"post__body"},React.createElement("div",{
className:n},a,React.createElement("div",{ref:"message_holder",onClick:L.handleClick,dangerouslySetInnerHTML:{__html:L.formatText(e.message)}})),r))))}}]),t}(React.Component);a.default=B,B.defaultProps={post:null},B.propTypes={post:React.PropTypes.object}},{"../dispatcher/app_dispatcher.jsx":281,"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/text_formatting.jsx":343,"../utils/utils.jsx":344,"./file_attachment_list.jsx":164,"./user_profile.jsx":261,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,twemoji:"twemoji"}],211:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../dispatcher/app_dispatcher.jsx"),f=s(h),g=e("../utils/constants.jsx"),b=s(g),v=b.default.ActionTypes,_=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.handleClose=a.handleClose.bind(a),a.handleBack=a.handleBack.bind(a),a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"handleClose",value:function(e){e.preventDefault(),f.default.handleServerAction({type:v.RECIEVED_SEARCH,results:null}),f.default.handleServerAction({type:v.RECIEVED_POST_SELECTED,results:null})}},{key:"handleBack",value:function(e){e.preventDefault(),f.default.handleServerAction({type:v.RECIEVED_SEARCH_TERM,term:this.props.fromSearch,do_search:!0,is_mention_search:this.props.isMentionSearch}),f.default.handleServerAction({type:v.RECIEVED_POST_SELECTED,results:null})}},{key:"render",value:function(){var e=void 0;return this.props.fromSearch&&(e=React.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},React.createElement("i",{className:"fa fa-chevron-left"}))),React.createElement("div",{className:"sidebar--right__header"},React.createElement("span",{className:"sidebar--right__title"},e,"Message Details"),React.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.handleClose},React.createElement("i",{className:"fa fa-sign-out"})))}}]),t}(React.Component);a.default=_,_.defaultProps={isMentionSearch:!1,fromSearch:""},_.propTypes={isMentionSearch:React.PropTypes.bool,fromSearch:React.PropTypes.string}},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],212:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/channel_store.jsx"),g=n(f),b=e("./user_profile.jsx"),v=n(b),_=e("../stores/user_store.jsx"),E=n(_),y=e("../utils/text_formatting.jsx"),R=s(y),C=e("../utils/utils.jsx"),w=s(C),S=e("../utils/emoticons.jsx"),k=s(S),N=e("./file_attachment_list.jsx"),M=n(N),x=e("twemoji"),j=n(x),T=e("./post_body_additional_content.jsx"),P=n(T),O=e("../dispatcher/event_helpers.jsx"),I=s(O),D=e("../utils/constants.jsx"),L=n(D),A=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.parseEmojis=t.parseEmojis.bind(t),t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"parseEmojis",value:function(){j.default.parse(ReactDOM.findDOMNode(this),{className:"emoji twemoji",base:"",folder:k.getImagePathForEmoticon()})}},{key:"componentDidMount",value:function(){this.parseEmojis()}},{key:"shouldComponentUpdate",value:function(e){return w.areObjectsEqual(e.post,this.props.post)?!1:!0}},{key:"componentDidUpdate",value:function(){this.parseEmojis()}},{key:"render",value:function(){var e=this,a=this.props.post,s=E.default.getCurrentUser(),n=s.id===a.user_id,r=w.isAdmin(s.roles),l=E.default.getProfile(a.user_id).update_at,i=g.default.get(a.channel_id),o="Post";a.root_id.length>0&&(o="Comment");var c="";E.default.getCurrentId()===a.user_id&&(c="current--user");var u="";w.isSystemMessage(a)&&(u="post--system");var d;i&&(d="D"===i.type?"Direct Message":i.display_name);var m=[];n&&m.push(React.createElement("li",{key:"rhs-root-edit",role:"presentation"},React.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#reply_textbox","data-title":o,"data-message":a.message,"data-postid":a.id,"data-channelid":a.channel_id},"Edit"))),(n||r)&&m.push(React.createElement("li",{key:"rhs-root-delete",role:"presentation"},React.createElement("a",{href:"#",role:"menuitem",onClick:function(){return I.showDeletePostModal(a,e.props.commentCount)}},"Delete")));var p="";m.length>0&&(p=React.createElement("div",{className:"dropdown"},React.createElement("a",{href:"#",className:"post__dropdown dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),React.createElement("ul",{className:"dropdown-menu",role:"menu"},m)));var h;a.filenames&&a.filenames.length>0&&(h=React.createElement(M.default,{filenames:a.filenames,channelId:a.channel_id,userId:a.user_id}));var f=React.createElement(v.default,{userId:a.user_id}),b=void 0;a.props&&a.props.from_webhook?(a.props.override_username&&"true"===t.window.mm_config.EnablePostUsernameOverride&&(f=React.createElement(v.default,{userId:a.user_id,overwriteName:a.props.override_username,disablePopover:!0})),b=React.createElement("li",{className:"col col__name bot-indicator"},"BOT")):w.isSystemMessage(a)&&(f=React.createElement(v.default,{userId:"",overwriteName:L.default.SYSTEM_MESSAGE_PROFILE_NAME,overwriteImage:L.default.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}));var _="/api/v1/users/"+a.user_id+"/image?time="+l+"&"+w.getSessionIndex();a.props&&a.props.from_webhook&&"true"===t.window.mm_config.EnablePostIconOverride?a.props.override_icon_url&&(_=a.props.override_icon_url):w.isSystemMessage(a)&&(_=L.default.SYSTEM_MESSAGE_PROFILE_IMAGE);var y=React.createElement("img",{className:"post-profile-img",src:_,height:"36",width:"36"});return React.createElement("div",{className:"post post--root "+c+" "+u},React.createElement("div",{className:"post-right-channel__name"},d),React.createElement("div",{className:"post__content"},React.createElement("div",{className:"post__img"},y),React.createElement("div",null,React.createElement("ul",{className:"post__header"},React.createElement("li",{className:"col__name"},f),b,React.createElement("li",{className:"col"},React.createElement("time",{className:"post__time"},w.displayCommentDateTime(a.create_at))),React.createElement("li",{className:"col col__reply"},React.createElement("div",null,p))),React.createElement("div",{className:"post__body"},React.createElement("div",{ref:"message_holder",onClick:R.handleClick,dangerouslySetInnerHTML:{__html:R.formatText(a.message)}}),React.createElement(P.default,{post:a}),h))))}}]),a}(React.Component);a.default=A,A.defaultProps={post:null,commentCount:0},A.propTypes={post:React.PropTypes.object,commentCount:React.PropTypes.number}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/emoticons.jsx":341,"../utils/text_formatting.jsx":343,"../utils/utils.jsx":344,"./file_attachment_list.jsx":164,"./post_body_additional_content.jsx":199,"./user_profile.jsx":261,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,twemoji:"twemoji"}],213:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/reflect/delete-property"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../stores/post_store.jsx"),v=n(b),_=e("../stores/user_store.jsx"),E=n(_),y=e("../stores/preference_store.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=e("./search_bar.jsx"),k=n(S),N=e("./create_comment.jsx"),M=n(N),x=e("./rhs_header_post.jsx"),j=n(x),T=e("./rhs_root_post.jsx"),P=n(T),O=e("./rhs_comment.jsx"),I=n(O),D=e("../utils/constants.jsx"),L=n(D),A=e("./file_upload_overlay.jsx"),F=n(A),U=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));a.mounted=!1,a.onChange=a.onChange.bind(a),a.onChangeAll=a.onChangeAll.bind(a),a.forceUpdateInfo=a.forceUpdateInfo.bind(a),a.handleResize=a.handleResize.bind(a);var s=a.getStateFromStores();return s.windowWidth=w.windowWidth(),s.windowHeight=w.windowHeight(),a.state=s,a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"getStateFromStores",value:function(){var e=v.default.getSelectedPost();if(!e||e.order.length<1||!e.posts[e.order[0]])return{postList:{}};var t=e.posts[e.order[0]].channel_id,a=v.default.getPendingPosts(t);if(a)for(var s in a.posts)a.posts.hasOwnProperty(s)&&(e.posts[s]=a.posts[s]);return{postList:e}}},{key:"componentDidMount",value:function(){v.default.addSelectedPostChangeListener(this.onChange),v.default.addChangeListener(this.onChangeAll),R.default.addChangeListener(this.forceUpdateInfo),this.resize(),window.addEventListener("resize",this.handleResize),this.mounted=!0}},{key:"componentDidUpdate",value:function(){$(".post-right__scroll")[0]&&$(".post-right__scroll").scrollTop($(".post-right__scroll")[0].scrollHeight),this.resize()}},{key:"componentWillUnmount",value:function(){v.default.removeSelectedPostChangeListener(this.onChange),v.default.removeChangeListener(this.onChangeAll),R.default.removeChangeListener(this.forceUpdateInfo),window.removeEventListener("resize",this.handleResize),this.mounted=!1}},{key:"forceUpdateInfo",value:function(){if(this.state.postList)for(var e in this.state.postList.posts)this.refs[e]&&this.refs[e].forceUpdate()}},{key:"handleResize",value:function(){this.setState({windowWidth:w.windowWidth(),windowHeight:w.windowHeight()})}},{key:"onChange",value:function(){var e=this.getStateFromStores();this.mounted&&!w.areObjectsEqual(e,this.state)&&this.setState(e)}},{key:"onChangeAll",value:function(){var e=v.default.getSelectedPost();if(e&&0!==e.order.length&&e.posts[e.order[0]]){var t=v.default.getVisiblePosts(e.posts[e.order[0]].channel_id);if(t&&0!==t.order.length){if(t.posts[t.order[0]].channel_id===e.posts[e.order[0]].channel_id){for(var a in e.posts)if(e.posts.hasOwnProperty(a)){var s=e.posts[a];s.pending_post_id&&(0,l.default)(e.posts,a)}for(var n in t.posts)t.posts.hasOwnProperty(n)&&(e.posts[n]=t.posts[n]);v.default.storeSelectedPost(e)}var r=this.getStateFromStores();this.mounted&&!w.areObjectsEqual(r,this.state)&&this.setState(r)}}}},{key:"resize",value:function(){$(".post-right__scroll").scrollTop(1e5),this.state.windowWidth>768&&($(".post-right__scroll").perfectScrollbar(),$(".post-right__scroll").perfectScrollbar("update"))}},{key:"render",value:function(){var e=this.state.postList;if(null==e||!e.order)return React.createElement("div",null);var t=e.posts[e.order[0]],a=null;a=""===t.root_id?t:e.posts[t.root_id];var s=[];for(var n in e.posts)if(e.posts.hasOwnProperty(n)){var r=e.posts[n];r.root_id===a.id&&s.push(r)}s.sort(function(e,t){return e.state!==L.default.POST_LOADING&&e.state!==L.default.POST_FAILED||t.state===L.default.POST_LOADING||t.state===L.default.POST_FAILED?e.state===L.default.POST_LOADING||e.state===L.default.POST_FAILED||t.state!==L.default.POST_LOADING&&t.state!==L.default.POST_FAILED?e.state===L.default.POST_LOADING&&t.state===L.default.POST_FAILED?-1:e.state===L.default.POST_FAILED&&t.state===L.default.POST_LOADING?1:e.create_at<t.create_at?-1:e.create_at>t.create_at?1:0:-1:1});var l,i=E.default.getCurrentId();return null!=i&&(l=React.createElement(k.default,null)),React.createElement("div",{className:"post-right__container"},React.createElement(F.default,{overlayType:"right"}),React.createElement("div",{className:"search-bar__container sidebar--right__search-header"},l),React.createElement("div",{className:"sidebar-right__body"},React.createElement(j.default,{fromSearch:this.props.fromSearch,isMentionSearch:this.props.isMentionSearch}),React.createElement("div",{className:"post-right__scroll"},React.createElement(P.default,{ref:a.id,post:a,commentCount:s.length}),React.createElement("div",{className:"post-right-comments-container"},s.map(function(e){return React.createElement(I.default,{ref:e.id,key:e.id+"commentKey",post:e,selected:e.id===t.id})})),React.createElement("div",{className:"post-create__container"},React.createElement(M.default,{channelId:a.channel_id,rootId:a.id})))))}}]),t}(React.Component);a.default=U,U.defaultProps={fromSearch:"",isMentionSearch:!1},U.propTypes={fromSearch:React.PropTypes.string,isMentionSearch:React.PropTypes.bool}},{"../stores/post_store.jsx":329,"../stores/preference_store.jsx":330,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./create_comment.jsx":153,"./file_upload_overlay.jsx":168,"./rhs_comment.jsx":210,"./rhs_header_post.jsx":211,"./rhs_root_post.jsx":212,"./search_bar.jsx":214,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/reflect/delete-property":13,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],214:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=e("../utils/async_client.jsx"),v=s(b),_=e("../stores/search_store.jsx"),E=n(_),y=e("../dispatcher/app_dispatcher.jsx"),R=n(y),C=e("./suggestion/suggestion_box.jsx"),w=n(C),S=e("./suggestion/search_channel_provider.jsx"),k=n(S),N=e("./suggestion/search_suggestion_list.jsx"),M=n(N),x=e("./suggestion/search_user_provider.jsx"),j=n(x),T=e("../utils/utils.jsx"),P=s(T),O=e("../utils/constants.jsx"),I=n(O),D=I.default.ActionTypes,L=ReactBootstrap.Popover,A=function(e){function t(){(0,o.default)(this,t);var e=(0,m.default)(this,(0,l.default)(t).call(this));e.mounted=!1,e.onListenerChange=e.onListenerChange.bind(e),e.handleUserInput=e.handleUserInput.bind(e),e.handleUserFocus=e.handleUserFocus.bind(e),e.handleUserBlur=e.handleUserBlur.bind(e),e.performSearch=e.performSearch.bind(e),e.handleSubmit=e.handleSubmit.bind(e);var a=e.getSearchTermStateFromStores();return a.focused=!1,e.state=a,e.suggestionProviders=[new k.default,new j.default],e}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getSearchTermStateFromStores",value:function(){var e=E.default.getSearchTerm()||"";return{searchTerm:e}}},{key:"componentDidMount",value:function(){E.default.addSearchTermChangeListener(this.onListenerChange),this.mounted=!0}},{key:"componentWillUnmount",value:function(){E.default.removeSearchTermChangeListener(this.onListenerChange),this.mounted=!1}},{key:"onListenerChange",value:function(e,t){if(this.mounted){var a=this.getSearchTermStateFromStores();P.areObjectsEqual(a,this.state)||this.setState(a),e&&this.performSearch(a.searchTerm,t)}}},{key:"clearFocus",value:function(){$(".search-bar__container").removeClass("focused")}},{key:"handleClose",value:function(e){e.preventDefault(),R.default.handleServerAction({type:D.RECIEVED_SEARCH,results:null}),R.default.handleServerAction({type:D.RECIEVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),R.default.handleServerAction({type:D.RECIEVED_POST_SELECTED,results:null})}},{key:"handleUserInput",value:function(e){var t=e;E.default.storeSearchTerm(t),E.default.emitSearchTermChange(!1),this.setState({searchTerm:t})}},{key:"handleUserBlur",value:function(){this.setState({focused:!1})}},{key:"handleUserFocus",value:function(){$(".search-bar__container").addClass("focused"),this.setState({focused:!0})}},{key:"performSearch",value:function(e,t){var a=this;e.length&&(this.setState({isSearching:!0}),g.search(e,function(e){a.setState({isSearching:!1}),P.isMobile()&&(ReactDOM.findDOMNode(a.refs.search).value=""),R.default.handleServerAction({type:D.RECIEVED_SEARCH,results:e,is_mention_search:t})},function(e){a.setState({isSearching:!1}),v.dispatchError(e,"search")}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.performSearch(this.state.searchTerm.trim())}},{key:"render",value:function(){var e=null;this.state.isSearching&&(e=React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var t="search-help-popover";return!this.state.searchTerm&&this.state.focused&&(t+=" visible"),React.createElement("div",null,React.createElement("div",{className:"sidebar__collapse",onClick:this.handleClose},React.createElement("span",{className:"fa fa-angle-left"})),React.createElement("span",{className:"search__clear",onClick:this.clearFocus},"Cancel"),React.createElement("form",{role:"form",className:"search__form relative-div",onSubmit:this.handleSubmit,style:{overflow:"visible"},autoComplete:"off"},React.createElement("span",{className:"glyphicon glyphicon-search sidebar__search-icon"}),React.createElement(w.default,{ref:"search",className:"form-control search-bar",placeholder:"Search",value:this.state.searchTerm,onFocus:this.handleUserFocus,onBlur:this.handleUserBlur,onUserInput:this.handleUserInput,listComponent:M.default,providers:this.suggestionProviders}),e,React.createElement(L,{id:"searchbar-help-popup",placement:"bottom",className:t},React.createElement("h4",null,"Search Options"),React.createElement("ul",null,React.createElement("li",null,React.createElement("span",null,"Use "),React.createElement("b",null,'"quotation marks"'),React.createElement("span",null," to search for phrases")),React.createElement("li",null,React.createElement("span",null,"Use "),React.createElement("b",null,"from:"),React.createElement("span",null," to find posts from specific users and "),React.createElement("b",null,"in:"),React.createElement("span",null," to find posts in specific channels"))))))}}]),t}(React.Component);a.default=A},{"../dispatcher/app_dispatcher.jsx":281,"../stores/search_store.jsx":331,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./suggestion/search_channel_provider.jsx":234,"./suggestion/search_suggestion_list.jsx":235,"./suggestion/search_user_provider.jsx":236,"./suggestion/suggestion_box.jsx":237,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],215:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){return{results:b.default.getSearchResults()}}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../stores/search_store.jsx"),b=n(g),v=e("../stores/user_store.jsx"),_=n(v),E=e("./search_bar.jsx"),y=n(E),R=e("../utils/utils.jsx"),C=s(R),w=e("./search_results_header.jsx"),S=n(w),k=e("./search_results_item.jsx"),N=n(k),M=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(0,i.default)(t).call(this,e));a.mounted=!1,a.onChange=a.onChange.bind(a),a.resize=a.resize.bind(a),a.handleResize=a.handleResize.bind(a);var s=r();return s.windowWidth=C.windowWidth(),s.windowHeight=C.windowHeight(),a.state=s,a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,b.default.addSearchChangeListener(this.onChange),this.resize(),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"componentWillUnmount",value:function(){b.default.removeSearchChangeListener(this.onChange),this.mounted=!1,window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setState({windowWidth:C.windowWidth(),windowHeight:C.windowHeight()})}},{key:"onChange",value:function(){if(this.mounted){var e=r();C.areObjectsEqual(e,this.state)||this.setState(e)}}},{key:"resize",value:function(){$("#search-items-container").scrollTop(0),this.state.windowWidth>768&&$("#search-items-container").perfectScrollbar()}},{key:"render",value:function(){var e=this.state.results,t=_.default.getCurrentId(),a=null;t&&(a=React.createElement(y.default,null));var s=!e||!e.order||!e.order.length,n=b.default.getSearchTerm(),r=null;return r=!n&&s?React.createElement("div",{className:"sidebar--right__subheader"},React.createElement("ul",null,React.createElement("li",null,"Use ",React.createElement("b",null,'"quotation marks"')," to search for phrases"),React.createElement("li",null,"Use ",React.createElement("b",null,"from:")," to find posts from specific users and ",React.createElement("b",null,"in:")," to find posts in specific channels"))):s?React.createElement("div",{className:"sidebar--right__subheader"},React.createElement("h4",null,"NO RESULTS"),React.createElement("ul",null,React.createElement("li",null,'If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term'),React.createElement("li",null,'Due to the volume of results, two letter searches and common words like "this", "a" and "is" won\'t appear in search results'))):e.order.map(function(t){var a=e.posts[t];return React.createElement(N.default,{key:a.id,post:a,term:n,isMentionSearch:this.props.isMentionSearch})},this),React.createElement("div",{className:"sidebar--right__content"},React.createElement("div",{className:"search-bar__container sidebar--right__search-header"},a),React.createElement("div",{className:"sidebar-right__body"},React.createElement(S.default,{isMentionSearch:this.props.isMentionSearch}),React.createElement("div",{id:"search-items-container",className:"search-items-container"},r)))}}]),t}(React.Component);a.default=M,M.propTypes={isMentionSearch:React.PropTypes.bool}},{"../stores/search_store.jsx":331,"../stores/user_store.jsx":335,"../utils/utils.jsx":344,"./search_bar.jsx":214,"./search_results_header.jsx":216,"./search_results_item.jsx":217,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],216:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../dispatcher/app_dispatcher.jsx"),f=s(h),g=e("../utils/constants.jsx"),b=s(g),v=b.default.ActionTypes,_=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.handleClose=a.handleClose.bind(a),a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"handleClose",value:function(e){e.preventDefault(),f.default.handleServerAction({type:v.RECIEVED_SEARCH,results:null}),f.default.handleServerAction({type:v.RECIEVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),f.default.handleServerAction({type:v.RECIEVED_POST_SELECTED,results:null})}},{key:"render",value:function(){var e="Search Results";return this.props.isMentionSearch&&(e="Recent Mentions"),React.createElement("div",{className:"sidebar--right__header"},React.createElement("span",{className:"sidebar--right__title"},e),React.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",title:"Close",onClick:this.handleClose},React.createElement("i",{className:"fa fa-sign-out"})))}}]),t}(React.Component);a.default=_,_.propTypes={isMentionSearch:React.PropTypes.bool}},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],217:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/channel_store.jsx"),g=n(f),b=e("../stores/user_store.jsx"),v=n(b),_=e("./user_profile.jsx"),E=n(_),y=e("../dispatcher/event_helpers.jsx"),R=s(y),C=e("../utils/utils.jsx"),w=s(C),S=e("../utils/text_formatting.jsx"),k=s(S),N=e("../utils/constants.jsx"),M=n(N),x=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleClick=a.handleClick.bind(a),a.handleFocusRHSClick=a.handleFocusRHSClick.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleClick",value:function(e){e.preventDefault(),R.emitPostFocusEvent(this.props.post.id),$(window).width()<768&&($(".sidebar--right").removeClass("move--left"),$(".inner__wrap").removeClass("move--left"))}},{key:"handleFocusRHSClick",value:function(e){e.preventDefault(),R.emitPostFocusRightHandSideFromSearch(this.props.post,this.props.isMentionSearch)}},{key:"render",value:function(){var e="",t=g.default.get(this.props.post.channel_id),a=v.default.getCurrentUser().update_at;t&&(e=t.display_name,"D"===t.type&&(e="Direct Message"));var s={searchTerm:this.props.term,mentionHighlight:this.props.isMentionSearch};return React.createElement("div",{className:"search-item-container post"},React.createElement("div",{className:"search-channel__name"},e),React.createElement("div",{className:"post__content"},React.createElement("div",{className:"post__img"},React.createElement("img",{src:"/api/v1/users/"+this.props.post.user_id+"/image?time="+a+"&"+w.getSessionIndex(),height:"36",width:"36"})),React.createElement("div",null,React.createElement("ul",{className:"post__header"},React.createElement("li",{className:"col__name"},React.createElement("strong",null,React.createElement(E.default,{userId:this.props.post.user_id}))),React.createElement("li",{className:"col"},React.createElement("time",{className:"search-item-time"},w.displayDate(this.props.post.create_at)+" "+w.displayTime(this.props.post.create_at))),React.createElement("li",null,React.createElement("a",{href:"#",className:"search-item__jump",onClick:this.handleClick},"Jump")),React.createElement("li",null,React.createElement("a",{href:"#",className:"comment-icon__container search-item__comment",onClick:this.handleFocusRHSClick},React.createElement("span",{className:"comment-icon",dangerouslySetInnerHTML:{__html:M.default.COMMENT_ICON}})))),React.createElement("div",{className:"search-item-snippet"},React.createElement("span",{dangerouslySetInnerHTML:{__html:k.formatText(this.props.post.message,s)}})))))}}]),t}(React.Component);a.default=x,x.propTypes={post:React.PropTypes.object,isMentionSearch:React.PropTypes.bool,term:React.PropTypes.string}},{"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/text_formatting.jsx":343,"../utils/utils.jsx":344,"./user_profile.jsx":261,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],218:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=null;this.props.client_error&&(e=React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-12 has-error"},this.props.client_error)));var t=null;this.props.server_error&&(t=React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-12 has-error"},this.props.server_error)));var a=null;this.props.extraInfo&&(a=React.createElement("div",{className:"setting-list__hint"},this.props.extraInfo));var s="";this.props.submit&&(s=React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",onClick:this.props.submit},"Save"));var n,r=this.props.inputs;return n="full"===this.props.width?"col-sm-12":"medium"===this.props.width?"col-sm-10 col-sm-offset-2":"col-sm-9 col-sm-offset-3",React.createElement("ul",{className:"section-max form-horizontal"},React.createElement("li",{className:"col-sm-12 section-title"},this.props.title),React.createElement("li",{className:n},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},r,a),React.createElement("li",{className:"setting-list-item"},React.createElement("hr",null),t,e,s,React.createElement("a",{className:"btn btn-sm theme",href:"#",onClick:this.props.updateSection},"Cancel")))))}}]),t}(React.Component);a.default=h,h.propTypes={inputs:React.PropTypes.array,client_error:React.PropTypes.string,
server_error:React.PropTypes.string,extraInfo:React.PropTypes.element,updateSection:React.PropTypes.func,submit:React.PropTypes.func,title:React.PropTypes.string,width:React.PropTypes.string}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],219:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=null;return this.props.disableOpen||(e=React.createElement("li",{className:"col-sm-2 section-edit"},React.createElement("a",{className:"theme",href:"#",onClick:this.props.updateSection},React.createElement("i",{className:"fa fa-pencil"}),"Edit"))),React.createElement("ul",{className:"section-min",onClick:this.props.updateSection},React.createElement("li",{className:"col-sm-10 section-title"},this.props.title),e,React.createElement("li",{className:"col-sm-7 section-describe"},this.props.describe))}}]),t}(React.Component);a.default=h,h.propTypes={title:React.PropTypes.string,disableOpen:React.PropTypes.bool,updateSection:React.PropTypes.func,describe:React.PropTypes.string}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],220:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));return t.setPicture=t.setPicture.bind(t),t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"setPicture",value:function(e){if(e){var t=new FileReader,a=ReactDOM.findDOMNode(this.refs.image);t.onload=function(e){$(a).attr("src",e.target.result)},t.readAsDataURL(e)}}},{key:"componentWillReceiveProps",value:function(e){e.picture&&this.setPicture(e.picture)}},{key:"render",value:function(){var e=null;this.props.client_error&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.props.client_error)));var a=null;this.props.server_error&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.props.server_error)));var s=null;s=this.props.picture?React.createElement("img",{ref:"image",className:"profile-img rounded",src:""}):React.createElement("img",{ref:"image",className:"profile-img rounded",src:this.props.src});var n;if(this.props.loadingPicture)n=React.createElement("img",{className:"spinner",src:"/static/images/load.gif"});else{var r="btn btn-sm";r+=this.props.submitActive?" btn-primary":" btn-inactive disabled",n=React.createElement("a",{className:r,onClick:this.props.submit},"Save")}var l="Upload a profile picture in either JPG or PNG format, at least "+t.window.mm_config.ProfileWidth+"px in width and "+t.window.mm_config.ProfileHeight+"px height.",i=this;return React.createElement("ul",{className:"section-max"},React.createElement("li",{className:"col-xs-12 section-title"},this.props.title),React.createElement("li",{className:"col-xs-offset-3 col-xs-8"},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},s),React.createElement("li",{className:"setting-list-item"},l),React.createElement("li",{className:"setting-list-item"},a,e,React.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},"Select",React.createElement("input",{ref:"input",accept:".jpg,.png,.bmp",type:"file",onChange:this.props.pictureChange})),n,React.createElement("a",{className:"btn btn-sm theme",href:"#",onClick:i.props.updateSection},"Cancel")))))}}]),a}(React.Component);a.default=h,h.propTypes={client_error:React.PropTypes.string,server_error:React.PropTypes.string,src:React.PropTypes.string,picture:React.PropTypes.object,loadingPicture:React.PropTypes.bool,submitActive:React.PropTypes.bool,submit:React.PropTypes.func,title:React.PropTypes.string,pictureChange:React.PropTypes.func}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],221:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.doFileSelect=a.doFileSelect.bind(a),a.doSubmit=a.doSubmit.bind(a),a.state={clientError:a.props.clientError,serverError:a.props.serverError,filename:""},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({clientError:this.props.clientError,serverError:this.props.serverError})}},{key:"doFileSelect",value:function(e){e.preventDefault();var t=$(e.target).val();"fakepath"===t.substring(3,11)&&(t=t.substring(12)),this.setState({clientError:"",serverError:"",filename:t})}},{key:"doSubmit",value:function(e){e.preventDefault();var t=ReactDOM.findDOMNode(this.refs.uploadinput);t.files&&t.files[0]?this.props.submit(t.files[0]):this.setState({clientError:"No file selected."})}},{key:"render",value:function(){var e=null;this.state.clientError&&(e=React.createElement("div",{className:"file-status"},this.state.clientError));var t=null;this.state.serverError&&(t=React.createElement("div",{className:"file-status"},this.state.serverError));var a=null,s="btn btn-sm btn-primary disabled";return this.state.filename&&(a=React.createElement("div",{className:"file-status file-name"},this.state.filename),s="btn btn-sm btn-primary"),React.createElement("ul",{className:"section-max"},React.createElement("li",{className:"col-sm-12 section-title"},this.props.title),React.createElement("li",{className:"col-sm-offset-3 col-sm-9"},this.props.helpText),React.createElement("li",{className:"col-sm-offset-3 col-sm-9"},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},React.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},"Select file",React.createElement("input",{ref:"uploadinput",accept:this.props.fileTypesAccepted,type:"file",onChange:this.doFileSelect})),React.createElement("a",{className:s,onClick:this.doSubmit},"Import"),a,t,e))))}}]),t}(React.Component);a.default=h,h.propTypes={title:React.PropTypes.string.isRequired,submit:React.PropTypes.func.isRequired,fileTypesAccepted:React.PropTypes.string.isRequired,clientError:React.PropTypes.string,serverError:React.PropTypes.string,helpText:React.PropTypes.object}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],222:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/possibleConstructorReturn"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=function(e){function t(e){(0,o.default)(this,t);var a=(0,u.default)(this,(0,l.default)(t).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,h.default)(t,e),(0,m.default)(t,[{key:"componentDidUpdate",value:function(){$(".settings-modal").find(".modal-body").scrollTop(0),$(".settings-modal").find(".modal-body").perfectScrollbar("update")}}]),(0,m.default)(t,[{key:"handleClick",value:function(e,t){t.preventDefault(),this.props.updateTab(e.name),$(t.target).closest(".settings-modal").addClass("display--content")}},{key:"componentDidMount",value:function(){g.isBrowserFirefox()&&$(".settings-modal .settings-table .nav").addClass("position--top")}},{key:"render",value:function(){var e=this.props.tabs.map(function(e){var t=e.name+"_li",a="";return this.props.activeTab===e.name&&(a="active"),React.createElement("li",{key:t,className:a},React.createElement("a",{href:"#",onClick:this.handleClick.bind(null,e)},React.createElement("i",{className:e.icon}),e.uiName))}.bind(this));return React.createElement("div",null,React.createElement("ul",{className:"nav nav-pills nav-stacked"},e))}}]),t}(React.Component);a.default=b,b.propTypes={tabs:React.PropTypes.arrayOf(React.PropTypes.shape({name:React.PropTypes.string.isRequired,uiName:React.PropTypes.string.isRequired,icon:React.PropTypes.string.isRequired})).isRequired,activeTab:React.PropTypes.string,updateTab:React.PropTypes.func.isRequired}},{"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],223:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/get-iterator"),l=n(r),i=e("babel-runtime/core-js/json/stringify"),o=n(i),c=e("babel-runtime/core-js/object/assign"),u=n(c),d=e("babel-runtime/core-js/object/keys"),m=n(d),p=e("babel-runtime/core-js/map"),h=n(p),f=e("babel-runtime/core-js/object/get-prototype-of"),g=n(f),b=e("babel-runtime/helpers/classCallCheck"),v=n(b),_=e("babel-runtime/helpers/createClass"),E=n(_),y=e("babel-runtime/helpers/possibleConstructorReturn"),R=n(y),C=e("babel-runtime/helpers/inherits"),w=n(C);Object.defineProperty(a,"__esModule",{value:!0});var S=e("./new_channel_flow.jsx"),k=n(S),N=e("./more_direct_channels.jsx"),M=n(N),x=e("./sidebar_header.jsx"),j=n(x),T=e("./unread_channel_indicator.jsx"),P=n(T),O=e("./tutorial/tutorial_tip.jsx"),I=n(O),D=e("../stores/channel_store.jsx"),L=n(D),A=e("../stores/user_store.jsx"),F=n(A),U=e("../stores/team_store.jsx"),H=n(U),B=e("../stores/preference_store.jsx"),q=n(B),G=e("../utils/async_client.jsx"),V=s(G),W=e("../utils/client.jsx"),z=s(W),K=e("../utils/utils.jsx"),Y=s(K),J=e("../utils/constants.jsx"),Z=n(J),X=Z.default.Preferences,Q=Z.default.TutorialSteps,ee=ReactBootstrap.Tooltip,te=ReactBootstrap.OverlayTrigger,ae=function(e){function a(e){(0,v.default)(this,a);var t=(0,R.default)(this,(0,g.default)(a).call(this,e));t.badgesActive=!1,t.firstUnreadChannel=null,t.lastUnreadChannel=null,t.getStateFromStores=t.getStateFromStores.bind(t),t.onChange=t.onChange.bind(t),t.onScroll=t.onScroll.bind(t),t.updateUnreadIndicators=t.updateUnreadIndicators.bind(t),t.handleLeaveDirectChannel=t.handleLeaveDirectChannel.bind(t),t.handleResize=t.handleResize.bind(t),t.showMoreChannelsModal=t.showMoreChannelsModal.bind(t),t.showNewChannelModal=t.showNewChannelModal.bind(t),t.hideNewChannelModal=t.hideNewChannelModal.bind(t),t.showMoreDirectChannelsModal=t.showMoreDirectChannelsModal.bind(t),t.hideMoreDirectChannelsModal=t.hideMoreDirectChannelsModal.bind(t),t.createChannelElement=t.createChannelElement.bind(t),t.updateTitle=t.updateTitle.bind(t),t.isLeaving=new h.default;var s=t.getStateFromStores();return s.newChannelModalType="",s.showDirectChannelsModal=!1,s.loadingDMChannel=-1,s.windowWidth=Y.windowWidth(),t.state=s,t}return(0,w.default)(a,e),(0,E.default)(a,[{key:"getTotalUnreadCount",value:function(){var e=0,t=0,a=this.state.unreadCounts;return(0,m.default)(a).forEach(function(s){e+=a[s].msgs,t+=a[s].mentions}),{msgs:e,mentions:t}}},{key:"getStateFromStores",value:function(){var e=L.default.getAllMembers(),t=L.default.getCurrentId(),a=F.default.getCurrentId(),s=(0,u.default)([],L.default.getAll());s.sort(function(e,t){return e.display_name.localeCompare(t.display_name)});var n=s.filter(function(e){return e.type===Z.default.OPEN_CHANNEL}),r=s.filter(function(e){return e.type===Z.default.PRIVATE_CHANNEL}),i=q.default.getCategory(Z.default.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW),c=[],d=!0,m=!1,p=void 0;try{for(var h,f=(0,l.default)(i);!(d=(h=f.next()).done);d=!0){var g=h.value;if("true"===g.value){var b=g.name,v=s.find(Y.isDirectChannelForUser.bind(null,b));v||(v={name:Y.getDirectChannelName(a,b),last_post_at:0,total_msg_count:0,type:Z.default.DM_CHANNEL,fake:!0}),v.display_name=Y.displayUsername(b),v.teammate_id=b,v.status=F.default.getStatus(b),c.push(v)}}}catch(e){m=!0,p=e}finally{try{!d&&f.return&&f.return()}finally{if(m)throw p}}c.sort(this.sortChannelsByDisplayName);var _=F.default.getActiveOnlyProfileList(!0).length-c.length,E=q.default.getInt(X.TUTORIAL_STEP,F.default.getCurrentId(),999);return{activeId:t,members:e,publicChannels:n,privateChannels:r,directChannels:c,hiddenDirectChannelCount:_,unreadCounts:JSON.parse((0,o.default)(L.default.getUnreadCounts())),showTutorialTip:E===Q.CHANNEL_POPOVER}}},{key:"componentDidMount",value:function(){L.default.addChangeListener(this.onChange),F.default.addChangeListener(this.onChange),F.default.addStatusesChangeListener(this.onChange),H.default.addChangeListener(this.onChange),q.default.addChangeListener(this.onChange),this.updateTitle(),this.updateUnreadIndicators(),window.addEventListener("resize",this.handleResize),$(window).width()>768&&$(".nav-pills__container").perfectScrollbar()}},{key:"shouldComponentUpdate",value:function(e,t){return Y.areObjectsEqual(t,this.state)?!1:!0}},{key:"componentDidUpdate",value:function(){this.updateTitle(),this.updateUnreadIndicators()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),L.default.removeChangeListener(this.onChange),F.default.removeChangeListener(this.onChange),F.default.removeStatusesChangeListener(this.onChange),H.default.removeChangeListener(this.onChange),q.default.removeChangeListener(this.onChange)}},{key:"handleResize",value:function(){this.setState({windowWidth:Y.windowWidth(),windowHeight:Y.windowHeight()})}},{key:"onChange",value:function(){this.setState(this.getStateFromStores())}},{key:"updateTitle",value:function(){var e=L.default.getCurrent();if(e){var a="";null!=t.window.mm_config.SiteName&&(a=t.window.mm_config.SiteName);var s=e.display_name;"D"===e.type&&(s=Y.getDirectTeammate(e.id).username);var n=this.getTotalUnreadCount(),r=n.mentions>0?"("+n.mentions+") ":"",l=n.msgs>0?"* ":"";document.title=r+l+s+" - "+H.default.getCurrent().display_name+" "+a}}},{key:"onScroll",value:function(){this.updateUnreadIndicators()}},{key:"updateUnreadIndicators",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.container)),t=!1,a=!1;if(this.firstUnreadChannel){var s=$(ReactDOM.findDOMNode(this.refs[this.firstUnreadChannel]));s.position().top+s.height()<0&&(t=!0)}if(this.lastUnreadChannel){var n=$(ReactDOM.findDOMNode(this.refs[this.lastUnreadChannel]));n.position().top>e.height()&&(a=!0)}this.setState({showTopUnread:t,showBottomUnread:a})}},{key:"handleLeaveDirectChannel",value:function(e){var t=this;if(!this.isLeaving.get(e.id)){this.isLeaving.set(e.id,!0);var a=q.default.setPreference(Z.default.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,e.teammate_id,"false");z.savePreferences([a],function(){t.isLeaving.set(e.id,!1)},function(){t.isLeaving.set(e.id,!1)}),this.setState(this.getStateFromStores())}e.id===this.state.activeId&&Y.switchChannel(L.default.getByName(Z.default.DEFAULT_CHANNEL))}},{key:"sortChannelsByDisplayName",value:function(e,t){return e.display_name.localeCompare(t.display_name)}},{key:"showMoreChannelsModal",value:function(){$("#more_channels").modal({"data-channeltype":"O"}).modal("show")}},{key:"showNewChannelModal",value:function(e){this.setState({newChannelModalType:e})}},{key:"hideNewChannelModal",value:function(){this.setState({newChannelModalType:""})}},{key:"showMoreDirectChannelsModal",value:function(){this.setState({showDirectChannelsModal:!0})}},{key:"hideMoreDirectChannelsModal",value:function(){this.setState({showDirectChannelsModal:!1})}},{key:"createTutorialTip",value:function(){var e=[];return e.push(React.createElement("div",null,React.createElement("h4",null,"Channels"),React.createElement("p",null,React.createElement("strong",null,"Channels")," organize conversations across different topics. They’re open to everyone on your team. To send private communications use ",React.createElement("strong",null,"Direct Messages")," for a single person or ",React.createElement("strong",null,"Private Groups")," for multiple people."))),e.push(React.createElement("div",null,React.createElement("h4",null,'"Town Square" and "Off-Topic" channels'),React.createElement("p",null,"Here are two public channels to start:"),React.createElement("p",null,React.createElement("strong",null,"Town Square")," is a place for team-wide communication. Everyone in your team is a member of this channel."),React.createElement("p",null,React.createElement("strong",null,"Off-Topic")," is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create."))),e.push(React.createElement("div",null,React.createElement("h4",null,"Creating and Joining Channels"),React.createElement("p",null,"Click ",React.createElement("strong",null,'"More..."')," to create a new channel or join an existing one."),React.createElement("p",null,"You can also create a new channel or private group by clicking the ",React.createElement("strong",null,'"+" symbol')," next to the channel or private group header."))),React.createElement(I.default,{placement:"right",screens:e,overlayClass:"tip-overlay--sidebar"})}},{key:"createChannelElement",value:function(e,t,a,s){var n=this.state.members,r=this.state.activeId,l=n[e.id],i=this.state.unreadCounts[e.id]||{msgs:0,mentions:0},o=void 0,c="";e.id===r&&(c="active");var u="sidebar-channel",d=!1;l&&(o=i.msgs+i.mentions,d=o>0||l.mention_count>0),d&&(u+=" unread-title",e.id!==r&&(this.firstUnreadChannel||(this.firstUnreadChannel=e.name),this.lastUnreadChannel=e.name));var m=null;l?i.mentions&&(m=React.createElement("span",{className:"badge pull-right small"},i.mentions),this.badgesActive=!0):this.state.loadingDMChannel===t&&"D"===e.type&&(m=React.createElement("img",{className:"channel-loading-gif pull-right",src:"/static/images/load.gif"})),o>0&&(u+=" has-badge");var p=null;if("D"===e.type){var h="";h="online"===e.status?Z.default.ONLINE_ICON_SVG:"away"===e.status?Z.default.AWAY_ICON_SVG:Z.default.OFFLINE_ICON_SVG,p=React.createElement("span",{className:"status",dangerouslySetInnerHTML:{__html:h}})}var f=null;"O"===e.type?f=React.createElement("div",{className:"status"},React.createElement("i",{className:"fa fa-globe"})):"P"===e.type&&(f=React.createElement("div",{className:"status"},React.createElement("i",{className:"fa fa-lock"})));var g=null,b="#",v=H.default.getCurrentTeamUrl();if(e.fake){if(e.fake&&v){var _=Y.getUserIdFromChannelName(e);-1===this.state.loadingDMChannel&&(g=function(a){var n=this;a.preventDefault(),a.target.attributes.getNamedItem("data-close")?s(e):(this.setState({loadingDMChannel:t}),z.createDirectChannel(e,_,function(e){n.setState({loadingDMChannel:-1}),V.getChannel(e.id),Y.switchChannel(e)},function(){n.setState({loadingDMChannel:-1}),window.location.href=H.default.getCurrentTeamUrl()+"/channels/"+e.name}))}.bind(this))}}else g=function(t){t.target.attributes.getNamedItem("data-close")?s(e):Y.switchChannel(e),t.preventDefault()};var E=null,y=React.createElement(ee,{id:"remove-dm-tooltip"},"Remove from list");s&&!m&&(E=React.createElement(te,{delayShow:1e3,placement:"top",overlay:y},React.createElement("span",{className:"btn-close","data-close":"true"},"×")),u+=" has-close");var R=null;return this.state.showTutorialTip&&e.name===Z.default.DEFAULT_CHANNEL&&(R=this.createTutorialTip()),React.createElement("li",{key:e.name,ref:e.name,className:c},React.createElement("a",{className:u,href:b,onClick:g},f,p,e.display_name,m,E),R)}},{key:"render",value:function(){var e=this;this.badgesActive=!1,this.firstUnreadChannel=null,this.lastUnreadChannel=null;var t=this.state.publicChannels.map(this.createChannelElement),a=this.state.privateChannels.map(this.createChannelElement),s=this.state.directChannels.map(function(t,a,s){return e.createChannelElement(t,a,s,e.handleLeaveDirectChannel)}),n=document.createElement("link");n.type="image/x-icon",n.rel="shortcut icon",n.id="favicon",this.badgesActive?n.href="/static/images/favicon/redfavicon-16x16.png":n.href="/static/images/favicon/favicon-16x16.png";var r=document.getElementsByTagName("head")[0],l=document.getElementById("favicon");l&&r.removeChild(l),r.appendChild(n);var i=null;this.state.hiddenDirectChannelCount>0&&(i=React.createElement("li",{key:"more"},React.createElement("a",{href:"#",onClick:this.showMoreDirectChannelsModal},"More ("+this.state.hiddenDirectChannelCount+")")));var o=!1;""!==this.state.newChannelModalType&&(o=!0);var c=React.createElement(ee,{id:"new-channel-tooltip"},"Create new channel"),u=React.createElement(ee,{id:"new-group-tooltip"},"Create new group");return React.createElement("div",null,React.createElement(k.default,{show:o,channelType:this.state.newChannelModalType,onModalDismissed:this.hideNewChannelModal}),React.createElement(M.default,{show:this.state.showDirectChannelsModal,onModalDismissed:this.hideMoreDirectChannelsModal}),React.createElement(j.default,{teamDisplayName:H.default.getCurrent().display_name,teamName:H.default.getCurrent().name,teamType:H.default.getCurrent().type}),React.createElement(P.default,{show:this.state.showTopUnread,extraClass:"nav-pills__unread-indicator-top",text:"Unread post(s) above"}),React.createElement(P.default,{show:this.state.showBottomUnread,extraClass:"nav-pills__unread-indicator-bottom",text:"Unread post(s) below"}),React.createElement("div",{ref:"container",className:"nav-pills__container",onScroll:this.onScroll},React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("h4",null,"Channels",React.createElement(te,{delayShow:500,placement:"top",overlay:c},React.createElement("a",{className:"add-channel-btn",href:"#",onClick:this.showNewChannelModal.bind(this,"O")},"+")))),t,React.createElement("li",null,React.createElement("a",{href:"#",className:"nav-more",onClick:this.showMoreChannelsModal},"More..."))),React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("h4",null,"Private Groups",React.createElement(te,{delayShow:500,placement:"top",overlay:u},React.createElement("a",{className:"add-channel-btn",href:"#",onClick:this.showNewChannelModal.bind(this,"P")},"+")))),a),React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("h4",null,"Direct Messages")),s,i)))}}]),a}(React.Component);a.default=ae,ae.defaultProps={},ae.propTypes={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/channel_store.jsx":325,"../stores/preference_store.jsx":330,"../stores/team_store.jsx":334,"../stores/user_store.jsx":335,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./more_direct_channels.jsx":183,"./new_channel_flow.jsx":187,"./sidebar_header.jsx":224,"./tutorial/tutorial_tip.jsx":259,"./unread_channel_indicator.jsx":260,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],224:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./navbar_dropdown.jsx"),g=n(f),b=e("./tutorial/tutorial_tip.jsx"),v=n(b),_=e("../stores/user_store.jsx"),E=n(_),y=e("../stores/preference_store.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=e("../utils/constants.jsx"),k=n(S),N=k.default.Preferences,M=k.default.TutorialSteps,x=ReactBootstrap.Tooltip,j=ReactBootstrap.OverlayTrigger,T=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.toggleDropdown=a.toggleDropdown.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.state=a.getStateFromStores(),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){R.default.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){R.default.removeChangeListener(this.onPreferenceChange)}},{key:"getStateFromStores",value:function(){var e=R.default.getInt(N.TUTORIAL_STEP,E.default.getCurrentId(),999);return{showTutorialTip:e===M.MENU_POPOVER}}},{key:"onPreferenceChange",value:function(){this.setState(this.getStateFromStores())}},{key:"toggleDropdown",value:function(e){return e.preventDefault(),this.refs.dropdown.blockToggle?void(this.refs.dropdown.blockToggle=!1):void $(".team__header").find(".dropdown-toggle").dropdown("toggle")}},{key:"createTutorialTip",value:function(){var e=[];return e.push(React.createElement("div",null,React.createElement("h4",null,"Main Menu"),React.createElement("p",null,"The ",React.createElement("strong",null,"Main Menu")," is where you can ",React.createElement("strong",null,"Invite New Members"),", access your ",React.createElement("strong",null,"Account Settings")," and set your ",React.createElement("strong",null,"Theme Color"),"."),React.createElement("p",null,"Team administrators can also access their ",React.createElement("strong",null,"Team Settings")," from this menu."),React.createElement("p",null,"System administrators will find a ",React.createElement("strong",null,"System Console")," option to administrate the entire system."))),React.createElement("div",{onClick:this.toggleDropdown},React.createElement(v.default,{ref:"tip",placement:"right",screens:e,overlayClass:"tip-overlay--header"}))}},{key:"render",value:function(){var e=E.default.getCurrentUser(),t=null;if(!e)return null;e.last_picture_update&&(t=React.createElement("img",{className:"user__picture",src:"/api/v1/users/"+e.id+"/image?time="+e.update_at+"&"+w.getSessionIndex()}));var a=null;return this.state.showTutorialTip&&(a=this.createTutorialTip()),React.createElement("div",{className:"team__header theme"},a,React.createElement("a",{href:"#",onClick:this.toggleDropdown},t,React.createElement("div",{className:"header__info"},React.createElement("div",{className:"user__name"},"@"+e.username),React.createElement(j,{trigger:["hover","focus"],delayShow:1e3,placement:"bottom",overlay:React.createElement(x,{id:"team-name__tooltip"},this.props.teamDisplayName),ref:"descriptionOverlay"},React.createElement("div",{className:"team__name"},this.props.teamDisplayName)))),React.createElement(g.default,{ref:"dropdown",teamType:this.props.teamType,teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName}))}}]),t}(React.Component);a.default=T,T.defaultProps={teamDisplayName:t.window.mm_config.SiteName,teamType:""},T.propTypes={teamDisplayName:React.PropTypes.string,teamName:React.PropTypes.string,teamType:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/preference_store.jsx":330,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./navbar_dropdown.jsx":186,"./tutorial/tutorial_tip.jsx":259,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],225:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./search_results.jsx"),g=n(f),b=e("./rhs_thread.jsx"),v=n(b),_=e("../stores/search_store.jsx"),E=n(_),y=e("../stores/post_store.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=500,k=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.plScrolledToBottom=!0,a.onSelectedChange=a.onSelectedChange.bind(a),a.onSearchChange=a.onSearchChange.bind(a),a.onShowSearch=a.onShowSearch.bind(a),a.doStrangeThings=a.doStrangeThings.bind(a),a.state=a.getStateFromStores(),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStateFromStores",value:function(){return{search_visible:null!=E.default.getSearchResults(),post_right_visible:null!=R.default.getSelectedPost(),is_mention_search:E.default.getIsMentionSearch()}}},{key:"componentDidMount",value:function(){E.default.addSearchChangeListener(this.onSearchChange),R.default.addSelectedPostChangeListener(this.onSelectedChange),E.default.addShowSearchListener(this.onShowSearch),this.doStrangeThings()}},{key:"componentWillUnmount",value:function(){E.default.removeSearchChangeListener(this.onSearchChange),R.default.removeSelectedPostChangeListener(this.onSelectedChange),E.default.removeShowSearchListener(this.onShowSearch)}},{key:"componentWillUpdate",value:function(e,t){var a=this.state.search_visible||this.state.post_right_visible,s=t.search_visible||t.post_right_visible;!a&&s&&setTimeout(function(){return R.default.jumpPostsViewSidebarOpen()},S)}},{key:"doStrangeThings",value:function(){var e=$(window).outerWidth(),t=$(".sidebar--right").outerWidth();return $(".inner__wrap").removeClass(".move--right"),$(".inner__wrap").addClass("move--left"),
$(".sidebar--left").removeClass("move--right"),$(".sidebar--right").addClass("move--left"),this.state.search_visible||this.state.post_right_visible?void(e>960?($(".inner__wrap").velocity({marginRight:t},{duration:500,easing:"easeOutSine"}),$(".sidebar--right").velocity({translateX:0},{duration:500,easing:"easeOutSine"})):$(".inner__wrap, .sidebar--right").attr("style","")):(e>960?($(".inner__wrap").velocity({marginRight:0},{duration:500,easing:"easeOutSine"}),$(".sidebar--right").velocity({translateX:t},{duration:500,easing:"easeOutSine"})):$(".inner__wrap, .sidebar--right").attr("style",""),$(".inner__wrap").removeClass("move--left").removeClass("move--right"),$(".sidebar--right").removeClass("move--left"),React.createElement("div",null))}},{key:"componentDidUpdate",value:function(){this.doStrangeThings()}},{key:"onSelectedChange",value:function(e){var t=this.getStateFromStores(e);t.from_search=e,w.areObjectsEqual(t,this.state)||this.setState(t)}},{key:"onSearchChange",value:function(){var e=this.getStateFromStores();w.areObjectsEqual(e,this.state)||this.setState(e)}},{key:"onShowSearch",value:function(){this.state.search_visible||this.setState({search_visible:!0})}},{key:"render",value:function(){var e="";return this.state.search_visible?e=React.createElement(g.default,{isMentionSearch:this.state.is_mention_search}):this.state.post_right_visible&&(e=React.createElement(v.default,{fromSearch:this.state.from_search,isMentionSearch:this.state.is_mention_search})),React.createElement("div",{className:"sidebar-right-container"},e)}}]),t}(React.Component);a.default=k},{"../stores/post_store.jsx":329,"../stores/search_store.jsx":331,"../utils/utils.jsx":344,"./rhs_thread.jsx":213,"./search_results.jsx":215,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],226:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/possibleConstructorReturn"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./team_members_modal.jsx"),g=n(f),b=e("./toggle_modal_button.jsx"),v=n(b),_=e("./user_settings/user_settings_modal.jsx"),E=n(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("../utils/client.jsx"),w=s(C),S=e("../dispatcher/event_helpers.jsx"),k=s(S),N=e("../utils/utils.jsx"),M=s(N),x=function(e){function a(e){(0,o.default)(this,a);var t=(0,u.default)(this,(0,l.default)(a).call(this,e));return t.handleLogoutClick=t.handleLogoutClick.bind(t),t.state={showUserSettingsModal:!1},t}return(0,h.default)(a,e),(0,m.default)(a,[{key:"componentDidMount",value:function(){$(".sidebar--left .dropdown-menu").perfectScrollbar()}}]),(0,m.default)(a,[{key:"handleLogoutClick",value:function(e){e.preventDefault(),w.logout()}},{key:"render",value:function(){var e=this,a="",s="",n="",r="",l="",i=R.default.getCurrentUser(),o=!1,c=!1;null!=i&&(o=M.isAdmin(i.roles),c=M.isSystemAdmin(i.roles),s=React.createElement("li",null,React.createElement("a",{href:"#",onClick:k.showInviteMemberModal},React.createElement("i",{className:"fa fa-user"}),"Invite New Member")),"O"===this.props.teamType&&(a=React.createElement("li",null,React.createElement("a",{href:"#",onClick:k.showGetTeamInviteLinkModal},React.createElement("i",{className:"glyphicon glyphicon-link"}),"Get Team Invite Link")))),o&&(n=React.createElement("li",null,React.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_settings"},React.createElement("i",{className:"fa fa-globe"}),"Team Settings")),r=React.createElement("li",null,React.createElement(v.default,{dialogType:g.default},React.createElement("i",{className:"fa fa-users"}),"Manage Members"))),c&&!M.isMobile()&&(l=React.createElement("li",null,React.createElement("a",{href:"/admin_console?"+M.getSessionIndex()},React.createElement("i",{className:"fa fa-wrench"}),"System Console")));var u="";null!=t.window.mm_config.SiteName&&(u=t.window.mm_config.SiteName);var d=u;this.props.teamDisplayName&&(d=this.props.teamDisplayName);var m=null;t.window.mm_config.HelpLink&&(m=React.createElement("li",null,React.createElement("a",{target:"_blank",href:t.window.mm_config.HelpLink},React.createElement("i",{className:"fa fa-question"}),"Help")));var p=null;return t.window.mm_config.ReportAProblemLink&&(p=React.createElement("li",null,React.createElement("a",{target:"_blank",href:t.window.mm_config.ReportAProblemLink},React.createElement("i",{className:"fa fa-phone"}),"Report a Problem"))),React.createElement("div",null,React.createElement("div",{className:"team__header theme"},React.createElement("a",{className:"team__name",href:"/channels/town-square"},d)),React.createElement("div",{className:"nav-pills__container"},React.createElement("ul",{className:"nav nav-pills nav-stacked"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:function(){return e.setState({showUserSettingsModal:!0})}},React.createElement("i",{className:"fa fa-cog"}),"Account Settings")),n,s,a,r,l,React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleLogoutClick},React.createElement("i",{className:"fa fa-sign-out"}),"Logout")),React.createElement("li",{className:"divider"}),m,p)),React.createElement(E.default,{show:this.state.showUserSettingsModal,onModalDismissed:function(){return e.setState({showUserSettingsModal:!1})}}))}}]),a}(React.Component);a.default=x,x.propTypes={teamType:React.PropTypes.string,teamDisplayName:React.PropTypes.string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/event_helpers.jsx":282,"../stores/user_store.jsx":335,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./team_members_modal.jsx":242,"./toggle_modal_button.jsx":257,"./user_settings/user_settings_modal.jsx":275,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],227:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./team_signup_choose_auth.jsx"),f=s(h),g=e("./team_signup_with_email.jsx"),b=s(g),v=e("./team_signup_with_sso.jsx"),_=s(v),E=e("../utils/constants.jsx"),y=s(E),R=e("mm-intl"),C=function(e){function a(e){(0,i.default)(this,a);var s=(0,d.default)(this,(0,r.default)(a).call(this,e));s.updatePage=s.updatePage.bind(s);var n=0;return"true"===t.window.mm_config.EnableSignUpWithEmail&&(n+=1),"true"===t.window.mm_config.EnableSignUpWithGitLab&&(n+=1),n>1?s.state={page:"choose"}:"true"===t.window.mm_config.EnableSignUpWithEmail?s.state={page:"email"}:"true"===t.window.mm_config.EnableSignUpWithGitLab?s.state={page:"gitlab"}:s.state={page:"none"},s}return(0,p.default)(a,e),(0,c.default)(a,[{key:"updatePage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=null;return"true"===t.window.mm_config.EnableTeamListing&&(0===this.props.teams.length?"true"!==t.window.mm_config.EnableTeamCreation&&(e=React.createElement("div",null,React.createElement(R.FormattedMessage,{id:"signup_team.noTeams",defaultMessage:"There are no teams include in the Team Directory and team creation has been disabled."}))):e=React.createElement("div",null,React.createElement("h4",null,React.createElement(R.FormattedMessage,{id:"signup_team.choose",defaultMessage:"Choose a Team"})),React.createElement("div",{className:"signup-team-all"},this.props.teams.map(function(e){return React.createElement("div",{key:"team_"+e.name,className:"signup-team-dir"},React.createElement("a",{href:"/"+e.name},React.createElement("span",{className:"signup-team-dir__name"},e.display_name),React.createElement("span",{className:"glyphicon glyphicon-menu-right right signup-team-dir__arrow","aria-hidden":"true"})))})),React.createElement("h4",null,React.createElement(R.FormattedMessage,{id:"signup_team.createTeam",defaultMessage:"Or Create a Team"})))),"true"!==t.window.mm_config.EnableTeamCreation?null==e?React.createElement("div",null,React.createElement(R.FormattedMessage,{id:"signup_team.disabled",defaultMessage:"Team creation has been disabled.  Please contact an administrator for access."})):React.createElement("div",null,e):"choose"===this.state.page?React.createElement("div",null,e,React.createElement(f.default,{updatePage:this.updatePage})):"email"===this.state.page?React.createElement("div",null,e,React.createElement(b.default,null)):"gitlab"===this.state.page?React.createElement("div",null,e,React.createElement(_.default,{service:y.default.GITLAB_SERVICE})):"google"===this.state.page?React.createElement("div",null,e,React.createElement(_.default,{service:y.default.GOOGLE_SERVICE})):"none"===this.state.page?React.createElement("div",null,React.createElement(R.FormattedMessage,{id:"signup_team.none",defaultMessage:"No team creation method has been enabled.  Please contact an administrator for access."})):void 0}}]),a}(React.Component);a.default=C,C.propTypes={teams:React.PropTypes.array}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/constants.jsx":339,"./team_signup_choose_auth.jsx":245,"./team_signup_with_email.jsx":253,"./team_signup_with_sso.jsx":254,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],228:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./team_signup_welcome_page.jsx"),f=s(h),g=e("./team_signup_display_name_page.jsx"),b=s(g),v=e("./team_signup_url_page.jsx"),_=s(v),E=e("./team_signup_send_invites_page.jsx"),y=s(E),R=e("./team_signup_username_page.jsx"),C=s(R),w=e("./team_signup_password_page.jsx"),S=s(w),k=e("../stores/browser_store.jsx"),N=s(k),M=e("mm-intl"),x=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));a.updateParent=a.updateParent.bind(a);var s=N.default.getGlobalItem(e.hash);return s||(s={},s.wizard="welcome",s.team={},s.team.email=a.props.email,s.team.allowed_domains="",s.invites=[],s.invites.push(""),s.invites.push(""),s.invites.push(""),s.user={},s.hash=a.props.hash,s.data=a.props.data),a.state=s,a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"updateParent",value:function(e,t){N.default.setGlobalItem(this.props.hash,e),t||this.setState(e)}},{key:"render",value:function(){return"welcome"===this.state.wizard?React.createElement(f.default,{state:this.state,updateParent:this.updateParent}):"team_display_name"===this.state.wizard?React.createElement(b.default,{state:this.state,updateParent:this.updateParent}):"team_url"===this.state.wizard?React.createElement(_.default,{state:this.state,updateParent:this.updateParent}):"send_invites"===this.state.wizard?React.createElement(y.default,{state:this.state,updateParent:this.updateParent}):"username"===this.state.wizard?React.createElement(C.default,{state:this.state,updateParent:this.updateParent}):"password"===this.state.wizard?React.createElement(S.default,{state:this.state,updateParent:this.updateParent}):React.createElement("div",null,React.createElement(M.FormattedMessage,{id:"signup_team_complete.completed",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}))}}]),t}(React.Component);a.default=x,x.defaultProps={hash:"",email:"",data:""},x.propTypes={hash:React.PropTypes.string,email:React.PropTypes.string,data:React.PropTypes.string}},{"../stores/browser_store.jsx":324,"./team_signup_display_name_page.jsx":246,"./team_signup_password_page.jsx":248,"./team_signup_send_invites_page.jsx":249,"./team_signup_url_page.jsx":250,"./team_signup_username_page.jsx":251,"./team_signup_welcome_page.jsx":252,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],229:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("mm-intl"),f=function(e){function t(e){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return React.createElement("div",{className:"signup-team__container"},React.createElement("h3",null,React.createElement(h.FormattedMessage,{id:"signup_team_confirm.title",defaultMessage:"Sign up Complete"})),React.createElement("p",null,React.createElement(h.FormattedHTMLMessage,{id:"signup_team_confirm.checkEmail",defaultMessage:"Please check your email: <strong>{email}</strong><br />Your email contains a link to set up your team",values:{email:this.props.email}})))}}]),t}(React.Component);a.default=f,f.defaultProps={email:""},f.propTypes={email:React.PropTypes.string}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],230:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/json/stringify"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../utils/utils.jsx"),v=s(b),_=e("../utils/client.jsx"),E=s(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("../stores/browser_store.jsx"),w=n(C),S=e("../utils/constants.jsx"),k=n(S),N=e("mm-intl"),M=(0,N.defineMessages)({required:{id:"signup_user_completed.required",defaultMessage:"This field is required"},validEmail:{id:"signup_user_completed.validEmail",defaultMessage:"Please enter a valid email address"},reserved:{id:"signup_user_completed.reserved",defaultMessage:"This username is reserved, please choose a new one."},usernameLength:{id:"signup_user_completed.usernameLength",defaultMessage:"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-' and '_'."},passwordLength:{id:"signup_user_completed.passwordLength",defaultMessage:"Please enter at least {min} characters"}}),x=function(e){function a(e){(0,u.default)(this,a);var t=(0,h.default)(this,(0,o.default)(a).call(this,e));t.handleSubmit=t.handleSubmit.bind(t);var s=w.default.getGlobalItem(t.props.hash);return s||(s={},s.wizard="welcome",s.user={},s.user.team_id=t.props.teamId,s.user.email=t.props.email,s.original_email=t.props.email),t.state=s,t}return(0,g.default)(a,e),(0,m.default)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.intl.formatMessage,s=ReactDOM.findDOMNode(this.refs.email).value.trim();if(!s)return void this.setState({nameError:"",emailError:a(M.required),passwordError:""});if(!v.isEmail(s))return void this.setState({nameError:"",emailError:a(M.validEmail),passwordError:""});var n=ReactDOM.findDOMNode(this.refs.name).value.trim().toLowerCase();if(!n)return void this.setState({nameError:a(M.required),emailError:"",passwordError:"",serverError:""});var r=v.isValidUsername(n);if("Cannot use a reserved word as a username."===r)return void this.setState({nameError:a(M.reserved),emailError:"",passwordError:"",serverError:""});if(r)return void this.setState({nameError:a(M.usernameLength,{min:k.default.MIN_USERNAME_LENGTH,max:k.default.MAX_USERNAME_LENGTH}),emailError:"",passwordError:"",serverError:""});var i=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!i||i.length<k.default.MIN_PASSWORD_LENGTH)return void this.setState({nameError:"",emailError:"",passwordError:a(M.passwordLength,{min:k.default.MIN_PASSWORD_LENGTH}),serverError:""});var o={team_id:this.props.teamId,email:s,username:n,password:i,allow_marketing:!0};this.setState({user:o,nameError:"",emailError:"",passwordError:"",serverError:""}),E.createUser(o,this.props.data,this.props.hash,function(){E.track("signup","signup_user_02_complete"),E.loginByEmail(t.props.teamName,o.email,o.password,function(){R.default.setLastEmail(o.email),t.props.hash>0&&w.default.setGlobalItem(t.props.hash,(0,l.default)({wizard:"finished"})),window.location.href="/"+t.props.teamName+"/channels/town-square"},function(e){"api.user.login.not_verified.app_error"===e.id?window.location.href="/verify_email?email="+encodeURIComponent(o.email)+"&teamname="+encodeURIComponent(t.props.teamName):t.setState({serverError:e.message})})},function(e){t.setState({serverError:e.message})})}},{key:"render",value:function(){if(E.track("signup","signup_user_01_welcome"),"finished"===this.state.wizard)return React.createElement("div",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var e=null,a="form-group";this.state.emailError&&(e=React.createElement("label",{className:"control-label"},this.state.emailError),a+=" has-error");var s=null,n=React.createElement("span",{className:"help-block"},React.createElement(N.FormattedMessage,{id:"signup_user_completed.userHelp",defaultMessage:"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-' and '_'",values:{min:k.default.MIN_USERNAME_LENGTH,max:k.default.MAX_USERNAME_LENGTH}})),r="form-group";this.state.nameError&&(s=React.createElement("label",{className:"control-label"},this.state.nameError),n="",r+=" has-error");var l=null,i="form-group";this.state.passwordError&&(l=React.createElement("label",{className:"control-label"},this.state.passwordError),i+=" has-error");var o=null;this.state.serverError&&(o=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var c="";this.state.user.email&&(c=React.createElement(N.FormattedHTMLMessage,{id:"signup_user_completed.emailIs",defaultMessage:"Your email address is <strong>{email}</strong>. You'll use this address to sign in to {siteName}.",values:{email:this.state.user.email,siteName:t.window.mm_config.SiteName}}));var u="margin--extra";this.state.original_email&&(u="hidden");var d=React.createElement("div",{className:u},React.createElement("h5",null,React.createElement("strong",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.whatis",defaultMessage:"What's your email address?"}))),React.createElement("div",{className:a},React.createElement("input",{type:"email",ref:"email",className:"form-control",defaultValue:this.state.user.email,placeholder:"",maxLength:"128",autoFocus:!0,spellCheck:"false"}),e)),m=[];"true"===t.window.mm_config.EnableSignUpWithGitLab&&m.push(React.createElement("a",{className:"btn btn-custom-login gitlab",key:"gitlab",href:"/"+this.props.teamName+"/signup/gitlab"+window.location.search},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.gitlab",defaultMessage:"with GitLab"})))),"true"===t.window.mm_config.EnableSignUpWithGoogle&&m.push(React.createElement("a",{className:"btn btn-custom-login google",key:"google",href:"/"+this.props.teamName+"/signup/google"+window.location.search},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.google",defaultMessage:"with Google"}))));var p;return"true"===t.window.mm_config.EnableSignUpWithEmail&&(p=React.createElement("div",null,React.createElement("div",{className:"inner__content"},d,c,React.createElement("div",{className:"margin--extra"},React.createElement("h5",null,React.createElement("strong",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.chooseUser",defaultMessage:"Choose your username"}))),React.createElement("div",{className:r},React.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),s,n)),React.createElement("div",{className:"margin--extra"},React.createElement("h5",null,React.createElement("strong",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.choosePwd",defaultMessage:"Choose your password"}))),React.createElement("div",{className:i},React.createElement("input",{type:"password",ref:"password",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),l))),React.createElement("p",{className:"margin--extra"},React.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"btn-primary btn"},React.createElement(N.FormattedMessage,{id:"signup_user_completed.create",defaultMessage:"Create Account"}))))),m.length>0&&p&&(m=React.createElement("div",null,m,React.createElement("div",{className:"or__container"},React.createElement("span",null,React.createElement(N.FormattedMessage,{id:"signup_user_completed.or",defaultMessage:"or"}))))),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h5",{className:"margin--less"},React.createElement(N.FormattedMessage,{id:"signup_user_completed.welcome",defaultMessage:"Welcome to:"})),React.createElement("h2",{className:"signup-team__name"},this.props.teamDisplayName),React.createElement("h2",{className:"signup-team__subdomain"},React.createElement(N.FormattedMessage,{id:"signup_user_completed.onSite",defaultMessage:"on {siteName}",values:{siteName:t.window.mm_config.SiteName}})),React.createElement("h4",{className:"color--light"},React.createElement(N.FormattedMessage,{id:"signup_user_completed.lets",defaultMessage:"Let's create your account"})),m,p,o))}}]),a}(React.Component);x.defaultProps={teamName:"",hash:"",teamId:"",email:"",data:null,teamDisplayName:""},x.propTypes={intl:N.intlShape.isRequired,teamName:React.PropTypes.string,hash:React.PropTypes.string,teamId:React.PropTypes.string,email:React.PropTypes.string,data:React.PropTypes.string,teamDisplayName:React.PropTypes.string},a.default=(0,N.injectIntl)(x)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":324,"../stores/user_store.jsx":335,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],231:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/keys"),l=n(r),i=e("babel-runtime/core-js/get-iterator"),o=n(i),c=e("babel-runtime/core-js/object/get-prototype-of"),u=n(c),d=e("babel-runtime/helpers/classCallCheck"),m=n(d),p=e("babel-runtime/helpers/createClass"),h=n(p),f=e("babel-runtime/helpers/possibleConstructorReturn"),g=n(f),b=e("babel-runtime/helpers/inherits"),v=n(b);Object.defineProperty(a,"__esModule",{value:!0});var _=e("../../stores/suggestion_store.jsx"),E=n(_),y=e("../../stores/user_store.jsx"),R=n(y),C=e("../../utils/utils.jsx"),w=s(C),S=e("mm-intl"),k=40,N=function(e){function t(){return(0,m.default)(this,t),(0,g.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,v.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isSelection,s=e.onClick,n=void 0,r=void 0,l=void 0;"all"===t.username?(n="all",r=React.createElement(S.FormattedMessage,{id:"suggestion.mention.all",defaultMessage:"Notifies everyone in the team"}),l=React.createElement("i",{className:"mention-img fa fa-users fa-2x"})):"channel"===t.username?(n="channel",r=React.createElement(S.FormattedMessage,{id:"suggestion.mention.channel",defaultMessage:"Notifies everyone in the channel"}),l=React.createElement("i",{className:"mention-img fa fa-users fa-2x"})):(n=t.username,r=w.getFullName(t),l=React.createElement("img",{className:"mention-img",src:"/api/v1/users/"+t.id+"/image?time="+t.update_at+"&"+w.getSessionIndex()}));var i="mentions-name";return a&&(i+=" suggestion--selected"),React.createElement("div",{className:i,onClick:s},React.createElement("div",{className:"pull-left"},l),React.createElement("div",{className:"pull-left mention-align"},React.createElement("span",null,"@"+n),React.createElement("span",{className:"mention-fullname"},r)))}}]),t}(React.Component);N.propTypes={item:React.PropTypes.object.isRequired,isSelection:React.PropTypes.bool,onClick:React.PropTypes.func};var M=function(){function e(){(0,m.default)(this,e)}return(0,h.default)(e,[{key:"handlePretextChanged",value:function(e,t){var a=/@([a-z0-9\-\._]*)$/i.exec(t);if(a){var s=a[1],n=R.default.getProfiles(),r=[],i=!0,c=!1,u=void 0;try{for(var d,m=(0,o.default)((0,l.default)(n));!(i=(d=m.next()).done);i=!0){var p=d.value,h=n[p];if(h.username.startsWith(s)&&r.push(h),r.length>=k)break}}catch(e){c=!0,u=e}finally{try{!i&&m.return&&m.return()}finally{if(c)throw u}}"all".startsWith(s)&&r.push({username:"all"}),"channel".startsWith(s)&&r.push({username:"channel"}),r=r.sort(function(e,t){return e.username.localeCompare(t.username)});var f=r.map(function(e){return"@"+e.username});E.default.setMatchedPretext(e,a[0]),E.default.addSuggestions(e,f,r,N)}}}]),e}();a.default=M},{"../../stores/suggestion_store.jsx":333,"../../stores/user_store.jsx":335,"../../utils/utils.jsx":344,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],232:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/async_client.jsx"),g=s(f),b=e("../../stores/suggestion_store.jsx"),v=n(b),_=function(e){function t(){return(0,o.default)(this,t),(0,m.default)(this,(0,l.default)(t).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isSelection,s=e.onClick,n="command-name";return a&&(n+=" suggestion--selected"),React.createElement("div",{className:n,onClick:s},React.createElement("div",{className:"command__title"},React.createElement("string",null,t.suggestion)),React.createElement("div",{className:"command__desc"},t.description))}}]),t}(React.Component);_.propTypes={item:React.PropTypes.object.isRequired,isSelection:React.PropTypes.bool,onClick:React.PropTypes.func};var E=function(){function e(){(0,o.default)(this,e)}return(0,u.default)(e,[{key:"handlePretextChanged",value:function(e,t){t.startsWith("/")&&(v.default.setMatchedPretext(e,t),g.getSuggestedCommands(t,e,_))}}]),e}();a.default=E},{"../../stores/suggestion_store.jsx":333,"../../utils/async_client.jsx":336,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],233:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/get-iterator"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../../stores/suggestion_store.jsx"),v=n(b),_=e("../../utils/emoticons.jsx"),E=s(_),y=40,R=function(e){function t(){return(0,u.default)(this,t),(0,h.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,g.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.term,t=this.props.item,a="emoticon-suggestion";return this.props.isSelection&&(a+=" suggestion--selected"),React.createElement("div",{className:a,onClick:this.props.onClick},React.createElement("div",{className:"pull-left"},React.createElement("img",{alt:e,className:"emoticon-suggestion__image",src:E.getImagePathForEmoticon(t),title:e})),React.createElement("div",{className:"pull-left"},e))}}]),t}(React.Component);R.propTypes={item:React.PropTypes.string.isRequired,term:React.PropTypes.string.isRequired,isSelection:React.PropTypes.bool,onClick:React.PropTypes.func};var C=function(){function e(){(0,u.default)(this,e)}return(0,m.default)(e,[{key:"handlePretextChanged",value:function(e,t){var a=/(?:^|\s)(:([a-zA-Z0-9_+\-]*))$/g.exec(t);a&&!function(){var t=a[1],s=a[2],n=[],r=!0,i=!1,o=void 0;try{for(var c,u=(0,l.default)(E.emoticonMap.keys());!(r=(c=u.next()).done);r=!0){var d=c.value;if(-1!==d.indexOf(s)&&(n.push(d),n.length>=y))break}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}n.sort(function(e,t){var a=e.startsWith(s),n=t.startsWith(s);return a===n?e.localeCompare(t):a?-1:1});var m=n.map(function(e){return":"+e+":"});m.length>0&&(v.default.setMatchedPretext(e,t),v.default.addSuggestions(e,m,n,R),v.default.clearSelection(e))}()}}]),e}();a.default=C;
},{"../../stores/suggestion_store.jsx":333,"../../utils/emoticons.jsx":341,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],234:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/keys"),r=s(n),l=e("babel-runtime/core-js/get-iterator"),i=s(l),o=e("babel-runtime/core-js/object/get-prototype-of"),c=s(o),u=e("babel-runtime/helpers/classCallCheck"),d=s(u),m=e("babel-runtime/helpers/createClass"),p=s(m),h=e("babel-runtime/helpers/possibleConstructorReturn"),f=s(h),g=e("babel-runtime/helpers/inherits"),b=s(g);Object.defineProperty(a,"__esModule",{value:!0});var v=e("../../stores/channel_store.jsx"),_=s(v),E=e("../../utils/constants.jsx"),y=s(E),R=e("../../stores/suggestion_store.jsx"),C=s(R),w=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(0,c.default)(t).apply(this,arguments))}return(0,b.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isSelection,s=e.onClick,n="search-autocomplete__item";return a&&(n+=" selected"),React.createElement("div",{onClick:s,className:n},React.createElement("i",{className:"fa fa fa-plus-square"}),t.name)}}]),t}(React.Component);w.propTypes={item:React.PropTypes.object.isRequired,isSelection:React.PropTypes.bool,onClick:React.PropTypes.func};var S=function(){function e(){(0,d.default)(this,e)}return(0,p.default)(e,[{key:"handlePretextChanged",value:function(e,t){var a=/\b(?:in|channel):\s*(\S*)$/i.exec(t);if(a){var s=a[1],n=_.default.getAll(),l=[],o=[],c=!0,u=!1,d=void 0;try{for(var m,p=(0,i.default)((0,r.default)(n));!(c=(m=p.next()).done);c=!0){var h=m.value,f=n[h];f.type!==y.default.DM_CHANNEL&&f.name.startsWith(s)&&(f.type===y.default.OPEN_CHANNEL?l.push(f):o.push(f))}}catch(e){u=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw d}}l.sort(function(e,t){return e.name.localeCompare(t.name)});var g=l.map(function(e){return e.name});o.sort(function(e,t){return e.name.localeCompare(t.name)});var b=o.map(function(e){return e.name});C.default.setMatchedPretext(e,s),C.default.addSuggestions(e,g,l,w),C.default.addSuggestions(e,b,o,w)}}}]),e}();a.default=S},{"../../stores/channel_store.jsx":325,"../../stores/suggestion_store.jsx":333,"../../utils/constants.jsx":339,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],235:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/helpers/extends"),r=s(n),l=e("babel-runtime/core-js/object/get-prototype-of"),i=s(l),o=e("babel-runtime/helpers/classCallCheck"),c=s(o),u=e("babel-runtime/helpers/createClass"),d=s(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=s(m),h=e("babel-runtime/helpers/inherits"),f=s(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../../utils/constants.jsx"),b=s(g),v=e("./suggestion_list.jsx"),_=s(v),E=e("mm-intl"),y=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,(0,i.default)(t).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.items.length>0&&0===t.items.length&&this.getContent().perfectScrollbar()}},{key:"getContent",value:function(){return $(ReactDOM.findDOMNode(this.refs.popover)).find(".popover-content")}},{key:"renderChannelDivider",value:function(e){var t=void 0;return t=e===b.default.OPEN_CHANNEL?React.createElement(E.FormattedMessage,{id:"suggestion.search.public",defaultMessage:"Public Channels"}):React.createElement(E.FormattedMessage,{id:"suggestion.search.private",defaultMessage:"Public Groups"}),React.createElement("div",{key:e+"-divider",className:"search-autocomplete__divider"},React.createElement("span",null,t))}},{key:"render",value:function(){if(0===this.state.items.length)return null;for(var e=[],t=0;t<this.state.items.length;t++){var a=this.state.items[t],s=this.state.terms[t],n=s===this.state.selection,r=this.state.components[t];(0===t||a.type!==this.state.items[t-1].type)&&(a.type===b.default.OPEN_CHANNEL?e.push(this.renderChannelDivider(b.default.OPEN_CHANNEL)):a.type===b.default.PRIVATE_CHANNEL&&e.push(this.renderChannelDivider(b.default.PRIVATE_CHANNEL))),e.push(React.createElement(r,{key:s,ref:s,item:a,isSelection:n,onClick:this.handleItemClick.bind(this,s)}))}return React.createElement(ReactBootstrap.Popover,{ref:"popover",id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},e)}}]),t}(_.default);a.default=y,y.propTypes=(0,r.default)({},_.default.propTypes)},{"../../utils/constants.jsx":339,"./suggestion_list.jsx":238,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/extends":18,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],236:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/keys"),r=s(n),l=e("babel-runtime/core-js/get-iterator"),i=s(l),o=e("babel-runtime/core-js/object/get-prototype-of"),c=s(o),u=e("babel-runtime/helpers/classCallCheck"),d=s(u),m=e("babel-runtime/helpers/createClass"),p=s(m),h=e("babel-runtime/helpers/possibleConstructorReturn"),f=s(h),g=e("babel-runtime/helpers/inherits"),b=s(g);Object.defineProperty(a,"__esModule",{value:!0});var v=e("../../stores/suggestion_store.jsx"),_=s(v),E=e("../../stores/user_store.jsx"),y=s(E),R=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(0,c.default)(t).apply(this,arguments))}return(0,b.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isSelection,s=e.onClick,n="search-autocomplete__item";return a&&(n+=" selected"),React.createElement("div",{className:n,onClick:s},React.createElement("img",{className:"profile-img rounded",src:"/api/v1/users/"+t.id+"/image?time="+t.update_at}),React.createElement("i",{className:"fa fa fa-plus-square"}),t.username)}}]),t}(React.Component);R.propTypes={item:React.PropTypes.object.isRequired,isSelection:React.PropTypes.bool,onClick:React.PropTypes.func};var C=function(){function e(){(0,d.default)(this,e)}return(0,p.default)(e,[{key:"handlePretextChanged",value:function(e,t){var a=/\bfrom:\s*(\S*)$/i.exec(t);if(a){var s=a[1],n=y.default.getProfiles(),l=[],o=!0,c=!1,u=void 0;try{for(var d,m=(0,i.default)((0,r.default)(n));!(o=(d=m.next()).done);o=!0){var p=d.value,h=n[p];h.username.startsWith(s)&&l.push(h)}}catch(e){c=!0,u=e}finally{try{!o&&m.return&&m.return()}finally{if(c)throw u}}l=l.sort(function(e,t){return e.username.localeCompare(t.username)});var f=l.map(function(e){return e.username});_.default.setMatchedPretext(e,s),_.default.addSuggestions(e,f,l,R)}}}]),e}();a.default=C},{"../../stores/suggestion_store.jsx":333,"../../stores/user_store.jsx":335,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],237:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/helpers/extends"),l=n(r),i=e("babel-runtime/core-js/object/assign"),o=n(i),c=e("babel-runtime/core-js/get-iterator"),u=n(c),d=e("babel-runtime/core-js/object/get-prototype-of"),m=n(d),p=e("babel-runtime/helpers/classCallCheck"),h=n(p),f=e("babel-runtime/helpers/createClass"),g=n(f),b=e("babel-runtime/helpers/possibleConstructorReturn"),v=n(b),_=e("babel-runtime/helpers/inherits"),E=n(_);Object.defineProperty(a,"__esModule",{value:!0});var y=e("../../utils/constants.jsx"),R=n(y),C=e("../../dispatcher/event_helpers.jsx"),w=s(C),S=e("../../stores/suggestion_store.jsx"),k=n(S),N=e("../../utils/utils.jsx"),M=s(N),x=R.default.KeyCodes,j=function(e){function t(e){(0,h.default)(this,t);var a=(0,v.default)(this,(0,m.default)(t).call(this,e));return a.handleDocumentClick=a.handleDocumentClick.bind(a),a.handleChange=a.handleChange.bind(a),a.handleCompleteWord=a.handleCompleteWord.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handlePretextChanged=a.handlePretextChanged.bind(a),a.suggestionId=M.generateId(),a}return(0,E.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){k.default.registerSuggestionBox(this.suggestionId),$(document).on("click",this.handleDocumentClick),k.default.addCompleteWordListener(this.suggestionId,this.handleCompleteWord),k.default.addPretextChangedListener(this.suggestionId,this.handlePretextChanged)}},{key:"componentWillUnmount",value:function(){k.default.removeCompleteWordListener(this.suggestionId,this.handleCompleteWord),k.default.removePretextChangedListener(this.suggestionId,this.handlePretextChanged),k.default.unregisterSuggestionBox(this.suggestionId),$(document).off("click",this.handleDocumentClick)}},{key:"getTextbox",value:function(){return ReactDOM.findDOMNode(this.refs.textbox)}},{key:"handleDocumentClick",value:function(e){var t=$(ReactDOM.findDOMNode(this));t.is(e.target)||t.has(e.target).length>0||w.emitClearSuggestions(this.suggestionId)}},{key:"handleChange",value:function(e){var t=ReactDOM.findDOMNode(this.refs.textbox),a=M.getCaretPosition(t),s=t.value.substring(0,a);w.emitSuggestionPretextChanged(this.suggestionId,s),this.props.onUserInput&&this.props.onUserInput(t.value),this.props.onChange&&this.props.onChange(e)}},{key:"handleCompleteWord",value:function(e){var t=ReactDOM.findDOMNode(this.refs.textbox),a=M.getCaretPosition(t),s=this.props.value,n=s.substring(0,a-k.default.getMatchedPretext(this.suggestionId).length),r=s.substring(a);this.props.onUserInput&&this.props.onUserInput(n+e+" "+r),window.requestAnimationFrame(function(){M.setCaretPosition(t,n.length+e.length+1)})}},{key:"handleKeyDown",value:function(e){k.default.hasSuggestions(this.suggestionId)?e.which===x.UP?(w.emitSelectPreviousSuggestion(this.suggestionId),e.preventDefault()):e.which===x.DOWN?(w.emitSelectNextSuggestion(this.suggestionId),e.preventDefault()):e.which===x.ENTER||e.which===x.TAB?(w.emitCompleteWordSuggestion(this.suggestionId),e.preventDefault()):this.props.onKeyDown&&this.props.onKeyDown(e):this.props.onKeyDown&&this.props.onKeyDown(e)}},{key:"handlePretextChanged",value:function(e){var t=!0,a=!1,s=void 0;try{for(var n,r=(0,u.default)(this.props.providers);!(t=(n=r.next()).done);t=!0){var l=n.value;l.handlePretextChanged(this.suggestionId,e)}}catch(e){a=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw s}}}},{key:"render",value:function(){var e=(0,o.default)({},this.props,{onChange:this.handleChange,onKeyDown:this.handleKeyDown}),t=null;"input"===this.props.type?t=React.createElement("input",(0,l.default)({ref:"textbox",type:"text"},e)):"textarea"===this.props.type&&(t=React.createElement("textarea",(0,l.default)({ref:"textbox"},e)));var a=this.props.listComponent;return React.createElement("div",null,t,React.createElement(a,{suggestionId:this.suggestionId}))}}]),t}(React.Component);a.default=j,j.defaultProps={type:"input"},j.propTypes={listComponent:React.PropTypes.func.isRequired,type:React.PropTypes.oneOf(["input","textarea"]).isRequired,value:React.PropTypes.string.isRequired,onUserInput:React.PropTypes.func,providers:React.PropTypes.arrayOf(React.PropTypes.object),onChange:React.PropTypes.func,onKeyDown:React.PropTypes.func}},{"../../dispatcher/event_helpers.jsx":282,"../../stores/suggestion_store.jsx":333,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/extends":18,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],238:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../dispatcher/event_helpers.jsx"),g=s(f),b=e("../../stores/suggestion_store.jsx"),v=n(b),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getContent=a.getContent.bind(a),a.handleItemClick=a.handleItemClick.bind(a),a.handleSuggestionsChanged=a.handleSuggestionsChanged.bind(a),a.scrollToItem=a.scrollToItem.bind(a),a.state={items:[],terms:[],components:[],selection:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){v.default.addSuggestionsChangedListener(this.props.suggestionId,this.handleSuggestionsChanged)}},{key:"componentWillUnmount",value:function(){v.default.removeSuggestionsChangedListener(this.props.suggestionId,this.handleSuggestionsChanged)}},{key:"getContent",value:function(){return $(ReactDOM.findDOMNode(this.refs.content))}},{key:"handleItemClick",value:function(e,t){g.emitCompleteWordSuggestion(this.props.suggestionId,e),t.preventDefault()}},{key:"handleSuggestionsChanged",value:function(){var e=this,t=v.default.getSelection(this.props.suggestionId);this.setState({items:v.default.getItems(this.props.suggestionId),terms:v.default.getTerms(this.props.suggestionId),components:v.default.getComponents(this.props.suggestionId),selection:t}),t&&window.requestAnimationFrame(function(){return e.scrollToItem(e.state.selection)})}},{key:"scrollToItem",value:function(e){var t=this.getContent(),a=t[0].clientHeight,s=t[0].scrollHeight;if(s>a){var n=t.scrollTop(),r=parseInt(t.css("padding-top"),10),l=parseInt(t.css("padding-top"),10),i=$(ReactDOM.findDOMNode(this.refs[e])),o=i[0].offsetTop-parseInt(i.css("margin-top"),10),c=parseInt(i.css("margin-bottom"),10)+parseInt(i.css("padding-bottom"),10),u=i[0].offsetTop+i.height()+c;n>o-r?t.scrollTop(o-r):u+r+l>n+a&&t.scrollTop(u-a+r+l)}}},{key:"render",value:function(){if(0===this.state.items.length)return null;for(var e=[],t=0;t<this.state.items.length;t++){var a=this.state.items[t],s=this.state.terms[t],n=s===this.state.selection,r=this.state.components[t];e.push(React.createElement(r,{key:s,ref:s,item:a,term:s,isSelection:n,onClick:this.handleItemClick.bind(this,s)}))}return React.createElement("div",{className:"suggestion-list suggestion-list--top"},React.createElement("div",{ref:"content",className:"suggestion-content suggestion-content--top"},e))}}]),t}(React.Component);a.default=_,_.propTypes={suggestionId:React.PropTypes.string.isRequired}},{"../../dispatcher/event_helpers.jsx":282,"../../stores/suggestion_store.jsx":333,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],239:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/client.jsx"),g=s(f),b=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.state={status:"request",link:"",err:""},a.onExportSuccess=a.onExportSuccess.bind(a),a.onExportFailure=a.onExportFailure.bind(a),a.doExport=a.doExport.bind(a),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"onExportSuccess",value:function(e){this.setState({status:"ready",link:e.link,err:""})}},{key:"onExportFailure",value:function(e){this.setState({status:"failure",link:"",err:e.message})}},{key:"doExport",value:function(){"in-progress"!==this.state.status&&(this.setState({status:"in-progress"}),g.exportTeam(this.onExportSuccess,this.onExportFailure))}},{key:"render",value:function(){var e="";switch(this.state.status){case"request":e="";break;case"in-progress":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-spinner fa-pulse"})," Exporting...");break;case"ready":e=React.createElement("p",{className:"confirm-import alert alert-success"},React.createElement("i",{className:"fa fa-check"})," Ready for ",React.createElement("a",{href:this.state.link,download:!0},"download"));break;case"failure":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-warning"})," Unable to export: "+this.state.err)}return React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Export"),React.createElement("div",{className:"divider-dark first"}),React.createElement("ul",{className:"section-max"},React.createElement("li",{className:"col-xs-12 section-title"},"Export your team"),React.createElement("li",{className:"col-xs-offset-3 col-xs-8"},React.createElement("ul",{className:"setting-list"},React.createElement("li",{className:"setting-list-item"},React.createElement("a",{className:"btn btn-sm btn-primary btn-file sel-btn",href:"#",onClick:this.doExport},"Export"))))),React.createElement("div",{className:"divider-dark"}),e)}}]),t}(React.Component);a.default=b},{"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],240:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./setting_item_min.jsx"),g=n(f),b=e("./setting_item_max.jsx"),v=n(b),_=e("../utils/client.jsx"),E=s(_),y=e("../utils/utils.jsx"),R=s(y),C=e("../stores/team_store.jsx"),w=n(C),S=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.updateSection=t.updateSection.bind(t),t.handleNameSubmit=t.handleNameSubmit.bind(t),t.handleInviteIdSubmit=t.handleInviteIdSubmit.bind(t),t.handleOpenInviteSubmit=t.handleOpenInviteSubmit.bind(t),t.handleTeamListingSubmit=t.handleTeamListingSubmit.bind(t),t.handleClose=t.handleClose.bind(t),t.onUpdateNameSection=t.onUpdateNameSection.bind(t),t.updateName=t.updateName.bind(t),t.onUpdateInviteIdSection=t.onUpdateInviteIdSection.bind(t),t.updateInviteId=t.updateInviteId.bind(t),t.onUpdateOpenInviteSection=t.onUpdateOpenInviteSection.bind(t),t.handleOpenInviteRadio=t.handleOpenInviteRadio.bind(t),t.onUpdateTeamListingSection=t.onUpdateTeamListingSection.bind(t),t.handleTeamListingRadio=t.handleTeamListingRadio.bind(t),t.handleGenerateInviteId=t.handleGenerateInviteId.bind(t),t.state=t.setupInitialState(e),t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"updateSection",value:function(e){this.setState(this.setupInitialState(this.props)),this.props.updateSection(e)}},{key:"setupInitialState",value:function(e){var t=e.team;return{name:t.display_name,invite_id:t.invite_id,allow_open_invite:t.allow_open_invite,allow_team_listing:t.allow_team_listing,serverError:"",clientError:""}}},{key:"handleGenerateInviteId",value:function(e){e.preventDefault();for(var t="",a=0;32>a;a++)t+=Math.floor(16*Math.random()).toString(16);this.setState({invite_id:t})}},{key:"handleOpenInviteRadio",value:function(e){this.setState({allow_open_invite:e})}},{key:"handleTeamListingRadio",value:function(e){"true"!==t.window.mm_config.EnableTeamListing&&e?this.setState({clientError:"Team Directory has been disabled.  Please ask a System Admin to enable the Team Directory in the System Console team settings."}):this.setState({allow_team_listing:e})}},{key:"handleOpenInviteSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=this.props.team;s.allow_open_invite=this.state.allow_open_invite,E.updateTeam(s,function(e){w.default.saveTeam(e),w.default.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}},{key:"handleTeamListingSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=this.props.team;s.allow_team_listing=this.state.allow_team_listing,E.updateTeam(s,function(e){w.default.saveTeam(e),w.default.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}},{key:"handleNameSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=!0,n=this.state.name.trim();if(n?n===this.props.team.display_name?(a.clientError="Please choose a new name for your team",s=!1):a.clientError="":(a.clientError="This field is required",s=!1),this.setState(a),s){var r=this.props.team;r.display_name=this.state.name,E.updateTeam(r,function(e){w.default.saveTeam(e),w.default.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}}},{key:"handleInviteIdSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},s=!0,n=this.state.invite_id.trim();if(n?a.clientError="":(a.clientError="This field is required",s=!1),this.setState(a),s){var r=this.props.team;r.invite_id=this.state.invite_id,E.updateTeam(r,function(e){w.default.saveTeam(e),w.default.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}}},{key:"componentWillReceiveProps",value:function(e){e.team&&e.teamDisplayName&&this.setState({name:e.teamDisplayName})}},{key:"handleClose",value:function(){this.updateSection("")}},{key:"componentDidMount",value:function(){$("#team_settings").on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){$("#team_settings").off("hidden.bs.modal",this.handleClose)}},{key:"onUpdateNameSection",value:function(e){e.preventDefault(),"name"===this.props.activeSection?this.updateSection(""):this.updateSection("name")}},{key:"onUpdateInviteIdSection",value:function(e){e.preventDefault(),"invite_id"===this.props.activeSection?this.updateSection(""):this.updateSection("invite_id")}},{key:"onUpdateOpenInviteSection",value:function(e){e.preventDefault(),"open_invite"===this.props.activeSection?this.updateSection(""):this.updateSection("open_invite")}},{key:"onUpdateTeamListingSection",value:function(e){e.preventDefault(),"team_listing"===this.props.activeSection?this.updateSection(""):this.updateSection("team_listing")}},{key:"updateName",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"updateInviteId",value:function(e){e.preventDefault(),this.setState({invite_id:e.target.value})}},{key:"render",value:function(){var e=null,a=null;this.state.clientError&&(e=this.state.clientError),this.state.serverError&&(a=this.state.serverError);var s="true"===t.window.mm_config.EnableTeamListing,n=void 0;if("team_listing"===this.props.activeSection){var r=[],l=null;s?(l=this.handleTeamListingSubmit,r.push(React.createElement("div",{key:"userTeamListingOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{name:"userTeamListingOptions",type:"radio",defaultChecked:this.state.allow_team_listing,onChange:this.handleTeamListingRadio.bind(this,!0)}),"Yes"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{ref:"teamListingRadioNo",name:"userTeamListingOptions",type:"radio",defaultChecked:!this.state.allow_team_listing,onChange:this.handleTeamListingRadio.bind(this,!1)}),"No"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Including this team will display the team name from the Team Directory section of the Home Page, and provide a link to the sign-in page.")))):r.push(React.createElement("div",{key:"userTeamListingOptions"},React.createElement("div",null,React.createElement("br",null),"Contact your system administrator to turn on the team directory on the system home page."))),n=React.createElement(v.default,{title:"Include this team in the Team Directory",inputs:r,submit:l,server_error:a,client_error:e,updateSection:this.onUpdateTeamListingSection})}else{var i="";i=s?this.state.allow_team_listing===!0?"Yes":"No":"Team directory is turned off for this system.",n=React.createElement(g.default,{title:"Include this team in the Team Directory",describe:i,updateSection:this.onUpdateTeamListingSection})}var o=void 0;if("open_invite"===this.props.activeSection){var r=[React.createElement("div",{key:"userOpenInviteOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{name:"userOpenInviteOptions",type:"radio",defaultChecked:this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!0)}),"Yes"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{name:"userOpenInviteOptions",type:"radio",defaultChecked:!this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!1)}),"No"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"When allowed, a link to account creation will be included on the sign-in page of this team and allow any visitor to sign-up."))];o=React.createElement(v.default,{title:"Allow anyone to sign-up from login page",inputs:r,submit:this.handleOpenInviteSubmit,server_error:a,updateSection:this.onUpdateOpenInviteSection})}else{var c="";c=this.state.allow_open_invite===!0?"Yes":"No",o=React.createElement(g.default,{title:"Allow anyone to sign-up from login page",describe:c,updateSection:this.onUpdateOpenInviteSection})}var u=void 0;if("invite_id"===this.props.activeSection){var r=[];r.push(React.createElement("div",{key:"teamInviteSetting"},React.createElement("div",{className:"row"},React.createElement("label",{className:"col-sm-5 control-label"},"Invite Code"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateInviteId,value:this.state.invite_id,maxLength:"32"}),React.createElement("div",{className:"padding-top x2"},React.createElement("a",{href:"#",onClick:this.handleGenerateInviteId},"Re-Generate")))),React.createElement("div",{className:"setting-list__hint"},"The Invite Code is used as part of the URL in the team invitation link created by **Get Team Invite Link** in the main menu. Regenerating creates a new team invitation link and invalidates the previous link."))),u=React.createElement(v.default,{title:"Invite Code",inputs:r,submit:this.handleInviteIdSubmit,server_error:a,client_error:e,updateSection:this.onUpdateInviteIdSection})}else u=React.createElement(g.default,{title:"Invite Code",describe:"Click 'Edit' to regenerate Invite Code.",updateSection:this.onUpdateInviteIdSection});var d=void 0;if("name"===this.props.activeSection){var r=[],m="Team Name";R.isMobile()&&(m=""),r.push(React.createElement("div",{key:"teamNameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},m),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",maxLength:"22",onChange:this.updateName,value:this.state.name})))),d=React.createElement(v.default,{title:"Team Name",inputs:r,submit:this.handleNameSubmit,server_error:a,client_error:e,updateSection:this.onUpdateNameSection,extraInfo:"Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar."})}else{var p=this.state.name;d=React.createElement(g.default,{title:"Team Name",describe:p,updateSection:this.onUpdateNameSection})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back"}),"General Settings")),React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"General Settings"),React.createElement("div",{className:"divider-dark first"}),d,React.createElement("div",{className:"divider-light"}),o,React.createElement("div",{className:"divider-light"}),n,React.createElement("div",{className:"divider-light"}),u,React.createElement("div",{className:"divider-dark"})))}}]),a}(React.Component);a.default=S,S.propTypes={updateSection:React.PropTypes.func.isRequired,team:React.PropTypes.object.isRequired,activeSection:React.PropTypes.string.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/team_store.jsx":334,"../utils/client.jsx":338,"../utils/utils.jsx":344,"./setting_item_max.jsx":218,"./setting_item_min.jsx":219,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],241:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("./setting_upload.jsx"),v=n(b),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.onImportFailure=a.onImportFailure.bind(a),a.onImportSuccess=a.onImportSuccess.bind(a),a.doImportSlack=a.doImportSlack.bind(a),a.state={status:"ready",link:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"onImportFailure",value:function(){this.setState({status:"fail",link:""})}},{key:"onImportSuccess",value:function(e){this.setState({status:"done",link:"data:application/octet-stream;charset=utf-8,"+encodeURIComponent(e)})}},{key:"doImportSlack",value:function(e){this.setState({
status:"in-progress",link:""}),g.importSlack(e,this.onImportSuccess,this.onImportFailure)}},{key:"render",value:function(){var e,t=React.createElement("div",null,React.createElement("p",null,"To import a team from Slack go to Slack > Team Settings > Import/Export Data > Export > Start Export. Slack does not allow you to export files, images, private groups or direct messages stored in Slack. Therefore, Slack import to Mattermost only supports importing of text messages in your Slack team's public channels."),React.createElement("p",null,'The Slack import to Mattermost is in "Beta". Slack bot posts do not yet import and Slack @mentions are not currently supported.')),a=React.createElement(v.default,{title:"Import from Slack (Beta)",submit:this.doImportSlack,helpText:t,fileTypesAccepted:".zip"});switch(this.state.status){case"ready":e="";break;case"in-progress":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-spinner fa-pulse"})," Importing...");break;case"done":e=React.createElement("p",{className:"confirm-import alert alert-success"},React.createElement("i",{className:"fa fa-check"})," Import successful: ",React.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},"View Summary"));break;case"fail":e=React.createElement("p",{className:"confirm-import alert alert-warning"},React.createElement("i",{className:"fa fa-warning"})," Import failure: ",React.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},"View Summary"))}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back"}),"Import")),React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Import"),React.createElement("div",{className:"divider-dark first"}),a,React.createElement("div",{className:"divider-dark"}),e))}}]),t}(React.Component);a.default=_},{"../utils/utils.jsx":344,"./setting_upload.jsx":221,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],242:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./member_list_team.jsx"),f=s(h),g=e("../stores/team_store.jsx"),b=s(g),v=ReactBootstrap.Modal,_=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.onShow=a.onShow.bind(a),a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.props.show&&this.onShow()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.onShow()}},{key:"onShow",value:function(){$(window).width()>768?($(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-200)):$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-150)}},{key:"render",value:function(){var e=b.default.getCurrent();return React.createElement(v,{dialogClassName:"team-members-modal",show:this.props.show,onHide:this.props.onHide},React.createElement(v.Header,{closeButton:!0},e.display_name+" Members"),React.createElement(v.Body,{ref:"modalBody"},React.createElement("div",{className:"team-member-list"},React.createElement(f.default,null))),React.createElement(v.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onHide},"Close")))}}]),t}(React.Component);a.default=_,_.propTypes={show:React.PropTypes.bool.isRequired,onHide:React.PropTypes.func.isRequired}},{"../stores/team_store.jsx":334,"./member_list_team.jsx":179,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],243:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../stores/team_store.jsx"),g=n(f),b=e("./team_import_tab.jsx"),v=n(b),_=e("./team_export_tab.jsx"),E=n(_),y=e("./team_general_tab.jsx"),R=n(y),C=e("../utils/utils.jsx"),w=s(C),S=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.onChange=a.onChange.bind(a),a.state={team:g.default.getCurrent()},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){g.default.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){g.default.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){var e=g.default.getCurrent();w.areObjectsEqual(this.state.team,e)||this.setState({team:e})}},{key:"render",value:function(){var e;switch(this.props.activeTab){case"general":e=React.createElement("div",null,React.createElement(R.default,{team:this.state.team,activeSection:this.props.activeSection,updateSection:this.props.updateSection}));break;case"import":e=React.createElement("div",null,React.createElement(v.default,{team:this.state.team,activeSection:this.props.activeSection,updateSection:this.props.updateSection}));break;case"export":e=React.createElement("div",null,React.createElement(E.default,null));break;default:e=React.createElement("div",null)}return e}}]),t}(React.Component);a.default=S,S.defaultProps={activeTab:"",activeSection:""},S.propTypes={activeTab:React.PropTypes.string.isRequired,activeSection:React.PropTypes.string.isRequired,updateSection:React.PropTypes.func.isRequired}},{"../stores/team_store.jsx":334,"../utils/utils.jsx":344,"./team_export_tab.jsx":239,"./team_general_tab.jsx":240,"./team_import_tab.jsx":241,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],244:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("./settings_sidebar.jsx"),f=s(h),g=e("./team_settings.jsx"),b=s(g),v=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.updateTab=a.updateTab.bind(a),a.updateSection=a.updateSection.bind(a),a.state={activeTab:"general",activeSection:""},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=$(ReactDOM.findDOMNode(this.refs.modal));e.on("click",".modal-back",function(){$(this).closest(".modal-dialog").removeClass("display--content"),$(this).closest(".modal-dialog").find(".settings-table .nav li.active").removeClass("active")}),e.on("click",".modal-header .close",function(){setTimeout(function(){$(".modal-dialog.display--content").removeClass("display--content")},500)})}},{key:"updateTab",value:function(e){this.setState({activeTab:e,activeSection:""})}},{key:"updateSection",value:function(e){this.setState({activeSection:e})}},{key:"render",value:function(){var e=[];return e.push({name:"general",uiName:"General",icon:"glyphicon glyphicon-cog"}),e.push({name:"import",uiName:"Import",icon:"glyphicon glyphicon-upload"}),React.createElement("div",{className:"modal fade",ref:"modal",id:"team_settings",role:"dialog",tabIndex:"-1","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog settings-modal"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},"Team Settings")),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"settings-table"},React.createElement("div",{className:"settings-links"},React.createElement(f.default,{tabs:e,activeTab:this.state.activeTab,updateTab:this.updateTab})),React.createElement("div",{className:"settings-content minimize-settings"},React.createElement(b.default,{activeTab:this.state.activeTab,activeSection:this.state.activeSection,updateSection:this.updateSection})))))))}}]),t}(React.Component);a.default=v,v.propTypes={}},{"./settings_sidebar.jsx":222,"./team_settings.jsx":243,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],245:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("mm-intl"),f=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));return t.state={},t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"render",value:function(){var e=this,a=[];return"true"===t.window.mm_config.EnableSignUpWithGitLab&&a.push(React.createElement("a",{className:"btn btn-custom-login gitlab btn-full",key:"gitlab",href:"#",onClick:function(e){e.preventDefault(),this.props.updatePage("gitlab")}.bind(this)},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(h.FormattedMessage,{id:"choose_auth_page.gitlabCreate",defaultMessage:"Create new team with GitLab Account"})))),"true"===t.window.mm_config.EnableSignUpWithGoogle&&a.push(React.createElement("a",{className:"btn btn-custom-login google btn-full",key:"google",href:"#",onClick:function(t){t.preventDefault(),e.props.updatePage("google")}},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(h.FormattedMessage,{id:"choose_auth_page.googleCreate",defaultMessage:"Create new team with Google Apps Account"})))),"true"===t.window.mm_config.EnableSignUpWithEmail&&a.push(React.createElement("a",{className:"btn btn-custom-login email btn-full",key:"email",href:"#",onClick:function(e){e.preventDefault(),this.props.updatePage("email")}.bind(this)},React.createElement("span",{className:"fa fa-envelope"}),React.createElement("span",null,React.createElement(h.FormattedMessage,{id:"choose_auth_page.emailCreate",defaultMessage:"Create new team with email address"})))),0===a.length&&(a=React.createElement("span",null,React.createElement(h.FormattedMessage,{id:"choose_auth_page.noSignup",defaultMessage:"No sign-up methods configured, please contact your system administrator."}))),React.createElement("div",null,a,React.createElement("div",{className:"form-group margin--extra-2x"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},React.createElement(h.FormattedMessage,{id:"choose_auth_page.find",defaultMessage:"Find my teams"})))))}}]),a}(React.Component);a.default=f,f.propTypes={updatePage:React.PropTypes.func}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],246:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({required:{id:"team_signup_display_name.required",defaultMessage:"This field is required"},charLength:{id:"team_signup_display_name.charLength",defaultMessage:"Name must be 4 or more characters up to a maximum of 15"}}),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.submitBack=a.submitBack.bind(a),a.submitNext=a.submitNext.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="welcome",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){e.preventDefault();var t=this.props.intl.formatMessage,a=ReactDOM.findDOMNode(this.refs.name).value.trim();return a?a.length<4||a.length>15?void this.setState({nameError:t(E.charLength)}):(this.props.state.wizard="team_url",this.props.state.team.display_name=a,this.props.state.team.name=g.cleanUpUrlable(a),void this.props.updateParent(this.props.state)):void this.setState({nameError:t(E.required)})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){v.track("signup","signup_team_02_name");var e=null,t="form-group";return this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error"),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",null,React.createElement(_.FormattedMessage,{id:"team_signup_display_name.teamName",defaultMessage:"Team Name"})),React.createElement("div",{className:t},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9"},React.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.display_name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"}))),e),React.createElement("div",null,React.createElement(_.FormattedMessage,{id:"team_signup_display_name.nameHelp",defaultMessage:"Name your team in any language. Your team name shows in menus and headings."})),React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},React.createElement(_.FormattedMessage,{id:"team_signup_display_name.next",defaultMessage:"Next"}),React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},React.createElement(_.FormattedMessage,{id:"team_signup_display_name.back",defaultMessage:"Back to previous step"})))))}}]),t}(React.Component);y.propTypes={intl:_.intlShape.isRequired,state:React.PropTypes.object,updateParent:React.PropTypes.func},a.default=(0,_.injectIntl)(y)},{"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],247:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("mm-intl"),v=(0,b.defineMessages)({validEmail:{id:"team_signup_email.validEmail",defaultMessage:"Please enter a valid email address"},different:{id:"team_signup_email.different",defaultMessage:"Please use a different email than the one used at signup"},address:{id:"team_signup_email.address",defaultMessage:"Email Address"}}),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getValue=a.getValue.bind(a),a.validate=a.validate.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getValue",value:function(){return ReactDOM.findDOMNode(this.refs.email).value.trim()}},{key:"validate",value:function(e){var t=this.props.intl.formatMessage,a=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();return a?g.isEmail(a)?a===e?(this.setState({emailError:t(v.different)}),!1):(this.setState({emailError:""}),!0):(this.setState({emailError:t(v.validEmail)}),!1):!0}},{key:"render",value:function(){var e=null,t="form-group";return this.state.emailError&&(e=React.createElement("label",{className:"control-label"},this.state.emailError),t+=" has-error"),React.createElement("div",{className:t},React.createElement("input",{autoFocus:this.props.focus,type:"email",ref:"email",className:"form-control",placeholder:this.props.intl.formatMessage(v.address),defaultValue:this.props.email,maxLength:"128",spellCheck:"false"}),e)}}]),t}(React.Component);_.propTypes={intl:b.intlShape.isRequired,focus:React.PropTypes.bool,email:React.PropTypes.string},a.default=(0,b.injectIntl)(_)},{"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],248:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/json/stringify"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../utils/client.jsx"),v=s(b),_=e("../stores/browser_store.jsx"),E=n(_),y=e("../stores/user_store.jsx"),R=n(y),C=e("../utils/constants.jsx"),w=n(C),S=e("mm-intl"),k=(0,S.defineMessages)({passwordError:{id:"team_signup_password.passwordError",defaultMessage:"Please enter at least {chars} characters"},creating:{id:"team_signup_password.creating",defaultMessage:"Creating team..."}}),N=function(e){function a(e){(0,u.default)(this,a);var t=(0,h.default)(this,(0,o.default)(a).call(this,e));return t.submitBack=t.submitBack.bind(t),t.submitNext=t.submitNext.bind(t),t.state={},t}return(0,g.default)(a,e),(0,m.default)(a,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="username",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.password).value.trim();if(!a||a.length<w.default.MIN_PASSWORD_LENGTH)return void this.setState({passwordError:this.props.intl.formatMessage(k.passwordError,{chars:w.default.MIN_PASSWORD_LENGTH})});this.setState({passwordError:null,serverError:null}),$("#finish-button").button("loading");var s=JSON.parse((0,l.default)(this.props.state));s.user.password=a,s.user.allow_marketing=!0,delete s.wizard,v.createTeamFromSignup(s,function(){v.track("signup","signup_team_08_complete");var e=t.props;v.loginByEmail(s.team.name,s.team.email,s.user.password,function(){R.default.setLastEmail(s.team.email),t.props.hash>0&&E.default.setGlobalItem(t.props.hash,(0,l.default)({wizard:"finished"})),$("#sign-up-button").button("reset"),e.state.wizard="finished",e.updateParent(e.state,!0),window.location.href="/"+s.team.name+"/channels/town-square"},function(e){"api.user.login.not_verified.app_error"===e.id?window.location.href="/verify_email?email="+encodeURIComponent(s.team.email)+"&teamname="+encodeURIComponent(s.team.name):(t.setState({serverError:e.message}),$("#finish-button").button("reset"))})},function(e){t.setState({serverError:e.message}),$("#finish-button").button("reset")})}},{key:"render",value:function(){v.track("signup","signup_team_07_password");var e=null,a="form-group";this.state.passwordError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.passwordError)),a=" has-error");var s=null;return this.state.serverError&&(s=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError))),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",{className:"margin--less"},React.createElement(S.FormattedMessage,{id:"team_signup_password.yourPassword",defaultMessage:"Your password"})),React.createElement("h5",{className:"color--light"},React.createElement(S.FormattedMessage,{id:"team_signup_password.selectPassword",defaultMessage:"Select a password that you'll use to login with your email address:"})),React.createElement("div",{className:"inner__content margin--extra"},React.createElement("h5",null,React.createElement("strong",null,React.createElement(S.FormattedMessage,{id:"team_signup_password.email",defaultMessage:"Email"}))),React.createElement("div",{className:"block--gray form-group"},this.props.state.team.email),React.createElement("div",{className:a},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-11"},React.createElement("h5",null,React.createElement("strong",null,React.createElement(S.FormattedMessage,{id:"team_signup_password.choosePwd",defaultMessage:"Choose your password"}))),React.createElement("input",{autoFocus:!0,type:"password",ref:"password",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),React.createElement("span",{className:"color--light help-block"},React.createElement(S.FormattedMessage,{id:"team_signup_password.hint",defaultMessage:"Passwords must contain {min} to {max} characters. Your password will be strongest if it contains a mix of symbols, numbers, and upper and lowercase characters.",values:{min:w.default.MIN_PASSWORD_LENGTH,max:w.default.MAX_PASSWORD_LENGTH}})))),e,s)),React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",id:"finish-button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> "+this.props.intl.formatMessage(k.creating),onClick:this.submitNext},React.createElement(S.FormattedMessage,{id:"team_signup_password.finish",defaultMessage:"Finish"}))),React.createElement("p",null,React.createElement(S.FormattedHTMLMessage,{id:"team_signup_password.agreement",defaultMessage:"By proceeding to create your account and use {siteName}, you agree to our <a href='/static/help/terms.html'>Terms of Service</a> and <a href='/static/help/privacy.html'>Privacy Policy</a>. If you do not agree, you cannot use {siteName}.",values:{siteName:t.window.mm_config.SiteName}})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},React.createElement(S.FormattedMessage,{id:"team_signup_password.back",defaultMessage:"Back to previous step"})))))}}]),a}(React.Component);N.defaultProps={state:{},hash:""},N.propTypes={intl:S.intlShape.isRequired,state:React.PropTypes.object,hash:React.PropTypes.string,updateParent:React.PropTypes.func},a.default=(0,S.injectIntl)(N)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":324,"../stores/user_store.jsx":335,"../utils/client.jsx":338,"../utils/constants.jsx":339,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],249:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./team_signup_email_item.jsx"),g=n(f),b=e("../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=function(e){function a(e){(0,o.default)(this,a);var s=(0,m.default)(this,(0,l.default)(a).call(this,e));return s.submitBack=s.submitBack.bind(s),s.submitNext=s.submitNext.bind(s),s.submitAddInvite=s.submitAddInvite.bind(s),s.submitSkip=s.submitSkip.bind(s),s.keySubmit=s.keySubmit.bind(s),s.state={emailEnabled:"true"===t.window.mm_config.SendEmailNotifications},s}return(0,h.default)(a,e),(0,u.default)(a,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="team_url",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){e.preventDefault();var t=!0;if(this.state.emailEnabled){for(var a=[],s=0;s<this.props.state.invites.length;s++)this.refs["email_"+s].validate(this.props.state.team.email)?a.push(this.refs["email_"+s].getValue()):t=!1;t&&(this.props.state.invites=a)}t&&(this.props.state.wizard="username",this.props.updateParent(this.props.state))}},{key:"submitAddInvite",value:function(e){e.preventDefault(),this.props.state.wizard="send_invites",this.props.state.invites||(this.props.state.invites=[]),this.props.state.invites.push(""),this.props.updateParent(this.props.state)}},{key:"submitSkip",value:function(e){e.preventDefault(),this.props.state.wizard="username",this.props.updateParent(this.props.state)}},{key:"keySubmit",value:function(e){e&&13===e.keyCode&&this.submitNext(e)}},{key:"componentDidMount",value:function(){this.state.emailEnabled||$("body").keypress(this.keySubmit)}},{key:"componentWillUnmount",value:function(){this.state.emailEnabled||$("body").off("keypress",this.keySubmit)}},{key:"render",value:function(){v.track("signup","signup_team_05_send_invites");var e=null,t=null;if(this.state.emailEnabled){for(var a=[],s=0;s<this.props.state.invites.length;s++)0===s?a.push(React.createElement(g.default,{focus:!0,key:s,ref:"email_"+s,email:this.props.state.invites[s]})):a.push(React.createElement(g.default,{focus:!1,key:s,ref:"email_"+s,email:this.props.state.invites[s]}));e=React.createElement("div",null,a,React.createElement("div",{className:"form-group text-right"},React.createElement("a",{href:"#",onClick:this.submitAddInvite},React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.addInvitation",defaultMessage:"Add Invitation"})))),t=React.createElement("p",{className:"color--light"},React.createElement(_.FormattedHTMLMessage,{id:"team_signup_send_invites.prefer",defaultMessage:"if you prefer, you can invite team members later<br /> and "}),React.createElement("a",{href:"#",onClick:this.submitSkip},React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.skip",defaultMessage:"skip this step "})),React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.forNow",defaultMessage:"for now."}))}else e=React.createElement("div",{className:"form-group color--light"},React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.disabled",defaultMessage:"Email is currently disabled for your team, and emails cannot be sent. Contact your system administrator to enable email and email invitations."}));return React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",null,React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.title",defaultMessage:"Invite Team Members"})),e,React.createElement("div",{className:"form-group"},React.createElement("button",{type:"submit",className:"btn-primary btn",onClick:this.submitNext},React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.next",defaultMessage:"Next"}),React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})))),t,React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},React.createElement(_.FormattedMessage,{id:"team_signup_send_invites.back",defaultMessage:"Back to previous step"}))))}}]),a}(React.Component);a.default=E,E.propTypes={state:React.PropTypes.object.isRequired,updateParent:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":338,"./team_signup_email_item.jsx":247,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],250:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/constants.jsx"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({required:{id:"team_signup_url.required",defaultMessage:"This field is required"},regex:{id:"team_signup_url.regex",defaultMessage:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."},charLength:{id:"team_signup_url.charLength",defaultMessage:"Name must be 4 or more characters up to a maximum of 15"},taken:{id:"team_signup_url.taken",
defaultMessage:"URL is taken or contains a reserved word"},unavailable:{id:"team_signup_url.unavailable",defaultMessage:"This URL is unavailable. Please try another."}}),C=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.submitBack=t.submitBack.bind(t),t.submitNext=t.submitNext.bind(t),t.handleFocus=t.handleFocus.bind(t),t.state={nameError:""},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="team_display_name",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var a=this;e.preventDefault();var s=this.props.intl.formatMessage,n=ReactDOM.findDOMNode(this.refs.name).value.trim();if(!n)return void this.setState({nameError:s(R.required)});var r=g.cleanUpUrlable(n),l=/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g;if(r!==n||!l.test(n))return void this.setState({nameError:s(R.regex)});if(r.length<4||r.length>15)return void this.setState({nameError:s(R.charLength)});if("true"===t.window.mm_config.RestrictTeamNames)for(var i=0;i<E.default.RESERVED_TEAM_NAMES.length;i++)if(0===r.indexOf(E.default.RESERVED_TEAM_NAMES[i]))return void this.setState({nameError:s(R.taken)});v.findTeamByName(n,function(e){e?a.setState({nameError:s(R.unavailable)}):("true"===t.window.mm_config.SendEmailNotifications?a.props.state.wizard="send_invites":a.props.state.wizard="username",a.props.state.team.type="O",a.props.state.team.name=n,a.props.updateParent(a.props.state))},function(e){a.setState({nameError:e.message})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover click"}),v.track("signup","signup_team_03_url");var e=null,t="form-group";this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=g.getWindowLocationOrigin()+"/";return React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",null,React.createElement(y.FormattedMessage,{id:"team_signup_url.teamUrl",defaultMessage:"Team URL"})),React.createElement("div",{className:t},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-11"},React.createElement("div",{className:"input-group input-group--limit"},React.createElement("span",{"data-toggle":"tooltip",title:a,className:"input-group-addon"},a),React.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"})))),e),React.createElement("p",null,React.createElement(y.FormattedMessage,{id:"team_signup_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),React.createElement("ul",{className:"color--light"},React.createElement(y.FormattedHTMLMessage,{id:"team_signup_url.hint",defaultMessage:"<li>Short and memorable is best</li> <li>Use lowercase letters, numbers and dashes</li> <li>Must start with a letter and can't end in a dash</li>"})),React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},React.createElement(y.FormattedMessage,{id:"team_signup_url.next",defaultMessage:"Next"}),React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},React.createElement(y.FormattedMessage,{id:"team_signup_url.back",defaultMessage:"Back to previous step"})))))}}]),a}(React.Component);C.propTypes={intl:y.intlShape.isRequired,state:React.PropTypes.object,updateParent:React.PropTypes.func},a.default=(0,y.injectIntl)(C)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],251:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/constants.jsx"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({reserved:{id:"team_signup_username.reserved",defaultMessage:"This username is reserved, please choose a new one."},invalid:{id:"team_signup_username.invalid",defaultMessage:"Username must begin with a letter, and contain between {min} to {max} characters in total, which may be numbers, lowercase letters, or any of the symbols '.', '-', or '_'"}}),C=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.submitBack=t.submitBack.bind(t),t.submitNext=t.submitNext.bind(t),t.state={},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"submitBack",value:function(e){e.preventDefault(),"true"===t.window.mm_config.SendEmailNotifications?this.props.state.wizard="send_invites":this.props.state.wizard="team_url",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){e.preventDefault();var t=this.props.intl.formatMessage,a=ReactDOM.findDOMNode(this.refs.name).value.trim().toLowerCase(),s=g.isValidUsername(a);return"Cannot use a reserved word as a username."===s?void this.setState({nameError:t(R.reserved)}):s?void this.setState({nameError:t(R.invalid,{min:E.default.MIN_USERNAME_LENGTH,max:E.default.MAX_USERNAME_LENGTH})}):(this.props.state.wizard="password",this.props.state.user.username=a,void this.props.updateParent(this.props.state))}},{key:"render",value:function(){v.track("signup","signup_team_06_username");var e=null,t=React.createElement("span",{className:"color--light help-block"},React.createElement(y.FormattedMessage,{id:"team_signup_username.hint",defaultMessage:"Usernames must begin with a letter and contain between {min} to {max} characters made up of lowercase letters, numbers, and the symbols '.', '-' and '_'",values:{min:E.default.MIN_USERNAME_LENGTH,max:E.default.MAX_USERNAME_LENGTH}})),a="form-group";return this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t="",a+=" has-error"),React.createElement("div",null,React.createElement("form",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h2",{className:"margin--less"},React.createElement(y.FormattedMessage,{id:"team_signup_username.username",defaultMessage:"Your username"})),React.createElement("h5",{className:"color--light"},React.createElement(y.FormattedMessage,{id:"team_signup_username.memorable",defaultMessage:"Select a memorable username that makes it easy for teammates to identify you:"})),React.createElement("div",{className:"inner__content margin--extra"},React.createElement("div",{className:a},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-11"},React.createElement("h5",null,React.createElement("strong",null,React.createElement(y.FormattedMessage,{id:"team_signup_username.chooseUsername",defaultMessage:"Choose your username"}))),React.createElement("input",{autoFocus:!0,type:"text",ref:"name",className:"form-control",placeholder:"",defaultValue:this.props.state.user.username,maxLength:"128",spellCheck:"false"}),t)),e)),React.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},React.createElement(y.FormattedMessage,{id:"team_signup_username.next",defaultMessage:"Next"}),React.createElement("i",{className:"glyphicon glyphicon-chevron-right"})),React.createElement("div",{className:"margin--extra"},React.createElement("a",{href:"#",onClick:this.submitBack},React.createElement(y.FormattedMessage,{id:"team_signup_username.back",defaultMessage:"Back to previous step"})))))}}]),a}(React.Component);C.defaultProps={state:null},C.propTypes={intl:y.intlShape.isRequired,state:React.PropTypes.object,updateParent:React.PropTypes.func},a.default=(0,y.injectIntl)(C)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],252:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../stores/browser_store.jsx"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({storageError:{id:"team_signup_welcome.storageError",defaultMessage:"This service requires local storage to be enabled. Please enable it or exit private browsing."},validEmailError:{id:"team_signup_welcome.validEmailError",defaultMessage:"Please enter a valid email address"},address:{id:"team_signup_welcome.address",defaultMessage:"Email Address"}}),C=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.submitNext=t.submitNext.bind(t),t.handleDiffEmail=t.handleDiffEmail.bind(t),t.handleDiffSubmit=t.handleDiffSubmit.bind(t),t.handleKeyPress=t.handleKeyPress.bind(t),t.state={useDiff:!1},document.addEventListener("keyup",t.handleKeyPress,!1),t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"submitNext",value:function(e){return E.default.isLocalStorageSupported()?(e.preventDefault(),this.props.state.wizard="team_display_name",void this.props.updateParent(this.props.state)):void this.setState({storageError:this.props.intl.formatMessage(R.storageError)})}},{key:"handleDiffEmail",value:function(e){e.preventDefault(),this.setState({useDiff:!0})}},{key:"handleDiffSubmit",value:function(e){e.preventDefault();var t=this.props.intl.formatMessage,a={useDiff:!0,serverError:""},s=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase();return s&&g.isEmail(s)?E.default.isLocalStorageSupported()?(a.emailError="",void v.signupTeam(s,function(e){e.follow_link?window.location.href=e.follow_link:(this.props.state.wizard="finished",this.props.updateParent(this.props.state),window.location.href="/signup_team_confirm/?email="+encodeURIComponent(s))}.bind(this),function(e){var a=e.message;e.detailed_error.indexOf("Invalid RCPT TO address provided")>=0&&(a=t(R.validEmailError)),this.setState({emailError:"",serverError:a})}.bind(this))):(a.emailError=t(R.storageError),void this.setState(a)):(a.emailError=t(R.validEmailError),void this.setState(a))}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&this.submitNext(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"render",value:function(){v.track("signup","signup_team_01_welcome");var e=null;this.state.storageError&&(e=React.createElement("label",{className:"control-label"},this.state.storageError));var a=null,s="form-group";this.state.emailError&&(a=React.createElement("label",{className:"control-label"},this.state.emailError),s+=" has-error");var n=null;this.state.serverError&&(n=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var r="",l="hidden";return this.state.useDiff&&(r="hidden",l=""),React.createElement("div",null,React.createElement("img",{className:"signup-team-logo",src:"/static/images/logo.png"}),React.createElement("h3",{className:"sub-heading"},React.createElement(y.FormattedMessage,{id:"team_signup_welcome.welcome",defaultMessage:"Welcome to:"})),React.createElement("h1",{className:"margin--top-none"},t.window.mm_config.SiteName),React.createElement("p",{className:"margin--less"},React.createElement(y.FormattedMessage,{id:"team_signup_welcome.lets",defaultMessage:"Let's set up your new team"})),React.createElement("div",null,React.createElement(y.FormattedMessage,{id:"team_signup_welcome.confirm",defaultMessage:"Please confirm your email address:"}),React.createElement("br",null),React.createElement("div",{className:"inner__content"},React.createElement("div",{className:"block--gray"},this.props.state.team.email))),React.createElement("p",{className:"margin--extra color--light"},React.createElement(y.FormattedHTMLMessage,{id:"team_signup_welcome.admin",defaultMessage:"Your account will administer the new team site. <br /> You can add other administrators later."})),React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn-primary btn form-group",type:"submit",onClick:this.submitNext},React.createElement("i",{className:"glyphicon glyphicon-ok"}),React.createElement(y.FormattedMessage,{id:"team_signup_welcome.yes",defaultMessage:"Yes, this address is correct"})),e),React.createElement("hr",null),React.createElement("div",{className:l},React.createElement("div",{className:s},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9"},React.createElement("input",{type:"email",ref:"email",className:"form-control",placeholder:this.props.intl.formatMessage(R.address),maxLength:"128",spellCheck:"false"}))),a),n,React.createElement("button",{className:"btn btn-md btn-primary",type:"button",onClick:this.handleDiffSubmit},React.createElement(y.FormattedMessage,{id:"team_signup_welcome.instead",defaultMessage:"Use this instead"}))),React.createElement("a",{href:"#",onClick:this.handleDiffEmail,className:r},React.createElement(y.FormattedMessage,{id:"team_signup_welcome.different",defaultMessage:"Use a different email"})))}}]),a}(React.Component);C.defaultProps={state:{}},C.propTypes={intl:y.intlShape.isRequired,updateParent:React.PropTypes.func.isRequired,state:React.PropTypes.object},a.default=(0,y.injectIntl)(C)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":324,"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],253:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("mm-intl"),E=(0,_.defineMessages)({emailError:{id:"email_signup.emailError",defaultMessage:"Please enter a valid email address"},address:{id:"email_signup.address",defaultMessage:"Email Address"}}),y=function(e){function t(){(0,o.default)(this,t);var e=(0,m.default)(this,(0,l.default)(t).call(this));return e.handleSubmit=e.handleSubmit.bind(e),e.state={},e}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={},s={serverError:null},n=!0;return a.email=ReactDOM.findDOMNode(this.refs.email).value.trim().toLowerCase(),a.email&&g.isEmail(a.email)?s.emailError=null:(s.emailError=this.props.intl.formatMessage(E.emailError),n=!1),n?void v.signupTeam(a.email,function(e){e.follow_link?window.location.href=e.follow_link:window.location.href="/signup_team_confirm/?email="+encodeURIComponent(a.email)},function(e){s.serverError=e.message,t.setState(s)}):void this.setState(s)}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var t=null;return this.state.emailError&&(t=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.emailError))),React.createElement("form",{role:"form",onSubmit:this.handleSubmit},React.createElement("div",{className:"form-group"},React.createElement("input",{autoFocus:!0,type:"email",ref:"email",className:"form-control",placeholder:this.props.intl.formatMessage(E.address),maxLength:"128",spellCheck:"false"}),t),React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn btn-md btn-primary",type:"submit"},React.createElement(_.FormattedMessage,{id:"email_signup.createTeam",defaultMessage:"Create Team"})),e),React.createElement("div",{className:"form-group margin--extra-2x"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},React.createElement(_.FormattedMessage,{id:"email_signup.find",defaultMessage:"Find my teams"})))))}}]),t}(React.Component);y.defaultProps={},y.propTypes={intl:_.intlShape.isRequired},a.default=(0,_.injectIntl)(y)},{"../utils/client.jsx":338,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],254:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/utils.jsx"),g=s(f),b=e("../utils/client.jsx"),v=s(b),_=e("../utils/constants.jsx"),E=n(_),y=e("mm-intl"),R=(0,y.defineMessages)({team_error:{id:"sso_signup.team_error",defaultMessage:"Please enter a team name"},length_error:{id:"sso_signup.length_error",defaultMessage:"Name must be 3 or more characters up to a maximum of 15"},teamName:{id:"sso_signup.teamName",defaultMessage:"Enter name of new team"}}),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.nameChange=a.nameChange.bind(a),a.state={name:""},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.intl.formatMessage,s={},n=this.state;return n.nameError=null,n.serverError=null,s.display_name=this.state.name,s.display_name?s.display_name.length<=2?(n.nameError=a(R.length_error),void this.setState(n)):(s.name=g.cleanUpUrlable(s.display_name),s.type="O",void v.createTeamWithSSO(s,this.props.service,function(e){e.follow_link?window.location.href=e.follow_link:window.location.href="/"+s.name+"/channels/town-square"},function(e){n.serverError=e.message,t.setState(n)})):(n.nameError=a(R.team_error),void this.setState(n))}},{key:"nameChange",value:function(){this.setState({name:ReactDOM.findDOMNode(this.refs.teamname).value.trim()})}},{key:"render",value:function(){var e=null,t="form-group";this.state.nameError&&(e=React.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=null;this.state.serverError&&(a=React.createElement("div",{className:"form-group has-error"},React.createElement("label",{className:"control-label"},this.state.serverError)));var s=!1;this.state.name.length<=2&&(s=!0);var n=null;return this.props.service===E.default.GITLAB_SERVICE?n=React.createElement("a",{className:"btn btn-custom-login gitlab btn-full",key:"gitlab",href:"#",onClick:this.handleSubmit,disabled:s},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(y.FormattedMessage,{id:"sso_signup.gitlab",defaultMessage:"Create team with GitLab Account"}))):this.props.service===E.default.GOOGLE_SERVICE&&(n=React.createElement("a",{className:"btn btn-custom-login google btn-full",key:"google",href:"#",onClick:this.handleSubmit,disabled:s},React.createElement("span",{className:"icon"}),React.createElement("span",null,React.createElement(y.FormattedMessage,{id:"sso_signup.google",defaultMessage:"Create team with Google Apps Account"})))),React.createElement("form",{role:"form",onSubmit:this.handleSubmit},React.createElement("div",{className:t},React.createElement("input",{autoFocus:!0,type:"text",ref:"teamname",className:"form-control",placeholder:this.props.intl.formatMessage(R.teamName),maxLength:"128",onChange:this.nameChange,spellCheck:"false"}),e),React.createElement("div",{className:"form-group"},n,a),React.createElement("div",{className:"form-group margin--extra-2x"},React.createElement("span",null,React.createElement("a",{href:"/find_team"},React.createElement(y.FormattedMessage,{id:"sso_signup.find",defaultMessage:"Find my teams"})))))}}]),t}(React.Component);C.defaultProps={service:""},C.propTypes={intl:y.intlShape.isRequired,service:React.PropTypes.string},a.default=(0,y.injectIntl)(C)},{"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],255:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("./suggestion/at_mention_provider.jsx"),g=n(f),b=e("./suggestion/command_provider.jsx"),v=n(b),_=e("./suggestion/emoticon_provider.jsx"),E=n(_),y=e("./suggestion/suggestion_list.jsx"),R=n(y),C=e("./suggestion/suggestion_box.jsx"),w=n(C),S=e("../stores/error_store.jsx"),k=n(S),N=e("../utils/text_formatting.jsx"),M=s(N),x=e("../utils/utils.jsx"),j=s(x),T=e("../utils/constants.jsx"),P=n(T),O=P.default.PRE_RELEASE_FEATURES,I=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.getStateFromStores=t.getStateFromStores.bind(t),t.onRecievedError=t.onRecievedError.bind(t),t.handleKeyPress=t.handleKeyPress.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.resize=t.resize.bind(t),t.showPreview=t.showPreview.bind(t),t.state={connection:""},t.suggestionProviders=[new g.default,new E.default],e.supportsCommands&&t.suggestionProviders.push(new v.default),t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"getStateFromStores",value:function(){var e=k.default.getLastError();return e?{message:e.message}:{message:null}}},{key:"componentDidMount",value:function(){k.default.addChangeListener(this.onRecievedError),this.resize()}},{key:"componentWillUnmount",value:function(){k.default.removeChangeListener(this.onRecievedError)}},{key:"onRecievedError",value:function(){var e=k.default.getLastError();e&&e.connErrorCount>0?this.setState({connection:"bad-connection"}):this.setState({connection:""})}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"handleKeyPress",value:function(e){this.props.onKeyPress(e)}},{key:"handleKeyDown",value:function(e){this.props.onKeyDown&&this.props.onKeyDown(e)}},{key:"resize",value:function(){var e=this.refs.message.getTextbox(),t=$(e),a=$(ReactDOM.findDOMNode(this.refs.wrapper)),s=parseInt(t.css("padding-bottom"),10)+parseInt(t.css("padding-top"),10),n=parseInt(t.css("border-bottom-width"),10)+parseInt(t.css("border-top-width"),10),r=parseInt(t.css("max-height"),10)-n,l=t.height();t.css("height","auto").css("overflow-y","hidden");var i=e.scrollHeight-s;i+s>r?(i=r-s,t.css("overflow-y","scroll"),a.closest(".post-body__cell").addClass("scroll")):a.closest(".post-body__cell").removeClass("scroll"),t.height(i),a.height(i+s+n),this.state.preview&&$(ReactDOM.findDOMNode(this.refs.preview)).height(i+n),i!==l&&this.props.onHeightChange&&this.props.onHeightChange()}},{key:"showPreview",value:function(e){e.preventDefault(),e.target.blur(),this.setState({preview:!this.state.preview}),this.resize()}},{key:"showHelp",value:function(e){e.preventDefault(),e.target.blur(),t.window.open("/docs/Messaging")}},{key:"render",value:function(){var e=null;if(j.isFeatureEnabled(O.MARKDOWN_PREVIEW)){var t=this.props.messageText.length>0;e=React.createElement("a",{style:{visibility:t?"visible":"hidden"},onClick:this.showPreview,className:"textbox-preview-link"},this.state.preview?"Edit message":"Preview")}return React.createElement("div",{ref:"wrapper",className:"textarea-wrapper"},React.createElement(w.default,{id:this.props.id,ref:"message",className:"form-control custom-textarea "+this.state.connection,type:"textarea",spellCheck:"true",autoComplete:"off",autoCorrect:"off",rows:"1",maxLength:P.default.MAX_POST_LEN,placeholder:this.props.createMessage,value:this.props.messageText,onUserInput:this.props.onUserInput,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,style:{visibility:this.state.preview?"hidden":"visible"},listComponent:R.default,providers:this.suggestionProviders}),React.createElement("div",{ref:"preview",className:"form-control custom-textarea textbox-preview-area",style:{display:this.state.preview?"block":"none"},dangerouslySetInnerHTML:{__html:this.state.preview?M.formatText(this.props.messageText):""}}),e,React.createElement("a",{onClick:this.showHelp,className:"textbox-help-link"},"Help"))}}]),a}(React.Component);a.default=I,I.defaultProps={supportsCommands:!0},I.propTypes={id:React.PropTypes.string.isRequired,channelId:React.PropTypes.string,messageText:React.PropTypes.string.isRequired,onUserInput:React.PropTypes.func.isRequired,onKeyPress:React.PropTypes.func.isRequired,onHeightChange:React.PropTypes.func,createMessage:React.PropTypes.string.isRequired,onKeyDown:React.PropTypes.func,supportsCommands:React.PropTypes.bool.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/error_store.jsx":326,"../utils/constants.jsx":339,"../utils/text_formatting.jsx":343,"../utils/utils.jsx":344,"./suggestion/at_mention_provider.jsx":231,"./suggestion/command_provider.jsx":232,"./suggestion/emoticon_provider.jsx":233,"./suggestion/suggestion_box.jsx":237,"./suggestion/suggestion_list.jsx":238,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],256:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../utils/constants.jsx"),g=n(f),b=e("../utils/utils.jsx"),v=s(b),_=ReactBootstrap.Tooltip,E=ReactBootstrap.OverlayTrigger,y=function(e){function t(e){return(0,o.default)(this,t),(0,m.default)(this,(0,l.default)(t).call(this,e))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.forceUpdate()},3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=v.displayDate(this.props.eventTime),t=v.displayTime(this.props.eventTime),a=React.createElement(_,{id:"time-since-tooltip-"+this.props.eventTime},e+" at "+t);return React.createElement(E,{delayShow:g.default.OVERLAY_TIME_DELAY,placement:"top",overlay:a},React.createElement("time",{className:"post__time"},v.displayDateTime(this.props.eventTime)))}}]),t}(React.Component);a.default=y,y.defaultProps={eventTime:0},y.propTypes={eventTime:React.PropTypes.number.isRequired}},{"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],257:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/helpers/extends"),r=s(n),l=e("babel-runtime/core-js/object/assign"),i=s(l),o=e("babel-runtime/helpers/objectWithoutProperties"),c=s(o),u=e("babel-runtime/core-js/object/get-prototype-of"),d=s(u),m=e("babel-runtime/helpers/classCallCheck"),p=s(m),h=e("babel-runtime/helpers/createClass"),f=s(h),g=e("babel-runtime/helpers/possibleConstructorReturn"),b=s(g),v=e("babel-runtime/helpers/inherits"),_=s(v);Object.defineProperty(a,"__esModule",{value:!0});var E=function(e){function t(e){(0,p.default)(this,t);var a=(0,b.default)(this,(0,d.default)(t).call(this,e));return a.show=a.show.bind(a),a.hide=a.hide.bind(a),a.state={show:!1},a}return(0,_.default)(t,e),(0,f.default)(t,[{key:"show",value:function(){this.setState({show:!0})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,s=(t.dialogType,t.dialogProps),n=t.onClick,l=(0,c.default)(t,["children","dialogType","dialogProps","onClick"]),o=this.show;n&&(o=function(){n(),e.show()});var u=React.createElement(this.props.dialogType,(0,i.default)({},s,{show:this.state.show,onHide:function(){e.hide(),s.onHide&&s.onHide()}}));return React.createElement("a",(0,r.default)({},l,{href:"#",onClick:o}),a,u)}}]),t}(React.Component);a.default=E,E.propTypes={children:React.PropTypes.node.isRequired,dialogType:React.PropTypes.func.isRequired,dialogProps:React.PropTypes.object,onClick:React.PropTypes.func},E.defaultProps={dialogProps:{}}},{"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,
"babel-runtime/helpers/extends":18,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/objectWithoutProperties":21,"babel-runtime/helpers/possibleConstructorReturn":22}],258:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../stores/user_store.jsx"),g=n(f),b=e("../../stores/channel_store.jsx"),v=n(b),_=e("../../stores/team_store.jsx"),E=n(_),y=e("../../stores/preference_store.jsx"),R=n(y),C=e("../../utils/utils.jsx"),w=s(C),S=e("../../utils/async_client.jsx"),k=s(S),N=e("../../utils/constants.jsx"),M=n(N),x=e("mm-intl"),j=M.default.Preferences,T=3,P=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.handleNext=t.handleNext.bind(t),t.createScreen=t.createScreen.bind(t),t.createCircles=t.createCircles.bind(t),t.state={currentScreen:0},t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"handleNext",value:function(){if(this.state.currentScreen<2)return void this.setState({currentScreen:this.state.currentScreen+1});w.switchChannel(v.default.getByName(M.default.DEFAULT_CHANNEL));var e=R.default.getPreference(j.TUTORIAL_STEP,g.default.getCurrentId(),{value:"0"}),t=(parseInt(e.value,10)+1).toString();e=R.default.setPreference(j.TUTORIAL_STEP,g.default.getCurrentId(),t),k.savePreferences([e])}},{key:"componentDidMount",value:function(){$(".tutorials__scroll").perfectScrollbar()}},{key:"skipTutorial",value:function(e){e.preventDefault();var t=R.default.setPreference(j.TUTORIAL_STEP,g.default.getCurrentId(),"999");k.savePreferences([t])}},{key:"createScreen",value:function(){switch(this.state.currentScreen){case 0:return this.createScreenOne();case 1:return this.createScreenTwo();case 2:return this.createScreenThree()}}},{key:"createScreenOne",value:function(){var e=this.createCircles();return React.createElement("div",null,React.createElement(x.FormattedHTMLMessage,{id:"tutorial_intro.screenOne",defaultMessage:"<h3>Welcome to:</h3> <h1>Mattermost</h1> <p>Your team communication all in one place, instantly searchable and available anywhere</p> <p>Keep your team connected to help them achieve what matters most.</p>"}),e)}},{key:"createScreenTwo",value:function(){var e=this.createCircles();return React.createElement("div",null,React.createElement(x.FormattedHTMLMessage,{id:"tutorial_intro.screenTwo",defaultMessage:"<h3>How Mattermost works:</h3> <p>Communication happens in public discussion channels, private groups and direct messages.</p> <p>Everything is archived and searchable from any web-enabled desktop, laptop or phone.</p>"}),e)}},{key:"createScreenThree",value:function(){var e=E.default.getCurrent(),a=void 0;a=e.type===M.default.INVITE_TEAM?React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#invite_member"},React.createElement(x.FormattedMessage,{id:"tutorial_intro.invite",defaultMessage:"Invite teammates"})):React.createElement("a",{className:"intro-links",href:"#","data-toggle":"modal","data-target":"#get_link","data-title":"Team Invite","data-value":w.getWindowLocationOrigin()+"/signup_user_complete/?id="+e.id},React.createElement(x.FormattedMessage,{id:"tutorial_intro.teamInvite",defaultMessage:"Team Invite"}));var s=this.createCircles(),n=null;return t.window.mm_config.SupportEmail&&(n=React.createElement("p",null,React.createElement(x.FormattedMessage,{id:"tutorial_intro.support",defaultMessage:"Need anything, just email us at "}),React.createElement("a",{href:"mailto:"+t.window.mm_config.SupportEmail,target:"_blank"},t.window.mm_config.SupportEmail),".")),React.createElement("div",null,React.createElement("h3",null,React.createElement(x.FormattedMessage,{id:"tutorial_intro.allSet",defaultMessage:"You’re all set"})),React.createElement("p",null,a,React.createElement(x.FormattedMessage,{id:"tutorial_intro.whenReady",defaultMessage:" when you’re ready."})),n,React.createElement(x.FormattedMessage,{id:"tutorial_intro.end",defaultMessage:"Click “Next” to enter Town Square. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know."}),s)}},{key:"createCircles",value:function(){for(var e=this,t=[],a=function(a){var s="circle";a===e.state.currentScreen&&(s+=" active"),t.push(React.createElement("a",{href:"#",key:"circle"+a,className:s,onClick:function(t){t.preventDefault(),e.setState({currentScreen:a})}}))},s=0;T>s;s++)a(s);return React.createElement("div",{className:"tutorial__circles"},t)}},{key:"render",value:function(){var e=w.windowHeight()-100,t=this.createScreen();return React.createElement("div",{className:"tutorials__scroll",style:{height:e}},React.createElement("div",{className:"tutorial-steps__container"},React.createElement("div",{className:"tutorial__content"},React.createElement("div",{className:"tutorial__steps"},t,React.createElement("button",{className:"btn btn-primary",tabIndex:"1",onClick:this.handleNext},React.createElement(x.FormattedMessage,{id:"tutorial_intro.next",defaultMessage:"Next"})),React.createElement("a",{className:"tutorial-skip",href:"#",onClick:this.skipTutorial},React.createElement(x.FormattedMessage,{id:"tutorial_intro.skip",defaultMessage:"Skip tutorial"}))))))}}]),a}(React.Component);a.default=P}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../stores/channel_store.jsx":325,"../../stores/preference_store.jsx":330,"../../stores/team_store.jsx":334,"../../stores/user_store.jsx":335,"../../utils/async_client.jsx":336,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],259:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../stores/user_store.jsx"),g=n(f),b=e("../../stores/preference_store.jsx"),v=n(b),_=e("../../utils/async_client.jsx"),E=s(_),y=e("../../utils/constants.jsx"),R=n(y),C=e("mm-intl"),w=R.default.Preferences,S=ReactBootstrap.Overlay,k=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.handleNext=a.handleNext.bind(a),a.toggle=a.toggle.bind(a),a.state={currentScreen:0,show:!1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"toggle",value:function(){var e=!this.state.show;if(this.setState({show:e}),!e&&this.state.currentScreen>=this.props.screens.length-1){var t=v.default.getPreference(w.TUTORIAL_STEP,g.default.getCurrentId(),{value:"0"}),a=(parseInt(t.value,10)+1).toString();t=v.default.setPreference(w.TUTORIAL_STEP,g.default.getCurrentId(),a),E.savePreferences([t])}}},{key:"handleNext",value:function(){return this.state.currentScreen<this.props.screens.length-1?void this.setState({currentScreen:this.state.currentScreen+1}):void this.toggle()}},{key:"skipTutorial",value:function(e){e.preventDefault();var t=v.default.setPreference(w.TUTORIAL_STEP,g.default.getCurrentId(),"999");E.savePreferences([t])}},{key:"render",value:function(){var e=this,t=this.state.currentScreen===this.props.screens.length-1?React.createElement(C.FormattedMessage,{id:"tutorial_tip.ok",defaultMessage:"Okay"}):React.createElement(C.FormattedMessage,{id:"tutorial_tip.next",defaultMessage:"Next"}),a=[];if(this.props.screens.length>1)for(var s=function(t){var s="circle";t===e.state.currentScreen&&(s+=" active"),a.push(React.createElement("a",{href:"#",key:"dotactive"+t,className:s,onClick:function(a){a.preventDefault(),e.setState({currentScreen:t})}}))},n=0;n<this.props.screens.length;n++)s(n);var r="";return("tip-overlay--header"===this.props.overlayClass||"tip-overlay--sidebar"===this.props.overlayClass)&&(r="White"),React.createElement("div",{className:"tip-div "+this.props.overlayClass},React.createElement("img",{className:"tip-button",src:"/static/images/tutorialTip"+r+".gif",width:"35",onClick:this.toggle,ref:"target"}),React.createElement(S,{show:this.state.show},React.createElement("div",{className:"tip-backdrop"})),React.createElement(S,{placement:this.props.placement,show:this.state.show,rootClose:!0,onHide:this.toggle,target:function(){return e.refs.target}},React.createElement("div",{className:"tip-overlay "+this.props.overlayClass},React.createElement("div",{className:"arrow"}),this.props.screens[this.state.currentScreen],React.createElement("div",{className:"tutorial__footer"},React.createElement("div",{className:"tutorial__circles"},a),React.createElement("div",{className:"text-right"},React.createElement("button",{className:"btn btn-primary",onClick:this.handleNext},t),React.createElement("div",{className:"tip-opt"},React.createElement(C.FormattedMessage,{id:"tutorial_tip.seen",defaultMessage:"Seen this before? "}),React.createElement("a",{href:"#",onClick:this.skipTutorial},React.createElement(C.FormattedMessage,{id:"tutorial_tip.out",defaultMessage:"Opt out of these tips."}))))))))}}]),t}(React.Component);a.default=k,k.defaultProps={overlayClass:""},k.propTypes={screens:React.PropTypes.array.isRequired,placement:React.PropTypes.string.isRequired,overlayClass:React.PropTypes.string}},{"../../stores/preference_store.jsx":330,"../../stores/user_store.jsx":335,"../../utils/async_client.jsx":336,"../../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"mm-intl":308}],260:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function t(e){return(0,i.default)(this,t),(0,d.default)(this,(0,r.default)(t).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e="none";return this.props.show&&(e="block"),React.createElement("div",{className:"nav-pills__unread-indicator "+this.props.extraClass,style:{display:e}},this.props.text)}}]),t}(React.Component);a.default=h,h.defaultProps={show:!1,extraClass:"",text:""},h.propTypes={show:React.PropTypes.bool,extraClass:React.PropTypes.string,text:React.PropTypes.string}},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],261:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){return R+=1}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../utils/utils.jsx"),b=s(g),v=e("../stores/user_store.jsx"),_=n(v),E=ReactBootstrap.Popover,y=ReactBootstrap.OverlayTrigger,R=0,C=function(e){function a(e){(0,c.default)(this,a);var t=(0,p.default)(this,(0,i.default)(a).call(this,e));return t.uniqueId=r(),t.onChange=t.onChange.bind(t),t.state=t.getStateFromStores(t.props.userId),t}return(0,f.default)(a,e),(0,d.default)(a,[{key:"getStateFromStores",value:function(e){var t=_.default.getProfile(e);return null==t?{profile:{id:"0",username:"..."}}:{profile:t}}},{key:"componentDidMount",value:function(){_.default.addChangeListener(this.onChange),this.props.disablePopover||$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover click"})}},{key:"componentWillUnmount",value:function(){_.default.removeChangeListener(this.onChange)}},{key:"onChange",value:function(e){if(!e||e===this.props.userId){var t=this.getStateFromStores(this.props.userId);b.areObjectsEqual(t,this.state)||this.setState(t)}}},{key:"componentWillReceiveProps",value:function(e){this.props.userId!==e.userId&&this.setState(this.getStateFromStores(e.userId))}},{key:"render",value:function(){var e=b.displayUsername(this.state.profile.id);if(this.props.overwriteName?e=this.props.overwriteName:e||(e="..."),this.props.disablePopover)return React.createElement("div",null,e);var a="/api/v1/users/"+this.state.profile.id+"/image?time="+this.state.profile.update_at+"&"+b.getSessionIndex();this.props.overwriteImage&&(a=this.props.overwriteImage);var s=[];return s.push(React.createElement("img",{className:"user-popover__image",src:a,height:"128",width:"128",key:"user-popover-image"})),"true"===!t.window.mm_config.ShowEmailAddress?s.push(React.createElement("div",{className:"text-nowrap",key:"user-popover-no-email"},"Email not shared")):s.push(React.createElement("div",{"data-toggle":"tooltip",title:this.state.profile.email,key:"user-popover-email"},React.createElement("a",{href:"mailto:"+this.state.profile.email,className:"text-nowrap text-lowercase user-popover__email"},this.state.profile.email))),React.createElement(y,{trigger:"click",placement:"right",rootClose:!0,overlay:React.createElement(E,{title:e,id:"user-profile-popover"},s)},React.createElement("div",{className:"user-popover",id:"profile_"+this.uniqueId},e))}}]),a}(React.Component);a.default=C,C.defaultProps={userId:"",overwriteName:"",overwriteImage:"",disablePopover:!1},C.propTypes={userId:React.PropTypes.string,overwriteName:React.PropTypes.string,overwriteImage:React.PropTypes.string,disablePopover:React.PropTypes.bool}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/user_store.jsx":335,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],262:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../../utils/constants.jsx"),f=s(h),g=ReactBootstrap.OverlayTrigger,b=ReactBootstrap.Popover,v=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(0,r.default)(t).call(this,e));return a.onPickerChange=a.onPickerChange.bind(a),a.onInputChange=a.onInputChange.bind(a),a.pasteBoxChange=a.pasteBoxChange.bind(a),a.state={},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){$(".color-picker").colorpicker({format:"hex"}),$(".color-picker").on("changeColor",this.onPickerChange)}},{key:"componentDidUpdate",value:function(){var e=this.props.theme;f.default.THEME_ELEMENTS.forEach(function(t){e.hasOwnProperty(t.id)&&"codeTheme"!==t.id&&($("#"+t.id).data("colorpicker").color.setColor(e[t.id]),$("#"+t.id).colorpicker("update"))})}},{key:"onPickerChange",value:function(e){var t=this.props.theme;t[e.target.id]=e.color.toHex(),t.type="custom",this.props.updateTheme(t)}},{key:"onInputChange",value:function(e){var t=this.props.theme;t[e.target.parentNode.id]=e.target.value,t.type="custom",this.props.updateTheme(t)}},{key:"pasteBoxChange",value:function(e){var t=e.target.value;if(0!==t.length){var a=t.split(","),s={type:"custom"},n=0;f.default.THEME_ELEMENTS.forEach(function(e){n<a.length-1&&(s[e.id]=a[n]),n++}),s.codeTheme=a[a.length-1],this.props.updateTheme(s)}}},{key:"render",value:function(){var e=this,t=this.props.theme,a=[],s="";f.default.THEME_ELEMENTS.forEach(function(n,r){if("codeTheme"===n.id){var l;!function(){var s=[];n.themes.forEach(function(e,t){s.push(React.createElement("option",{key:"code-theme-key"+t,value:e.id},e.uiName))}),l=React.createElement(b,{bsStyle:"info",id:"code-popover",className:"code-popover"},React.createElement("img",{width:"200",src:"/static/images/themes/code_themes/"+t[n.id]+".png"})),a.push(React.createElement("div",{className:"col-sm-4 form-group",key:"custom-theme-key"+r},React.createElement("label",{className:"custom-label"},n.uiName),React.createElement("div",{className:"input-group theme-group group--code dropdown",id:n.id},React.createElement("select",{className:"form-control",type:"text",value:t[n.id],onChange:e.onInputChange},s),React.createElement(g,{placement:"top",overlay:l,ref:"headerOverlay"},React.createElement("span",{className:"input-group-addon"},React.createElement("img",{src:"/static/images/themes/code_themes/"+t[n.id]+".png"}))))))}()}else a.push(React.createElement("div",{className:"col-sm-4 form-group",key:"custom-theme-key"+r},React.createElement("label",{className:"custom-label"},n.uiName),React.createElement("div",{className:"input-group color-picker",id:n.id},React.createElement("input",{className:"form-control",type:"text",value:t[n.id],onChange:e.onInputChange}),React.createElement("span",{className:"input-group-addon"},React.createElement("i",null))))),s+=t[n.id]+","}),s+=t.codeTheme;var n=React.createElement("div",{className:"col-sm-12"},React.createElement("label",{className:"custom-label"},"Copy and paste to share theme colors:"),React.createElement("input",{type:"text",className:"form-control",value:s,onChange:this.pasteBoxChange}));return React.createElement("div",null,React.createElement("div",{className:"row form-group"},a),React.createElement("div",{className:"row"},n))}}]),t}(React.Component);a.default=v,v.propTypes={theme:React.PropTypes.object.isRequired,updateTheme:React.PropTypes.func.isRequired}},{"../../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],263:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../stores/modal_store.jsx"),g=n(f),b=e("../../stores/user_store.jsx"),v=n(b),_=e("../../utils/utils.jsx"),E=s(_),y=e("../../utils/client.jsx"),R=s(y),C=e("../../dispatcher/app_dispatcher.jsx"),w=n(C),S=e("../../utils/constants.jsx"),k=n(S),N=ReactBootstrap.Modal,M=k.default.ActionTypes,x=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.updateShow=a.updateShow.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleChange=a.handleChange.bind(a),a.state={inputError:"",show:!1},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){g.default.addModalListener(M.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"componentWillUnmount",value:function(){g.default.removeModalListener(M.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"updateShow",value:function(e){this.setState({show:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=ReactDOM.findDOMNode(this.refs.input).value;if(!this.isInputValid(a))return void this.setState({inputError:"Invalid format, please try copying and pasting in again."});var s=a.split(","),n={type:"custom"};n.sidebarBg=s[0],n.sidebarText=s[5],n.sidebarUnreadText=s[5],n.sidebarTextHoverBg=s[4],n.sidebarTextActiveBorder=s[2],n.sidebarTextActiveColor=s[3],n.sidebarHeaderBg=s[1],n.sidebarHeaderTextColor=s[5],n.onlineIndicator=s[6],n.awayIndicator="#E0B333",n.mentionBj=s[7],n.mentionColor="#ffffff",n.centerChannelBg="#ffffff",n.centerChannelColor="#333333",n.newMessageSeparator="#F80",n.linkColor="#2389d7",n.buttonBg="#26a970",n.buttonColor="#ffffff",n.mentionHighlightBg="#fff2bb",n.mentionHighlightLink="#2f81b7",n.codeTheme="github";var r=v.default.getCurrentUser();r.theme_props=n,R.updateUser(r,function(e){w.default.handleServerAction({type:M.RECIEVED_ME,me:e}),t.setState({show:!1}),E.applyTheme(n)},function(e){var a=t.getStateFromStores();a.serverError=e,t.setState(a)})}},{key:"isInputValid",value:function(e){if(0===e.length)return!1;if(-1!==e.indexOf(" "))return!1;if(e.length>0&&-1===e.indexOf(","))return!1;if(e.length>0){var t=e.split(",");if(8!==t.length)return!1;for(var a=0;a<t.length;a++){if(7!==t[a].length&&4!==t[a].length)return!1;if("#"!==t[a].charAt(0))return!1}}return!0}},{key:"handleChange",value:function(e){this.isInputValid(e.target.value)?this.setState({inputError:null}):this.setState({inputError:"Invalid format, please try copying and pasting in again."})}},{key:"render",value:function(){var e=this;return React.createElement("span",null,React.createElement(N,{show:this.state.show,onHide:function(){return e.setState({show:!1})}},React.createElement(N.Header,{closeButton:!0},React.createElement(N.Title,null,"Import Slack Theme")),React.createElement("form",{role:"form",className:"form-horizontal"},React.createElement(N.Body,null,React.createElement("p",null,"To import a theme, go to a Slack team and look for “Preferences -> Sidebar Theme”. Open the custom theme option, copy the theme color values and paste them here:"),React.createElement("div",{className:"form-group less"},React.createElement("div",{className:"col-sm-9"},React.createElement("input",{ref:"input",type:"text",className:"form-control",onChange:this.handleChange}),React.createElement("div",{className:"input__help"},this.state.inputError)))),React.createElement(N.Footer,null,React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return e.setState({show:!1})}},"Cancel"),React.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},"Submit")))))}}]),t}(React.Component);a.default=x},{"../../dispatcher/app_dispatcher.jsx":281,"../../stores/modal_store.jsx":328,"../../stores/user_store.jsx":335,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],264:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/utils.jsx"),v=s(b),_=e("../../utils/constants.jsx"),E=n(_),y=e("../../stores/channel_store.jsx"),R=n(y),C=e("../loading_screen.jsx"),w=n(C),S=function(e){function t(){(0,o.default)(this,t);var e=(0,m.default)(this,(0,l.default)(t).call(this));return e.getHooks=e.getHooks.bind(e),e.addNewHook=e.addNewHook.bind(e),e.updateChannelId=e.updateChannelId.bind(e),e.state={hooks:[],channelId:R.default.getByName(E.default.DEFAULT_CHANNEL).id,getHooksComplete:!1},e}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.getHooks()}},{key:"addNewHook",value:function(){var e=this,t={};t.channel_id=this.state.channelId,g.addIncomingHook(t,function(t){var a=e.state.hooks;a||(a=[]),a.push(t),e.setState({hooks:a})},function(t){e.setState({serverError:t})})}},{key:"removeHook",value:function(e){var t=this,a={};a.id=e,g.deleteIncomingHook(a,function(){for(var a=t.state.hooks,s=-1,n=0;n<a.length;n++)if(a[n].id===e){s=n;break}-1!==s&&a.splice(s,1),t.setState({hooks:a})},function(e){t.setState({serverError:e})})}},{key:"getHooks",value:function(){var e=this;g.listIncomingHooks(function(t){var a=e.state;t&&(a.hooks=t),a.getHooksComplete=!0,e.setState(a)},function(t){e.setState({serverError:t})})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"render",value:function(){var e=this,t=void 0;this.state.serverError&&(t=React.createElement("label",{className:"has-error"},this.state.serverError));var a=R.default.getAll(),s=[];a.forEach(function(e){e.type!==E.default.DM_CHANNEL&&s.push(React.createElement("option",{key:"incoming-hook"+e.id,value:e.id},e.display_name))});var n="";""===this.state.channelId&&(n=" disable");var r=[];this.state.hooks.forEach(function(t){var a=R.default.get(t.channel_id);a&&r.push(React.createElement("div",{key:t.id,className:"webhook__item"},React.createElement("div",{className:"padding-top x2 webhook__url"},React.createElement("strong",null,"URL: "),React.createElement("span",{className:"word-break--all"},v.getWindowLocationOrigin()+"/hooks/"+t.id)),React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Channel: "),a.display_name),React.createElement("a",{className:"webhook__remove",href:"#",onClick:e.removeHook.bind(e,t.id)},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("div",{className:"padding-top x2 divider-light"})))});var l=void 0;l=this.state.getHooksComplete?r.length>0?r:React.createElement("div",{className:"padding-top x2"},"None"):React.createElement(w.default,null);var i=React.createElement("div",{className:"webhooks__container"},React.createElement("label",{className:"control-label padding-top x2"},"Existing incoming webhooks"),React.createElement("div",{className:"padding-top divider-light"}),React.createElement("div",{className:"webhooks__list"},l));return React.createElement("div",{key:"addIncomingHook"},"Create webhook URLs for use in external integrations. Please see ",React.createElement("a",{href:"http://mattermost.org/webhooks",target:"_blank"},"http://mattermost.org/webhooks")," to learn more.",React.createElement("div",null,React.createElement("label",{className:"control-label padding-top x2"},"Add a new incoming webhook")),React.createElement("div",{className:"row padding-top"},React.createElement("div",{className:"col-sm-10 padding-bottom"},React.createElement("select",{ref:"channelName",className:"form-control",value:this.state.channelId,onChange:this.updateChannelId},s),t),React.createElement("div",{className:"col-sm-2 col-xs-4 no-padding--left padding-bottom"},React.createElement("a",{className:"btn form-control no-padding btn-sm btn-primary"+n,href:"#",onClick:this.addNewHook},"Add"))),i)}}]),t}(React.Component);a.default=S},{"../../stores/channel_store.jsx":325,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"../loading_screen.jsx":173,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],265:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/client.jsx"),g=s(f),b=e("../../utils/utils.jsx"),v=s(b),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.setupInitialState=a.setupInitialState.bind(a),a.setLanguage=a.setLanguage.bind(a),a.changeLanguage=a.changeLanguage.bind(a),a.submitUser=a.submitUser.bind(a),a.state=a.setupInitialState(e),a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"setupInitialState",value:function(e){var t=e.user;return{languages:v.languages(),locale:t.locale}}},{key:"setLanguage",value:function(e){this.setState({locale:e.target.value})}},{key:"changeLanguage",value:function(e){e.preventDefault();var t=this.props.user,a=this.state.locale;t.locale=a,this.submitUser(t)}},{key:"submitUser",value:function(e){var t=this;g.updateUser(e,function(){window.location.reload(!0)},function(e){var a=void 0;a=e.message?e.message:e,t.setState({serverError:a})})}},{key:"render",value:function(){var e=void 0;this.state.serverError&&(e=React.createElement("label",{className:"has-error"},this.state.serverError));var t=[];return this.state.languages.forEach(function(e){t.push(React.createElement("option",{key:e.value,value:e.value},e.name))}),React.createElement("div",{key:"changeLanguage"},React.createElement("br",null),React.createElement("label",{className:"control-label"},"Change interface language"),React.createElement("div",{className:"padding-top"},React.createElement("select",{ref:"language",className:"form-control",value:this.state.locale,onChange:this.setLanguage},t),e,React.createElement("div",{className:"padding-top"},React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",onClick:this.changeLanguage},"Set language"))))}}]),t}(React.Component);a.default=_,_.propTypes={user:React.PropTypes.object}},{"../../utils/client.jsx":338,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],266:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/assign"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../loading_screen.jsx"),v=n(b),_=e("../../stores/channel_store.jsx"),E=n(_),y=e("../../utils/client.jsx"),R=s(y),C=e("../../utils/constants.jsx"),w=n(C),S=function(e){
function t(){(0,u.default)(this,t);var e=(0,h.default)(this,(0,o.default)(t).call(this));return e.getHooks=e.getHooks.bind(e),e.addNewHook=e.addNewHook.bind(e),e.updateChannelId=e.updateChannelId.bind(e),e.updateTriggerWords=e.updateTriggerWords.bind(e),e.updateCallbackURLs=e.updateCallbackURLs.bind(e),e.state={hooks:[],channelId:"",triggerWords:"",callbackURLs:"",getHooksComplete:!1},e}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.getHooks()}},{key:"addNewHook",value:function(e){var t=this;if(e.preventDefault(),(""!==this.state.channelId||""!==this.state.triggerWords)&&""!==this.state.callbackURLs){var a={};a.channel_id=this.state.channelId,0!==this.state.triggerWords.length&&(a.trigger_words=this.state.triggerWords.trim().split(",")),a.callback_urls=this.state.callbackURLs.split("\n").map(function(e){return e.trim()}),R.addOutgoingHook(a,function(e){var a=(0,l.default)([],t.state.hooks);a||(a=[]),a.push(e),t.setState({hooks:a,addError:null,channelId:"",triggerWords:"",callbackURLs:""})},function(e){t.setState({addError:e.message})})}}},{key:"removeHook",value:function(e){var t=this,a={};a.id=e,R.deleteOutgoingHook(a,function(){for(var a=t.state.hooks,s=-1,n=0;n<a.length;n++)if(a[n].id===e){s=n;break}-1!==s&&a.splice(s,1),t.setState({hooks:a})},function(e){t.setState({editError:e.message})})}},{key:"regenToken",value:function(e){var t=this,a={};a.id=e,R.regenOutgoingHookToken(a,function(a){for(var s=(0,l.default)([],t.state.hooks),n=0;n<s.length;n++)if(s[n].id===e){s[n]=a;break}t.setState({hooks:s,editError:null})},function(e){t.setState({editError:e.message})})}},{key:"getHooks",value:function(){var e=this;R.listOutgoingHooks(function(t){t&&e.setState({hooks:t,getHooksComplete:!0,editError:null})},function(t){e.setState({editError:t.message})})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"updateTriggerWords",value:function(e){this.setState({triggerWords:e.target.value})}},{key:"updateCallbackURLs",value:function(e){this.setState({callbackURLs:e.target.value})}},{key:"render",value:function(){var e=this,t=void 0;this.state.addError&&(t=React.createElement("label",{className:"has-error"},this.state.addError));var a=void 0;this.state.editError&&(t=React.createElement("label",{className:"has-error"},this.state.editError));var s=E.default.getAll(),n=[];n.push(React.createElement("option",{key:"select-channel",value:""},"--- Select a channel ---")),s.forEach(function(e){e.type===w.default.OPEN_CHANNEL&&n.push(React.createElement("option",{key:"outgoing-hook"+e.id,value:e.id},e.display_name))});var r=[];this.state.hooks.forEach(function(t){var a=E.default.get(t.channel_id);if(a||!t.channel_id||0===t.channel_id.length){var s=void 0;a&&(s=React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Channel: "),a.display_name));var n=void 0;t.trigger_words&&0!==t.trigger_words.length&&(n=React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Trigger Words: "),t.trigger_words.join(", "))),r.push(React.createElement("div",{key:t.id,className:"webhook__item"},React.createElement("div",{className:"padding-top x2 webhook__url"},React.createElement("strong",null,"URLs: "),React.createElement("span",{className:"word-break--all"},t.callback_urls.join(", "))),s,n,React.createElement("div",{className:"padding-top"},React.createElement("strong",null,"Token: "),t.token),React.createElement("div",{className:"padding-top"},React.createElement("a",{className:"text-danger",href:"#",onClick:e.regenToken.bind(e,t.id)},"Regen Token"),React.createElement("a",{className:"webhook__remove",href:"#",onClick:e.removeHook.bind(e,t.id)},React.createElement("span",{"aria-hidden":"true"},"×"))),React.createElement("div",{className:"padding-top x2 divider-light"})))}});var l=void 0;l=this.state.getHooksComplete?r.length>0?r:React.createElement("div",{className:"padding-top x2"},"None"):React.createElement(v.default,null);var i=React.createElement("div",{className:"webhooks__container"},React.createElement("label",{className:"control-label padding-top x2"},"Existing outgoing webhooks"),React.createElement("div",{className:"padding-top divider-light"}),React.createElement("div",{className:"webhooks__list"},l)),o=""===this.state.channelId&&""===this.state.triggerWords||""===this.state.callbackURLs;return React.createElement("div",{key:"addOutgoingHook"},"Create webhooks to send new message events to an external integration. Please see ",React.createElement("a",{href:"http://mattermost.org/webhooks",target:"_blank"},"http://mattermost.org/webhooks")," to learn more.",React.createElement("div",null,React.createElement("label",{className:"control-label padding-top x2"},"Add a new outgoing webhook")),React.createElement("div",{className:"padding-top divider-light"}),React.createElement("div",{className:"padding-top"},React.createElement("div",null,React.createElement("label",{className:"control-label"},"Channel"),React.createElement("div",{className:"padding-top"},React.createElement("select",{ref:"channelName",className:"form-control",value:this.state.channelId,onChange:this.updateChannelId},n)),React.createElement("div",{className:"padding-top"},"Only public channels can be used")),React.createElement("div",{className:"padding-top x2"},React.createElement("label",{className:"control-label"},"Trigger Words:"),React.createElement("div",{className:"padding-top"},React.createElement("input",{ref:"triggerWords",className:"form-control",value:this.state.triggerWords,onChange:this.updateTriggerWords,placeholder:"Optional if channel selected"})),React.createElement("div",{className:"padding-top"},"Comma separated words to trigger on")),React.createElement("div",{className:"padding-top x2"},React.createElement("label",{className:"control-label"},"Callback URLs:"),React.createElement("div",{className:"padding-top"},React.createElement("textarea",{ref:"callbackURLs",className:"form-control no-resize",value:this.state.callbackURLs,resize:!1,rows:3,onChange:this.updateCallbackURLs,placeholder:"Each URL must start with http:// or https://"})),React.createElement("div",{className:"padding-top"},"New line separated URLs that will receive the HTTP POST event"),t),React.createElement("div",{className:"padding-top padding-bottom"},React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",disabled:o,onClick:this.addNewHook},"Add"))),i,a)}}]),t}(React.Component);a.default=S},{"../../stores/channel_store.jsx":325,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../loading_screen.jsx":173,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],267:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../utils/utils.jsx"),g=s(f),b=e("../../utils/constants.jsx"),v=n(b),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props.theme,a=[];for(var s in v.default.THEMES)v.default.THEMES.hasOwnProperty(s)&&!function(){var n=$.extend(!0,{},v.default.THEMES[s]),r="";n.type===t.type&&(r="active"),a.push(React.createElement("div",{className:"col-xs-6 col-sm-3 premade-themes",key:"premade-theme-key"+s},React.createElement("div",{className:r,onClick:function(){return e.props.updateTheme(n)}},React.createElement("label",null,React.createElement("img",{className:"img-responsive",src:"/static/images/themes/"+n.type.toLowerCase()+".png"}),React.createElement("div",{className:"theme-label"},g.toTitleCase(n.type))))))}();return React.createElement("div",{className:"row"},a)}}]),t}(React.Component);a.default=_,_.propTypes={theme:React.PropTypes.object.isRequired,updateTheme:React.PropTypes.func.isRequired}},{"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],268:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../../stores/user_store.jsx"),g=n(f),b=e("../../utils/utils.jsx"),v=s(b),_=e("./user_settings_notifications.jsx"),E=n(_),y=e("./user_settings_security.jsx"),R=n(y),C=e("./user_settings_general.jsx"),w=n(C),S=e("./user_settings_appearance.jsx"),k=n(S),N=e("./user_settings_developer.jsx"),M=n(N),x=e("./user_settings_integrations.jsx"),j=n(x),T=e("./user_settings_display.jsx"),P=n(T),O=e("./user_settings_advanced.jsx"),I=n(O),D=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.getActiveTab=a.getActiveTab.bind(a),a.onListenerChange=a.onListenerChange.bind(a),a.state={user:g.default.getCurrentUser()},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){g.default.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){g.default.removeChangeListener(this.onListenerChange)}},{key:"getActiveTab",value:function(){return this.refs.activeTab}},{key:"onListenerChange",value:function(){var e=g.default.getCurrentUser();v.areObjectsEqual(this.state.user,e)||this.setState({user:e})}},{key:"render",value:function(){return"general"===this.props.activeTab?React.createElement("div",null,React.createElement(w.default,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"security"===this.props.activeTab?React.createElement("div",null,React.createElement(R.default,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setEnforceFocus:this.props.setEnforceFocus})):"notifications"===this.props.activeTab?React.createElement("div",null,React.createElement(E.default,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"appearance"===this.props.activeTab?React.createElement("div",null,React.createElement(k.default,{ref:"activeTab",activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setEnforceFocus:this.props.setEnforceFocus,setRequireConfirm:this.props.setRequireConfirm})):"developer"===this.props.activeTab?React.createElement("div",null,React.createElement(M.default,{ref:"activeTab",activeSection:this.props.activeSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"integrations"===this.props.activeTab?React.createElement("div",null,React.createElement(j.default,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"display"===this.props.activeTab?React.createElement("div",null,React.createElement(P.default,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"advanced"===this.props.activeTab?React.createElement("div",null,React.createElement(I.default,{ref:"activeTab",user:this.state.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):React.createElement("div",null)}}]),t}(React.Component);a.default=D,D.propTypes={activeTab:React.PropTypes.string,activeSection:React.PropTypes.string,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired,setEnforceFocus:React.PropTypes.func.isRequired,setRequireConfirm:React.PropTypes.func.isRequired}},{"../../stores/user_store.jsx":335,"../../utils/utils.jsx":344,"./user_settings_advanced.jsx":269,"./user_settings_appearance.jsx":270,"./user_settings_developer.jsx":271,"./user_settings_display.jsx":272,"./user_settings_general.jsx":273,"./user_settings_integrations.jsx":274,"./user_settings_notifications.jsx":276,"./user_settings_security.jsx":277,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],269:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/keys"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../../utils/client.jsx"),v=s(b),_=e("../setting_item_min.jsx"),E=n(_),y=e("../setting_item_max.jsx"),R=n(y),C=e("../../utils/constants.jsx"),w=n(C),S=e("../../stores/preference_store.jsx"),k=n(S),N=w.default.PRE_RELEASE_FEATURES,M=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));a.updateSection=a.updateSection.bind(a),a.updateSetting=a.updateSetting.bind(a),a.toggleFeature=a.toggleFeature.bind(a),a.saveEnabledFeatures=a.saveEnabledFeatures.bind(a);var s=(0,l.default)(N),n=k.default.getCategory(w.default.Preferences.CATEGORY_ADVANCED_SETTINGS),r={send_on_ctrl_enter:k.default.getPreference(w.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter",{value:"false"}).value},i=0;return n.forEach(function(e){s.forEach(function(t){var a=N[t];e.name===w.default.FeatureTogglePrefix+a.label&&(r[e.name]=e.value,"true"===e.value&&i++)})}),a.state={preReleaseFeatures:N,settings:r,preReleaseFeaturesKeys:s,enabledFeatures:i},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"updateSetting",value:function(e,t){var a=this.state.settings;a[e]=t,this.setState(a)}},{key:"toggleFeature",value:function(e,t){var a=this,s=this.state.settings;s[w.default.FeatureTogglePrefix+e]=String(t);var n=0;(0,l.default)(this.state.settings).forEach(function(e){0===e.lastIndexOf(w.default.FeatureTogglePrefix)&&"true"===a.state.settings[e]&&n++}),this.setState({settings:s,enabledFeatures:n})}},{key:"saveEnabledFeatures",value:function(){var e=[];(0,l.default)(this.state.settings).forEach(function(t){0===t.lastIndexOf(w.default.FeatureTogglePrefix)&&e.push(t)}),this.handleSubmit(e)}},{key:"handleSubmit",value:function(e){var t=this,a=[];(Array.isArray(e)?e:[e]).forEach(function(e){a.push(k.default.setPreference(w.default.Preferences.CATEGORY_ADVANCED_SETTINGS,e,String(t.state.settings[e])))}),v.savePreferences(a,function(){k.default.emitChange(),t.updateSection("")},function(e){t.setState({serverError:e.message})})}},{key:"updateSection",value:function(e){this.props.updateSection(e)}},{key:"render",value:function(){var e=this,t=this.state.serverError||null,a=void 0;if("advancedCtrlSend"===this.props.activeSection){var s=["true"===this.state.settings.send_on_ctrl_enter,"false"===this.state.settings.send_on_ctrl_enter],n=[React.createElement("div",{key:"ctrlSendSetting"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:s[0],onChange:this.updateSetting.bind(this,"send_on_ctrl_enter","true")}),"On"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:s[1],onChange:this.updateSetting.bind(this,"send_on_ctrl_enter","false")}),"Off"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"If enabled 'Enter' inserts a new line and 'Ctrl + Enter' submits the message."))];a=React.createElement(R.default,{title:"Send messages on Ctrl + Enter",inputs:n,submit:function(){return e.handleSubmit("send_on_ctrl_enter")},server_error:t,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}else a=React.createElement(E.default,{title:"Send messages on Ctrl + Enter",describe:"true"===this.state.settings.send_on_ctrl_enter?"On":"Off",updateSection:function(){return e.props.updateSection("advancedCtrlSend")}});var r=void 0,l=void 0;return this.state.preReleaseFeaturesKeys.length>0&&(l=React.createElement("div",{className:"divider-light"}),"advancedPreviewFeatures"===this.props.activeSection?!function(){var a=[];e.state.preReleaseFeaturesKeys.forEach(function(t){var s=e.state.preReleaseFeatures[t];a.push(React.createElement("div",{key:"advancedPreviewFeatures_"+s.label},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:"true"===e.state.settings[w.default.FeatureTogglePrefix+s.label],onChange:function(t){e.toggleFeature(s.label,t.target.checked)}}),s.description))))}),a.push(React.createElement("div",{key:"advancedPreviewFeatures_helptext"},React.createElement("br",null),"Check any pre-released features you'd like to preview.  You may also need to refresh the page before the setting will take effect.")),r=React.createElement(R.default,{title:"Preview pre-release features",inputs:a,submit:e.saveEnabledFeatures,server_error:t,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}():r=React.createElement(E.default,{title:"Preview pre-release features",describe:this.state.enabledFeatures+(1===this.state.enabledFeatures?" Feature ":" Features ")+"enabled",updateSection:function(){return e.props.updateSection("advancedPreviewFeatures")}})),React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Advanced Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Advanced Settings"),React.createElement("div",{className:"divider-dark first"}),a,l,r,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=M,M.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired}},{"../../stores/preference_store.jsx":330,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],270:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/assign"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("./custom_theme_chooser.jsx"),v=n(b),_=e("./premade_theme_chooser.jsx"),E=n(_),y=e("../../stores/user_store.jsx"),R=n(y),C=e("../../dispatcher/app_dispatcher.jsx"),w=n(C),S=e("../../utils/client.jsx"),k=s(S),N=e("../../utils/utils.jsx"),M=s(N),x=e("../../utils/constants.jsx"),j=n(x),T=j.default.ActionTypes,P=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));return a.onChange=a.onChange.bind(a),a.submitTheme=a.submitTheme.bind(a),a.updateTheme=a.updateTheme.bind(a),a.deactivate=a.deactivate.bind(a),a.resetFields=a.resetFields.bind(a),a.handleImportModal=a.handleImportModal.bind(a),a.state=a.getStateFromStores(),a.originalTheme=(0,l.default)({},a.state.theme),a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){R.default.addChangeListener(this.onChange),"theme"===this.props.activeSection&&$(ReactDOM.findDOMNode(this.refs[this.state.theme])).addClass("active-border")}},{key:"componentDidUpdate",value:function(){"theme"===this.props.activeSection&&($(".color-btn").removeClass("active-border"),$(ReactDOM.findDOMNode(this.refs[this.state.theme])).addClass("active-border"))}},{key:"componentWillUnmount",value:function(){R.default.removeChangeListener(this.onChange)}},{key:"getStateFromStores",value:function(){var e=R.default.getCurrentUser(),t=null;t=$.isPlainObject(e.theme_props)&&!$.isEmptyObject(e.theme_props)?(0,l.default)({},e.theme_props):$.extend(!0,{},j.default.THEMES.default);var a="premade";return"custom"===t.type&&(a="custom"),t.codeTheme||(t.codeTheme=j.default.DEFAULT_CODE_THEME),{theme:t,type:a}}},{key:"onChange",value:function(){var e=this.getStateFromStores();M.areObjectsEqual(this.state,e)||this.setState(e),this.props.setEnforceFocus(!0)}},{key:"scrollToTop",value:function(){$(".ps-container.modal-body").scrollTop(0),$(".ps-container.modal-body").perfectScrollbar("update")}},{key:"submitTheme",value:function(e){var t=this;e.preventDefault();var a=R.default.getCurrentUser();a.theme_props=this.state.theme,k.updateUser(a,function(e){w.default.handleServerAction({type:T.RECIEVED_ME,me:e}),t.props.setRequireConfirm(!1),t.originalTheme=(0,l.default)({},t.state.theme),t.scrollToTop()},function(e){var a=t.getStateFromStores();a.serverError=e,t.setState(a)})}},{key:"updateTheme",value:function(e){var t=this.state.theme.length===e.length;if(!t)for(var a in e)if(e.hasOwnProperty(a)&&this.state.theme[a]!==e[a]){t=!0;break}this.props.setRequireConfirm(t),this.setState({theme:e}),M.applyTheme(e)}},{key:"updateType",value:function(e){this.setState({type:e})}},{key:"deactivate",value:function(){var e=this.getStateFromStores();M.applyTheme(e.theme)}},{key:"resetFields",value:function(){var e=this.getStateFromStores();e.serverError=null,this.setState(e),this.scrollToTop(),M.applyTheme(e.theme),this.props.setRequireConfirm(!1)}},{key:"handleImportModal",value:function(){w.default.handleViewAction({type:T.TOGGLE_IMPORT_THEME_MODAL,value:!0}),this.props.setEnforceFocus(!1)}},{key:"render",value:function(){var e;this.state.serverError&&(e=this.state.serverError);var t="custom"===this.state.type,a=void 0,s=void 0;t?a=React.createElement(v.default,{theme:this.state.theme,updateTheme:this.updateTheme}):s=React.createElement(E.default,{theme:this.state.theme,updateTheme:this.updateTheme});var n=React.createElement("div",{className:"section-max appearance-section"},React.createElement("div",{className:"col-sm-12"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:!t,onChange:this.updateType.bind(this,"premade")}),"Theme Colors"),React.createElement("br",null)),s,React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:t,onChange:this.updateType.bind(this,"custom")}),"Custom Theme"),React.createElement("br",null)),a,React.createElement("hr",null),e,React.createElement("a",{className:"btn btn-sm btn-primary",href:"#",onClick:this.submitTheme},"Save"),React.createElement("a",{className:"btn btn-sm theme",href:"#",onClick:this.resetFields},"Cancel")));return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Appearance Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Appearance Settings"),React.createElement("div",{className:"divider-dark first"}),n,React.createElement("div",{className:"divider-dark"}),React.createElement("br",null),React.createElement("a",{className:"theme",onClick:this.handleImportModal},"Import theme colors from Slack")))}}]),t}(React.Component);a.default=P,P.defaultProps={activeSection:""},P.propTypes={activeSection:React.PropTypes.string,updateTab:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired,setRequireConfirm:React.PropTypes.func.isRequired,setEnforceFocus:React.PropTypes.func.isRequired}},{"../../dispatcher/app_dispatcher.jsx":281,"../../stores/user_store.jsx":335,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"./custom_theme_chooser.jsx":262,"./premade_theme_chooser.jsx":267,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],271:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../setting_item_min.jsx"),g=n(f),b=e("../setting_item_max.jsx"),v=n(b),_=e("../../dispatcher/event_helpers.jsx"),E=s(_),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,m.default)(this,(0,l.default)(t).call(this,e));return a.register=a.register.bind(a),a.state={},a}return(0,h.default)(t,e),(0,u.default)(t,[{key:"register",value:function(){this.props.closeModal(),E.showRegisterAppModal()}},{key:"render",value:function(){var e,t=this;if("app"===this.props.activeSection){var a=[];a.push(React.createElement("div",{key:"registerbtn",className:"form-group"},React.createElement("div",{className:"col-sm-7"},React.createElement("a",{className:"btn btn-sm btn-primary",onClick:this.register},"Register New Application")))),e=React.createElement(v.default,{title:"Applications (Preview)",inputs:a,updateSection:function(e){t.props.updateSection(""),e.preventDefault()}})}else e=React.createElement(g.default,{title:"Applications (Preview)",describe:"Open to register a new third-party application",updateSection:function(){t.props.updateSection("app")}});return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Developer Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Developer Settings"),React.createElement("div",{className:"divider-dark first"}),e,React.createElement("div",{className:"divider-dark"})))}}]),t}(React.Component);a.default=y,y.defaultProps={activeSection:""},y.propTypes={activeSection:React.PropTypes.string,updateSection:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired}},{"../../dispatcher/event_helpers.jsx":282,"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],272:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=k.default.getPreference(w.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"use_military_time",{value:"false"}),t=k.default.getPreference(w.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"name_format",{value:"username"}),a=k.default.getPreference(w.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"selected_font",{value:w.default.DEFAULT_FONT});return{militaryTime:e.value,nameFormat:t.value,selectedFont:a.value}}var l=e("babel-runtime/core-js/object/keys"),i=n(l),o=e("babel-runtime/core-js/object/get-prototype-of"),c=n(o),u=e("babel-runtime/helpers/classCallCheck"),d=n(u),m=e("babel-runtime/helpers/createClass"),p=n(m),h=e("babel-runtime/helpers/possibleConstructorReturn"),f=n(h),g=e("babel-runtime/helpers/inherits"),b=n(g);Object.defineProperty(a,"__esModule",{value:!0});var v=e("../../utils/client.jsx"),_=e("../setting_item_min.jsx"),E=n(_),y=e("../setting_item_max.jsx"),R=n(y),C=e("../../utils/constants.jsx"),w=n(C),S=e("../../stores/preference_store.jsx"),k=n(S),N=e("./manage_languages.jsx"),M=n(N),x=e("../../utils/utils.jsx"),j=s(x),T=w.default.PRE_RELEASE_FEATURES,P=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(0,c.default)(t).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleClockRadio=a.handleClockRadio.bind(a),a.handleNameRadio=a.handleNameRadio.bind(a),a.handleFont=a.handleFont.bind(a),a.updateSection=a.updateSection.bind(a),a.updateState=a.updateState.bind(a),a.deactivate=a.deactivate.bind(a),a.state=r(),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"handleSubmit",value:function(){var e=this,t=k.default.setPreference(w.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"use_military_time",this.state.militaryTime),a=k.default.setPreference(w.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"name_format",this.state.nameFormat),s=k.default.setPreference(w.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"selected_font",this.state.selectedFont);
(0,v.savePreferences)([t,a,s],function(){k.default.emitChange(),e.updateSection("")},function(t){e.setState({serverError:t.message})})}},{key:"handleClockRadio",value:function(e){this.setState({militaryTime:e})}},{key:"handleNameRadio",value:function(e){this.setState({nameFormat:e})}},{key:"handleFont",value:function(e){j.applyFont(e),this.setState({selectedFont:e})}},{key:"updateSection",value:function(e){this.updateState(),this.props.updateSection(e)}},{key:"updateState",value:function(){var e=r();j.areObjectsEqual(e,this.state)||(this.handleFont(e.selectedFont),this.setState(e))}},{key:"deactivate",value:function(){this.updateState()}},{key:"render",value:function(){var e=this,t=this.state.serverError||null,a=void 0,s=void 0,n=void 0,r=void 0;if("clock"===this.props.activeSection){var l=[!1,!1];"true"===this.state.militaryTime?l[1]=!0:l[0]=!0;var o=function(t){e.updateSection(""),t.preventDefault()},c=[React.createElement("div",{key:"userDisplayClockOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:l[0],onChange:this.handleClockRadio.bind(this,"false")}),"12-hour clock (example: 4:00 PM)"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:l[1],onChange:this.handleClockRadio.bind(this,"true")}),"24-hour clock (example: 16:00)"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Select how you prefer time displayed."))];a=React.createElement(R.default,{title:"Clock Display",inputs:c,submit:this.handleSubmit,server_error:t,updateSection:o})}else{var u="";u="true"===this.state.militaryTime?"24-hour clock (example: 16:00)":"12-hour clock (example: 4:00 PM)";var o=function(){e.props.updateSection("clock")};a=React.createElement(E.default,{title:"Clock Display",describe:u,updateSection:o})}var d="Show username (team default)",m="Show nickname if one exists, otherwise show first and last name",p="Show first and last name";if("name_format"===this.props.activeSection){var h=[!1,!1,!1];"nickname_full_name"===this.state.nameFormat?h[0]=!0:"full_name"===this.state.nameFormat?h[2]=!0:h[1]=!0;var f=[React.createElement("div",{key:"userDisplayNameOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:h[1],onChange:this.handleNameRadio.bind(this,"username")}),d),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:h[0],onChange:this.handleNameRadio.bind(this,"nickname_full_name")}),m),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:h[2],onChange:this.handleNameRadio.bind(this,"full_name")}),p),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Set how to display other user's names in posts and the Direct Messages list."))];s=React.createElement(R.default,{title:"Teammate Name Display",inputs:f,submit:this.handleSubmit,server_error:t,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}else{var u="";u="username"===this.state.nameFormat?d:"full_name"===this.state.nameFormat?p:m,s=React.createElement(E.default,{title:"Teammate Name Display",describe:u,updateSection:function(){e.props.updateSection("name_format")}})}if("font"===this.props.activeSection?!function(){var a=[];(0,i.default)(w.default.FONTS).forEach(function(e,t){var s=w.default.FONTS[e];a.push(React.createElement("option",{key:"font_"+t,value:e,className:s},e))});var s=[React.createElement("div",{key:"userDisplayNameOptions"},React.createElement("div",{className:"dropdown"},React.createElement("select",{className:"form-control",type:"text",value:e.state.selectedFont,onChange:function(t){return e.handleFont(t.target.value)}},a)),React.createElement("div",null,React.createElement("br",null),"Select the font displayed in the Mattermost user interface."))];n=React.createElement(R.default,{title:"Display Font",inputs:s,submit:e.handleSubmit,server_error:t,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}():n=React.createElement(E.default,{title:"Display Font",describe:this.state.selectedFont,updateSection:function(){e.props.updateSection("font")}}),j.isFeatureEnabled(T.LOC_PREVIEW))if("languages"===this.props.activeSection){var g=[];g.push(React.createElement(M.default,{user:this.props.user,key:"languages-ui"})),r=React.createElement(R.default,{title:"Language",width:"medium",inputs:g,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}else{var b="English";j.languages().forEach(function(t){t.value===e.props.user.locale&&(b=t.name)}),r=React.createElement(E.default,{title:"Language",width:"medium",describe:b,updateSection:function(){e.updateSection("languages")}})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Display Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Display Settings"),React.createElement("div",{className:"divider-dark first"}),n,React.createElement("div",{className:"divider-dark"}),a,React.createElement("div",{className:"divider-dark"}),s,React.createElement("div",{className:"divider-dark"}),r))}}]),t}(React.Component);a.default=P,P.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired}},{"../../stores/preference_store.jsx":330,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"./manage_languages.jsx":265,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/core-js/object/keys":11,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],273:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/assign"),l=n(r),i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../setting_item_min.jsx"),v=n(b),_=e("../setting_item_max.jsx"),E=n(_),y=e("../setting_picture.jsx"),R=n(y),C=e("../../stores/user_store.jsx"),w=n(C),S=e("../../stores/error_store.jsx"),k=n(S),N=e("../../utils/client.jsx"),M=s(N),x=e("../../utils/constants.jsx"),j=n(x),T=e("../../utils/async_client.jsx"),P=s(T),O=e("../../utils/utils.jsx"),I=s(O),D=function(e){function a(e){(0,u.default)(this,a);var t=(0,h.default)(this,(0,o.default)(a).call(this,e));return t.submitActive=!1,t.submitUsername=t.submitUsername.bind(t),t.submitNickname=t.submitNickname.bind(t),t.submitName=t.submitName.bind(t),t.submitEmail=t.submitEmail.bind(t),t.submitUser=t.submitUser.bind(t),t.submitPicture=t.submitPicture.bind(t),t.updateUsername=t.updateUsername.bind(t),t.updateFirstName=t.updateFirstName.bind(t),t.updateLastName=t.updateLastName.bind(t),t.updateNickname=t.updateNickname.bind(t),t.updateEmail=t.updateEmail.bind(t),t.updateConfirmEmail=t.updateConfirmEmail.bind(t),t.updatePicture=t.updatePicture.bind(t),t.updateSection=t.updateSection.bind(t),t.state=t.setupInitialState(e),t}return(0,g.default)(a,e),(0,m.default)(a,[{key:"submitUsername",value:function(e){e.preventDefault();var t=(0,l.default)({},this.props.user),a=this.state.username.trim().toLowerCase(),s=I.isValidUsername(a);return"Cannot use a reserved word as a username."===s?void this.setState({clientError:"This username is reserved, please choose a new one."}):s?void this.setState({clientError:"Username must begin with a letter, and contain between "+j.default.MIN_USERNAME_LENGTH+" to "+j.default.MAX_USERNAME_LENGTH+" lowercase characters made up of numbers, letters, and the symbols '.', '-' and '_'."}):t.username===a?void this.updateSection(""):(t.username=a,void this.submitUser(t,!1))}},{key:"submitNickname",value:function(e){e.preventDefault();var t=(0,l.default)({},this.props.user),a=this.state.nickname.trim();return t.nickname===a?void this.updateSection(""):(t.nickname=a,void this.submitUser(t,!1))}},{key:"submitName",value:function(e){e.preventDefault();var t=(0,l.default)({},this.props.user),a=this.state.firstName.trim(),s=this.state.lastName.trim();return t.first_name===a&&t.last_name===s?void this.updateSection(""):(t.first_name=a,t.last_name=s,void this.submitUser(t,!1))}},{key:"submitEmail",value:function(e){e.preventDefault();var t=(0,l.default)({},this.props.user),a=this.state.email.trim().toLowerCase(),s=this.state.confirmEmail.trim().toLowerCase();return""!==a&&I.isEmail(a)?a!==s?void this.setState({emailError:"The new emails you entered do not match.",clientError:"",serverError:""}):t.email===a?void this.updateSection(""):(t.email=a,void this.submitUser(t,!0)):void this.setState({emailError:"Please enter a valid email address.",clientError:"",serverError:""})}},{key:"submitUser",value:function(e,a){var s=this;M.updateUser(e,function(){s.updateSection(""),P.getMe();var n="true"===t.window.mm_config.SendEmailNotifications&&"true"===t.window.mm_config.RequireEmailVerification&&a;n&&(k.default.storeLastError({message:"Check your email at "+e.email+" to verify the address."}),k.default.emitChange(),s.setState({emailChangeInProgress:!0}))},function(e){var t=void 0;t=e.message?e.message:e,s.setState({serverError:t,emailError:"",clientError:""})})}},{key:"submitPicture",value:function(e){var t=this;if(e.preventDefault(),this.state.picture&&this.submitActive){var a=this.state.picture;if("image/jpeg"!==a.type&&"image/png"!==a.type)return void this.setState({clientError:"Only JPG or PNG images may be used for profile pictures."});if(a.size>j.default.MAX_FILE_SIZE)return void this.setState({clientError:"Unable to upload profile image. File is too large."});var s=new FormData;s.append("image",a,a.name),this.setState({loadingPicture:!0}),M.uploadProfileImage(s,function(){t.submitActive=!1,P.getMe(),window.location.reload()},function(e){var a=t.setupInitialState(t.props);a.serverError=e.message,t.setState(a)})}}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"updateFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"updateLastName",value:function(e){this.setState({lastName:e.target.value})}},{key:"updateNickname",value:function(e){this.setState({nickname:e.target.value})}},{key:"updateEmail",value:function(e){this.setState({email:e.target.value})}},{key:"updateConfirmEmail",value:function(e){this.setState({confirmEmail:e.target.value})}},{key:"updatePicture",value:function(e){e.target.files&&e.target.files[0]?(this.setState({picture:e.target.files[0]}),this.submitActive=!0,this.setState({clientError:null})):this.setState({picture:null})}},{key:"updateSection",value:function(e){var t=this.state.emailChangeInProgress;this.setState((0,l.default)({},this.setupInitialState(this.props),{emailChangeInProgress:t,clientError:"",serverError:"",emailError:""})),this.submitActive=!1,this.props.updateSection(e)}},{key:"setupInitialState",value:function(e){var t=e.user;return{username:t.username,firstName:t.first_name,lastName:t.last_name,nickname:t.nickname,email:t.email,confirmEmail:"",picture:null,loadingPicture:!1,emailChangeInProgress:!1}}},{key:"render",value:function(){var e=this,a=this.props.user,s=null;this.state.clientError&&(s=this.state.clientError);var n=null;this.state.serverError&&(n=this.state.serverError);var r=null;this.state.emailError&&(r=this.state.emailError);var l=void 0,i=[];if("name"===this.props.activeSection){var o=function(e){e.preventDefault(),this.updateSection(""),this.props.updateTab("notifications")};i.push(React.createElement("div",{key:"firstNameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"First Name"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateFirstName,value:this.state.firstName})))),i.push(React.createElement("div",{key:"lastNameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Last Name"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateLastName,value:this.state.lastName}))));var c=React.createElement("a",{href:"#",onClick:o.bind(this)},"Notifications"),u=React.createElement("span",null,"By default, you will receive mention notifications when someone types your first name. ","Go to "," ",c," ","settings to change this default.");l=React.createElement(E.default,{title:"Full Name",inputs:i,submit:this.submitName,server_error:n,client_error:s,updateSection:function(t){e.updateSection(""),t.preventDefault()},extraInfo:u})}else{var d="";a.first_name&&a.last_name?d=a.first_name+" "+a.last_name:a.first_name?d=a.first_name:a.last_name&&(d=a.last_name),l=React.createElement(v.default,{title:"Full Name",describe:d,updateSection:function(){e.updateSection("name")}})}var m=void 0;if("nickname"===this.props.activeSection){var p="Nickname";I.isMobile()&&(p=""),i.push(React.createElement("div",{key:"nicknameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},p),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateNickname,value:this.state.nickname}))));var u=React.createElement("span",null,"Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.");m=React.createElement(E.default,{title:"Nickname",inputs:i,submit:this.submitNickname,server_error:n,client_error:s,updateSection:function(t){e.updateSection(""),t.preventDefault()},extraInfo:u})}else m=React.createElement(v.default,{title:"Nickname",describe:w.default.getCurrentUser().nickname,updateSection:function(){e.updateSection("nickname")}});var h=void 0;if("username"===this.props.activeSection){var f="Username";I.isMobile()&&(f=""),i.push(React.createElement("div",{key:"usernameSetting",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},f),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateUsername,value:this.state.username}))));var u=React.createElement("span",null,"Pick something easy for teammates to recognize and recall.");h=React.createElement(E.default,{title:"Username",inputs:i,submit:this.submitUsername,server_error:n,client_error:s,updateSection:function(t){e.updateSection(""),t.preventDefault()},extraInfo:u})}else h=React.createElement(v.default,{title:"Username",describe:w.default.getCurrentUser().username,updateSection:function(){e.updateSection("username")}});var g=void 0;if("email"===this.props.activeSection){var b="true"===t.window.mm_config.SendEmailNotifications,_="true"===t.window.mm_config.RequireEmailVerification,y="Email is used for sign-in, notifications, and password reset. Email requires verification if changed.";if(b)if(_){if(this.state.emailChangeInProgress){var C=w.default.getCurrentUser().email;C&&(y="A verification email was sent to "+C+".")}}else y="Email is used for sign-in, notifications, and password reset.";else y=React.createElement("div",{className:"setting-list__hint text-danger"},"Email has been disabled by your system administrator. No notification emails will be sent until it is enabled.");var S=null;""===this.props.user.auth_service?(i.push(React.createElement("div",{key:"emailSetting"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Primary Email"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateEmail,value:this.state.email}))))),i.push(React.createElement("div",{key:"confirmEmailSetting"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Confirm Email"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"text",onChange:this.updateConfirmEmail,value:this.state.confirmEmail}))),y)),S=this.submitEmail):this.props.user.auth_service===j.default.GITLAB_SERVICE&&i.push(React.createElement("div",{key:"oauthEmailInfo",className:"form-group"},React.createElement("div",{className:"setting-list__hint"},"Log in occurs through GitLab. Email cannot be updated."),y)),g=React.createElement(E.default,{title:"Email",inputs:i,submit:S,server_error:n,client_error:r,updateSection:function(t){e.updateSection(""),t.preventDefault()}})}else{var k="";if(""===this.props.user.auth_service)if(this.state.emailChangeInProgress){var C=w.default.getCurrentUser().email;k=C?"New Address: "+C+"\nCheck your email to verify the above address.":"Check your email to verify your new address"}else k=w.default.getCurrentUser().email;else this.props.user.auth_service===j.default.GITLAB_SERVICE&&(k="Log in done through GitLab");g=React.createElement(v.default,{title:"Email",describe:k,updateSection:function(){e.updateSection("email")}})}var N=void 0;if("picture"===this.props.activeSection)N=React.createElement(R.default,{title:"Profile Picture",submit:this.submitPicture,src:"/api/v1/users/"+a.id+"/image?time="+a.last_picture_update+"&"+I.getSessionIndex(),server_error:n,client_error:s,updateSection:function(t){e.updateSection(""),t.preventDefault()},picture:this.state.picture,pictureChange:this.updatePicture,submitActive:this.submitActive,loadingPicture:this.state.loadingPicture});else{var M="Click 'Edit' to upload an image.";a.last_picture_update&&(M="Image last updated "+I.displayDate(a.last_picture_update)),N=React.createElement(v.default,{title:"Profile Picture",describe:M,updateSection:function(){e.updateSection("picture")}})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"General Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"General Settings"),React.createElement("div",{className:"divider-dark first"}),l,React.createElement("div",{className:"divider-light"}),h,React.createElement("div",{className:"divider-light"}),m,React.createElement("div",{className:"divider-light"}),g,React.createElement("div",{className:"divider-light"}),N,React.createElement("div",{className:"divider-dark"})))}}]),a}(React.Component);a.default=D,D.propTypes={user:React.PropTypes.object.isRequired,updateSection:React.PropTypes.func.isRequired,updateTab:React.PropTypes.func.isRequired,activeSection:React.PropTypes.string.isRequired,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../stores/error_store.jsx":326,"../../stores/user_store.jsx":335,"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../../utils/utils.jsx":344,"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"../setting_picture.jsx":220,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],274:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../setting_item_min.jsx"),f=s(h),g=e("../setting_item_max.jsx"),b=s(g),v=e("./manage_incoming_hooks.jsx"),_=s(v),E=e("./manage_outgoing_hooks.jsx"),y=s(E),R=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));return t.updateSection=t.updateSection.bind(t),t.state={},t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"updateSection",value:function(e){this.props.updateSection(e)}},{key:"render",value:function(){var e=this,a=void 0,s=void 0,n=[];return"true"===t.window.mm_config.EnableIncomingWebhooks&&("incoming-hooks"===this.props.activeSection?(n.push(React.createElement(_.default,{key:"incoming-hook-ui"})),a=React.createElement(b.default,{title:"Incoming Webhooks",width:"medium",inputs:n,updateSection:function(t){e.updateSection(""),t.preventDefault()}})):a=React.createElement(f.default,{title:"Incoming Webhooks",width:"medium",describe:"Manage your incoming webhooks",updateSection:function(){e.updateSection("incoming-hooks")}})),"true"===t.window.mm_config.EnableOutgoingWebhooks&&("outgoing-hooks"===this.props.activeSection?(n.push(React.createElement(y.default,{key:"outgoing-hook-ui"})),s=React.createElement(b.default,{title:"Outgoing Webhooks",width:"medium",inputs:n,updateSection:function(t){e.updateSection(""),t.preventDefault()}})):s=React.createElement(f.default,{title:"Outgoing Webhooks",width:"medium",describe:"Manage your outgoing webhooks",updateSection:function(){e.updateSection("outgoing-hooks")}})),React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Integration Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Integration Settings"),React.createElement("div",{className:"divider-dark first"}),a,React.createElement("div",{className:"divider-light"}),s,React.createElement("div",{className:"divider-dark"})))}}]),a}(React.Component);a.default=R,R.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"./manage_incoming_hooks.jsx":264,"./manage_outgoing_hooks.jsx":266,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],275:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../confirm_modal.jsx"),f=s(h),g=e("../settings_sidebar.jsx"),b=s(g),v=e("./user_settings.jsx"),_=s(v),E=ReactBootstrap.Modal,y=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));return t.handleShow=t.handleShow.bind(t),t.handleHide=t.handleHide.bind(t),t.handleHidden=t.handleHidden.bind(t),t.handleCollapse=t.handleCollapse.bind(t),t.handleConfirm=t.handleConfirm.bind(t),t.handleCancelConfirmation=t.handleCancelConfirmation.bind(t),t.deactivateTab=t.deactivateTab.bind(t),t.closeModal=t.closeModal.bind(t),t.collapseModal=t.collapseModal.bind(t),t.updateTab=t.updateTab.bind(t),t.updateSection=t.updateSection.bind(t),t.state={active_tab:"general",active_section:"",showConfirmModal:!1,enforceFocus:!0},t.requireConfirm=!1,t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"componentDidMount",value:function(){this.props.show&&this.handleShow()}},{key:"componentDidUpdate",value:function(e){this.props.show&&!e.show&&this.handleShow()}},{key:"handleShow",value:function(){$(window).width()>768?($(ReactDOM.findDOMNode(this.refs.modalBody)).perfectScrollbar(),$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-200)):$(ReactDOM.findDOMNode(this.refs.modalBody)).css("max-height",$(window).height()-50)}},{key:"handleHide",value:function(){var e=this;return this.requireConfirm?(this.afterConfirm=function(){return e.handleHide()},this.showConfirmModal(),!1):(this.deactivateTab(),void this.props.onModalDismissed())}},{key:"handleHidden",value:function(){this.setState({active_tab:"general",active_section:""})}},{key:"handleCollapse",value:function(){$(ReactDOM.findDOMNode(this.refs.modalBody)).closest(".modal-dialog").removeClass("display--content"),this.deactivateTab(),this.setState({active_tab:"",active_section:""})}},{key:"handleConfirm",value:function(){this.setState({showConfirmModal:!1,enforceFocus:!0}),this.requireConfirm=!1,this.afterConfirm&&(this.afterConfirm(),this.afterConfirm=null)}},{key:"handleCancelConfirmation",value:function(){this.setState({showConfirmModal:!1,enforceFocus:!0}),this.afterConfirm=null}},{key:"showConfirmModal",value:function(e){this.setState({showConfirmModal:!0,enforceFocus:!1}),e&&(this.afterConfirm=e)}},{key:"deactivateTab",value:function(){var e=this.refs.userSettings.getActiveTab();e&&e.deactivate&&e.deactivate()}},{key:"closeModal",value:function(){this.requireConfirm?this.showConfirmModal(this.closeModal):this.handleHide()}},{key:"collapseModal",value:function(){this.requireConfirm?this.showConfirmModal(this.collapseModal):this.handleCollapse()}},{key:"updateTab",value:function(e,t){var a=this;!t&&this.requireConfirm?this.showConfirmModal(function(){return a.updateTab(e,!0)}):(this.deactivateTab(),this.setState({active_tab:e,active_section:""}))}},{key:"updateSection",value:function(e,t){var a=this;!t&&this.requireConfirm?this.showConfirmModal(function(){return a.updateSection(e,!0)}):this.setState({active_section:e})}},{key:"render",value:function(){var e=this,a=[];return a.push({name:"general",uiName:"General",icon:"glyphicon glyphicon-cog"}),a.push({name:"security",uiName:"Security",icon:"glyphicon glyphicon-lock"}),a.push({name:"notifications",uiName:"Notifications",icon:"glyphicon glyphicon-exclamation-sign"}),a.push({name:"appearance",uiName:"Appearance",icon:"glyphicon glyphicon-wrench"}),"true"===t.window.mm_config.EnableOAuthServiceProvider&&a.push({name:"developer",uiName:"Developer",icon:"glyphicon glyphicon-th"}),("true"===t.window.mm_config.EnableIncomingWebhooks||"true"===t.window.mm_config.EnableOutgoingWebhooks)&&a.push({name:"integrations",uiName:"Integrations",icon:"glyphicon glyphicon-transfer"}),a.push({name:"display",uiName:"Display",icon:"glyphicon glyphicon-eye-open"}),a.push({name:"advanced",uiName:"Advanced",icon:"glyphicon glyphicon-list-alt"}),React.createElement(E,{dialogClassName:"settings-modal",show:this.props.show,onHide:this.handleHide,onExited:this.handleHidden,enforceFocus:this.state.enforceFocus},React.createElement(E.Header,{closeButton:!0},React.createElement(E.Title,null,"Account Settings")),React.createElement(E.Body,{ref:"modalBody"},React.createElement("div",{className:"settings-table"},React.createElement("div",{className:"settings-links"},React.createElement(b.default,{tabs:a,activeTab:this.state.active_tab,updateTab:this.updateTab})),React.createElement("div",{className:"settings-content minimize-settings"},React.createElement(_.default,{ref:"userSettings",activeTab:this.state.active_tab,activeSection:this.state.active_section,updateSection:this.updateSection,updateTab:this.updateTab,closeModal:this.closeModal,collapseModal:this.collapseModal,setEnforceFocus:function(t){return e.setState({enforceFocus:t})},setRequireConfirm:function(t){return e.requireConfirm=t}})))),React.createElement(f.default,{title:"Discard Changes?",message:"You have unsaved changes, are you sure you want to discard them?",confirm_button:"Yes, Discard",show:this.state.showConfirmModal,onConfirm:this.handleConfirm,onCancel:this.handleCancelConfirmation}))}}]),a}(React.Component);a.default=y,y.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../confirm_modal.jsx":152,"../settings_sidebar.jsx":222,"./user_settings.jsx":268,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],276:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=y.default.getCurrentUser(),t=!N.isBrowserFirefox(),a="true";e.notify_props&&e.notify_props.desktop_sound&&(a=e.notify_props.desktop_sound);var s="default";e.notify_props&&e.notify_props.desktop&&(s=e.notify_props.desktop);var n="true";e.notify_props&&e.notify_props.email&&(n=e.notify_props.email);var r=!1,l=!1,i="",o=!1,c=!1,u=!1;if(e.notify_props){if(e.notify_props.mention_keys){var d=e.notify_props.mention_keys.split(",");-1===d.indexOf(e.username)?r=!1:(r=!0,d.splice(d.indexOf(e.username),1)),-1===d.indexOf("@"+e.username)?l=!1:(l=!0,d.splice(d.indexOf("@"+e.username),1)),i=d.join(",")}e.notify_props.first_name&&(o="true"===e.notify_props.first_name),e.notify_props.all&&(c="true"===e.notify_props.all),e.notify_props.channel&&(u="true"===e.notify_props.channel)}return{notifyLevel:s,enableEmail:n,soundNeeded:t,enableSound:a,usernameKey:r,mentionKey:l,customKeys:i,customKeysChecked:i.length>0,firstNameKey:o,allKey:c,channelKey:u}}var l=e("babel-runtime/core-js/object/get-prototype-of"),i=n(l),o=e("babel-runtime/helpers/classCallCheck"),c=n(o),u=e("babel-runtime/helpers/createClass"),d=n(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=n(m),h=e("babel-runtime/helpers/inherits"),f=n(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../setting_item_min.jsx"),b=n(g),v=e("../setting_item_max.jsx"),_=n(v),E=e("../../stores/user_store.jsx"),y=n(E),R=e("../../utils/client.jsx"),C=s(R),w=e("../../utils/async_client.jsx"),S=s(w),k=e("../../utils/utils.jsx"),N=s(k),M=function(e){
function a(e){(0,c.default)(this,a);var t=(0,p.default)(this,(0,i.default)(a).call(this,e));return t.handleSubmit=t.handleSubmit.bind(t),t.handleCancel=t.handleCancel.bind(t),t.updateSection=t.updateSection.bind(t),t.updateState=t.updateState.bind(t),t.onListenerChange=t.onListenerChange.bind(t),t.handleNotifyRadio=t.handleNotifyRadio.bind(t),t.handleEmailRadio=t.handleEmailRadio.bind(t),t.handleSoundRadio=t.handleSoundRadio.bind(t),t.updateUsernameKey=t.updateUsernameKey.bind(t),t.updateMentionKey=t.updateMentionKey.bind(t),t.updateFirstNameKey=t.updateFirstNameKey.bind(t),t.updateAllKey=t.updateAllKey.bind(t),t.updateChannelKey=t.updateChannelKey.bind(t),t.updateCustomMentionKeys=t.updateCustomMentionKeys.bind(t),t.onCustomChange=t.onCustomChange.bind(t),t.state=r(),t}return(0,f.default)(a,e),(0,d.default)(a,[{key:"handleSubmit",value:function(){var e={};e.user_id=this.props.user.id,e.email=this.state.enableEmail,e.desktop_sound=this.state.enableSound,e.desktop=this.state.notifyLevel;var t=[];this.state.usernameKey&&t.push(this.props.user.username),this.state.mentionKey&&t.push("@"+this.props.user.username);var a=t.join(",");this.state.customKeys.length>0&&this.state.customKeysChecked&&(a+=","+this.state.customKeys),e.mention_keys=a,e.first_name=this.state.firstNameKey.toString(),e.all=this.state.allKey.toString(),e.channel=this.state.channelKey.toString(),C.updateUserNotifyProps(e,function(){this.props.updateSection(""),S.getMe()}.bind(this),function(e){this.setState({serverError:e.message})}.bind(this))}},{key:"handleCancel",value:function(e){this.updateState(),this.props.updateSection(""),e.preventDefault()}},{key:"updateSection",value:function(e){this.updateState(),this.props.updateSection(e)}},{key:"updateState",value:function(){var e=r();N.areObjectsEqual(e,this.state)||this.setState(e)}},{key:"componentDidMount",value:function(){y.default.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){y.default.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){this.updateState()}},{key:"handleNotifyRadio",value:function(e){this.setState({notifyLevel:e}),ReactDOM.findDOMNode(this.refs.wrapper).focus()}},{key:"handleEmailRadio",value:function(e){this.setState({enableEmail:e}),ReactDOM.findDOMNode(this.refs.wrapper).focus()}},{key:"handleSoundRadio",value:function(e){this.setState({enableSound:e}),ReactDOM.findDOMNode(this.refs.wrapper).focus()}},{key:"updateUsernameKey",value:function(e){this.setState({usernameKey:e})}},{key:"updateMentionKey",value:function(e){this.setState({mentionKey:e})}},{key:"updateFirstNameKey",value:function(e){this.setState({firstNameKey:e})}},{key:"updateAllKey",value:function(e){this.setState({allKey:e})}},{key:"updateChannelKey",value:function(e){this.setState({channelKey:e})}},{key:"updateCustomMentionKeys",value:function(){var e=ReactDOM.findDOMNode(this.refs.customcheck).checked;if(e){var t=ReactDOM.findDOMNode(this.refs.custommentions).value;this.setState({customKeys:t.replace(/ /g,""),customKeysChecked:!0})}else this.setState({customKeys:"",customKeysChecked:!1})}},{key:"onCustomChange",value:function(){ReactDOM.findDOMNode(this.refs.customcheck).checked=!0,this.updateCustomMentionKeys()}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=this.state.serverError);var a,s,n=this.props.user;if("desktop"===this.props.activeSection){var r=[!1,!1,!1];"mention"===this.state.notifyLevel?r[1]=!0:"none"===this.state.notifyLevel?r[2]=!0:r[0]=!0;var l=[];l.push(React.createElement("div",{key:"userNotificationLevelOption"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[0],onChange:this.handleNotifyRadio.bind(this,"all")}),"For all activity"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[1],onChange:this.handleNotifyRadio.bind(this,"mention")}),"Only for mentions and direct messages"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:r[2],onChange:this.handleNotifyRadio.bind(this,"none")}),"Never"))));var i=React.createElement("span",null,"Desktop notifications are available on Firefox, Safari, and Chrome.");a=React.createElement(_.default,{title:"Send desktop notifications",extraInfo:i,inputs:l,submit:this.handleSubmit,server_error:e,updateSection:this.handleCancel})}else{var o="";o="mention"===this.state.notifyLevel?"Only for mentions and direct messages":"none"===this.state.notifyLevel?"Never":"For all activity",s=function(){this.props.updateSection("desktop")}.bind(this),a=React.createElement(b.default,{title:"Send desktop notifications",describe:o,updateSection:s})}var c,u;if("sound"===this.props.activeSection&&this.state.soundNeeded){var d=[!1,!1];"false"===this.state.enableSound?d[1]=!0:d[0]=!0;var l=[];l.push(React.createElement("div",{key:"userNotificationSoundOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:d[0],onChange:this.handleSoundRadio.bind(this,"true")}),"On"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:d[1],onChange:this.handleSoundRadio.bind(this,"false")}),"Off"),React.createElement("br",null))));var i=React.createElement("span",null,"Desktop notification sounds are available on Firefox, Safari, Chrome, Internet Explorer, and Edge.");c=React.createElement(_.default,{title:"Desktop notification sounds",extraInfo:i,inputs:l,submit:this.handleSubmit,server_error:e,updateSection:this.handleCancel})}else{var o="";o=this.state.soundNeeded?"false"===this.state.enableSound?"Off":"On":"Please configure notification sounds in your browser settings",u=function(){this.props.updateSection("sound")}.bind(this),c=React.createElement(b.default,{title:"Desktop notification sounds",describe:o,updateSection:u,disableOpen:!this.state.soundNeeded})}var m,p;if("email"===this.props.activeSection){var h=[!1,!1];"false"===this.state.enableEmail?h[1]=!0:h[0]=!0;var l=[];l.push(React.createElement("div",{key:"userNotificationEmailOptions"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:h[0],onChange:this.handleEmailRadio.bind(this,"true")}),"On"),React.createElement("br",null)),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:h[1],onChange:this.handleEmailRadio.bind(this,"false")}),"Off"),React.createElement("br",null)),React.createElement("div",null,React.createElement("br",null),"Email notifications are sent for mentions and direct messages after you’ve been offline for more than 60 seconds or away from "+t.window.mm_config.SiteName+" for more than 5 minutes."))),m=React.createElement(_.default,{title:"Email notifications",inputs:l,submit:this.handleSubmit,server_error:e,updateSection:this.handleCancel})}else{var o="";o="false"===this.state.enableEmail?"Off":"On",p=function(){this.props.updateSection("email")}.bind(this),m=React.createElement(b.default,{title:"Email notifications",describe:o,updateSection:p})}var f,g;if("keys"===this.props.activeSection){var l=[],v=void 0,E=void 0,y=void 0,R=void 0,C=void 0;n.first_name&&(v=function(e){this.updateFirstNameKey(e.target.checked)}.bind(this),l.push(React.createElement("div",{key:"userNotificationFirstNameOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.firstNameKey,onChange:v}),'Your case sensitive first name "'+n.first_name+'"'))))),E=function(e){this.updateUsernameKey(e.target.checked)}.bind(this),l.push(React.createElement("div",{key:"userNotificationUsernameOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.usernameKey,onChange:E}),'Your non-case sensitive username "'+n.username+'"')))),y=function(e){this.updateMentionKey(e.target.checked)}.bind(this),l.push(React.createElement("div",{key:"userNotificationMentionOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.mentionKey,onChange:y}),'Your username mentioned "@'+n.username+'"')))),R=function(e){this.updateAllKey(e.target.checked)}.bind(this),l.push(React.createElement("div",{key:"userNotificationAllOption"},React.createElement("div",{className:"checkbox hidden"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.allKey,onChange:R}),'Team-wide mentions "@all"')))),C=function(e){this.updateChannelKey(e.target.checked)}.bind(this),l.push(React.createElement("div",{key:"userNotificationChannelOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.state.channelKey,onChange:C}),'Channel-wide mentions "@channel"')))),l.push(React.createElement("div",{key:"userNotificationCustomOption"},React.createElement("div",{className:"checkbox"},React.createElement("label",null,React.createElement("input",{ref:"customcheck",type:"checkbox",checked:this.state.customKeysChecked,onChange:this.updateCustomMentionKeys}),"Other non-case sensitive words, separated by commas:")),React.createElement("input",{ref:"custommentions",className:"form-control mentions-input",type:"text",defaultValue:this.state.customKeys,onChange:this.onCustomChange}))),f=React.createElement(_.default,{title:"Words that trigger mentions",inputs:l,submit:this.handleSubmit,server_error:e,updateSection:this.handleCancel})}else{var w=[];this.state.firstNameKey&&w.push(n.first_name),this.state.usernameKey&&w.push(n.username),this.state.mentionKey&&w.push("@"+n.username),this.state.channelKey&&w.push("@channel"),this.state.customKeys.length>0&&(w=w.concat(this.state.customKeys.split(",")));for(var o="",S=0;S<w.length;S++)o+='"'+w[S]+'", ';o=o.length>0?o.substring(0,o.length-2):"No words configured",g=function(){this.props.updateSection("keys")}.bind(this),f=React.createElement(b.default,{title:"Words that trigger mentions",describe:o,updateSection:g})}return React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Notification Settings")),React.createElement("div",{ref:"wrapper",className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Notifications"),React.createElement("div",{className:"divider-dark first"}),a,React.createElement("div",{className:"divider-light"}),c,React.createElement("div",{className:"divider-light"}),m,React.createElement("div",{className:"divider-light"}),f,React.createElement("div",{className:"divider-dark"})))}}]),a}(React.Component);a.default=M,M.defaultProps={user:null,activeSection:"",activeTab:""},M.propTypes={user:React.PropTypes.object,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,activeSection:React.PropTypes.string,activeTab:React.PropTypes.string,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../stores/user_store.jsx":335,"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"../../utils/utils.jsx":344,"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],277:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),i=e("babel-runtime/helpers/classCallCheck"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(d),p=e("babel-runtime/helpers/inherits"),h=n(p);Object.defineProperty(a,"__esModule",{value:!0});var f=e("../setting_item_min.jsx"),g=n(f),b=e("../setting_item_max.jsx"),v=n(b),_=e("../access_history_modal.jsx"),E=n(_),y=e("../activity_log_modal.jsx"),R=n(y),C=e("../toggle_modal_button.jsx"),w=n(C),S=e("../../stores/team_store.jsx"),k=n(S),N=e("../../utils/client.jsx"),M=s(N),x=e("../../utils/async_client.jsx"),j=s(x),T=e("../../utils/constants.jsx"),P=n(T),O=function(e){function a(e){(0,o.default)(this,a);var t=(0,m.default)(this,(0,l.default)(a).call(this,e));return t.submitPassword=t.submitPassword.bind(t),t.updateCurrentPassword=t.updateCurrentPassword.bind(t),t.updateNewPassword=t.updateNewPassword.bind(t),t.updateConfirmPassword=t.updateConfirmPassword.bind(t),t.getDefaultState=t.getDefaultState.bind(t),t.createPasswordSection=t.createPasswordSection.bind(t),t.createSignInSection=t.createSignInSection.bind(t),t.state=t.getDefaultState(),t}return(0,h.default)(a,e),(0,u.default)(a,[{key:"getDefaultState",value:function(){return{currentPassword:"",newPassword:"",confirmPassword:"",authService:this.props.user.auth_service}}},{key:"submitPassword",value:function(e){var t=this;e.preventDefault();var a=this.props.user,s=this.state.currentPassword,n=this.state.newPassword,r=this.state.confirmPassword;if(""===s)return void this.setState({passwordError:"Please enter your current password",serverError:""});if(n.length<P.default.MIN_PASSWORD_LENGTH)return void this.setState({passwordError:"New passwords must be at least "+P.default.MIN_PASSWORD_LENGTH+" characters",serverError:""});if(n!==r)return void this.setState({passwordError:"The new passwords you entered do not match",serverError:""});var l={};l.user_id=a.id,l.current_password=s,l.new_password=n,M.updatePassword(l,function(){t.props.updateSection(""),j.getMe(),t.setState(t.getDefaultState())},function(e){var a=t.getDefaultState();e.message?a.serverError=e.message:a.serverError=e,a.passwordError="",t.setState(a)})}},{key:"updateCurrentPassword",value:function(e){this.setState({currentPassword:e.target.value})}},{key:"updateNewPassword",value:function(e){this.setState({newPassword:e.target.value})}},{key:"updateConfirmPassword",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"createPasswordSection",value:function(){var e=void 0;if("password"===this.props.activeSection&&""===this.props.user.auth_service){var t=[];return t.push(React.createElement("div",{key:"currentPasswordUpdateForm",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Current Password"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"password",onChange:this.updateCurrentPassword,value:this.state.currentPassword})))),t.push(React.createElement("div",{key:"newPasswordUpdateForm",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"New Password"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"password",onChange:this.updateNewPassword,value:this.state.newPassword})))),t.push(React.createElement("div",{key:"retypeNewPasswordUpdateForm",className:"form-group"},React.createElement("label",{className:"col-sm-5 control-label"},"Retype New Password"),React.createElement("div",{className:"col-sm-7"},React.createElement("input",{className:"form-control",type:"password",onChange:this.updateConfirmPassword,value:this.state.confirmPassword})))),e=function(e){this.props.updateSection(""),this.setState({currentPassword:"",newPassword:"",confirmPassword:"",serverError:null,passwordError:null}),e.preventDefault()}.bind(this),React.createElement(v.default,{title:"Password",inputs:t,submit:this.submitPassword,server_error:this.state.serverError,client_error:this.state.passwordError,updateSection:e})}var a,s=new Date(this.props.user.last_password_update),n="12";s.getHours()%12&&(n=String(s.getHours()%12));var r=String(s.getMinutes());s.getMinutes()<10&&(r="0"+s.getMinutes());var l=" am";return s.getHours()>=12&&(l=" pm"),a="Last updated "+P.default.MONTHS[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear()+" at "+n+":"+r+l,e=function(){this.props.updateSection("password")}.bind(this),React.createElement(g.default,{title:"Password",describe:a,updateSection:e})}},{key:"createSignInSection",value:function(){var e=void 0,a=this.props.user;if("signin"===this.props.activeSection){var s=[],n=k.default.getCurrent().name,r=void 0;"true"===t.window.mm_config.EnableSignUpWithEmail&&""!==a.auth_service&&(r=React.createElement("div",null,React.createElement("a",{className:"btn btn-primary",href:"/"+n+"/claim?email="+encodeURIComponent(a.email)},"Switch to using email and password"),React.createElement("br",null)));var l=void 0;"true"===t.window.mm_config.EnableSignUpWithGitLab&&""===a.auth_service&&(l=React.createElement("div",null,React.createElement("a",{className:"btn btn-primary",href:"/"+n+"/claim?email="+encodeURIComponent(a.email)+"&new_type="+P.default.GITLAB_SERVICE},"Switch to using GitLab SSO"),React.createElement("br",null)));var i=void 0;"true"===t.window.mm_config.EnableSignUpWithGoogle&&""===a.auth_service&&(i=React.createElement("div",null,React.createElement("a",{className:"btn btn-primary",href:"/"+n+"/claim?email="+encodeURIComponent(a.email)+"&new_type="+P.default.GOOGLE_SERVICE},"Switch to using Google SSO"),React.createElement("br",null))),s.push(React.createElement("div",{key:"userSignInOption"},r,l,React.createElement("br",null),i)),e=function(e){this.props.updateSection(""),this.setState({serverError:null}),e.preventDefault()}.bind(this);var o=React.createElement("span",null,"You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.");return React.createElement(v.default,{title:"Sign-in Method",extraInfo:o,inputs:s,server_error:this.state.serverError,updateSection:e})}e=function(){this.props.updateSection("signin")}.bind(this);var c="Email and Password";return this.props.user.auth_service===P.default.GITLAB_SERVICE&&(c="GitLab SSO"),React.createElement(g.default,{title:"Sign-in Method",describe:c,updateSection:e})}},{key:"render",value:function(){var e=this.createPasswordSection(),a=void 0,s=0;return s="true"===t.window.mm_config.EnableSignUpWithGitLab?s+1:s,s="true"===t.window.mm_config.EnableSignUpWithGoogle?s+1:s,t.window.mm_config.EnableSignUpWithEmail&&s>0&&(a=this.createSignInSection()),React.createElement("div",null,React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},React.createElement("span",{"aria-hidden":"true"},"×")),React.createElement("h4",{className:"modal-title",ref:"title"},React.createElement("i",{className:"modal-back",onClick:this.props.collapseModal}),"Security Settings")),React.createElement("div",{className:"user-settings"},React.createElement("h3",{className:"tab-header"},"Security Settings"),React.createElement("div",{className:"divider-dark first"}),e,React.createElement("div",{className:"divider-light"}),a,React.createElement("div",{className:"divider-dark"}),React.createElement("br",null),React.createElement(w.default,{className:"security-links theme",dialogType:E.default},React.createElement("i",{className:"fa fa-clock-o"}),"View Access History"),React.createElement("b",null," "),React.createElement(w.default,{className:"security-links theme",dialogType:R.default},React.createElement("i",{className:"fa fa-clock-o"}),"View and Logout of Active Sessions")))}}]),a}(React.Component);a.default=O,O.defaultProps={user:{},activeSection:""},O.propTypes={user:React.PropTypes.object,activeSection:React.PropTypes.string,updateSection:React.PropTypes.func,updateTab:React.PropTypes.func,closeModal:React.PropTypes.func.isRequired,collapseModal:React.PropTypes.func.isRequired,setEnforceFocus:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../stores/team_store.jsx":334,"../../utils/async_client.jsx":336,"../../utils/client.jsx":338,"../../utils/constants.jsx":339,"../access_history_modal.jsx":111,"../activity_log_modal.jsx":112,"../setting_item_max.jsx":218,"../setting_item_min.jsx":219,"../toggle_modal_button.jsx":257,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],278:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.progress,a=null;return t&&(a=React.createElement("span",{className:"loader-percent"},"Loading "+t+"%")),React.createElement("div",{className:"view-image__loading"},React.createElement("img",{className:"loader-image",src:"/static/images/load.gif"}),a)}function l(e){var t=e.filename,a=e.fileUrl,s=e.fileInfo,n=e.maxHeight,r=void 0;return r=s.has_preview_image?R.getPreviewImagePath(t):a,React.createElement("a",{href:a,target:"_blank",download:!0},React.createElement("img",{style:{maxHeight:n},src:r}))}var i=e("babel-runtime/core-js/object/get-prototype-of"),o=n(i),c=e("babel-runtime/helpers/classCallCheck"),u=n(c),d=e("babel-runtime/helpers/createClass"),m=n(d),p=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(p),f=e("babel-runtime/helpers/inherits"),g=n(f);Object.defineProperty(a,"__esModule",{value:!0});var b=e("../utils/async_client.jsx"),v=s(b),_=e("../utils/client.jsx"),E=s(_),y=e("../utils/utils.jsx"),R=s(y),C=e("./audio_video_preview.jsx"),w=n(C),S=e("../utils/constants.jsx"),k=n(S),N=e("./file_info_preview.jsx"),M=n(N),x=e("../stores/file_store.jsx"),j=n(x),T=e("./view_image_popover_bar.jsx"),P=n(T),O=ReactBootstrap.Modal,I=k.default.KeyCodes,D=function(e){function t(e){(0,u.default)(this,t);var a=(0,h.default)(this,(0,o.default)(t).call(this,e));return a.showImage=a.showImage.bind(a),a.loadImage=a.loadImage.bind(a),a.handleNext=a.handleNext.bind(a),a.handlePrev=a.handlePrev.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a),a.onModalShown=a.onModalShown.bind(a),a.onModalHidden=a.onModalHidden.bind(a),a.onFileStoreChange=a.onFileStoreChange.bind(a),a.getPublicLink=a.getPublicLink.bind(a),a.onMouseEnterImage=a.onMouseEnterImage.bind(a),a.onMouseLeaveImage=a.onMouseLeaveImage.bind(a),a.state={imgId:a.props.startId,fileInfo:null,imgHeight:"100%",loaded:R.fillArray(!1,a.props.filenames.length),progress:R.fillArray(0,a.props.filenames.length),showFooter:!1},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"handleNext",value:function(e){e&&e.stopPropagation();var t=this.state.imgId+1;t>this.props.filenames.length-1&&(t=0),this.showImage(t)}},{key:"handlePrev",value:function(e){e&&e.stopPropagation();var t=this.state.imgId-1;0>t&&(t=this.props.filenames.length-1),this.showImage(t)}},{key:"handleKeyPress",value:function(e){e.keyCode===I.RIGHT?this.handleNext():e.keyCode===I.LEFT&&this.handlePrev()}},{key:"onModalShown",value:function(e){$(window).on("keyup",this.handleKeyPress),this.showImage(e.startId),j.default.addChangeListener(this.onFileStoreChange)}},{key:"onModalHidden",value:function(){$(window).off("keyup",this.handleKeyPress),this.refs.video&&this.refs.video.stop(),j.default.removeChangeListener(this.onFileStoreChange)}},{key:"componentWillReceiveProps",value:function(e){e.show===!0&&this.props.show===!1?this.onModalShown(e):e.show===!1&&this.props.show===!0&&this.onModalHidden(),R.areObjectsEqual(this.props.filenames,e.filenames)||this.setState({loaded:R.fillArray(!1,e.filenames.length),progress:R.fillArray(0,e.filenames.length)})}},{key:"onFileStoreChange",value:function(e){var t=this.props.filenames.indexOf(e);-1!==t&&(t===this.state.imgId&&this.setState({fileInfo:j.default.getInfo(e)}),this.state.loaded[t]||this.loadImage(t,e))}},{key:"showImage",value:function(e){this.setState({imgId:e});var t=$(window).height()-100;this.setState({imgHeight:t});var a=this.props.filenames[e];return j.default.hasInfo(a)?(this.setState({fileInfo:j.default.getInfo(a)}),void(this.state.loaded[e]||this.loadImage(e,a))):void v.getFileInfo(a)}},{key:"loadImage",value:function(e,t){var a=this,s=j.default.getInfo(t),n=R.getFileType(s.extension);if("image"===n)!function(){var n=void 0;n=s.has_image_preview?R.getPreviewImagePath(t):R.getFileUrl(t);var r=new Image;r.load(n,function(){var t=a.state.progress;t[e]=r.completedPercentage,a.setState({progress:t})}),r.onload=function(){var t=a.state.loaded;t[e]=!0,a.setState({loaded:t})}}();else{var r=this.state.loaded;r[e]=!0,this.setState({loaded:r})}}},{key:"getPublicLink",value:function(){var e={};e.channel_id=this.props.channelId,e.user_id=this.props.userId,e.filename=this.props.filenames[this.state.imgId],E.getPublicLink(e,function(e){R.isMobile()?window.location.href=e.public_link:window.open(e.public_link)},function(){})}},{key:"onMouseEnterImage",value:function(){this.setState({showFooter:!0})}},{key:"onMouseLeaveImage",value:function(){this.setState({showFooter:!1})}},{key:"render",value:function(){if(this.props.filenames.length<1||this.props.filenames.length-1<this.state.imgId)return React.createElement("div",null);var e,t=this.props.filenames[this.state.imgId],a=R.getFileUrl(t,!0);if(this.state.loaded[this.state.imgId]){var s=this.state.fileInfo,n=R.getFileType(s.extension);e="image"===n?React.createElement(l,{filename:t,fileUrl:a,fileInfo:s,maxHeight:this.state.imgHeight}):"video"===n||"audio"===n?React.createElement(w.default,{filename:t,fileUrl:a,fileInfo:this.state.fileInfo,maxHeight:this.state.imgHeight}):React.createElement(M.default,{filename:t,fileUrl:a,fileInfo:s})}else{var i=Math.floor(this.state.progress[this.state.imgId]);e=React.createElement(r,{progress:i})}var o=null,c=null;this.props.filenames.length>1&&(o=React.createElement("a",{ref:"previewArrowLeft",className:"modal-prev-bar",href:"#",onClick:this.handlePrev},React.createElement("i",{className:"image-control image-prev"})),c=React.createElement("a",{ref:"previewArrowRight",className:"modal-next-bar",href:"#",onClick:this.handleNext},React.createElement("i",{className:"image-control image-next"})));var u="modal-close";return this.state.showFooter&&(u+=" modal-close--show"),React.createElement(O,{show:this.props.show,onHide:this.props.onModalDismissed,className:"image_modal",dialogClassName:"modal-image"},React.createElement(O.Body,{modalClassName:"image-body",onClick:this.props.onModalDismissed},React.createElement("div",{className:"image-wrapper",onClick:this.props.onModalDismissed},React.createElement("div",{onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:function(e){return e.stopPropagation()}},React.createElement("div",{className:u,onClick:this.props.onModalDismissed}),e,React.createElement(P.default,{show:this.state.showFooter,fileId:this.state.imgId,totalFiles:this.props.filenames.length,filename:name,fileURL:a,getPublicLink:this.getPublicLink}))),o,c))}}]),t}(React.Component);a.default=D,D.defaultProps={show:!1,filenames:[],channelId:"",userId:"",startId:0},D.propTypes={show:React.PropTypes.bool.isRequired,onModalDismissed:React.PropTypes.func.isRequired,filenames:React.PropTypes.array,modalId:React.PropTypes.string,channelId:React.PropTypes.string,userId:React.PropTypes.string,startId:React.PropTypes.number}},{"../stores/file_store.jsx":327,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./audio_video_preview.jsx":138,"./file_info_preview.jsx":165,"./view_image_popover_bar.jsx":279,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],279:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=function(e){function a(e){return(0,i.default)(this,a),(0,d.default)(this,(0,r.default)(a).call(this,e))}return(0,p.default)(a,e),(0,c.default)(a,[{key:"render",value:function(){var e="";"true"===t.window.mm_config.EnablePublicLink&&(e=React.createElement("div",null,React.createElement("a",{href:"#",className:"public-link text","data-title":"Public Image",onClick:this.props.getPublicLink},"Get Public Link"),React.createElement("span",{className:"text"}," | ")));var a="modal-button-bar";return this.props.show&&(a+=" footer--show"),React.createElement("div",{ref:"imageFooter",className:a},React.createElement("span",{className:"pull-left text"},"File "+(this.props.fileId+1)+" of "+this.props.totalFiles),React.createElement("div",{className:"image-links"},e,React.createElement("a",{href:this.props.fileURL,download:this.props.filename,className:"text"},"Download")))}}]),a}(React.Component);a.default=h,h.defaultProps={show:!1,imgId:0,totalFiles:0,filename:"",fileURL:""},h.propTypes={show:React.PropTypes.bool.isRequired,fileId:React.PropTypes.number.isRequired,totalFiles:React.PropTypes.number.isRequired,filename:React.PropTypes.string.isRequired,fileURL:React.PropTypes.string.isRequired,getPublicLink:React.PropTypes.func.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],280:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../stores/channel_store.jsx"),f=s(h),g=/(?:http|https):\/\/(?:www\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(\/u\/\w\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^\/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#\&\?]*)/,b=function(e){function a(e){(0,i.default)(this,a);var t=(0,d.default)(this,(0,r.default)(a).call(this,e));return t.updateStateFromProps=t.updateStateFromProps.bind(t),t.handleReceivedMetadata=t.handleReceivedMetadata.bind(t),t.play=t.play.bind(t),t.stop=t.stop.bind(t),t.stopOnChannelChange=t.stopOnChannelChange.bind(t),t.state={playing:!1,title:""},t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"componentWillMount",value:function(){this.updateStateFromProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){
this.updateStateFromProps(e)}},{key:"updateStateFromProps",value:function(e){var t=e.link,a=t.trim().match(g);a&&11===a[2].length&&this.setState({videoId:a[2],time:this.handleYoutubeTime(t)})}},{key:"handleYoutubeTime",value:function(e){var t=/[\\?&]t=([0-9hms]+)/,a=e.match(t);if(!a||!a[1])return"";var s=a[1].match(/([0-9]+)h/),n=a[1].match(/([0-9]+)m/),r=a[1].match(/([0-9]+)s/),l=0;return s&&s[1]&&(l+=3600*parseInt(s[1],10)),n&&n[1]&&(l+=60*parseInt(n[1],10)),r&&r[1]&&(l+=parseInt(r[1],10)),"&start="+l.toString()}},{key:"componentDidMount",value:function(){t.window.mm_config.GoogleDeveloperKey&&$.ajax({async:!0,url:"https://www.googleapis.com/youtube/v3/videos",type:"GET",data:{part:"snippet",id:this.state.videoId,key:t.window.mm_config.GoogleDeveloperKey},success:this.handleReceivedMetadata})}},{key:"handleReceivedMetadata",value:function(e){if(!e.items.length||!e.items[0].snippet)return null;var t=e.items[0].snippet;this.setState({receivedYoutubeData:!0,title:t.title})}},{key:"play",value:function(){this.setState({playing:!0}),f.default.getCurrentId()===this.props.channelId&&f.default.addChangeListener(this.stopOnChannelChange)}},{key:"stop",value:function(){this.setState({playing:!1})}},{key:"stopOnChannelChange",value:function(){f.default.getCurrentId()!==this.props.channelId&&this.stop()}},{key:"render",value:function(){var e="Youtube";this.state.title&&(e+=" - ");var t=void 0;return t=this.state.playing?React.createElement("iframe",{src:"https://www.youtube.com/embed/"+this.state.videoId+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+this.state.time,width:"480px",height:"360px",type:"text/html",frameBorder:"0",allowFullScreen:"allowfullscreen"}):React.createElement("div",{className:"embed-responsive embed-responsive-4by3 video-div__placeholder"},React.createElement("div",{className:"video-thumbnail__container"},React.createElement("img",{className:"video-thumbnail",src:"https://i.ytimg.com/vi/"+this.state.videoId+"/hqdefault.jpg"}),React.createElement("div",{className:"block"},React.createElement("span",{className:"play-button"},React.createElement("span",null))))),React.createElement("div",null,React.createElement("h4",null,React.createElement("span",{className:"video-type"},e),React.createElement("span",{className:"video-title"},React.createElement("a",{href:this.props.link},this.state.title))),React.createElement("div",{className:"video-div embed-responsive-item",onClick:this.play},t))}}],[{key:"isYoutubeLink",value:function(e){return e.trim().match(g)}}]),a}(React.Component);a.default=b,b.propTypes={channelId:React.PropTypes.string.isRequired,link:React.PropTypes.string.isRequired}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/channel_store.jsx":325,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],281:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var r=e("babel-runtime/core-js/object/assign"),l=n(r),i=e("flux"),o=s(i),c=e("../utils/constants.jsx"),u=n(c),d=u.default.PayloadSources,m=(0,l.default)(new o.Dispatcher,{handleServerAction:function(e){var t={source:d.SERVER_ACTION,action:e};this.dispatch(t)},handleViewAction:function(e){var t={source:d.VIEW_ACTION,action:e};this.dispatch(t)}});t.exports=m},{"../utils/constants.jsx":339,"babel-runtime/core-js/object/assign":6,flux:"flux"}],282:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){L.getChannels(!0),L.getChannelExtraInfo(e.id),L.updateLastViewedAt(e.id),L.getPosts(e.id),k.default.handleViewAction({type:U.CLICK_CHANNEL,name:e.name,id:e.id,prev:M.default.getCurrentId()})}function l(e){F.getPostById(e,function(t){k.default.handleServerAction({type:U.RECIEVED_FOCUSED_POST,postId:e,post_list:t}),L.getPostsBefore(e,0,I.default.POST_FOCUS_CONTEXT_RADIUS),L.getPostsAfter(e,0,I.default.POST_FOCUS_CONTEXT_RADIUS)})}function i(e,t){F.getPost(e.channel_id,e.id,function(e){k.default.handleServerAction({type:U.RECIEVED_POST_SELECTED,post_list:e,from_search:P.default.getSearchTerm()}),k.default.handleServerAction({type:U.RECIEVED_SEARCH,results:null,is_mention_search:t})},function(e){L.dispatchError(e,"getPost")})}function o(){var e=M.default.getCurrentId();u(e)}function c(){var e=j.default.getFocusedPostId();u(e)}function u(e){var t=j.default.getEarliestPost(e).id;j.default.requestVisibilityIncrease(e,I.default.POST_CHUNK_SIZE)&&L.getPostsBefore(t,0,I.default.POST_CHUNK_SIZE)}function d(){var e=j.default.getFocusedPostId(),t=j.default.getLatestPost(e).id;L.getPostsAfter(t,0,I.default.POST_CHUNK_SIZE)}function m(e){k.default.handleServerAction({type:U.RECIEVED_POST,post:e})}function p(e){k.default.handleServerAction({type:U.CREATE_POST,post:e})}function h(e){k.default.handleServerAction({type:U.POST_DELETED,post:e})}function f(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];k.default.handleViewAction({type:U.TOGGLE_DELETE_POST_MODAL,value:!0,post:e,commentCount:t})}function g(){k.default.handleViewAction({type:I.default.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,value:!0})}function b(){k.default.handleViewAction({type:U.TOGGLE_INVITE_MEMBER_MODAL,value:!0})}function v(){k.default.handleViewAction({type:U.TOGGLE_REGISTER_APP_MODAL,value:!0})}function _(e,t){k.default.handleViewAction({type:U.SUGGESTION_PRETEXT_CHANGED,id:e,pretext:t})}function E(e){k.default.handleViewAction({type:U.SUGGESTION_SELECT_NEXT,id:e})}function y(e){k.default.handleViewAction({type:U.SUGGESTION_SELECT_PREVIOUS,id:e})}function R(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];k.default.handleViewAction({type:I.default.ActionTypes.SUGGESTION_COMPLETE_WORD,id:e,term:t})}function C(e){k.default.handleViewAction({type:I.default.ActionTypes.SUGGESTION_CLEAR_SUGGESTIONS,id:e})}function w(e){k.default.handleServerAction({type:I.default.ActionTypes.RECIEVED_PREFERENCE,preference:e})}Object.defineProperty(a,"__esModule",{value:!0}),a.emitChannelClickEvent=r,a.emitPostFocusEvent=l,a.emitPostFocusRightHandSideFromSearch=i,a.emitLoadMorePostsEvent=o,a.emitLoadMorePostsFocusedTopEvent=c,a.loadMorePostsTop=u,a.emitLoadMorePostsFocusedBottomEvent=d,a.emitPostRecievedEvent=m,a.emitUserPostedEvent=p,a.emitPostDeletedEvent=h,a.showDeletePostModal=f,a.showGetTeamInviteLinkModal=g,a.showInviteMemberModal=b,a.showRegisterAppModal=v,a.emitSuggestionPretextChanged=_,a.emitSelectNextSuggestion=E,a.emitSelectPreviousSuggestion=y,a.emitCompleteWordSuggestion=R,a.emitClearSuggestions=C,a.emitPreferenceChangedEvent=w;var S=e("../dispatcher/app_dispatcher.jsx"),k=n(S),N=e("../stores/channel_store.jsx"),M=n(N),x=e("../stores/post_store.jsx"),j=n(x),T=e("../stores/search_store.jsx"),P=n(T),O=e("../utils/constants.jsx"),I=n(O),D=e("../utils/async_client.jsx"),L=s(D),A=e("../utils/client.jsx"),F=s(A),U=I.default.ActionTypes},{"../dispatcher/app_dispatcher.jsx":281,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/search_store.jsx":331,"../utils/async_client.jsx":336,"../utils/client.jsx":338,"../utils/constants.jsx":339}],283:[function(e,t,a){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function l(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,a,s,r,o,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a=this._events[e],i(a))return!1;if(n(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),a.apply(this,r)}else if(l(a))for(r=Array.prototype.slice.call(arguments,1),c=a.slice(),s=c.length,o=0;s>o;o++)c[o].apply(this,r);return!0},s.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(a=i(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){function a(){this.removeListener(e,a),s||(s=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var s=!1;return a.listener=t,this.on(e,a),this},s.prototype.removeListener=function(e,t){var a,s,r,i;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=this._events[e],r=a.length,s=-1,a===t||n(a.listener)&&a.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(a)){for(i=r;i-- >0;)if(a[i]===t||a[i].listener&&a[i].listener===t){s=i;break}if(0>s)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[e],n(a))this.removeListener(e,a);else if(a)for(;a.length;)this.removeListener(e,a[a.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},{}],284:[function(e,t,a){!function(e){"undefined"!=typeof a?e(a):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("hljs",[],function(){return window.hljs}))}(function(e){function t(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function a(e){return e.nodeName.toLowerCase()}function s(e,t){var a=e&&e.exec(t);return a&&0==a.index}function n(e){return/^(no-?highlight|plain|text)$/i.test(e)}function r(e){var t,a,s,r=e.className+" ";if(r+=e.parentNode?e.parentNode.className:"",a=/\blang(?:uage)?-([\w-]+)\b/i.exec(r))return E(a[1])?a[1]:"no-highlight";for(r=r.split(/\s+/),t=0,s=r.length;s>t;t++)if(E(r[t])||n(r[t]))return r[t]}function l(e,t){var a,s={};for(a in e)s[a]=e[a];if(t)for(a in t)s[a]=t[a];return s}function i(e){var t=[];return function e(s,n){for(var r=s.firstChild;r;r=r.nextSibling)3==r.nodeType?n+=r.nodeValue.length:1==r.nodeType&&(t.push({event:"start",offset:n,node:r}),n=e(r,n),a(r).match(/br|hr|img|input/)||t.push({event:"stop",offset:n,node:r}));return n}(e,0),t}function o(e,s,n){function r(){return e.length&&s.length?e[0].offset!=s[0].offset?e[0].offset<s[0].offset?e:s:"start"==s[0].event?e:s:e.length?e:s}function l(e){function s(e){return" "+e.nodeName+'="'+t(e.value)+'"'}u+="<"+a(e)+Array.prototype.map.call(e.attributes,s).join("")+">"}function i(e){u+="</"+a(e)+">"}function o(e){("start"==e.event?l:i)(e.node)}for(var c=0,u="",d=[];e.length||s.length;){var m=r();if(u+=t(n.substr(c,m[0].offset-c)),c=m[0].offset,m==e){d.reverse().forEach(i);do o(m.splice(0,1)[0]),m=r();while(m==e&&m.length&&m[0].offset==c);d.reverse().forEach(l)}else"start"==m[0].event?d.push(m[0].node):d.pop(),o(m.splice(0,1)[0])}return u+t(n.substr(c))}function c(e){function t(e){return e&&e.source||e}function a(a,s){return new RegExp(t(a),"m"+(e.case_insensitive?"i":"")+(s?"g":""))}function s(n,r){if(!n.compiled){if(n.compiled=!0,n.keywords=n.keywords||n.beginKeywords,n.keywords){var i={},o=function(t,a){e.case_insensitive&&(a=a.toLowerCase()),a.split(" ").forEach(function(e){var a=e.split("|");i[a[0]]=[t,a[1]?Number(a[1]):1]})};"string"==typeof n.keywords?o("keyword",n.keywords):Object.keys(n.keywords).forEach(function(e){o(e,n.keywords[e])}),n.keywords=i}n.lexemesRe=a(n.lexemes||/\b\w+\b/,!0),r&&(n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")\\b"),n.begin||(n.begin=/\B|\b/),n.beginRe=a(n.begin),n.end||n.endsWithParent||(n.end=/\B|\b/),n.end&&(n.endRe=a(n.end)),n.terminator_end=t(n.end)||"",n.endsWithParent&&r.terminator_end&&(n.terminator_end+=(n.end?"|":"")+r.terminator_end)),n.illegal&&(n.illegalRe=a(n.illegal)),void 0===n.relevance&&(n.relevance=1),n.contains||(n.contains=[]);var c=[];n.contains.forEach(function(e){e.variants?e.variants.forEach(function(t){c.push(l(e,t))}):c.push("self"==e?n:e)}),n.contains=c,n.contains.forEach(function(e){s(e,n)}),n.starts&&s(n.starts,r);var u=n.contains.map(function(e){return e.beginKeywords?"\\.?("+e.begin+")\\.?":e.begin}).concat([n.terminator_end,n.illegal]).map(t).filter(Boolean);n.terminators=u.length?a(u.join("|"),!0):{exec:function(){return null}}}}s(e)}function u(e,a,n,r){function l(e,t){for(var a=0;a<t.contains.length;a++)if(s(t.contains[a].beginRe,e))return t.contains[a]}function i(e,t){if(s(e.endRe,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.endsWithParent?i(e.parent,t):void 0}function o(e,t){return!n&&s(t.illegalRe,e)}function m(e,t){var a=_.case_insensitive?t[0].toLowerCase():t[0];return e.keywords.hasOwnProperty(a)&&e.keywords[a]}function p(e,t,a,s){var n=s?"":y.classPrefix,r='<span class="'+n,l=a?"":"</span>";return r+=e+'">',r+t+l}function h(){if(!w.keywords)return t(N);var e="",a=0;w.lexemesRe.lastIndex=0;for(var s=w.lexemesRe.exec(N);s;){e+=t(N.substr(a,s.index-a));var n=m(w,s);n?(M+=n[1],e+=p(n[0],t(s[0]))):e+=t(s[0]),a=w.lexemesRe.lastIndex,s=w.lexemesRe.exec(N)}return e+t(N.substr(a))}function f(){var e="string"==typeof w.subLanguage;if(e&&!R[w.subLanguage])return t(N);var a=e?u(w.subLanguage,N,!0,S[w.subLanguage]):d(N,w.subLanguage.length?w.subLanguage:void 0);return w.relevance>0&&(M+=a.relevance),e&&(S[w.subLanguage]=a.top),p(a.language,a.value,!1,!0)}function g(){return void 0!==w.subLanguage?f():h()}function b(e,a){var s=e.className?p(e.className,"",!0):"";e.returnBegin?(k+=s,N=""):e.excludeBegin?(k+=t(a)+s,N=""):(k+=s,N=a),w=Object.create(e,{parent:{value:w}})}function v(e,a){if(N+=e,void 0===a)return k+=g(),0;var s=l(a,w);if(s)return k+=g(),b(s,a),s.returnBegin?0:a.length;var n=i(w,a);if(n){var r=w;r.returnEnd||r.excludeEnd||(N+=a),k+=g();do w.className&&(k+="</span>"),M+=w.relevance,w=w.parent;while(w!=n.parent);return r.excludeEnd&&(k+=t(a)),N="",n.starts&&b(n.starts,""),r.returnEnd?0:a.length}if(o(a,w))throw new Error('Illegal lexeme "'+a+'" for mode "'+(w.className||"<unnamed>")+'"');return N+=a,a.length||1}var _=E(e);if(!_)throw new Error('Unknown language: "'+e+'"');c(_);var C,w=r||_,S={},k="";for(C=w;C!=_;C=C.parent)C.className&&(k=p(C.className,"",!0)+k);var N="",M=0;try{for(var x,j,T=0;;){if(w.terminators.lastIndex=T,x=w.terminators.exec(a),!x)break;j=v(a.substr(T,x.index-T),x[0]),T=x.index+j}for(v(a.substr(T)),C=w;C.parent;C=C.parent)C.className&&(k+="</span>");return{relevance:M,value:k,language:e,top:w}}catch(e){if(-1!=e.message.indexOf("Illegal"))return{relevance:0,value:t(a)};throw e}}function d(e,a){a=a||y.languages||Object.keys(R);var s={relevance:0,value:t(e)},n=s;return a.forEach(function(t){if(E(t)){var a=u(t,e,!1);a.language=t,a.relevance>n.relevance&&(n=a),a.relevance>s.relevance&&(n=s,s=a)}}),n.language&&(s.second_best=n),s}function m(e){return y.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,y.tabReplace)})),y.useBR&&(e=e.replace(/\n/g,"<br>")),e}function p(e,t,a){var s=t?C[t]:a,n=[e.trim()];return e.match(/\bhljs\b/)||n.push("hljs"),-1===e.indexOf(s)&&n.push(s),n.join(" ").trim()}function h(e){var t=r(e);if(!n(t)){var a;y.useBR?(a=document.createElementNS("http://www.w3.org/1999/xhtml","div"),a.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):a=e;var s=a.textContent,l=t?u(t,s,!0):d(s),c=i(a);if(c.length){var h=document.createElementNS("http://www.w3.org/1999/xhtml","div");h.innerHTML=l.value,l.value=o(c,i(h),s)}l.value=m(l.value),e.innerHTML=l.value,e.className=p(e.className,t,l.language),e.result={language:l.language,re:l.relevance},l.second_best&&(e.second_best={language:l.second_best.language,re:l.second_best.relevance})}}function f(e){y=l(y,e)}function g(){if(!g.called){g.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,h)}}function b(){addEventListener("DOMContentLoaded",g,!1),addEventListener("load",g,!1)}function v(t,a){var s=R[t]=a(e);s.aliases&&s.aliases.forEach(function(e){C[e]=t})}function _(){return Object.keys(R)}function E(e){return e=(e||"").toLowerCase(),R[e]||R[C[e]]}var y={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},R={},C={};return e.highlight=u,e.highlightAuto=d,e.fixMarkup=m,e.highlightBlock=h,e.configure=f,e.initHighlighting=g,e.initHighlightingOnLoad=b,e.registerLanguage=v,e.listLanguages=_,e.getLanguage=E,e.inherit=l,e.IDENT_RE="[a-zA-Z]\\w*",e.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",e.NUMBER_RE="\\b\\d+(\\.\\d+)?",e.C_NUMBER_RE="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BINARY_NUMBER_RE="\\b(0b[01]+)",e.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},e.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},e.COMMENT=function(t,a,s){var n=e.inherit({className:"comment",begin:t,end:a,contains:[]},s||{});return n.contains.push(e.PHRASAL_WORDS_MODE),n.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),n},e.C_LINE_COMMENT_MODE=e.COMMENT("//","$"),e.C_BLOCK_COMMENT_MODE=e.COMMENT("/\\*","\\*/"),e.HASH_COMMENT_MODE=e.COMMENT("#","$"),e.NUMBER_MODE={className:"number",begin:e.NUMBER_RE,relevance:0},e.C_NUMBER_MODE={className:"number",begin:e.C_NUMBER_RE,relevance:0},e.BINARY_NUMBER_MODE={className:"number",begin:e.BINARY_NUMBER_RE,relevance:0},e.CSS_NUMBER_MODE={className:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},e.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}]},e.TITLE_MODE={className:"title",begin:e.IDENT_RE,relevance:0},e.UNDERSCORE_TITLE_MODE={className:"title",begin:e.UNDERSCORE_IDENT_RE,relevance:0},e})},{}],285:[function(e,t,a){t.exports=function(e){var t={className:"number",begin:"[\\$%]\\d+"};return{aliases:["apacheconf"],case_insensitive:!0,contains:[e.HASH_COMMENT_MODE,{className:"tag",begin:"</?",end:">"},{className:"keyword",begin:/\w+/,relevance:0,keywords:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{end:/$/,relevance:0,keywords:{literal:"on off all"},contains:[{className:"sqbracket",begin:"\\s\\[",end:"\\]$"},{className:"cbracket",begin:"[\\$%]\\{",end:"\\}",contains:["self",t]},t,e.QUOTE_STRING_MODE]}}],illegal:/\S/}}},{}],286:[function(e,t,a){t.exports=function(e){var t={className:"variable",variants:[{begin:/\$[\w\d#@][\w\d_]*/},{begin:/\$\{(.*?)}/}]},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t,{className:"variable",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]}]},s={className:"string",begin:/'/,end:/'/};return{aliases:["sh","zsh"],lexemes:/-?[a-z\.]+/,keywords:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},contains:[{className:"shebang",begin:/^#![^\n]+sh\s*$/,relevance:10},{className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},e.HASH_COMMENT_MODE,e.NUMBER_MODE,a,s,t]}}},{}],287:[function(e,t,a){t.exports=function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},a="[A-Za-z$_][0-9A-Za-z$_]*",s={className:"subst",begin:/#\{/,end:/}/,keywords:t},n=[e.BINARY_NUMBER_MODE,e.inherit(e.C_NUMBER_MODE,{starts:{end:"(\\s*/)?",relevance:0}}),{className:"string",variants:[{begin:/'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE]},{begin:/'/,end:/'/,contains:[e.BACKSLASH_ESCAPE]},{begin:/"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,s]},{begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,s]}]},{className:"regexp",variants:[{begin:"///",end:"///",contains:[s,e.HASH_COMMENT_MODE]},{begin:"//[gim]*",relevance:0},{begin:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{className:"property",begin:"@"+a},{begin:"`",end:"`",excludeBegin:!0,excludeEnd:!0,subLanguage:"javascript"}];s.contains=n;var r=e.inherit(e.TITLE_MODE,{begin:a}),l="(\\(.*\\))?\\s*\\B[-=]>",i={className:"params",begin:"\\([^\\(]",returnBegin:!0,contains:[{begin:/\(/,end:/\)/,keywords:t,contains:["self"].concat(n)}]};return{aliases:["coffee","cson","iced"],keywords:t,illegal:/\/\*/,contains:n.concat([e.COMMENT("###","###"),e.HASH_COMMENT_MODE,{className:"function",begin:"^\\s*"+a+"\\s*=\\s*"+l,end:"[-=]>",returnBegin:!0,contains:[r,i]},{begin:/[:\(,=]\s*/,relevance:0,contains:[{className:"function",begin:l,end:"[-=]>",returnBegin:!0,contains:[i]}]},{className:"class",beginKeywords:"class",end:"$",illegal:/[:="\[\]]/,contains:[{beginKeywords:"extends",endsWithParent:!0,illegal:/[:="\[\]]/,contains:[r]},r]},{className:"attribute",begin:a+":",end:":",returnBegin:!0,returnEnd:!0,relevance:0}])}}},{}],288:[function(e,t,a){t.exports=function(e){var t={className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},a={className:"string",variants:[e.inherit(e.QUOTE_STRING_MODE,{begin:'((u8?|U)|L)?"'}),{begin:'(u8?|U)?R"',end:'"',contains:[e.BACKSLASH_ESCAPE]},{begin:"'\\\\?.",end:"'",illegal:"."}]},s={className:"number",variants:[{begin:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},{begin:e.C_NUMBER_RE}]},n={className:"preprocessor",begin:"#",end:"$",keywords:"if else elif endif define undef warning error line pragma ifdef ifndef",contains:[{begin:/\\\n/,relevance:0},{beginKeywords:"include",end:"$",contains:[a,{className:"string",begin:"<",end:">",illegal:"\\n"}]},a,s,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},r=e.IDENT_RE+"\\s*\\(",l={keyword:"int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf",literal:"true false nullptr NULL"};return{aliases:["c","cc","h","c++","h++","hpp"],keywords:l,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,s,a,n,{begin:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",end:">",keywords:l,contains:["self",t]},{begin:e.IDENT_RE+"::",keywords:l},{beginKeywords:"new throw return else",relevance:0},{className:"function",begin:"("+e.IDENT_RE+"[\\*&\\s]+)+"+r,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:l,illegal:/[^\w\s\*&]/,contains:[{begin:r,returnBegin:!0,contains:[e.TITLE_MODE],relevance:0},{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,a,s]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,n]}]}}},{}],289:[function(e,t,a){t.exports=function(e){var t="abstract as base bool break byte case catch char checked const continue decimal dynamic default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null when object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",a=e.IDENT_RE+"(<"+e.IDENT_RE+">)?";return{aliases:["csharp"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"xmlDocTag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"preprocessor",begin:"#",end:"$",keywords:"if else elif endif define undef warning error line region endregion pragma checksum"},{className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,{beginKeywords:"class interface",end:/[{;=]/,illegal:/[^\s:]/,contains:[e.TITLE_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",end:/[{;=]/,illegal:/[^\s:]/,contains:[{className:"title",begin:"[a-zA-Z](\\.?\\w)*",relevance:0},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new return throw await",relevance:0},{className:"function",begin:"("+a+"\\s+)+"+e.IDENT_RE+"\\s*\\(",returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:t,contains:[{begin:e.IDENT_RE+"\\s*\\(",returnBegin:!0,contains:[e.TITLE_MODE],relevance:0},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]}]}}},{}],290:[function(e,t,a){t.exports=function(e){var t="[a-zA-Z-][a-zA-Z0-9_-]*",a={className:"function",begin:t+"\\(",returnBegin:!0,excludeEnd:!0,end:"\\("},s={className:"rule",begin:/[A-Z\_\.\-]+\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{className:"value",endsWithParent:!0,excludeEnd:!0,contains:[a,e.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_BLOCK_COMMENT_MODE,{className:"hexcolor",begin:"#[0-9A-Fa-f]+"},{className:"important",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[e.C_BLOCK_COMMENT_MODE,{className:"id",begin:/\#[A-Za-z0-9_-]+/},{className:"class",begin:/\.[A-Za-z0-9_-]+/},{className:"attr_selector",begin:/\[/,end:/\]/,illegal:"$"},{className:"pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"']+/},{className:"at_rule",begin:"@(font-face|page)",lexemes:"[a-z-]+",keywords:"font-face page"},{className:"at_rule",begin:"@",end:"[{;]",contains:[{className:"keyword",begin:/\S+/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,contains:[a,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.CSS_NUMBER_MODE]}]},{className:"tag",begin:t,relevance:0},{className:"rules",begin:"{",end:"}",illegal:/\S/,contains:[e.C_BLOCK_COMMENT_MODE,s]}]}}},{}],291:[function(e,t,a){t.exports=function(e){return{aliases:["patch"],contains:[{className:"chunk",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"header",variants:[{begin:/Index: /,end:/$/},{begin:/=====/,end:/=====$/},{begin:/^\-\-\-/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+\+\+/,end:/$/},{begin:/\*{5}/,end:/\*{5}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"change",begin:"^\\!",end:"$"}]}}},{}],292:[function(e,t,a){t.exports=function(e){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer",constant:"true false iota nil",typename:"bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:"'",end:"[^\\\\]'"},{className:"string",begin:"`",end:"`"},{className:"number",begin:e.C_NUMBER_RE+"[dflsi]?",relevance:0},e.C_NUMBER_MODE]}}},{}],293:[function(e,t,a){t.exports=function(e){return{aliases:["https"],illegal:"\\S",contains:[{className:"status",begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"
}]},{className:"request",begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{className:"string",end:"$"}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}}},{}],294:[function(e,t,a){t.exports=function(e){var t={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]};return{aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[e.COMMENT(";","$"),e.HASH_COMMENT_MODE,{className:"title",begin:/^\s*\[+/,end:/\]+/},{className:"setting",begin:/^[a-z0-9\[\]_-]+\s*=\s*/,end:"$",contains:[{className:"value",endsWithParent:!0,keywords:"on off true false yes no",contains:[{className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)}/}]},t,{className:"number",begin:/([\+\-]+)?[\d]+_[\d_]+/},e.NUMBER_MODE],relevance:0}]}]}}},{}],295:[function(e,t,a){t.exports=function(e){var t=e.UNDERSCORE_IDENT_RE+"(<"+e.UNDERSCORE_IDENT_RE+">)?",a="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",s="\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",n={className:"number",begin:s,relevance:0};return{aliases:["jsp"],keywords:a,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"class",beginKeywords:"class interface",end:/[{;=]/,excludeEnd:!0,keywords:"class interface",illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"new throw return else",relevance:0},{className:"function",begin:"("+t+"\\s+)+"+e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:a,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,keywords:a,relevance:0,contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},n,{className:"annotation",begin:"@[A-Za-z]+"}]}}},{}],296:[function(e,t,a){t.exports=function(e){return{aliases:["js"],keywords:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},contains:[{className:"pi",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,{className:"subst",begin:"\\$\\{",end:"\\}"}]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"number",variants:[{begin:"\\b(0[bB][01]+)"},{begin:"\\b(0[oO][0-7]+)"},{begin:e.C_NUMBER_RE}],relevance:0},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.REGEXP_MODE,{begin:/</,end:/>\s*[);\]]/,relevance:0,subLanguage:"xml"}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/[A-Za-z$_][0-9A-Za-z$_]*/}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]}],illegal:/\[|%/},{begin:/\$[(.]/},{begin:"\\."+e.IDENT_RE,relevance:0},{beginKeywords:"import",end:"[;$]",keywords:"import from as",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},e.UNDERSCORE_TITLE_MODE]}],illegal:/#/}}},{}],297:[function(e,t,a){t.exports=function(e){var t={literal:"true false null"},a=[e.QUOTE_STRING_MODE,e.C_NUMBER_MODE],s={className:"value",end:",",endsWithParent:!0,excludeEnd:!0,contains:a,keywords:t},n={begin:"{",end:"}",contains:[{className:"attribute",begin:'\\s*"',end:'"\\s*:\\s*',excludeBegin:!0,excludeEnd:!0,contains:[e.BACKSLASH_ESCAPE],illegal:"\\n",starts:s}],illegal:"\\S"},r={begin:"\\[",end:"\\]",contains:[e.inherit(s,{className:null})],illegal:"\\S"};return a.splice(a.length,0,n,r),{contains:a,keywords:t,illegal:"\\S"}}},{}],298:[function(e,t,a){t.exports=function(e){var t={className:"variable",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]};return{aliases:["mk","mak"],contains:[e.HASH_COMMENT_MODE,{begin:/^\w+\s*\W*=/,returnBegin:!0,relevance:0,starts:{className:"constant",end:/\s*\W*=/,excludeEnd:!0,starts:{end:/$/,relevance:0,contains:[t]}}},{className:"title",begin:/^[\w]+:\s*$/},{className:"phony",begin:/^\.PHONY:/,end:/$/,keywords:".PHONY",lexemes:/[\.\w]+/},{begin:/^\t+/,end:/$/,relevance:0,contains:[e.QUOTE_STRING_MODE,t]}]}}},{}],299:[function(e,t,a){t.exports=function(e){return{aliases:["md","mkdown","mkd"],contains:[{className:"header",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"blockquote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"`.+?`"},{begin:"^( {4}|	)",end:"$",relevance:0}]},{className:"horizontal_rule",begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"link_label",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link_url",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"link_reference",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:"^\\[.+\\]:",returnBegin:!0,contains:[{className:"link_reference",begin:"\\[",end:"\\]:",excludeBegin:!0,excludeEnd:!0,starts:{className:"link_url",end:"$"}}]}]}}},{}],300:[function(e,t,a){t.exports=function(e){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+e.UNDERSCORE_IDENT_RE}]},a={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{className:"url",begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{begin:e.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"title",begin:e.UNDERSCORE_IDENT_RE,starts:a}],relevance:0}],illegal:"[^\\s\\}]"}}},{}],301:[function(e,t,a){t.exports=function(e){var t={className:"built_in",begin:"(AV|CA|CF|CG|CI|MK|MP|NS|UI)\\w+"},a={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},s=/[a-zA-Z@][a-zA-Z0-9_]*/,n="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],keywords:a,lexemes:s,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"'",end:"[^\\\\]'",illegal:"[^\\\\][^']"}]},{className:"preprocessor",begin:"#",end:"$",contains:[{className:"title",variants:[{begin:'"',end:'"'},{begin:"<",end:">"}]}]},{className:"class",begin:"("+n.split(" ").join("|")+")\\b",end:"({|$)",excludeEnd:!0,keywords:n,lexemes:s,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"variable",begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}},{}],302:[function(e,t,a){t.exports=function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",a={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},s={begin:"->{",end:"}"},n={className:"variable",variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},r=[e.BACKSLASH_ESCAPE,a,n],l=[n,e.HASH_COMMENT_MODE,e.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),s,{className:"string",contains:r,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[e.BACKSLASH_ESCAPE],relevance:0}]},{className:"sub",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",relevance:5},{className:"operator",begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return a.contains=l,s.contains=l,{aliases:["pl"],keywords:t,contains:l}}},{}],303:[function(e,t,a){t.exports=function(e){var t={className:"variable",begin:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},a={className:"preprocessor",begin:/<\?(php)?|\?>/},s={className:"string",contains:[e.BACKSLASH_ESCAPE,a],variants:[{begin:'b"',end:'"'},{begin:"b'",end:"'"},e.inherit(e.APOS_STRING_MODE,{illegal:null}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null})]},n={variants:[e.BINARY_NUMBER_MODE,e.C_NUMBER_MODE]};return{aliases:["php3","php4","php5","php6"],case_insensitive:!0,keywords:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",contains:[e.C_LINE_COMMENT_MODE,e.HASH_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"},a]}),e.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,keywords:"__halt_compiler",lexemes:e.UNDERSCORE_IDENT_RE}),{className:"string",begin:/<<<['"]?\w+['"]?$/,end:/^\w+;?$/,contains:[e.BACKSLASH_ESCAPE,{className:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]}]},a,t,{begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{className:"function",beginKeywords:"function",end:/[;{]/,excludeEnd:!0,illegal:"\\$|\\[|%",contains:[e.UNDERSCORE_TITLE_MODE,{className:"params",begin:"\\(",end:"\\)",contains:["self",t,e.C_BLOCK_COMMENT_MODE,s,n]}]},{className:"class",beginKeywords:"class interface",end:"{",excludeEnd:!0,illegal:/[:\(\$"]/,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",end:";",illegal:/[\.']/,contains:[e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",end:";",contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"=>"},s,n]}}},{}],304:[function(e,t,a){t.exports=function(e){var t={className:"prompt",begin:/^(>>>|\.\.\.) /},a={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[t],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[t],relevance:10},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},s={className:"number",relevance:0,variants:[{begin:e.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:e.C_NUMBER_RE+"[lLjJ]?"}]},n={className:"params",begin:/\(/,end:/\)/,contains:["self",t,s,a]};return{aliases:["py","gyp"],keywords:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},illegal:/(<\/|->|\?)/,contains:[t,s,a,e.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def",relevance:10},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[e.UNDERSCORE_TITLE_MODE,n]},{className:"decorator",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}}},{}],305:[function(e,t,a){t.exports=function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",a="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",s={className:"doctag",begin:"@[A-Za-z]+"},n={className:"value",begin:"#<",end:">"},r=[e.COMMENT("#","$",{contains:[s]}),e.COMMENT("^\\=begin","^\\=end",{contains:[s],relevance:10}),e.COMMENT("^__END__","\\n$")],l={className:"subst",begin:"#\\{",end:"}",keywords:a},i={className:"string",contains:[e.BACKSLASH_ESCAPE,l],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:"%[qQwWx]?\\(",end:"\\)"},{begin:"%[qQwWx]?\\[",end:"\\]"},{begin:"%[qQwWx]?{",end:"}"},{begin:"%[qQwWx]?<",end:">"},{begin:"%[qQwWx]?/",end:"/"},{begin:"%[qQwWx]?%",end:"%"},{begin:"%[qQwWx]?-",end:"-"},{begin:"%[qQwWx]?\\|",end:"\\|"},{begin:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},o={className:"params",begin:"\\(",end:"\\)",keywords:a},c=[i,n,{className:"class",beginKeywords:"class module",end:"$|;",illegal:/=/,contains:[e.inherit(e.TITLE_MODE,{begin:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{className:"inheritance",begin:"<\\s*",contains:[{className:"parent",begin:"("+e.IDENT_RE+"::)?"+e.IDENT_RE}]}].concat(r)},{className:"function",beginKeywords:"def",end:"$|;",contains:[e.inherit(e.TITLE_MODE,{begin:t}),o].concat(r)},{className:"constant",begin:"(::)?(\\b[A-Z]\\w*(::)?)+",relevance:0},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(\\!|\\?)?:",relevance:0},{className:"symbol",begin:":",contains:[i,{begin:t}],relevance:0},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{className:"variable",begin:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{begin:"("+e.RE_STARTERS_RE+")\\s*",contains:[n,{className:"regexp",contains:[e.BACKSLASH_ESCAPE,l],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:"%r{",end:"}[a-z]*"},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(r),relevance:0}].concat(r);l.contains=c,o.contains=c;var u="[>?]>",d="[\\w#]+\\(\\w+\\):\\d+:\\d+>",m="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",p=[{begin:/^\s*=>/,className:"status",starts:{end:"$",contains:c}},{className:"prompt",begin:"^("+u+"|"+d+"|"+m+")",starts:{end:"$",contains:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:r.concat(p).concat(c)}}},{}],306:[function(e,t,a){t.exports=function(e){var t=e.COMMENT("--","$");return{case_insensitive:!0,illegal:/[<>{}*]/,contains:[{className:"operator",beginKeywords:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke",end:/;/,endsWithParent:!0,keywords:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes c cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle d data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration e each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract f failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function g general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http i id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists k keep keep_duplicates key keys kill l language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim m main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex n name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding p package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime t table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},contains:[{className:"string",begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE,{begin:"''"}]},{className:"string",begin:'"',end:'"',contains:[e.BACKSLASH_ESCAPE,{begin:'""'}]},{className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t]},e.C_BLOCK_COMMENT_MODE,t]}}},{}],307:[function(e,t,a){t.exports=function(e){var t="[A-Za-z0-9\\._:-]+",a={begin:/<\?(php)?(?!\w)/,end:/\?>/,subLanguage:"php"},s={endsWithParent:!0,illegal:/</,relevance:0,contains:[a,{className:"attribute",begin:t,relevance:0},{begin:"=",relevance:0,contains:[{className:"value",contains:[a],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/},{begin:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],case_insensitive:!0,contains:[{className:"doctype",begin:"<!DOCTYPE",end:">",relevance:10,contains:[{begin:"\\[",end:"\\]"}]},e.COMMENT("<!--","-->",{relevance:10}),{className:"cdata",begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},{className:"tag",begin:"<style(?=\\s|>|$)",end:">",keywords:{title:"style"},contains:[s],starts:{end:"</style>",returnEnd:!0,subLanguage:"css"}},{className:"tag",begin:"<script(?=\\s|>|$)",end:">",keywords:{title:"script"},contains:[s],starts:{end:"</script>",returnEnd:!0,
subLanguage:["actionscript","javascript","handlebars"]}},a,{className:"pi",begin:/<\?\w+/,end:/\?>/,relevance:10},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"title",begin:/[^ \/><\n\t]+/,relevance:0},s]}]}}},{}],308:[function(e,t,a){t.exports={addLocaleData:ReactIntl.addLocaleData,defineMessages:ReactIntl.defineMessages,intlShape:ReactIntl.intlShape,injectIntl:ReactIntl.injectIntl,IntlProvider:ReactIntl.IntlProvider,FormattedDate:ReactIntl.FormattedDate,FormattedTime:ReactIntl.FormattedTime,FormattedRelative:ReactIntl.FormattedRelative,FormattedNumber:ReactIntl.FormattedNumber,FormattedPlural:ReactIntl.FormattedPlural,FormattedMessage:ReactIntl.FormattedMessage,FormattedHTMLMessage:ReactIntl.FormattedHTMLMessage}},{}],309:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/error_bar.jsx"),f=s(h),g=e("../components/admin_console/select_team_modal.jsx"),b=s(g),v=e("../components/admin_console/admin_controller.jsx"),_=s(v),E=e("../utils/client.jsx"),y=a(E),R=ReactIntl.IntlProvider,C=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;y.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(R,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement("div",null,React.createElement(f.default,null),React.createElement(_.default,{tab:this.props.map.ActiveTab,teamId:this.props.map.TeamId}),React.createElement(b.default,null))):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_admin_console_page=function(e){ReactDOM.render(React.createElement(C,{map:e}),document.getElementById("admin_controller"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/admin_console/admin_controller.jsx":113,"../components/admin_console/select_team_modal.jsx":130,"../components/error_bar.jsx":162,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],310:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/authorize.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{teamName:this.props.map.TeamName,appName:this.props.map.AppName,responseType:this.props.map.ResponseType,clientId:this.props.map.ClientId,redirectUri:this.props.map.RedirectUri,scope:this.props.map.Scope,state:this.props.map.State})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_authorize_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("authorize"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/authorize.jsx":139,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],311:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/channel_view.jsx"),f=s(h),g=e("../components/channel_loader.jsx"),b=s(g),v=e("../components/error_bar.jsx"),_=s(v),E=e("../utils/client.jsx"),y=a(E),R=e("../components/get_team_invite_link_modal.jsx"),C=s(R),w=e("../components/rename_channel_modal.jsx"),S=s(w),k=e("../components/edit_post_modal.jsx"),N=s(k),M=e("../components/delete_post_modal.jsx"),x=s(M),j=e("../components/more_channels.jsx"),T=s(j),P=e("../components/post_deleted_modal.jsx"),O=s(P),I=e("../components/team_settings_modal.jsx"),D=s(I),L=e("../components/removed_from_channel_modal.jsx"),A=s(L),F=e("../components/register_app_modal.jsx"),U=s(F),$=e("../components/user_settings/import_theme_modal.jsx"),H=s($),B=e("../components/invite_member_modal.jsx"),q=s(B),G=e("../dispatcher/event_helpers.jsx"),V=a(G),W=ReactIntl.IntlProvider,z=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;y.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(W,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement("div",{className:"channel-view"},React.createElement(b.default,null),React.createElement(_.default,null),React.createElement(f.default,null),React.createElement(C.default,null),React.createElement(q.default,null),React.createElement(H.default,null),React.createElement(D.default,null),React.createElement(S.default,null),React.createElement(T.default,null),React.createElement(N.default,null),React.createElement(x.default,null),React.createElement(O.default,null),React.createElement(A.default,null),React.createElement(U.default,null))):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_channel_page=function(e,t,a){""===e.PostId?V.emitChannelClickEvent(a):V.emitPostFocusEvent(e.PostId),ReactDOM.render(React.createElement(z,{map:e}),document.getElementById("channel_view"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/channel_loader.jsx":145,"../components/channel_view.jsx":148,"../components/delete_post_modal.jsx":156,"../components/edit_post_modal.jsx":160,"../components/error_bar.jsx":162,"../components/get_team_invite_link_modal.jsx":171,"../components/invite_member_modal.jsx":172,"../components/more_channels.jsx":182,"../components/post_deleted_modal.jsx":200,"../components/register_app_modal.jsx":207,"../components/removed_from_channel_modal.jsx":208,"../components/rename_channel_modal.jsx":209,"../components/team_settings_modal.jsx":244,"../components/user_settings/import_theme_modal.jsx":263,"../dispatcher/event_helpers.jsx":282,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],312:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/claim/claim_account.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{email:this.props.map.Email,currentType:this.props.map.CurrentType,newType:this.props.map.NewType,teamName:this.props.map.TeamName,teamDisplayName:this.props.map.TeamDisplayName})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_claim_account_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("claim"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/claim/claim_account.jsx":149,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],313:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/docs.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{site:this.props.map.Site})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.mm_user=t.window.mm_user||{},t.window.setup_documentation_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("docs"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/docs.jsx":157,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],314:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/find_team.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,null)):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_find_team_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("find-team"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/find_team.jsx":169,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],315:[function(e,t,a){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(){var e=null;null==e||0===e.length?window.location=r.default.getCurrentTeamUrl()+"/channels/"+i.default.DEFAULT_CHANNEL:window.location=r.default.getCurrentTeamUrl()+"/channels/"+e}var n=e("../stores/team_store.jsx"),r=a(n),l=e("../utils/constants.jsx"),i=a(l);t.window.setup_home_page=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/team_store.jsx":334,"../utils/constants.jsx":339}],316:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../utils/client.jsx"),f=a(h),g=e("../components/login.jsx"),b=s(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;f.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(b.default,{teamDisplayName:this.props.map.TeamDisplayName,teamName:this.props.map.TeamName,inviteId:this.props.map.InviteId})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_login_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("login"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/login.jsx":174,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],317:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/password_reset.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{isReset:this.props.map.IsReset,teamDisplayName:this.props.map.TeamDisplayName,teamName:this.props.map.TeamName,hash:this.props.map.Hash,data:this.props.map.Data})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_password_reset_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("reset"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/password_reset.jsx":190,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],318:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/signup_team.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{teams:this.props.teams})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired,teams:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_signup_team_page=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&"Title"!==a&&"Locale"!==a&&"Info"!==a&&t.push({name:a,display_name:e[a]});ReactDOM.render(React.createElement(_,{map:e,teams:t}),document.getElementById("signup-team"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_team.jsx":227,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],319:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/signup_team_complete.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{email:this.props.map.Email,hash:this.props.map.Hash,data:this.props.map.Data})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_signup_team_complete_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("signup-team-complete"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_team_complete.jsx":228,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],320:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/signup_team_confirm.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{email:this.props.map.Email})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_signup_team_confirm_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("signup-team-confirm"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_team_confirm.jsx":229,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],321:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/signup_user_complete.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{teamId:this.props.map.TeamId,teamName:this.props.map.TeamName,teamDisplayName:this.props.map.TeamDisplayName,email:this.props.map.Email,hash:this.props.map.Hash,data:this.props.map.Data})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setup_signup_user_complete_page=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("signup-user-complete"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/signup_user_complete.jsx":230,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],322:[function(e,t,a){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m),h=e("../components/email_verify.jsx"),f=s(h),g=e("../utils/client.jsx"),b=a(g),v=ReactIntl.IntlProvider,_=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.state={translations:null,loaded:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this;b.getTranslations(this.props.map.Locale,function(t){e.setState({translations:t,loaded:!0})},function(){e.setState({loaded:!0})})}},{key:"render",value:function(){return this.state.loaded?React.createElement(v,{locale:this.props.map.Locale,messages:this.state.translations},React.createElement(f.default,{isVerified:this.props.map.IsVerified,teamURL:this.props.map.TeamURL,userEmail:this.props.map.UserEmail,resendSuccess:this.props.map.ResendSuccess})):React.createElement("div",null)}}],[{key:"propTypes",value:function(){return{map:React.PropTypes.object.isRequired}}}]),t}(React.Component);t.window.setupVerifyPage=function(e){ReactDOM.render(React.createElement(_,{map:e}),document.getElementById("verify"))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/email_verify.jsx":161,"../utils/client.jsx":338,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22}],323:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../dispatcher/app_dispatcher.jsx"),f=s(h),g=e("events"),b=s(g),v=e("../stores/browser_store.jsx"),_=s(v),E=e("../utils/constants.jsx"),y=s(E),R=y.default.ActionTypes,C="log_change",w="config_change",S="all_team_change",k=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.logs=null,e.config=null,e.teams=null,e.emitLogChange=e.emitLogChange.bind(e),e.addLogChangeListener=e.addLogChangeListener.bind(e),e.removeLogChangeListener=e.removeLogChangeListener.bind(e),e.emitConfigChange=e.emitConfigChange.bind(e),e.addConfigChangeListener=e.addConfigChangeListener.bind(e),e.removeConfigChangeListener=e.removeConfigChangeListener.bind(e),e.emitAllTeamsChange=e.emitAllTeamsChange.bind(e),e.addAllTeamsChangeListener=e.addAllTeamsChangeListener.bind(e),e.removeAllTeamsChangeListener=e.removeAllTeamsChangeListener.bind(e),e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"emitLogChange",value:function(){this.emit(C)}},{key:"addLogChangeListener",value:function(e){this.on(C,e)}},{key:"removeLogChangeListener",value:function(e){this.removeListener(C,e)}},{key:"emitConfigChange",value:function(){this.emit(w)}},{key:"addConfigChangeListener",value:function(e){this.on(w,e)}},{key:"removeConfigChangeListener",value:function(e){this.removeListener(w,e)}},{key:"emitAllTeamsChange",value:function(){this.emit(S)}},{key:"addAllTeamsChangeListener",value:function(e){this.on(S,e)}},{key:"removeAllTeamsChangeListener",value:function(e){this.removeListener(S,e)}},{key:"getLogs",value:function(){return this.logs}},{key:"saveLogs",value:function(e){this.logs=e}},{key:"getConfig",value:function(){return this.config}},{key:"saveConfig",value:function(e){this.config=e}},{key:"getAllTeams",value:function(){return this.teams}},{key:"saveAllTeams",value:function(e){this.teams=e}},{key:"getSelectedTeams",value:function(){return _.default.getItem("seleted_teams")}},{key:"saveSelectedTeams",value:function(e){_.default.setItem("seleted_teams",e)}}]),t}(b.default),N=new k;k.dispatchToken=f.default.register(function(e){var t=e.action;switch(t.type){case R.RECIEVED_LOGS:N.saveLogs(t.logs),N.emitLogChange();break;case R.RECIEVED_CONFIG:N.saveConfig(t.config),N.emitConfigChange();break;case R.RECIEVED_ALL_TEAMS:N.saveAllTeams(t.teams),N.emitAllTeamsChange()}}),a.default=N},{"../dispatcher/app_dispatcher.jsx":281,"../stores/browser_store.jsx":324,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,
"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],324:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(){return t.window.mm_user?t.window.mm_user.id+"_":"unknown_"}var r=e("babel-runtime/core-js/json/stringify"),l=s(r),i=e("babel-runtime/helpers/classCallCheck"),o=s(i),c=e("babel-runtime/helpers/createClass"),u=s(c);Object.defineProperty(a,"__esModule",{value:!0});var d=e("../utils/utils.jsx"),m=function(){function e(){(0,o.default)(this,e),this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this),this.setGlobalItem=this.setGlobalItem.bind(this),this.getGlobalItem=this.getGlobalItem.bind(this),this.removeGlobalItem=this.removeGlobalItem.bind(this),this.actionOnItemsWithPrefix=this.actionOnItemsWithPrefix.bind(this),this.actionOnGlobalItemsWithPrefix=this.actionOnGlobalItemsWithPrefix.bind(this),this.isLocalStorageSupported=this.isLocalStorageSupported.bind(this),this.getLastServerVersion=this.getLastServerVersion.bind(this),this.setLastServerVersion=this.setLastServerVersion.bind(this),this.clear=this.clear.bind(this),this.clearAll=this.clearAll.bind(this),this.checkedLocalStorageSupported="",this.signalLogout=this.signalLogout.bind(this),this.isSignallingLogout=this.isSignallingLogout.bind(this),this.signalLogin=this.signalLogin.bind(this),this.isSignallingLogin=this.isSignallingLogin.bind(this);var a=sessionStorage.getItem("storage_version");if(a!==t.window.mm_config.Version){sessionStorage.clear();try{sessionStorage.setItem("storage_version",t.window.mm_config.Version)}catch(e){}}}return(0,u.default)(e,[{key:"getItem",value:function(e,t){var a=null;try{a=JSON.parse(sessionStorage.getItem(n()+e))}catch(e){a=null}return null===a&&"undefined"!=typeof t&&(a=t),a}},{key:"setItem",value:function(e,t){sessionStorage.setItem(n()+e,(0,l.default)(t))}},{key:"removeItem",value:function(e){sessionStorage.removeItem(n()+e)}},{key:"setGlobalItem",value:function(e,t){try{this.isLocalStorageSupported()?localStorage.setItem(n()+e,(0,l.default)(t)):sessionStorage.setItem(n()+e,(0,l.default)(t))}catch(e){console.log("An error occurred while setting local storage, clearing all props"),localStorage.clear(),sessionStorage.clear(),window.location.reload(!0)}}},{key:"getGlobalItem",value:function(e,t){var a=null;try{a=this.isLocalStorageSupported()?JSON.parse(localStorage.getItem(n()+e)):JSON.parse(sessionStorage.getItem(n()+e))}catch(e){a=null}return null===a&&"undefined"!=typeof t&&(a=t),a}},{key:"removeGlobalItem",value:function(e){this.isLocalStorageSupported()?localStorage.removeItem(n()+e):sessionStorage.removeItem(n()+e)}},{key:"getLastServerVersion",value:function(){return sessionStorage.getItem("last_server_version")}},{key:"setLastServerVersion",value:function(e){sessionStorage.setItem("last_server_version",e)}},{key:"signalLogout",value:function(){if(this.isLocalStorageSupported()){var e=(0,d.generateId)();sessionStorage.setItem("__logout__",e),localStorage.setItem("__logout__",e),localStorage.removeItem("__logout__")}}},{key:"isSignallingLogout",value:function(e){return e===sessionStorage.getItem("__logout__")}},{key:"signalLogin",value:function(){if(this.isLocalStorageSupported()){var e=(0,d.generateId)();sessionStorage.setItem("__login__",e),localStorage.setItem("__login__",e),localStorage.removeItem("__login__")}}},{key:"isSignallingLogin",value:function(e){return e===sessionStorage.getItem("__login__")}},{key:"actionOnGlobalItemsWithPrefix",value:function(e,t){var a=n(),s=a.length,r=sessionStorage;this.isLocalStorageSupported()&&(r=localStorage);for(var l in r)if(0===l.lastIndexOf(a+e,0)){var i=l.substring(s);t(i,this.getGlobalItem(l))}}},{key:"actionOnItemsWithPrefix",value:function(e,t){var a=n(),s=a.length;for(var r in sessionStorage)if(0===r.lastIndexOf(a+e,0)){var l=r.substring(s);t(l,this.getGlobalItem(r))}}},{key:"clear",value:function(){var e=sessionStorage.getItem("__logout__");sessionStorage.clear(),e&&sessionStorage.setItem("__logout__",e)}},{key:"clearAll",value:function(){sessionStorage.clear(),localStorage.clear()}},{key:"isLocalStorageSupported",value:function(){if(""!==this.checkedLocalStorageSupported)return this.checkedLocalStorageSupported;try{sessionStorage.setItem("__testSession__","1"),sessionStorage.removeItem("__testSession__"),localStorage.setItem("__testLocal__","1"),"1"!==localStorage.getItem("__testLocal__")&&(this.checkedLocalStorageSupported=!1),localStorage.removeItem("__testLocal__","1"),this.checkedLocalStorageSupported=!0}catch(e){this.checkedLocalStorageSupported=!1}return this.checkedLocalStorageSupported}}]),e}(),p=new m;a.default=p,window.BrowserStore=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/utils.jsx":344,"babel-runtime/core-js/json/stringify":4,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17}],325:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/json/stringify"),r=s(n),l=e("babel-runtime/core-js/object/get-prototype-of"),i=s(l),o=e("babel-runtime/helpers/classCallCheck"),c=s(o),u=e("babel-runtime/helpers/createClass"),d=s(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=s(m),h=e("babel-runtime/helpers/inherits"),f=s(h);Object.defineProperty(a,"__esModule",{value:!0});var g,b=e("../dispatcher/app_dispatcher.jsx"),v=s(b),_=e("events"),E=s(_),y=e("../utils/constants.jsx"),R=s(y),C=R.default.ActionTypes,w=R.default.NotificationPrefs,S="change",k="leave",N="change",M="extra_info",x=function(t){function a(e){(0,c.default)(this,a);var t=(0,p.default)(this,(0,i.default)(a).call(this,e));return t.setMaxListeners(15),t.emitChange=t.emitChange.bind(t),t.addChangeListener=t.addChangeListener.bind(t),t.removeChangeListener=t.removeChangeListener.bind(t),t.emitMoreChange=t.emitMoreChange.bind(t),t.addMoreChangeListener=t.addMoreChangeListener.bind(t),t.removeMoreChangeListener=t.removeMoreChangeListener.bind(t),t.emitExtraInfoChange=t.emitExtraInfoChange.bind(t),t.addExtraInfoChangeListener=t.addExtraInfoChangeListener.bind(t),t.removeExtraInfoChangeListener=t.removeExtraInfoChangeListener.bind(t),t.emitLeave=t.emitLeave.bind(t),t.addLeaveListener=t.addLeaveListener.bind(t),t.removeLeaveListener=t.removeLeaveListener.bind(t),t.findFirstBy=t.findFirstBy.bind(t),t.get=t.get.bind(t),t.getMember=t.getMember.bind(t),t.getByName=t.getByName.bind(t),t.setPostMode=t.setPostMode.bind(t),t.getPostMode=t.getPostMode.bind(t),t.setUnreadCount=t.setUnreadCount.bind(t),t.setUnreadCounts=t.setUnreadCounts.bind(t),t.getUnreadCount=t.getUnreadCount.bind(t),t.getUnreadCounts=t.getUnreadCounts.bind(t),t.currentId=null,t.postMode=t.POST_MODE_CHANNEL,t.channels=[],t.channelMembers={},t.moreChannels={},t.moreChannels.loading=!0,t.extraInfos={},t.unreadCounts={},t}return(0,f.default)(a,t),(0,d.default)(a,[{key:"emitChange",value:function(){this.emit(S)}},{key:"addChangeListener",value:function(e){this.on(S,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(S,e)}},{key:"emitMoreChange",value:function(){this.emit(N)}},{key:"addMoreChangeListener",value:function(e){this.on(N,e)}},{key:"removeMoreChangeListener",value:function(e){this.removeListener(N,e)}},{key:"emitExtraInfoChange",value:function(){this.emit(M)}},{key:"addExtraInfoChangeListener",value:function(e){this.on(M,e)}},{key:"removeExtraInfoChangeListener",value:function(e){this.removeListener(M,e)}},{key:"emitLeave",value:function(e){this.emit(k,e)}},{key:"addLeaveListener",value:function(e){this.on(k,e)}},{key:"removeLeaveListener",value:function(e){this.removeListener(k,e)}},{key:"findFirstBy",value:function(e,t){for(var a=this.getChannels(),s=0;s<a.length;s++)if(a[s][e]===t)return a[s];return null}},{key:"get",value:function(e){return this.findFirstBy("id",e)}},{key:"getMember",value:function(e){return this.getAllMembers()[e]}},{key:"getByName",value:function(e){return this.findFirstBy("name",e)}},{key:"getAll",value:function(){return this.getChannels()}},{key:"getAllMembers",value:function(){return this.getChannelMembers()}},{key:"getMoreAll",value:function(){return this.getMoreChannels()}},{key:"setCurrentId",value:function(e){this.currentId=e}},{key:"resetCounts",value:function(e){var t=this.channelMembers;for(var a in t)if(t[a].channel_id===e){var s=this.get(e);s&&(t[a].msg_count=this.get(e).total_msg_count,t[a].mention_count=0,this.setUnreadCount(e));break}}},{key:"getCurrentId",value:function(){return this.currentId}},{key:"getCurrent",value:function(){var e=this.getCurrentId();return e?this.get(e):null}},{key:"getCurrentMember",value:function(){var e=this.getCurrentId();return e?this.getAllMembers()[e]:null}},{key:"setChannelMember",value:function(e){var t=this.getChannelMembers();t[e.channel_id]=e,this.storeChannelMembers(t),this.emitChange()}},{key:"getCurrentExtraInfo",value:function(){return this.getExtraInfo(this.getCurrentId())}},{key:"getExtraInfo",value:function(e){var t=null;return e&&(t=this.getExtraInfos()[e]),t=t?JSON.parse((0,r.default)(t)):{members:[]}}},{key:"pStoreChannel",value:function(t){for(var a,s=this.getChannels(),n=0;n<s.length;n++)if(s[n].id===t.id){s[n]=t,a=!0;break}a||s.push(t),g||(g=e("../utils/utils.jsx")),s.sort(g.sortByDisplayName),this.storeChannels(s)}},{key:"storeChannels",value:function(e){this.channels=e}},{key:"getChannels",value:function(){return this.channels}},{key:"pStoreChannelMember",value:function(e){var t=this.getChannelMembers();t[e.channel_id]=e,this.storeChannelMembers(t)}},{key:"storeChannelMembers",value:function(e){this.channelMembers=e}},{key:"getChannelMembers",value:function(){return this.channelMembers}},{key:"storeMoreChannels",value:function(e){this.moreChannels=e}},{key:"getMoreChannels",value:function(){return this.moreChannels}},{key:"storeExtraInfos",value:function(e){this.extraInfos=e}},{key:"getExtraInfos",value:function(){return this.extraInfos}},{key:"isDefault",value:function(e){return e.name===R.default.DEFAULT_CHANNEL}},{key:"setPostMode",value:function(e){this.postMode=e}},{key:"getPostMode",value:function(){return this.postMode}},{key:"setUnreadCount",value:function(e){var t=this.get(e),a=this.getMember(e),s=a.mention_count,n=t.total_msg_count-a.msg_count-s;"D"===t.type?(s=n,n=0):a.notify_props&&a.notify_props.mark_unread===w.MENTION&&(n=0),this.unreadCounts[e]={msgs:n,mentions:s}}},{key:"setUnreadCounts",value:function(){var e=this,t=this.getAll();t.forEach(function(t){e.setUnreadCount(t.id)})}},{key:"getUnreadCount",value:function(e){return this.unreadCounts[e]||{msgs:0,mentions:0}}},{key:"getUnreadCounts",value:function(){return this.unreadCounts}},{key:"POST_MODE_CHANNEL",get:function(){return 1}},{key:"POST_MODE_FOCUS",get:function(){return 2}}]),a}(E.default),j=new x;j.dispatchToken=v.default.register(function(e){var t,a=e.action;switch(a.type){case C.CLICK_CHANNEL:j.setCurrentId(a.id),j.resetCounts(a.id),j.setPostMode(j.POST_MODE_CHANNEL),j.emitChange();break;case C.RECIEVED_FOCUSED_POST:var s=a.post_list.posts[a.postId];j.setCurrentId(s.channel_id),j.setPostMode(j.POST_MODE_FOCUS),j.emitChange();break;case C.RECIEVED_CHANNELS:j.storeChannels(a.channels),j.storeChannelMembers(a.members),t=j.getCurrentId(),t&&j.resetCounts(t),j.setUnreadCounts(),j.emitChange();break;case C.RECIEVED_CHANNEL:j.pStoreChannel(a.channel),a.member&&j.pStoreChannelMember(a.member),t=j.getCurrentId(),t&&j.resetCounts(t),j.setUnreadCount(a.channel.id),j.emitChange();break;case C.RECIEVED_MORE_CHANNELS:j.storeMoreChannels(a.channels),j.emitMoreChange();break;case C.RECIEVED_CHANNEL_EXTRA_INFO:var n=j.getExtraInfos();n[a.extra_info.id]=a.extra_info,j.storeExtraInfos(n),j.emitExtraInfoChange();break;case C.LEAVE_CHANNEL:j.emitLeave(a.id)}}),a.default=j},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],326:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../dispatcher/app_dispatcher.jsx"),f=s(h),g=e("events"),b=s(g),v=e("../utils/constants.jsx"),_=s(v),E=e("../stores/browser_store.jsx"),y=s(E),R=_.default.ActionTypes,C="change",w=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.handledError=e.handledError.bind(e),e.getLastError=e.getLastError.bind(e),e.storeLastError=e.storeLastError.bind(e),e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"emitChange",value:function(){this.emit(C)}},{key:"addChangeListener",value:function(e){this.on(C,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(C,e)}},{key:"handledError",value:function(){y.default.removeItem("last_error")}},{key:"getLastError",value:function(){return y.default.getItem("last_error")}},{key:"storeLastError",value:function(e){y.default.setItem("last_error",e)}},{key:"clearLastError",value:function(){y.default.removeItem("last_error")}}]),t}(b.default),S=new w;S.dispatchToken=f.default.register(function(e){var t=e.action;switch(t.type){case R.RECIEVED_ERROR:S.storeLastError(t.err),S.emitChange()}}),a.default=S,window.ErrorStore=S},{"../dispatcher/app_dispatcher.jsx":281,"../stores/browser_store.jsx":324,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],327:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/map"),r=s(n),l=e("babel-runtime/core-js/object/get-prototype-of"),i=s(l),o=e("babel-runtime/helpers/classCallCheck"),c=s(o),u=e("babel-runtime/helpers/createClass"),d=s(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=s(m),h=e("babel-runtime/helpers/inherits"),f=s(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../dispatcher/app_dispatcher.jsx"),b=s(g),v=e("../utils/constants.jsx"),_=s(v),E=e("events"),y=s(E),R=_.default.ActionTypes,C="changed",w=function(e){function t(){(0,c.default)(this,t);var e=(0,p.default)(this,(0,i.default)(t).call(this));return e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.emitChange=e.emitChange.bind(e),e.handleEventPayload=e.handleEventPayload.bind(e),e.dispatchToken=b.default.register(e.handleEventPayload),e.fileInfo=new r.default,e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"addChangeListener",value:function(e){this.on(C,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(C,e)}},{key:"emitChange",value:function(e){this.emit(C,e)}},{key:"hasInfo",value:function(e){return this.fileInfo.has(e)}},{key:"getInfo",value:function(e){return this.fileInfo.get(e)}},{key:"setInfo",value:function(e,t){this.fileInfo.set(e,t)}},{key:"handleEventPayload",value:function(e){var t=e.action;switch(t.type){case R.RECIEVED_FILE_INFO:this.setInfo(t.filename,t.info),this.emitChange(t.filename)}}}]),t}(y.default);a.default=new w},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],328:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/helpers/objectWithoutProperties"),r=s(n),l=e("babel-runtime/core-js/object/get-prototype-of"),i=s(l),o=e("babel-runtime/helpers/classCallCheck"),c=s(o),u=e("babel-runtime/helpers/createClass"),d=s(u),m=e("babel-runtime/helpers/possibleConstructorReturn"),p=s(m),h=e("babel-runtime/helpers/inherits"),f=s(h);Object.defineProperty(a,"__esModule",{value:!0});var g=e("../dispatcher/app_dispatcher.jsx"),b=s(g),v=e("events"),_=s(v),E=e("../utils/constants.jsx"),y=s(E),R=y.default.ActionTypes,C=function(e){function t(){(0,c.default)(this,t);var e=(0,p.default)(this,(0,i.default)(t).call(this));return e.addModalListener=e.addModalListener.bind(e),e.removeModalListener=e.removeModalListener.bind(e),e.handleEventPayload=e.handleEventPayload.bind(e),e.dispatchToken=b.default.register(e.handleEventPayload),e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"addModalListener",value:function(e,t){this.on(e,t)}},{key:"removeModalListener",value:function(e,t){this.removeListener(e,t)}},{key:"handleEventPayload",value:function(e){var t=e.action,a=t.type,s=t.value,n=(0,r.default)(t,["type","value"]);switch(a){case R.TOGGLE_IMPORT_THEME_MODAL:case R.TOGGLE_INVITE_MEMBER_MODAL:case R.TOGGLE_DELETE_POST_MODAL:case R.TOGGLE_GET_TEAM_INVITE_LINK_MODAL:case R.TOGGLE_REGISTER_APP_MODAL:this.emit(a,s,n)}}}]),t}(_.default),w=new C;a.default=w},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/objectWithoutProperties":21,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],329:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e;return null==t&&(t={order:[],posts:{}}),null==t.order&&(t.order=[]),null==t.posts&&(t.posts={}),t}function r(e){return null==e?!0:null==e.posts?!0:null==e.order?!0:!1}var l=e("babel-runtime/core-js/reflect/delete-property"),i=s(l),o=e("babel-runtime/helpers/typeof"),c=s(o),u=e("babel-runtime/core-js/json/stringify"),d=s(u),m=e("babel-runtime/core-js/object/assign"),p=s(m),h=e("babel-runtime/core-js/object/get-prototype-of"),f=s(h),g=e("babel-runtime/helpers/classCallCheck"),b=s(g),v=e("babel-runtime/helpers/createClass"),_=s(v),E=e("babel-runtime/helpers/possibleConstructorReturn"),y=s(E),R=e("babel-runtime/helpers/inherits"),C=s(R);Object.defineProperty(a,"__esModule",{value:!0});var w=e("../dispatcher/app_dispatcher.jsx"),S=s(w),k=e("events"),N=s(k),M=e("../stores/channel_store.jsx"),x=s(M),j=e("../stores/browser_store.jsx"),T=s(j),P=e("../stores/user_store.jsx"),O=s(P),I=e("../utils/constants.jsx"),D=s(I),L=D.default.ActionTypes,A="change",F="focused_post_change",U="edit_post",$="post_list_jump",H="selected_post_change",B=function(e){function t(){(0,b.default)(this,t);var e=(0,y.default)(this,(0,f.default)(t).call(this));return e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.emitEditPost=e.emitEditPost.bind(e),e.addEditPostListener=e.addEditPostListener.bind(e),e.removeEditPostListener=e.removeEditPostListner.bind(e),e.emitPostsViewJump=e.emitPostsViewJump.bind(e),e.addPostsViewJumpListener=e.addPostsViewJumpListener.bind(e),e.removePostsViewJumpListener=e.removePostsViewJumpListener.bind(e),e.emitPostFocused=e.emitPostFocused.bind(e),e.addPostFocusedListener=e.addPostFocusedListener.bind(e),e.removePostFocusedListener=e.removePostFocusedListener.bind(e),e.makePostsInfo=e.makePostsInfo.bind(e),e.getPost=e.getPost.bind(e),e.getAllPosts=e.getAllPosts.bind(e),e.getEarliestPost=e.getEarliestPost.bind(e),e.getLatestPost=e.getLatestPost.bind(e),e.getVisiblePosts=e.getVisiblePosts.bind(e),e.getVisibilityAtTop=e.getVisibilityAtTop.bind(e),e.getVisibilityAtBottom=e.getVisibilityAtBottom.bind(e),e.requestVisibilityIncrease=e.requestVisibilityIncrease.bind(e),e.getFocusedPostId=e.getFocusedPostId.bind(e),e.storePosts=e.storePosts.bind(e),e.storePost=e.storePost.bind(e),e.storeFocusedPost=e.storeFocusedPost.bind(e),e.checkBounds=e.checkBounds.bind(e),e.clearFocusedPost=e.clearFocusedPost.bind(e),e.clearChannelVisibility=e.clearChannelVisibility.bind(e),e.removePost=e.removePost.bind(e),e.getPendingPosts=e.getPendingPosts.bind(e),e.storePendingPost=e.storePendingPost.bind(e),e.removePendingPost=e.removePendingPost.bind(e),e.clearPendingPosts=e.clearPendingPosts.bind(e),e.updatePendingPost=e.updatePendingPost.bind(e),e.storeUnseenDeletedPost=e.storeUnseenDeletedPost.bind(e),e.getUnseenDeletedPosts=e.getUnseenDeletedPosts.bind(e),e.clearUnseenDeletedPosts=e.clearUnseenDeletedPosts.bind(e),e.storeSelectedPost=e.storeSelectedPost.bind(e),e.getSelectedPost=e.getSelectedPost.bind(e),e.emitSelectedPostChange=e.emitSelectedPostChange.bind(e),e.addSelectedPostChangeListener=e.addSelectedPostChangeListener.bind(e),e.removeSelectedPostChangeListener=e.removeSelectedPostChangeListener.bind(e),e.selectedPost=null,e.getEmptyDraft=e.getEmptyDraft.bind(e),e.storeCurrentDraft=e.storeCurrentDraft.bind(e),e.getCurrentDraft=e.getCurrentDraft.bind(e),e.storeDraft=e.storeDraft.bind(e),e.getDraft=e.getDraft.bind(e),e.storeCommentDraft=e.storeCommentDraft.bind(e),e.getCommentDraft=e.getCommentDraft.bind(e),e.clearDraftUploads=e.clearDraftUploads.bind(e),e.clearCommentDraftUploads=e.clearCommentDraftUploads.bind(e),e.storeLatestUpdate=e.storeLatestUpdate.bind(e),e.getLatestUpdate=e.getLatestUpdate.bind(e),e.getCurrentUsersLatestPost=e.getCurrentUsersLatestPost.bind(e),e.getCommentCount=e.getCommentCount.bind(e),e.postsInfo={},e.currentFocusedPostId=null,e}return(0,C.default)(t,e),(0,_.default)(t,[{key:"emitChange",value:function(){this.emit(A)}},{key:"addChangeListener",value:function(e){this.on(A,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(A,e)}},{key:"emitPostFocused",value:function(){this.emit(F)}},{key:"addPostFocusedListener",value:function(e){this.on(F,e)}},{key:"removePostFocusedListener",value:function(e){this.removeListener(F,e)}},{key:"emitEditPost",value:function(e){this.emit(U,e)}},{key:"addEditPostListener",value:function(e){this.on(U,e)}},{key:"removeEditPostListner",value:function(e){this.removeListener(U,e)}},{key:"emitPostsViewJump",value:function(e,t){this.emit($,e,t)}},{key:"addPostsViewJumpListener",value:function(e){this.on($,e)}},{key:"removePostsViewJumpListener",value:function(e){this.removeListener($,e)}},{key:"jumpPostsViewToBottom",value:function(){this.emitPostsViewJump(D.default.PostsViewJumpTypes.BOTTOM,null)}},{key:"jumpPostsViewToPost",value:function(e){this.emitPostsViewJump(D.default.PostsViewJumpTypes.POST,e)}},{key:"jumpPostsViewSidebarOpen",value:function(){this.emitPostsViewJump(D.default.PostsViewJumpTypes.SIDEBAR_OPEN,null)}},{key:"makePostsInfo",value:function(e){this.postsInfo.hasOwnProperty(e)||(this.postsInfo[e]={})}},{key:"getPost",value:function(e,t){var a=this.postsInfo[e].postList,s=null;return a.posts.hasOwnProperty(t)&&(s=(0,p.default)({},a.posts[t])),s}},{key:"getAllPosts",value:function(e){return this.postsInfo.hasOwnProperty(e)?(0,p.default)({},this.postsInfo[e].postList):null}},{key:"getEarliestPost",value:function(e){return this.postsInfo.hasOwnProperty(e)?this.postsInfo[e].postList.posts[this.postsInfo[e].postList.order[this.postsInfo[e].postList.order.length-1]]:null}},{key:"getLatestPost",value:function(e){return this.postsInfo.hasOwnProperty(e)?this.postsInfo[e].postList.posts[this.postsInfo[e].postList.order[0]]:null}},{key:"getVisiblePosts",value:function(e){var t=this;if(this.postsInfo.hasOwnProperty(e)&&this.postsInfo[e].hasOwnProperty("postList")){var a=function(){var a=JSON.parse((0,d.default)(t.postsInfo[e].postList));if(null===t.currentFocusedPostId&&(a.order=a.order.slice(0,t.postsInfo[e].endVisible)),t.postsInfo[e].hasOwnProperty("pendingPosts")&&((0,p.default)(a.posts,t.postsInfo[e].pendingPosts.posts),a.order=t.postsInfo[e].pendingPosts.order.concat(a.order)),t.postsInfo[e].hasOwnProperty("deletedPosts")){(0,p.default)(a.posts,t.postsInfo[e].deletedPosts);for(var s in t.postsInfo[e].deletedPosts)t.postsInfo[e].deletedPosts.hasOwnProperty(s)&&a.order.push(s);a.order.sort(function(e,t){return a.posts[e].create_at>a.posts[t].create_at?-1:a.posts[e].create_at<a.posts[t].create_at?1:0})}return{v:a}}();if("object"===("undefined"==typeof a?"undefined":(0,c.default)(a)))return a.v}return null}},{key:"getVisibilityAtTop",value:function(e){return this.postsInfo.hasOwnProperty(e)?this.postsInfo[e].atTop&&this.postsInfo[e].endVisible>=this.postsInfo[e].postList.order.length:!1}},{key:"getVisibilityAtBottom",value:function(e){return this.postsInfo.hasOwnProperty(e)?this.postsInfo[e].atBottom:!1}},{key:"requestVisibilityIncrease",value:function(e,t){var a=this.postsInfo[e].endVisible,s=this.postsInfo[e].postList;return this.getVisibilityAtTop(e)?!1:(this.postsInfo[e].endVisible+=t,this.emitChange(),a+t>s.order.length)}},{key:"getFocusedPostId",value:function(){return this.currentFocusedPostId}},{key:"storePosts",value:function(e,t){if(!r(t)){var a=n(this.getAllPosts(e));for(var s in t.posts)if(t.posts.hasOwnProperty(s)){var l=t.posts[s];if(0===l.delete_at)a.posts[s]=l,-1===a.order.indexOf(s)&&a.order.push(s);else{s in a.posts&&(0,i.default)(a.posts,s);var o=a.order.indexOf(s);-1!==o&&a.order.splice(o,1)}}a.order.sort(function(e,t){return a.posts[e].create_at>a.posts[t].create_at?-1:a.posts[e].create_at<a.posts[t].create_at?1:0}),this.makePostsInfo(e),this.postsInfo[e].postList=a}}},{key:"storePost",value:function(e){var t=n(this.getAllPosts(e.channel_id));""!==e.pending_post_id&&this.removePendingPost(e.channel_id,e.pending_post_id),e.pending_post_id="",t.posts[e.id]=e,-1===t.order.indexOf(e.id)&&t.order.unshift(e.id),this.makePostsInfo(e.channel_id),this.postsInfo[e.channel_id].postList=t}},{key:"storeFocusedPost",value:function(e,t){var a=t.posts[e];a&&(this.currentFocusedPostId=e,this.storePosts(e,t))}},{key:"checkBounds",value:function(e,t,a,s){t>a.order.length&&(s?this.postsInfo[e].atTop=!0:this.postsInfo[e].atBottom=!0)}},{key:"clearFocusedPost",value:function(){null!=this.currentFocusedPostId&&((0,i.default)(this.postsInfo,this.currentFocusedPostId),this.currentFocusedPostId=null)}},{key:"clearChannelVisibility",value:function(e,t){this.makePostsInfo(e),this.postsInfo[e].endVisible=D.default.POST_CHUNK_SIZE,this.postsInfo[e].atTop=!1,this.postsInfo[e].atBottom=t}},{key:"removePost",value:function(e){var t=e.channel_id;this.makePostsInfo(t);var a=this.postsInfo[t].postList;if(!r(a)){e.id in a.posts&&(0,i.default)(a.posts,e.id);var s=a.order.indexOf(e.id);-1!==s&&a.order.splice(s,1),this.postsInfo[t].postList=a}}},{key:"getPendingPosts",value:function(e){return this.postsInfo.hasOwnProperty(e)?this.postsInfo[e].pendingPosts:null}},{key:"storePendingPost",value:function(e){e.state=D.default.POST_LOADING;var t=n(this.getPendingPosts(e.channel_id));t.posts[e.pending_post_id]=e,t.order.unshift(e.pending_post_id),this.makePostsInfo(e.channel_id),this.postsInfo[e.channel_id].pendingPosts=t,this.emitChange()}},{key:"removePendingPost",value:function(e,t){var a=n(this.getPendingPosts(e));(0,i.default)(a.posts,t);var s=a.order.indexOf(t);-1!==s&&(a.order.splice(s,1),this.postsInfo[e].pendingPosts=a,this.emitChange())}},{key:"clearPendingPosts",value:function(e){this.postsInfo.hasOwnProperty(e)&&(0,i.default)(this.postsInfo[e],"pendingPosts")}},{key:"updatePendingPost",value:function(e){var t=n(this.getPendingPosts(e.channel_id));-1!==t.order.indexOf(e.pending_post_id)&&(t.posts[e.pending_post_id]=e,this.postsInfo[e.channel_id].pendingPosts=t,this.emitChange())}},{key:"storeUnseenDeletedPost",value:function(e){var t=this.getUnseenDeletedPosts(e.channel_id);t||(t={}),e.message="(message deleted)",e.state=D.default.POST_DELETED,e.filenames=[],t[e.id]=e,this.makePostsInfo(e.channel_id),this.postsInfo[e.channel_id].deletedPosts=t}},{key:"getUnseenDeletedPosts",value:function(e){return this.postsInfo.hasOwnProperty(e)?this.postsInfo[e].deletedPosts:null}},{key:"clearUnseenDeletedPosts",value:function(e){this.postsInfo.hasOwnProperty(e)&&(0,i.default)(this.postsInfo[e],"deletedPosts")}},{key:"storeSelectedPost",value:function(e){this.selectedPost=e}},{key:"getSelectedPost",value:function(){return this.selectedPost}},{key:"emitSelectedPostChange",value:function(e){this.emit(H,e)}},{key:"addSelectedPostChangeListener",value:function(e){this.on(H,e)}},{key:"removeSelectedPostChangeListener",value:function(e){this.removeListener(H,e)}},{key:"getCurrentUsersLatestPost",value:function(e,t){var a=O.default.getCurrentId(),s=n(this.getAllPosts(e)),r=0,l=s.order.length,i=null;for(r;l>r;r++){var o=s.posts[s.order[r]];if(o.user_id===a&&(o.props&&!o.props.from_webhook||!o.props)){if(!t){i=o;break}if(o.root_id===t||o.id===t){i=o;break}}}return i}},{key:"getEmptyDraft",value:function(){return{message:"",uploadsInProgress:[],previews:[]}}},{key:"storeCurrentDraft",value:function(e){var t=x.default.getCurrentId();T.default.setGlobalItem("draft_"+t,e)}},{key:"getCurrentDraft",value:function(){var e=x.default.getCurrentId();return this.getDraft(e)}},{key:"storeDraft",value:function(e,t){T.default.setGlobalItem("draft_"+e,t)}},{key:"getDraft",value:function(e){return T.default.getGlobalItem("draft_"+e,this.getEmptyDraft())}},{key:"storeCommentDraft",value:function(e,t){T.default.setGlobalItem("comment_draft_"+e,t)}},{key:"getCommentDraft",value:function(e){return T.default.getGlobalItem("comment_draft_"+e,this.getEmptyDraft())}},{key:"clearDraftUploads",value:function(){T.default.actionOnGlobalItemsWithPrefix("draft_",function(e,t){t&&(t.uploadsInProgress=[],T.default.setItem(e,t))})}},{key:"clearCommentDraftUploads",value:function(){T.default.actionOnGlobalItemsWithPrefix("comment_draft_",function(e,t){t&&(t.uploadsInProgress=[],T.default.setItem(e,t))})}},{key:"storeLatestUpdate",value:function(e,t){this.postsInfo.hasOwnProperty(e)||(this.postsInfo[e]={}),this.postsInfo[e].latestPost=t}},{key:"getLatestUpdate",value:function(e){return this.postsInfo.hasOwnProperty(e)&&this.postsInfo[e].hasOwnProperty("latestPost")?this.postsInfo[e].latestPost:0}},{key:"getCommentCount",value:function(e){var t=this.getAllPosts(e.channel_id).posts,a=0;for(var s in t)t.hasOwnProperty(s)&&t[s].root_id===e.id&&(a+=1);return a}}]),t}(N.default),q=new B;q.dispatchToken=S.default.register(function(e){var t=e.action;switch(t.type){case L.RECIEVED_POSTS:var a=null==q.currentFocusedPostId?t.id:q.currentFocusedPostId;q.checkBounds(a,t.numRequested,n(t.post_list),t.before),q.storePosts(a,n(t.post_list)),q.emitChange();break;case L.RECIEVED_FOCUSED_POST:q.clearChannelVisibility(t.postId,!1),q.storeFocusedPost(t.postId,n(t.post_list)),q.emitChange();break;case L.RECIEVED_POST:q.storePost(t.post),q.emitChange();break;case L.RECIEVED_EDIT_POST:q.emitEditPost(t),q.emitChange();break;case L.CLICK_CHANNEL:q.clearFocusedPost(),q.clearChannelVisibility(t.id,!0),q.clearUnseenDeletedPosts(t.prev);break;case L.CREATE_POST:q.storePendingPost(t.post),q.storeDraft(t.post.channel_id,null),q.jumpPostsViewToBottom();break;case L.POST_DELETED:q.storeUnseenDeletedPost(t.post),q.removePost(t.post),q.emitChange();break;case L.RECIEVED_POST_SELECTED:q.storeSelectedPost(t.post_list),q.emitSelectedPostChange(t.from_search)}}),a.default=q},{"../dispatcher/app_dispatcher.jsx":281,"../stores/browser_store.jsx":324,"../stores/channel_store.jsx":325,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,
"babel-runtime/core-js/reflect/delete-property":13,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"babel-runtime/helpers/typeof":25,events:283}],330:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return e+"-"+t}function r(e){return e.category+"-"+e.name}var l=e("babel-runtime/helpers/toConsumableArray"),i=s(l),o=e("babel-runtime/helpers/slicedToArray"),c=s(o),u=e("babel-runtime/core-js/get-iterator"),d=s(u),m=e("babel-runtime/core-js/map"),p=s(m),h=e("babel-runtime/core-js/object/get-prototype-of"),f=s(h),g=e("babel-runtime/helpers/classCallCheck"),b=s(g),v=e("babel-runtime/helpers/createClass"),_=s(v),E=e("babel-runtime/helpers/possibleConstructorReturn"),y=s(E),R=e("babel-runtime/helpers/inherits"),C=s(R);Object.defineProperty(a,"__esModule",{value:!0});var w=e("../utils/constants.jsx"),S=s(w),k=e("../dispatcher/app_dispatcher.jsx"),N=s(k),M=e("./browser_store.jsx"),x=s(M),j=e("events"),T=s(j),P=e("../stores/user_store.jsx"),O=s(P),I=S.default.ActionTypes,D="change",L=function(e){function t(){(0,b.default)(this,t);var e=(0,y.default)(this,(0,f.default)(t).call(this));return e.getAllPreferences=e.getAllPreferences.bind(e),e.get=e.get.bind(e),e.getBool=e.getBool.bind(e),e.getInt=e.getInt.bind(e),e.getPreference=e.getPreference.bind(e),e.getCategory=e.getCategory.bind(e),e.getPreferencesWhere=e.getPreferencesWhere.bind(e),e.setAllPreferences=e.setAllPreferences.bind(e),e.setPreference=e.setPreference.bind(e),e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.handleEventPayload=e.handleEventPayload.bind(e),e.dispatchToken=N.default.register(e.handleEventPayload),e}return(0,C.default)(t,e),(0,_.default)(t,[{key:"getAllPreferences",value:function(){return new p.default(x.default.getItem("preferences",[]))}},{key:"get",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?"":arguments[2],s=this.getAllPreferences().get(n(e,t));return s?s.value||a:a}},{key:"getBool",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],s=this.getAllPreferences().get(n(e,t));return s?"false"===s.value?!1:"false"!==s.value||a:a}},{key:"getInt",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?0:arguments[2],s=this.getAllPreferences().get(n(e,t));return s?"0"===s.value?0:parseInt(s.value,10)||a:a}},{key:"getPreference",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.getAllPreferences().get(n(e,t))||a}},{key:"getCategory",value:function(e){return this.getPreferencesWhere(function(t){return t.category===e})}},{key:"getPreferencesWhere",value:function(e){var t=this.getAllPreferences(),a=[],s=!0,n=!1,r=void 0;try{for(var l,i=(0,d.default)(t);!(s=(l=i.next()).done);s=!0){var o=(0,c.default)(l.value,2),u=o[1];e(u)&&a.push(u)}}catch(e){n=!0,r=e}finally{try{!s&&i.return&&i.return()}finally{if(n)throw r}}return a}},{key:"setAllPreferences",value:function(e){x.default.setItem("preferences",[].concat((0,i.default)(e)))}},{key:"setPreference",value:function(e,t,a){var s=this.getAllPreferences(),r=n(e,t),l=s.get(r);return l||(l={user_id:O.default.getCurrentId(),category:e,name:t}),l.value=a,s.set(r,l),this.setAllPreferences(s),l}},{key:"setPreferences",value:function(e){var t=this.getAllPreferences(),a=!0,s=!1,n=void 0;try{for(var l,i=(0,d.default)(e);!(a=(l=i.next()).done);a=!0){var o=l.value;t.set(r(o),o)}}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}this.setAllPreferences(t)}},{key:"emitChange",value:function(){this.emit(D)}},{key:"addChangeListener",value:function(e){this.on(D,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(D,e)}},{key:"handleEventPayload",value:function(e){var t=e.action;switch(t.type){case I.RECIEVED_PREFERENCE:var a=t.preference;this.setPreference(a.category,a.name,a.value),this.emitChange();break;case I.RECIEVED_PREFERENCES:this.setPreferences(t.preferences),this.emitChange()}}}]),t}(T.default),A=new L;a.default=A,window.PreferenceStore=A},{"../dispatcher/app_dispatcher.jsx":281,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"./browser_store.jsx":324,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"babel-runtime/helpers/slicedToArray":23,"babel-runtime/helpers/toConsumableArray":24,events:283}],331:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0});var h=e("../dispatcher/app_dispatcher.jsx"),f=s(h),g=e("events"),b=s(g),v=e("../stores/browser_store.jsx"),_=s(v),E=e("../utils/constants.jsx"),y=s(E),R=y.default.ActionTypes,C="change",w="search_change",S="search_term_change",k="show_search",N=function(e){function t(){(0,i.default)(this,t);var e=(0,d.default)(this,(0,r.default)(t).call(this));return e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.emitSearchChange=e.emitSearchChange.bind(e),e.addSearchChangeListener=e.addSearchChangeListener.bind(e),e.removeSearchChangeListener=e.removeSearchChangeListener.bind(e),e.emitSearchTermChange=e.emitSearchTermChange.bind(e),e.addSearchTermChangeListener=e.addSearchTermChangeListener.bind(e),e.removeSearchTermChangeListener=e.removeSearchTermChangeListener.bind(e),e.emitShowSearch=e.emitShowSearch.bind(e),e.addShowSearchListener=e.addShowSearchListener.bind(e),e.removeShowSearchListener=e.removeShowSearchListener.bind(e),e.getSearchResults=e.getSearchResults.bind(e),e.getIsMentionSearch=e.getIsMentionSearch.bind(e),e.storeSearchTerm=e.storeSearchTerm.bind(e),e.getSearchTerm=e.getSearchTerm.bind(e),e.storeSearchResults=e.storeSearchResults.bind(e),e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"emitChange",value:function(){this.emit(C)}},{key:"addChangeListener",value:function(e){this.on(C,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(C,e)}},{key:"emitSearchChange",value:function(){this.emit(w)}},{key:"addSearchChangeListener",value:function(e){this.on(w,e)}},{key:"removeSearchChangeListener",value:function(e){this.removeListener(w,e)}},{key:"emitSearchTermChange",value:function(e,t){this.emit(S,e,t)}},{key:"addSearchTermChangeListener",value:function(e){this.on(S,e)}},{key:"removeSearchTermChangeListener",value:function(e){this.removeListener(S,e)}},{key:"emitShowSearch",value:function(){this.emit(k)}},{key:"addShowSearchListener",value:function(e){this.on(k,e)}},{key:"removeShowSearchListener",value:function(e){this.removeListener(k,e)}},{key:"getSearchResults",value:function(){return _.default.getItem("search_results")}},{key:"getIsMentionSearch",value:function(){return _.default.getItem("is_mention_search")}},{key:"storeSearchTerm",value:function(e){_.default.setItem("search_term",e)}},{key:"getSearchTerm",value:function(){return _.default.getItem("search_term")}},{key:"storeSearchResults",value:function(e,t){_.default.setItem("search_results",e),_.default.setItem("is_mention_search",Boolean(t))}}]),t}(b.default),M=new N;M.dispatchToken=f.default.register(function(e){var t=e.action;switch(t.type){case R.RECIEVED_SEARCH:M.storeSearchResults(t.results,t.is_mention_search),M.emitSearchChange();break;case R.RECIEVED_SEARCH_TERM:M.storeSearchTerm(t.term),M.emitSearchTermChange(t.do_search,t.is_mention_search);break;case R.SHOW_SEARCH:M.emitShowSearch()}}),a.default=M},{"../dispatcher/app_dispatcher.jsx":281,"../stores/browser_store.jsx":324,"../utils/constants.jsx":339,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],332:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var a=JSON.parse(e.props.post);if(G.emitPostRecievedEvent(a),T.default.getCurrentId()===e.channel_id?window.isActive&&B.updateLastViewedAt():(N.default.getCurrentId()!==e.user_id||a.type!==W.default.POST_TYPE_JOIN_LEAVE)&&B.getChannel(e.channel_id),(N.default.getCurrentId()!==e.user_id||"true"===a.props.from_webhook)&&!U.isSystemMessage(a)){var s=e.props,n=[];s.mentions&&(n=JSON.parse(e.props.mentions));var r=s.channel_type,l=T.default.get(e.channel_id),i=N.default.getCurrentUser(),o=T.default.getMember(e.channel_id),c=o&&o.notify_props?o.notify_props.desktop:"default";if("default"===c&&(c=i.notify_props.desktop),"none"===c)return;if("mention"===c&&-1===n.indexOf(i.id)&&r!==W.default.DM_CHANNEL)return;var u="Someone";a.props.override_username&&"true"===t.window.mm_config.EnablePostUsernameOverride?u=a.props.override_username:N.default.hasProfile(e.user_id)&&(u=N.default.getProfile(e.user_id).username);var d="Posted";l&&(d=l.display_name);var m=a.message.replace(/\n+/g," ");m.length>50&&(m=m.substring(0,49)+"..."),0===m.length?s.image?U.notifyMe(d,u+" uploaded an image",l):s.otherFile?U.notifyMe(d,u+" uploaded a file",l):U.notifyMe(d,u+" did something new",l):U.notifyMe(d,u+" wrote: "+m,l),i.notify_props&&"true"!==i.notify_props.desktop_sound||U.ding()}}function l(e){var t=JSON.parse(e.props.post);x.default.storePost(t),x.default.emitChange(),T.default.getCurrentId()===e.channel_id&&window.isActive&&B.updateLastViewedAt()}function i(e){var t=JSON.parse(e.props.post);G.emitPostDeletedEvent(t)}function o(){B.getProfiles(),B.getChannelExtraInfo()}function c(e){T.default.getCurrentId()===e.channel_id&&B.getChannelExtraInfo(),N.default.getCurrentId()===e.user_id&&B.getChannel(e.channel_id)}function u(e){if(N.default.getCurrentId()===e.user_id){if(B.getChannels(),e.props.remover_id!==e.user_id&&e.channel_id===T.default.getCurrentId()&&$("#removed_from_channel").length>0){var t={};t.channelName=T.default.getCurrent().display_name,t.remover=N.default.getProfile(e.props.remover_id).username,O.default.setItem("channel-removed-state",t),$("#removed_from_channel").modal("show")}}else T.default.getCurrentId()===e.channel_id&&B.getChannelExtraInfo()}function d(e){T.default.getCurrentId()!==e.channel_id&&N.default.getCurrentId()===e.user_id&&B.getChannel(e.channel_id)}function m(e){var t=JSON.parse(e.props.preference);G.emitPreferenceChangedEvent(t)}var p=e("babel-runtime/core-js/json/stringify"),h=n(p),f=e("babel-runtime/core-js/object/get-prototype-of"),g=n(f),b=e("babel-runtime/helpers/classCallCheck"),v=n(b),_=e("babel-runtime/helpers/createClass"),E=n(_),y=e("babel-runtime/helpers/possibleConstructorReturn"),R=n(y),C=e("babel-runtime/helpers/inherits"),w=n(C);Object.defineProperty(a,"__esModule",{value:!0});var S,k=e("./user_store.jsx"),N=n(k),M=e("./post_store.jsx"),x=n(M),j=e("./channel_store.jsx"),T=n(j),P=e("./browser_store.jsx"),O=n(P),I=e("./error_store.jsx"),D=n(I),L=e("events"),A=n(L),F=e("../utils/utils.jsx"),U=s(F),H=e("../utils/async_client.jsx"),B=s(H),q=e("../dispatcher/event_helpers.jsx"),G=s(q),V=e("../utils/constants.jsx"),W=n(V),z=W.default.SocketEvents,K="change",Y=function(e){function a(){(0,v.default)(this,a);var e=(0,R.default)(this,(0,g.default)(a).call(this));return e.initialize=e.initialize.bind(e),e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.sendMessage=e.sendMessage.bind(e),e.failCount=0,e.initialize(),e}return(0,w.default)(a,e),(0,E.default)(a,[{key:"initialize",value:function(){var e=this;if(N.default.getCurrentId()&&t.window.hasOwnProperty("mm_session_token_index")&&(this.setMaxListeners(0),window.WebSocket&&!S)){var a="ws://";"https:"===window.location.protocol&&(a="wss://");var s=a+location.host+(/:\d+/.test(location.host)?"":U.getWebsocketPort(a))+"/api/v1/websocket?"+U.getSessionIndex();0===this.failCount&&console.log("websocket connecting to "+s),S=new WebSocket(s),S.onopen=function(){e.failCount>0&&(console.log("websocket re-established connection"),D.default.getLastError()&&(D.default.storeLastError(null),D.default.emitChange())),e.failCount=0},S.onclose=function(){S=null,setTimeout(function(){e.initialize()},3e3)},S.onerror=function(t){0===e.failCount&&console.log("websocket error "+t),e.failCount=e.failCount+1,D.default.storeLastError({connErrorCount:e.failCount,message:"Please check connection, Mattermost unreachable. If issue persists, ask administrator to check WebSocket port."}),D.default.emitChange()},S.onmessage=function(t){var a=JSON.parse(t.data);e.handleMessage(a),e.emitChange(a)}}}},{key:"emitChange",value:function(e){this.emit(K,e)}},{key:"addChangeListener",value:function(e){this.on(K,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(K,e)}},{key:"handleMessage",value:function(e){switch(e.action){case z.POSTED:r(e);break;case z.POST_EDITED:l(e);break;case z.POST_DELETED:i(e);break;case z.NEW_USER:o();break;case z.USER_ADDED:c(e);break;case z.USER_REMOVED:u(e);break;case z.CHANNEL_VIEWED:d(e);break;case z.PREFERENCE_CHANGED:m(e)}}},{key:"sendMessage",value:function(e){S&&S.readyState===WebSocket.OPEN?S.send((0,h.default)(e)):S&&S.readyState!==WebSocket.Closed||(S=null,this.initialize())}}]),a}(A.default),J=new Y;a.default=J}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/event_helpers.jsx":282,"../utils/async_client.jsx":336,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"./browser_store.jsx":324,"./channel_store.jsx":325,"./error_store.jsx":326,"./post_store.jsx":329,"./user_store.jsx":335,"babel-runtime/core-js/json/stringify":4,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],333:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/helpers/objectWithoutProperties"),r=s(n),l=e("babel-runtime/helpers/toConsumableArray"),i=s(l),o=e("babel-runtime/core-js/map"),c=s(o),u=e("babel-runtime/core-js/object/get-prototype-of"),d=s(u),m=e("babel-runtime/helpers/classCallCheck"),p=s(m),h=e("babel-runtime/helpers/createClass"),f=s(h),g=e("babel-runtime/helpers/possibleConstructorReturn"),b=s(g),v=e("babel-runtime/helpers/inherits"),_=s(v);Object.defineProperty(a,"__esModule",{value:!0});var E=e("../dispatcher/app_dispatcher.jsx"),y=s(E),R=e("../utils/constants.jsx"),C=s(R),w=e("events"),S=s(w),k=C.default.ActionTypes,N="complete_word",M="pretext_changed",x="suggestions_changed",j=function(e){function t(){(0,p.default)(this,t);var e=(0,b.default)(this,(0,d.default)(t).call(this));return e.addSuggestionsChangedListener=e.addSuggestionsChangedListener.bind(e),e.removeSuggestionsChangedListener=e.removeSuggestionsChangedListener.bind(e),e.emitSuggestionsChanged=e.emitSuggestionsChanged.bind(e),e.addPretextChangedListener=e.addPretextChangedListener.bind(e),e.removePretextChangedListener=e.removePretextChangedListener.bind(e),e.emitPretextChanged=e.emitPretextChanged.bind(e),e.addCompleteWordListener=e.addCompleteWordListener.bind(e),e.removeCompleteWordListener=e.removeCompleteWordListener.bind(e),e.emitCompleteWord=e.emitCompleteWord.bind(e),e.handleEventPayload=e.handleEventPayload.bind(e),e.dispatchToken=y.default.register(e.handleEventPayload),e.suggestions=new c.default,e}return(0,_.default)(t,e),(0,f.default)(t,[{key:"addSuggestionsChangedListener",value:function(e,t){this.on(x+e,t)}},{key:"removeSuggestionsChangedListener",value:function(e,t){this.removeListener(x+e,t)}},{key:"emitSuggestionsChanged",value:function(e){this.emit(x+e)}},{key:"addPretextChangedListener",value:function(e,t){this.on(M+e,t)}},{key:"removePretextChangedListener",value:function(e,t){this.removeListener(M+e,t)}},{key:"emitPretextChanged",value:function(e,t){this.emit(M+e,t)}},{key:"addCompleteWordListener",value:function(e,t){this.on(N+e,t)}},{key:"removeCompleteWordListener",value:function(e,t){this.removeListener(N+e,t)}},{key:"emitCompleteWord",value:function(e,t){this.emit(N+e,t)}},{key:"registerSuggestionBox",value:function(e){this.suggestions.set(e,{pretext:"",matchedPretext:"",terms:[],items:[],components:[],selection:""})}},{key:"unregisterSuggestionBox",value:function(e){this.suggestions.delete(e)}},{key:"clearSuggestions",value:function(e){var t=this.suggestions.get(e);t.matchedPretext="",t.terms=[],t.items=[],t.components=[]}},{key:"clearSelection",value:function(e){var t=this.suggestions.get(e);t.selection=""}},{key:"hasSuggestions",value:function(e){return this.suggestions.get(e).terms.length>0}},{key:"setPretext",value:function(e,t){var a=this.suggestions.get(e);a.pretext=t}},{key:"setMatchedPretext",value:function(e,t){var a=this.suggestions.get(e);a.matchedPretext=t}},{key:"addSuggestion",value:function(e,t,a,s){var n=this.suggestions.get(e);n.terms.push(t),n.items.push(a),n.components.push(s)}},{key:"addSuggestions",value:function(e,t,a,s){var n,r,l=this.suggestions.get(e);(n=l.terms).push.apply(n,(0,i.default)(t)),(r=l.items).push.apply(r,(0,i.default)(a));for(var o=0;o<t.length;o++)l.components.push(s)}},{key:"ensureSelectionExists",value:function(e){var t=this.suggestions.get(e);if(t.terms.length>0){if(!t.selection||-1===t.terms.indexOf(t.selection))return t.selection=t.terms[0],!0}else if(t.selection)return t.selection="",!0;return!1}},{key:"getPretext",value:function(e){return this.suggestions.get(e).pretext}},{key:"getMatchedPretext",value:function(e){return this.suggestions.get(e).matchedPretext}},{key:"getItems",value:function(e){return this.suggestions.get(e).items}},{key:"getTerms",value:function(e){return this.suggestions.get(e).terms}},{key:"getComponents",value:function(e){return this.suggestions.get(e).components}},{key:"getSelection",value:function(e){return this.suggestions.get(e).selection}},{key:"selectNext",value:function(e){this.setSelectionByDelta(e,1)}},{key:"selectPrevious",value:function(e){this.setSelectionByDelta(e,-1)}},{key:"setSelectionByDelta",value:function(e,t){var a=this.suggestions.get(e),s=a.terms.indexOf(a.selection);if(-1===s)throw new Error("selection is not in terms");s+=t,0>s?s=0:s>a.terms.length-1&&(s=a.terms.length-1),a.selection=a.terms[s]}},{key:"handleEventPayload",value:function(e){var t=e.action,a=t.type,s=t.id,n=(0,r.default)(t,["type","id"]);switch(a){case k.SUGGESTION_PRETEXT_CHANGED:this.clearSuggestions(s),this.setPretext(s,n.pretext),this.emitPretextChanged(s,n.pretext),this.ensureSelectionExists(s),this.emitSuggestionsChanged(s);break;case k.SUGGESTION_RECEIVED_SUGGESTIONS:n.matchedPretext===this.getMatchedPretext(s)&&(this.addSuggestions(s,n.terms,n.items,n.component),this.ensureSelectionExists(s),this.emitSuggestionsChanged(s));break;case k.SUGGESTION_CLEAR_SUGGESTIONS:this.clearSuggestions(s),this.clearSelection(s),this.emitSuggestionsChanged(s);break;case k.SUGGESTION_SELECT_NEXT:this.selectNext(s),this.emitSuggestionsChanged(s);break;case k.SUGGESTION_SELECT_PREVIOUS:this.selectPrevious(s),this.emitSuggestionsChanged(s);break;case k.SUGGESTION_COMPLETE_WORD:this.emitCompleteWord(s,n.term||this.getSelection(s),this.getMatchedPretext(s)),this.setPretext(s,""),this.clearSuggestions(s),this.clearSelection(s),this.emitSuggestionsChanged(s)}}}]),t}(S.default);a.default=new j},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/objectWithoutProperties":21,"babel-runtime/helpers/possibleConstructorReturn":22,"babel-runtime/helpers/toConsumableArray":24,events:283}],334:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(){return f||(f=e("../utils/utils.jsx")),f.getWindowLocationOrigin()}var r=e("babel-runtime/core-js/object/get-prototype-of"),l=s(r),i=e("babel-runtime/helpers/classCallCheck"),o=s(i),c=e("babel-runtime/helpers/createClass"),u=s(c),d=e("babel-runtime/helpers/possibleConstructorReturn"),m=s(d),p=e("babel-runtime/helpers/inherits"),h=s(p);Object.defineProperty(a,"__esModule",{value:!0});var f,g=e("../dispatcher/app_dispatcher.jsx"),b=s(g),v=e("events"),_=s(v),E=e("../utils/constants.jsx"),y=s(E),R=e("../stores/browser_store.jsx"),C=s(R),w=y.default.ActionTypes,S="change",k=function(e){function a(){(0,o.default)(this,a);var e=(0,m.default)(this,(0,l.default)(a).call(this));return e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.get=e.get.bind(e),e.getByName=e.getByName.bind(e),e.getAll=e.getAll.bind(e),e.getCurrentId=e.getCurrentId.bind(e),e.getCurrent=e.getCurrent.bind(e),e.getCurrentTeamUrl=e.getCurrentTeamUrl.bind(e),e.getCurrentInviteLink=e.getCurrentInviteLink.bind(e),e.saveTeam=e.saveTeam.bind(e),e}return(0,h.default)(a,e),(0,u.default)(a,[{key:"emitChange",value:function(){this.emit(S)}},{key:"addChangeListener",value:function(e){this.on(S,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(S,e)}},{key:"get",value:function(e){var t=this.getAll();return t[e]}},{key:"getByName",value:function(e){var t=this.getAll();for(var a in t)if(t[a].name===e)return t[a];return null}},{key:"getAll",value:function(){return C.default.getItem("user_teams",{})}},{key:"getCurrentId",value:function(){var e=t.window.mm_team;return e?e.id:null}},{key:"getCurrent",value:function(){return null!=t.window.mm_team&&null==this.get(t.window.mm_team.id)&&this.saveTeam(t.window.mm_team),t.window.mm_team}},{key:"getCurrentTeamUrl",value:function(){return this.getCurrent()?n()+"/"+this.getCurrent().name:null}},{key:"getCurrentInviteLink",value:function(){var e=this.getCurrent();return e?n()+"/signup_user_complete/?id="+e.invite_id:""}},{key:"saveTeam",value:function(e){var t=this.getAll();t[e.id]=e,C.default.setItem("user_teams",t)}}]),a}(_.default),N=new k;N.dispatchToken=b.default.register(function(e){var t=e.action;switch(t.type){case w.RECIEVED_TEAM:N.saveTeam(t.team),N.emitChange()}}),a.default=N}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":281,"../stores/browser_store.jsx":324,"../utils/constants.jsx":339,"../utils/utils.jsx":344,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],335:[function(e,t,a){(function(t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/core-js/object/get-prototype-of"),r=s(n),l=e("babel-runtime/helpers/classCallCheck"),i=s(l),o=e("babel-runtime/helpers/createClass"),c=s(o),u=e("babel-runtime/helpers/possibleConstructorReturn"),d=s(u),m=e("babel-runtime/helpers/inherits"),p=s(m);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var h=e("../dispatcher/app_dispatcher.jsx"),f=s(h),g=e("events"),b=s(g),v=e("../utils/constants.jsx"),_=s(v),E=e("./browser_store.jsx"),y=s(E),R=_.default.ActionTypes,C="change",w="change_sessions",S="change_audits",k="change_teams",N="change_statuses",M=function(e){function a(){(0,i.default)(this,a);var e=(0,d.default)(this,(0,r.default)(a).call(this));return e.emitChange=e.emitChange.bind(e),e.addChangeListener=e.addChangeListener.bind(e),e.removeChangeListener=e.removeChangeListener.bind(e),e.emitSessionsChange=e.emitSessionsChange.bind(e),e.addSessionsChangeListener=e.addSessionsChangeListener.bind(e),e.removeSessionsChangeListener=e.removeSessionsChangeListener.bind(e),e.emitAuditsChange=e.emitAuditsChange.bind(e),e.addAuditsChangeListener=e.addAuditsChangeListener.bind(e),e.removeAuditsChangeListener=e.removeAuditsChangeListener.bind(e),e.emitTeamsChange=e.emitTeamsChange.bind(e),e.addTeamsChangeListener=e.addTeamsChangeListener.bind(e),e.removeTeamsChangeListener=e.removeTeamsChangeListener.bind(e),e.emitStatusesChange=e.emitStatusesChange.bind(e),e.addStatusesChangeListener=e.addStatusesChangeListener.bind(e),e.removeStatusesChangeListener=e.removeStatusesChangeListener.bind(e),e.getCurrentId=e.getCurrentId.bind(e),e.getCurrentUser=e.getCurrentUser.bind(e),e.setCurrentUser=e.setCurrentUser.bind(e),e.getLastEmail=e.getLastEmail.bind(e),e.setLastEmail=e.setLastEmail.bind(e),e.hasProfile=e.hasProfile.bind(e),e.getProfile=e.getProfile.bind(e),e.getProfileByUsername=e.getProfileByUsername.bind(e),e.getProfilesUsernameMap=e.getProfilesUsernameMap.bind(e),e.getProfiles=e.getProfiles.bind(e),e.getActiveOnlyProfiles=e.getActiveOnlyProfiles.bind(e),e.getActiveOnlyProfileList=e.getActiveOnlyProfileList.bind(e),e.saveProfile=e.saveProfile.bind(e),e.setSessions=e.setSessions.bind(e),e.getSessions=e.getSessions.bind(e),e.setAudits=e.setAudits.bind(e),e.getAudits=e.getAudits.bind(e),e.setTeams=e.setTeams.bind(e),e.getTeams=e.getTeams.bind(e),e.getCurrentMentionKeys=e.getCurrentMentionKeys.bind(e),e.setStatuses=e.setStatuses.bind(e),e.pSetStatuses=e.pSetStatuses.bind(e),e.setStatus=e.setStatus.bind(e),e.getStatuses=e.getStatuses.bind(e),e.getStatus=e.getStatus.bind(e),e.profileCache=null,e}return(0,p.default)(a,e),(0,c.default)(a,[{key:"emitChange",value:function(e){this.emit(C,e)}},{key:"addChangeListener",value:function(e){this.on(C,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(C,e)}},{key:"emitSessionsChange",value:function(){this.emit(w)}},{key:"addSessionsChangeListener",value:function(e){this.on(w,e)}},{key:"removeSessionsChangeListener",value:function(e){this.removeListener(w,e)}},{key:"emitAuditsChange",value:function(){this.emit(S)}},{key:"addAuditsChangeListener",value:function(e){this.on(S,e)}},{key:"removeAuditsChangeListener",value:function(e){this.removeListener(S,e)}},{key:"emitTeamsChange",value:function(){this.emit(k)}},{key:"addTeamsChangeListener",value:function(e){this.on(k,e)}},{key:"removeTeamsChangeListener",value:function(e){this.removeListener(k,e)}},{key:"emitStatusesChange",value:function(){this.emit(N)}},{key:"addStatusesChangeListener",value:function(e){this.on(N,e)}},{key:"removeStatusesChangeListener",value:function(e){this.removeListener(N,e)}},{key:"getCurrentUser",value:function(){return null==this.getProfiles()[t.window.mm_user.id]&&this.saveProfile(t.window.mm_user),t.window.mm_user}},{key:"setCurrentUser",value:function(e){var a=t.window.mm_user;if(a.id!==e.id)throw new Error("Problem with setCurrentUser old_user_id="+a.id+" new_user_id="+e.id);t.window.mm_user=e,this.saveProfile(e)}},{key:"getCurrentId",value:function(){var e=t.window.mm_user;return e?e.id:null}},{key:"getLastEmail",value:function(){return y.default.getGlobalItem("last_email","")}},{key:"setLastEmail",value:function(e){y.default.setGlobalItem("last_email",e)}},{key:"hasProfile",value:function(e){return null!=this.getProfiles()[e]}},{key:"getProfile",value:function(e){return e===this.getCurrentId()?this.getCurrentUser():this.getProfiles()[e]}},{key:"getProfileByUsername",value:function(e){return this.getProfilesUsernameMap()[e]}},{key:"getProfilesUsernameMap",value:function(){var e={},t=this.getProfiles();for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];e[s.username]=s}return e}},{key:"getProfiles",value:function(){return null!==this.profileCache?this.profileCache:y.default.getItem("profiles",{})}},{key:"getActiveOnlyProfiles",value:function(e){var t={},a=this.getProfiles(),s=this.getCurrentId();for(var n in a)a[n].id===s&&e||0!==a[n].delete_at||(t[n]=a[n]);return t}},{key:"getActiveOnlyProfileList",value:function(){var e=this.getActiveOnlyProfiles(),t=[],a=this.getCurrentId();for(var s in e)e.hasOwnProperty(s)&&s!==a&&t.push(e[s]);return t}},{key:"saveProfile",value:function(e){var t=this.getProfiles();t[e.id]=e,this.profileCache=t,y.default.setItem("profiles",t)}},{key:"saveProfiles",value:function(e){var t=this.getCurrentId();t in e&&delete e[t],this.profileCache=e,y.default.setItem("profiles",e)}},{key:"setSessions",value:function(e){y.default.setItem("sessions",e)}},{key:"getSessions",value:function(){return y.default.getItem("sessions",{loading:!0})}},{key:"setAudits",value:function(e){y.default.setItem("audits",e)}},{key:"getAudits",value:function(){return y.default.getItem("audits",{loading:!0})}},{key:"setTeams",value:function(e){y.default.setItem("teams",e)}},{key:"getTeams",value:function(){return y.default.getItem("teams",[])}},{key:"getCurrentMentionKeys",value:function(){var e=this.getCurrentUser(),t=[];return e&&e.notify_props?(e.notify_props.mention_keys&&(t=t.concat(e.notify_props.mention_keys.split(","))),"true"===e.notify_props.first_name&&e.first_name&&t.push(e.first_name),"true"===e.notify_props.all&&t.push("@all"),"true"===e.notify_props.channel&&t.push("@channel"),t):t}},{key:"setStatuses",value:function(e){this.pSetStatuses(e),this.emitStatusesChange()}},{key:"pSetStatuses",value:function(e){y.default.setItem("statuses",e)}},{key:"setStatus",value:function(e,t){var a=this.getStatuses();a[e]=t,this.pSetStatuses(a),this.emitStatusesChange()}},{key:"getStatuses",value:function(){return y.default.getItem("statuses",{})}},{key:"getStatus",value:function(e){return this.getStatuses()[e]}}]),a}(b.default),x=new M;x.setMaxListeners(0),x.dispatchToken=f.default.register(function(e){var t=e.action;switch(t.type){case R.RECIEVED_PROFILES:x.saveProfiles(t.profiles),x.emitChange();break;case R.RECIEVED_ME:x.setCurrentUser(t.me),x.emitChange(t.me.id);break;case R.RECIEVED_SESSIONS:x.setSessions(t.sessions),x.emitSessionsChange();break;case R.RECIEVED_AUDITS:x.setAudits(t.audits),x.emitAuditsChange();break;case R.RECIEVED_TEAMS:x.setTeams(t.teams),x.emitTeamsChange();break;case R.RECIEVED_STATUSES:x.pSetStatuses(t.statuses),x.emitStatusesChange()}}),a.default=x}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":281,"../utils/constants.jsx":339,"./browser_store.jsx":324,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,events:283}],336:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e,t){I.default.handleServerAction({type:z.RECIEVED_ERROR,err:e,method:t})}function l(e){return e in K?0===K[e]?!1:G.getTimestamp()-K[e]>5e3?!1:!0:!1}function i(e){l("getChannels")||(K.getChannels=G.getTimestamp(),P.getChannels(function(t,a,s){if(K.getChannels=0,e){var n=s.getResponseHeader("X-Version-ID");n!==L.default.getLastServerVersion()&&(L.default.getLastServerVersion()&&""!==L.default.getLastServerVersion()?(L.default.setLastServerVersion(n),window.location.reload(!0),console.log("Detected version update refreshing the page")):L.default.setLastServerVersion(n))}304!==s.status&&t&&I.default.handleServerAction({type:z.RECIEVED_CHANNELS,channels:t.channels,
members:t.members})},function(e){K.getChannels=0,r(e,"getChannels")}))}function o(e){l("getChannel"+e)||(K["getChannel"+e]=G.getTimestamp(),P.getChannel(e,function(t,a,s){K["getChannel"+e]=0,304!==s.status&&t&&I.default.handleServerAction({type:z.RECIEVED_CHANNEL,channel:t.channel,member:t.member})},function(t){K["getChannel"+e]=0,r(t,"getChannel")}))}function c(e){var t=void 0;t=e?e:F.default.getCurrentId(),null!=t&&(l("updateLastViewed"+t)||(K["updateLastViewed"+t]=G.getTimestamp(),P.updateLastViewedAt(t,function(){K.updateLastViewed=0},function(e){K.updateLastViewed=0,r(e,"updateLastViewedAt")})))}function u(e){l("getMoreChannels")||(F.default.getMoreAll().loading||e)&&(K.getMoreChannels=G.getTimestamp(),P.getMoreChannels(function(e,t,a){K.getMoreChannels=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_MORE_CHANNELS,channels:e.channels,members:e.members})},function(e){K.getMoreChannels=0,r(e,"getMoreChannels")}))}function d(e,t){var a=void 0;if(a=e?e:F.default.getCurrentId(),null!=a){if(l("getChannelExtraInfo_"+a))return;K["getChannelExtraInfo_"+a]=G.getTimestamp(),P.getChannelExtraInfo(a,t,function(e,t,s){K["getChannelExtraInfo_"+a]=0,304!==s.status&&e&&I.default.handleServerAction({type:z.RECIEVED_CHANNEL_EXTRA_INFO,extra_info:e})},function(e){K["getChannelExtraInfo_"+a]=0,r(e,"getChannelExtraInfo")})}}function m(){l("getProfiles")||(K.getProfiles=G.getTimestamp(),P.getProfiles(function(e,t,a){K.getProfiles=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_PROFILES,profiles:e})},function(e){K.getProfiles=0,r(e,"getProfiles")}))}function p(){l("getSessions")||(K.getSessions=G.getTimestamp(),P.getSessions(B.default.getCurrentId(),function(e,t,a){K.getSessions=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_SESSIONS,sessions:e})},function(e){K.getSessions=0,r(e,"getSessions")}))}function h(){l("getAudits")||(K.getAudits=G.getTimestamp(),P.getAudits(B.default.getCurrentId(),function(e,t,a){K.getAudits=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_AUDITS,audits:e})},function(e){K.getAudits=0,r(e,"getAudits")}))}function f(){l("getLogs")||(K.getLogs=G.getTimestamp(),P.getLogs(function(e,t,a){K.getLogs=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_LOGS,logs:e})},function(e){K.getLogs=0,r(e,"getLogs")}))}function g(){l("getConfig")||(K.getConfig=G.getTimestamp(),P.getConfig(function(e,t,a){K.getConfig=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_CONFIG,config:e})},function(e){K.getConfig=0,r(e,"getConfig")}))}function b(){l("getAllTeams")||(K.getAllTeams=G.getTimestamp(),P.getAllTeams(function(e,t,a){K.getAllTeams=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_ALL_TEAMS,teams:e})},function(e){K.getAllTeams=0,r(e,"getAllTeams")}))}function v(e){if(!l("findTeams_"+e)){var t=B.default.getCurrentUser();t&&(K["findTeams_"+e]=G.getTimestamp(),P.findTeams(t.email,function(t,a,s){K["findTeams_"+e]=0,304!==s.status&&t&&I.default.handleServerAction({type:z.RECIEVED_TEAMS,teams:t})},function(t){K["findTeams_"+e]=0,r(t,"findTeams")}))}}function _(e){l("search_"+String(e))||(K["search_"+String(e)]=G.getTimestamp(),P.search(e,function(t,a,s){K["search_"+String(e)]=0,304!==s.status&&t&&I.default.handleServerAction({type:z.RECIEVED_SEARCH,results:t})},function(t){K["search_"+String(e)]=0,r(t,"search")}))}function E(e,t){var a=e;if((null!=a||(a=F.default.getCurrentId(),null!=a))&&!l("getPostsPage_"+a)){var s=$.default.getAllPosts(e),n=t;null==n&&(n=W.default.POST_CHUNK_SIZE*W.default.MAX_POST_CHUNKS);var i=Math.min(n,W.default.POST_CHUNK_SIZE);s&&s.order.length>0&&(i=Math.min(n,W.default.POST_CHUNK_SIZE*Math.ceil(s.order.length/W.default.POST_CHUNK_SIZE))),null!=a&&(K["getPostsPage_"+a]=G.getTimestamp(),P.getPostsPage(a,0,i,function(e,t,s){304!==s.status&&e&&(I.default.handleServerAction({type:z.RECIEVED_POSTS,id:a,before:!0,numRequested:i,post_list:e}),m())},function(e){r(e,"getPostsPage")},function(){K["getPostsPage_"+a]=0}))}}function y(e){var t=e;if((null!=t||(t=F.default.getCurrentId(),null!=t))&&!l("getPosts_"+t)){if(null==$.default.getAllPosts(t))return void E(t,W.default.POST_CHUNK_SIZE);var a=$.default.getLatestUpdate(t);K["getPosts_"+t]=G.getTimestamp(),P.getPosts(t,a,function(e,a,s){304!==s.status&&e&&(I.default.handleServerAction({type:z.RECIEVED_POSTS,id:t,before:!0,numRequested:W.default.POST_CHUNK_SIZE,post_list:e}),m())},function(e){r(e,"getPosts")},function(){K["getPosts_"+t]=0})}}function R(e,t,a){var s=F.default.getCurrentId();null!=s&&(l("getPostsBefore_"+s)||P.getPostsBefore(s,e,t,a,function(e,t,n){304!==n.status&&e&&(I.default.handleServerAction({type:z.RECIEVED_POSTS,id:s,before:!0,numRequested:a,post_list:e}),m())},function(e){r(e,"getPostsBefore")},function(){K["getPostsBefore_"+s]=0}))}function C(e,t,a){var s=F.default.getCurrentId();null!=s&&(l("getPostsAfter_"+s)||P.getPostsAfter(s,e,t,a,function(e,t,n){304!==n.status&&e&&(I.default.handleServerAction({type:z.RECIEVED_POSTS,id:s,before:!1,numRequested:a,post_list:e}),m())},function(e){r(e,"getPostsAfter")},function(){K["getPostsAfter_"+s]=0}))}function w(){l("getMe")||(K.getMe=G.getTimestamp(),P.getMe(function(e,t,a){K.getMe=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_ME,me:e})},function(e){K.getMe=0,r(e,"getMe")}))}function S(){for(var e=F.default.getAll().filter(function(e){return e.type===W.default.DM_CHANNEL}),t=[],a=0;a<e.length;a++){var s=G.getDirectTeammate(e[a].id);s&&t.push(s.id)}l("getStatuses")||0===t.length||(K.getStatuses=G.getTimestamp(),P.getStatuses(t,function(e,t,a){K.getStatuses=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_STATUSES,statuses:e})},function(e){K.getStatuses=0,r(e,"getStatuses")}))}function k(){l("getMyTeam")||(K.getMyTeam=G.getTimestamp(),P.getMyTeam(function(e,t,a){K.getMyTeam=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_TEAM,team:e})},function(e){K.getMyTeam=0,r(e,"getMyTeam")}))}function N(){l("getAllPreferences")||(K.getAllPreferences=G.getTimestamp(),P.getAllPreferences(function(e,t,a){K.getAllPreferences=0,304!==a.status&&e&&I.default.handleServerAction({type:z.RECIEVED_PREFERENCES,preferences:e})},function(e){K.getAllPreferences=0,r(e,"getAllPreferences")}))}function M(e,t,a){P.savePreferences(e,function(a,s,n){304!==n.status&&I.default.handleServerAction({type:z.RECIEVED_PREFERENCES,preferences:e}),t&&t(a)},function(e){r(e,"savePreferences"),a&&a()})}function x(e,t,a){P.executeCommand("",e,!0,function(s){var n=s.suggestions.map(function(e){return e.suggestion});I.default.handleServerAction({type:z.SUGGESTION_RECEIVED_SUGGESTIONS,id:t,matchedPretext:e,terms:n,items:s.suggestions,component:a})},function(e){r(e,"getCommandSuggestions")})}function j(e){var t="getFileInfo"+e;l(t)||(K[t]=G.getTimestamp(),P.getFileInfo(e,function(a){K[t]=0,I.default.handleServerAction({type:z.RECIEVED_FILE_INFO,filename:e,info:a})},function(e){K[t]=0,r(e,"getFileInfo")}))}Object.defineProperty(a,"__esModule",{value:!0}),a.dispatchError=r,a.getChannels=i,a.getChannel=o,a.updateLastViewedAt=c,a.getMoreChannels=u,a.getChannelExtraInfo=d,a.getProfiles=m,a.getSessions=p,a.getAudits=h,a.getLogs=f,a.getConfig=g,a.getAllTeams=b,a.findTeams=v,a.search=_,a.getPostsPage=E,a.getPosts=y,a.getPostsBefore=R,a.getPostsAfter=C,a.getMe=w,a.getStatuses=S,a.getMyTeam=k,a.getAllPreferences=N,a.savePreferences=M,a.getSuggestedCommands=x,a.getFileInfo=j;var T=e("./client.jsx"),P=n(T),O=e("../dispatcher/app_dispatcher.jsx"),I=s(O),D=e("../stores/browser_store.jsx"),L=s(D),A=e("../stores/channel_store.jsx"),F=s(A),U=e("../stores/post_store.jsx"),$=s(U),H=e("../stores/user_store.jsx"),B=s(H),q=e("./utils.jsx"),G=n(q),V=e("./constants.jsx"),W=s(V),z=W.default.ActionTypes,K={}},{"../dispatcher/app_dispatcher.jsx":281,"../stores/browser_store.jsx":324,"../stores/channel_store.jsx":325,"../stores/post_store.jsx":329,"../stores/user_store.jsx":335,"./client.jsx":338,"./constants.jsx":339,"./utils.jsx":344}],337:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return"D"===e.type?l(e):C.default.isDefault(e)?o(e):e.name===S.default.OFFTOPIC_CHANNEL?i(e):"O"===e.type||"P"===e.type?c(e):void 0}function l(e){var t=p.getDirectTeammate(e.id);if(t){var a=t.username;return t.nickname.length>0&&(a=t.nickname),React.createElement("div",{className:"channel-intro"},React.createElement("div",{className:"post-profile-img__container channel-intro-img"},React.createElement("img",{className:"post-profile-img",src:"/api/v1/users/"+t.id+"/image?time="+t.update_at+"&"+p.getSessionIndex(),height:"50",width:"50"})),React.createElement("div",{className:"channel-intro-profile"},React.createElement("strong",null,React.createElement(y.default,{userId:t.id}))),React.createElement("p",{className:"channel-intro-text"},"This is the start of your direct message history with "+a+".",React.createElement("br",null),"Direct messages and files shared here are not shown to people outside this area."),d(e))}return React.createElement("div",{className:"channel-intro"},React.createElement("p",{className:"channel-intro-text"},"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area."))}function i(e){return React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of "+e.display_name),React.createElement("p",{className:"channel-intro__content"},"This is the start of "+e.display_name+", a channel for non-work-related conversations.",React.createElement("br",null)),d(e),u(e,"channel"))}function o(e){var t=N.default.getCurrent(),a=void 0;return a=t.type===S.default.INVITE_TEAM?React.createElement("a",{className:"intro-links",href:"#",onClick:x.showInviteMemberModal},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this team"):React.createElement("a",{className:"intro-links",href:"#",onClick:x.showGetTeamInviteLinkModal},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this team"),React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of "+e.display_name),React.createElement("p",{className:"channel-intro__content"},React.createElement("strong",null,"Welcome to "+e.display_name+"!"),React.createElement("br",null),React.createElement("br",null),"This is the first channel teammates see when they sign up - use it for posting updates everyone needs to know."),a,d(e),React.createElement("br",null))}function c(e){var t,a,s=e.display_name,n="";"P"===e.type?(t="private group",a=" Only invited members can see this private group."):(t="channel",a=" Any member can join and read this channel.");var r;return r=""===n?"This is the start of the "+s+" "+t+", created on "+p.displayDate(e.create_at)+".":React.createElement("span",null,"This is the start of the ",React.createElement("strong",null,s)," ",t,", created by ",React.createElement("strong",null,n)," on ",React.createElement("strong",null,p.displayDate(e.create_at))),React.createElement("div",{className:"channel-intro"},React.createElement("h4",{className:"channel-intro__title"},"Beginning of "+s),React.createElement("p",{className:"channel-intro__content"},r,a,React.createElement("br",null)),d(e),u(e,t))}function u(e,t){return React.createElement(_.default,{className:"intro-links",dialogType:f.default,dialogProps:{channel:e}},React.createElement("i",{className:"fa fa-user-plus"}),"Invite others to this "+t)}function d(e){return React.createElement(_.default,{className:"intro-links",dialogType:b.default,dialogProps:{channel:e}},React.createElement("i",{className:"fa fa-pencil"}),"Set a header")}Object.defineProperty(a,"__esModule",{value:!0}),a.createChannelIntroMessage=r,a.createDMIntroMessage=l,a.createOffTopicIntroMessage=i,a.createDefaultIntroMessage=o,a.createStandardIntroMessage=c;var m=e("./utils.jsx"),p=n(m),h=e("../components/channel_invite_modal.jsx"),f=s(h),g=e("../components/edit_channel_header_modal.jsx"),b=s(g),v=e("../components/toggle_modal_button.jsx"),_=s(v),E=e("../components/user_profile.jsx"),y=s(E),R=e("../stores/channel_store.jsx"),C=s(R),w=e("../utils/constants.jsx"),S=s(w),k=e("../stores/team_store.jsx"),N=s(k),M=e("../dispatcher/event_helpers.jsx"),x=n(M)},{"../components/channel_invite_modal.jsx":144,"../components/edit_channel_header_modal.jsx":158,"../components/toggle_modal_button.jsx":257,"../components/user_profile.jsx":261,"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/team_store.jsx":334,"../utils/constants.jsx":339,"./utils.jsx":344}],338:[function(e,t,a){(function(s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,r){s.window.analytics.track(t,{category:e,label:a,property:n,value:r})}function l(){s.window.analytics.page()}function i(e,t,a,s){var n=null;try{n=JSON.parse(t.responseText)}catch(e){n=null}var l="";if(n)l="error in "+e+" msg="+n.message+" detail="+n.detailed_error+" rid="+n.request_id;else if(l="error in "+e+" status="+a+" statusCode="+t.status+" err="+s,0===t.status){var i=1,o=Ye.default.getLastError(),c="There appears to be a problem with your internet connection";o&&o.connErrorCount&&(i+=o.connErrorCount,c="Please check connection, Mattermost unreachable. If issue persists, ask administrator to check WebSocket port."),n={message:c,connErrorCount:i}}else n={message:"We received an unexpected status code from the server ("+t.status+")"};if(console.error(l),console.error(n),r("api","api_weberror",e,"message",l),401===t.status)if(0===window.location.href.indexOf("/channels"))window.location.pathname="/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search);else{var u=window.location.href.split("/channels")[0];window.location.href=u+"/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search)}return n}function o(e,t,a){$.ajax({url:"/static/i18n/"+e+".json",dataType:"json",success:t,error:function(e,t,s){var n=i("getTranslations",e,t,s);a(n)}})}function c(e,t,a){$.ajax({url:"/api/v1/teams/create_from_signup",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("createTeamFromSignup",e,t,s);a(n)}})}function u(e,t,a,s){$.ajax({url:"/api/v1/teams/create_with_sso/"+t,dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:a,error:function(e,t,a){var n=i("createTeamWithSSO",e,t,a);s(n)}})}function d(e,t,a,s,n){$.ajax({url:"/api/v1/users/create?d="+encodeURIComponent(t)+"&h="+encodeURIComponent(a),dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:s,error:function(e,t,a){var s=i("createUser",e,t,a);n(s)}}),r("api","api_users_create",e.team_id,"email",e.email)}function m(e,t,a){$.ajax({url:"/api/v1/users/update",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateUser",e,t,s);a(n)}}),r("api","api_users_update")}function p(e,t,a){$.ajax({url:"/api/v1/users/newpassword",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("newPassword",e,t,s);a(n)}}),r("api","api_users_newpassword")}function h(e,t,a){$.ajax({url:"/api/v1/users/update_notify",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateUserNotifyProps",e,t,s);a(n)}})}function f(e,t,a){$.ajax({url:"/api/v1/users/update_roles",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateRoles",e,t,s);a(n)}}),r("api","api_users_update_roles")}function g(e,t,a,s){var n={};n.user_id=e,n.active=""+t,$.ajax({url:"/api/v1/users/update_active",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(n),success:a,error:function(e,t,a){var n=i("updateActive",e,t,a);s(n)}}),r("api","api_users_update_roles")}function b(e,t,a){$.ajax({url:"/api/v1/users/send_password_reset",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("sendPasswordReset",e,t,s);a(n)}}),r("api","api_users_send_password_reset")}function v(e,t,a){$.ajax({url:"/api/v1/users/reset_password",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("resetPassword",e,t,s);a(n)}}),r("api","api_users_reset_password")}function _(e,t,a){$.ajax({url:"/api/v1/users/switch_to_sso",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("switchToSSO",e,t,s);a(n)}}),r("api","api_users_switch_to_sso")}function E(e,t,a){$.ajax({url:"/api/v1/users/switch_to_email",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("switchToEmail",e,t,s);a(n)}}),r("api","api_users_switch_to_email")}function y(){r("api","api_users_logout");var e=ze.default.getCurrentTeamUrl();Ve.default.signalLogout(),Ve.default.clear(),Ye.default.storeLastError(null),window.location.href=e+"/logout"}function R(e,t,a,s,n){$.ajax({url:"/api/v1/users/login",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({name:e,email:t,password:a}),success:function(e,t,a){r("api","api_users_login_success",e.team_id,"email",e.email),sessionStorage.removeItem(e.id+"_last_error"),Ve.default.signalLogin(),s(e,t,a)},error:function(a,s,l){r("api","api_users_login_fail",e,"email",t);var o=i("loginByEmail",a,s,l);n(o)}})}function C(e,t,a,s,n){$.ajax({url:"/api/v1/users/login_ldap",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({teamName:e,id:t,password:a}),success:function(e,a,n){r("api","api_users_loginLdap_success",e.team_id,"id",t),sessionStorage.removeItem(e.id+"_last_error"),Ve.default.signalLogin(),s(e,a,n)},error:function(a,s,l){r("api","api_users_loginLdap_fail",e,"id",t);var o=i("loginByLdap",a,s,l);n(o)}})}function w(e,t,a){$.ajax({url:"/api/v1/users/revoke_session",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({id:e}),success:t,error:function(e,t,s){var n=i("revokeSession",e,t,s);a(n)}})}function S(e,t,a){$.ajax({cache:!1,url:"/api/v1/users/"+e+"/sessions",dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getSessions",e,t,s);a(n)}})}function k(e,t,a){$.ajax({url:"/api/v1/users/"+e+"/audits",dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getAudits",e,t,s);a(n)}})}function N(e,t){$.ajax({url:"/api/v1/admin/logs",dataType:"json",contentType:"application/json",type:"GET",success:e,error:function(e,a,s){var n=i("getLogs",e,a,s);t(n)}})}function M(e,t){$.ajax({url:"/api/v1/admin/config",dataType:"json",contentType:"application/json",type:"GET",success:e,error:function(e,a,s){var n=i("getConfig",e,a,s);t(n)}})}function x(e,t,a,s){$.ajax({url:"/api/v1/admin/analytics/"+e+"/"+t,dataType:"json",contentType:"application/json",type:"GET",success:a,error:function(e,t,a){var n=i("getTeamAnalytics",e,t,a);s(n)}})}function j(e,t,a){$.ajax({url:"/api/v1/admin/analytics/"+e,dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getSystemAnalytics",e,t,s);a(n)}})}function T(e,t,a){$.ajax({url:"/api/v1/admin/save_config",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("saveConfig",e,t,s);a(n)}})}function P(e){var t={};t.level="ERROR",t.message=e,$.ajax({url:"/api/v1/admin/log_client",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(t)})}function O(e,t,a){$.ajax({url:"/api/v1/admin/test_email",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("testEmail",e,t,s);a(n)}})}function I(e,t){$.ajax({url:"/api/v1/teams/all",dataType:"json",contentType:"application/json",type:"GET",success:e,error:function(e,a,s){var n=i("getAllTeams",e,a,s);t(n)}})}function D(e,t){var a=null;return $.ajax({cache:!1,url:"/api/v1/users/me",dataType:"json",contentType:"application/json",type:"GET",success:function(t,s,n){a=t,e&&e(t,s,n)},error:function(e,a,s){if(t){var n=i("getMe",e,a,s);t(n)}}}),a}function L(e,t,a){$.ajax({url:"/api/v1/teams/invite_members",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("inviteMembers",e,t,s);a(n)}}),r("api","api_teams_invite_members")}function A(e,t,a){$.ajax({url:"/api/v1/teams/update",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateTeam",e,t,s);a(n)}}),r("api","api_teams_update_name")}function F(e,t,a){$.ajax({url:"/api/v1/teams/signup",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({email:e}),success:t,error:function(e,t,s){var n=i("singupTeam",e,t,s);a(n)}}),r("api","api_teams_signup")}function U(e,t,a){$.ajax({url:"/api/v1/teams/create",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("createTeam",e,t,s);a(n)}})}function H(e,t,a){$.ajax({url:"/api/v1/teams/find_team_by_name",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({name:e}),success:t,error:function(e,t,s){var n=i("findTeamByName",e,t,s);a(n)}})}function B(e,t,a){$.ajax({url:"/api/v1/teams/email_teams",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({email:e}),success:t,error:function(e,t,s){var n=i("findTeamsSendEmail",e,t,s);a(n)}}),r("api","api_teams_email_teams")}function q(e,t,a){$.ajax({url:"/api/v1/teams/find_teams",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({email:e}),success:t,error:function(e,t,s){var n=i("findTeams",e,t,s);a(n)}})}function G(e,t,a){$.ajax({url:"/api/v1/channels/create",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("createChannel",e,t,s);a(n)}}),r("api","api_channels_create",e.type,"name",e.name)}function V(e,t,a,s){$.ajax({url:"/api/v1/channels/create_direct",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({user_id:t}),success:a,error:function(e,t,a){var n=i("createDirectChannel",e,t,a);s(n)}}),r("api","api_channels_create_direct",e.type,"name",e.name)}function W(e,t,a){$.ajax({url:"/api/v1/channels/update",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateChannel",e,t,s);a(n)}}),r("api","api_channels_update")}function z(e,t,a,s){var n={channel_id:e,channel_header:t};$.ajax({url:"/api/v1/channels/update_header",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(n),success:a,error:function(e,t,a){var n=i("updateChannelHeader",e,t,a);s(n)}}),r("api","api_channels_header")}function K(e,t,a){$.ajax({url:"/api/v1/channels/update_purpose",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateChannelPurpose",e,t,s);a(n)}}),r("api","api_channels_purpose")}function Y(e,t,a){$.ajax({url:"/api/v1/channels/update_notify_props",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updateNotifyProps",e,t,s);a(n)}})}function J(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/join",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("joinChannel",e,t,s);a(n)}}),r("api","api_channels_join")}function Z(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/leave",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("leaveChannel",e,t,s);a(n)}}),r("api","api_channels_leave")}function X(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/delete",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("deleteChannel",e,t,s);a(n)}}),r("api","api_channels_delete")}function Q(e,t,a){$.ajax({url:"/api/v1/channels/"+e+"/update_last_viewed_at",dataType:"json",contentType:"application/json",type:"POST",success:t,error:function(e,t,s){var n=i("updateLastViewedAt",e,t,s);a(n)}})}function ee(e,t){$.ajax({cache:!1,url:"/api/v1/channels/",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getChannels",e,a,s);t(n)}})}function te(e,t,a){$.ajax({cache:!1,url:"/api/v1/channels/"+e+"/",dataType:"json",type:"GET",success:t,error:function(e,t,s){var n=i("getChannel",e,t,s);a(n)}}),r("api","api_channel_get")}function ae(e,t){$.ajax({url:"/api/v1/channels/more",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getMoreChannels",e,a,s);t(n)}})}function se(e,t){$.ajax({cache:!1,url:"/api/v1/channels/counts",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getChannelCounts",e,a,s);t(n)}})}function ne(e,t,a,s){var n="/api/v1/channels/"+e+"/extra_info";t&&(n+="/"+t),$.ajax({url:n,dataType:"json",contentType:"application/json",type:"GET",success:a,error:function(e,t,a){var n=i("getChannelExtraInfo",e,t,a);s(n)}})}function re(e,t,a,s,n){$.ajax({url:"/api/v1/command",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)({channelId:e,command:t,suggest:""+a}),success:s,error:function(e,t,a){var s=i("executeCommand",e,t,a);n(s)}})}function le(e,t,a,s,n,r){$.ajax({cache:!1,url:"/api/v1/channels/"+e+"/posts/"+t+"/"+a,dataType:"json",type:"GET",ifModified:!0,success:s,error:function(e,t,a){var s=i("getPosts",e,t,a);n(s)},complete:r})}function ie(e,t,a,s,n){$.ajax({url:"/api/v1/channels/"+e+"/posts/"+t,dataType:"json",type:"GET",ifModified:!0,success:a,error:function(e,t,a){var n=i("getPosts",e,t,a);s(n)},complete:n})}function oe(e,t,a,s,n,r,l){$.ajax({url:"/api/v1/channels/"+e+"/post/"+t+"/before/"+a+"/"+s,dataType:"json",type:"GET",ifModified:!1,success:n,error:function(e,t,a){var s=i("getPostsBefore",e,t,a);r(s)},complete:l})}function ce(e,t,a,s,n,r,l){$.ajax({url:"/api/v1/channels/"+e+"/post/"+t+"/after/"+a+"/"+s,dataType:"json",type:"GET",ifModified:!1,success:n,error:function(e,t,a){var s=i("getPostsAfter",e,t,a);r(s)},complete:l})}function ue(e,t,a,s,n){$.ajax({cache:!1,url:"/api/v1/channels/"+e+"/post/"+t,dataType:"json",type:"GET",ifModified:!1,success:a,error:function(e,t,a){var n=i("getPost",e,t,a);s(n)},complete:n})}function de(e,t,a,s){$.ajax({cache:!1,url:"/api/v1/posts/"+e,dataType:"json",type:"GET",ifModified:!1,success:t,error:function(e,t,s){var n=i("getPostById",e,t,s);a(n)},complete:s})}function me(e,t,a){$.ajax({url:"/api/v1/posts/search",dataType:"json",type:"GET",data:{terms:e},success:t,error:function(e,t,s){var n=i("search",e,t,s);a(n)}}),r("api","api_posts_search")}function pe(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e+"/post/"+t+"/delete",dataType:"json",contentType:"application/json",type:"POST",success:a,error:function(e,t,a){var n=i("deletePost",e,t,a);s(n)}}),r("api","api_posts_delete")}function he(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e.channel_id+"/create",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:a,error:function(e,t,a){var n=i("createPost",e,t,a);s(n)}}),r("api","api_posts_create",t.name,"length",e.message.length)}function fe(e,t,a){$.ajax({url:"/api/v1/channels/"+e.channel_id+"/update",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("updatePost",e,t,s);a(n)}}),r("api","api_posts_update")}function ge(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e+"/add",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(t),success:a,error:function(e,t,a){var n=i("addChannelMember",e,t,a);s(n)}}),r("api","api_channels_add_member")}function be(e,t,a,s){$.ajax({url:"/api/v1/channels/"+e+"/remove",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(t),success:a,error:function(e,t,a){var n=i("removeChannelMember",e,t,a);s(n)}}),r("api","api_channels_remove_member")}function ve(e,t){$.ajax({cache:!1,url:"/api/v1/users/profiles",dataType:"json",contentType:"application/json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getProfiles",e,a,s);t(n)}})}function _e(e,t,a){$.ajax({cache:!1,url:"/api/v1/users/profiles/"+e,dataType:"json",contentType:"application/json",type:"GET",success:t,error:function(e,t,s){var n=i("getProfilesForTeam",e,t,s);a(n)}})}function Ee(e,t,a){var s=$.ajax({url:"/api/v1/files/upload",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){if("abort"!==s){var n=i("uploadFile",e,t,s);a(n)}}});return r("api","api_files_upload"),s}function ye(e,t,a){$.ajax({url:"/api/v1/files/get_info"+e,dataType:"json",contentType:"application/json",type:"GET",success:function(e){t(e)},error:function(e,t,s){var n=i("getFileInfo",e,t,s);a(n)}})}function Re(e,t,a){$.ajax({url:"/api/v1/files/get_public_link",dataType:"json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("getPublicLink",e,t,s);a(n)}})}function Ce(e,t,a){$.ajax({url:"/api/v1/users/newimage",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){var n=i("uploadProfileImage",e,t,s);a(n)}})}function we(e,t,a){$.ajax({url:"/api/v1/teams/import_team",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){var n=i("importTeam",e,t,s);a(n)}})}function Se(e,t){$.ajax({url:"/api/v1/teams/export_team",type:"GET",dataType:"json",success:e,error:function(e,a,s){var n=i("exportTeam",e,a,s);t(n)}})}function ke(e,t,a){$.ajax({url:"/api/v1/users/status",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("getStatuses",e,t,s);a(n)}})}function Ne(e,t){$.ajax({url:"/api/v1/teams/me",dataType:"json",type:"GET",success:e,ifModified:!0,error:function(e,a,s){var n=i("getMyTeam",e,a,s);t(n)}})}function Me(e,a,s){$.ajax({url:"/api/v1/oauth/register",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:a,error:function(e,t,a){var n=i("registerApp",e,t,a);s(n)}}),t.exports.track("api","api_apps_register")}function xe(e,a,s,n,r,l,o){$.ajax({url:"/api/v1/oauth/allow?response_type="+e+"&client_id="+a+"&redirect_uri="+s+"&scope="+r+"&state="+n,dataType:"json",contentType:"application/json",type:"GET",success:l,error:function(e,t,a){var s=i("allowOAuth2",e,t,a);o(s)}}),t.exports.track("api","api_users_allow_oauth2")}function je(e,t,a){$.ajax({url:"/api/v1/hooks/incoming/create",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("addIncomingHook",e,t,s);a(n)}})}function Te(e,t,a){$.ajax({url:"/api/v1/hooks/incoming/delete",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("deleteIncomingHook",e,t,s);a(n)}})}function Pe(e,t){$.ajax({url:"/api/v1/hooks/incoming/list",dataType:"json",type:"GET",success:e,error:function(e,a,s){var n=i("listIncomingHooks",e,a,s);t(n)}})}function Oe(e,t){$.ajax({url:"/api/v1/preferences/",dataType:"json",type:"GET",success:e,error:function(e,a,s){var n=i("getAllPreferences",e,a,s);t(n)}})}function Ie(e,t,a){$.ajax({url:"/api/v1/preferences/"+e,dataType:"json",type:"GET",success:t,error:function(e,t,s){var n=i("getPreferenceCategory",e,t,s);a(n)}})}function De(e,t,a){
$.ajax({url:"/api/v1/preferences/save",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("savePreferences",e,t,s);a(n)}})}function Le(e,t,a){$.ajax({url:"/api/v1/hooks/outgoing/create",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("addOutgoingHook",e,t,s);a(n)}})}function Ae(e,t,a){$.ajax({url:"/api/v1/hooks/outgoing/delete",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("deleteOutgoingHook",e,t,s);a(n)}})}function Fe(e,t){$.ajax({url:"/api/v1/hooks/outgoing/list",dataType:"json",type:"GET",success:e,error:function(e,a,s){var n=i("listOutgoingHooks",e,a,s);t(n)}})}function Ue(e,t,a){$.ajax({url:"/api/v1/hooks/outgoing/regen_token",dataType:"json",contentType:"application/json",type:"POST",data:(0,qe.default)(e),success:t,error:function(e,t,s){var n=i("regenOutgoingHookToken",e,t,s);a(n)}})}function $e(e,t,a){$.ajax({url:"/api/v1/license/add",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:t,error:function(e,t,s){var n=i("uploadLicenseFile",e,t,s);a(n)}}),r("api","api_license_upload")}function He(e,t){$.ajax({url:"/api/v1/license/remove",type:"POST",cache:!1,contentType:!1,processData:!1,success:e,error:function(e,a,s){var n=i("removeLicenseFile",e,a,s);t(n)}}),r("api","api_license_upload")}var Be=e("babel-runtime/core-js/json/stringify"),qe=n(Be);Object.defineProperty(a,"__esModule",{value:!0}),a.regenOutgoingHookToken=a.listOutgoingHooks=a.deleteOutgoingHook=a.addOutgoingHook=a.savePreferences=a.getPreferenceCategory=a.getAllPreferences=a.listIncomingHooks=a.deleteIncomingHook=a.addIncomingHook=a.allowOAuth2=a.registerOAuthApp=a.getFileInfo=a.updateTeam=a.getSystemAnalytics=a.getTeamAnalytics=void 0,a.track=r,a.trackPage=l,a.getTranslations=o,a.createTeamFromSignup=c,a.createTeamWithSSO=u,a.createUser=d,a.updateUser=m,a.updatePassword=p,a.updateUserNotifyProps=h,a.updateRoles=f,a.updateActive=g,a.sendPasswordReset=b,a.resetPassword=v,a.switchToSSO=_,a.switchToEmail=E,a.logout=y,a.loginByEmail=R,a.loginByLdap=C,a.revokeSession=w,a.getSessions=S,a.getAudits=k,a.getLogs=N,a.getConfig=M,a.saveConfig=T,a.logClientError=P,a.testEmail=O,a.getAllTeams=I,a.getMe=D,a.inviteMembers=L,a.signupTeam=F,a.createTeam=U,a.findTeamByName=H,a.findTeamsSendEmail=B,a.findTeams=q,a.createChannel=G,a.createDirectChannel=V,a.updateChannel=W,a.updateChannelHeader=z,a.updateChannelPurpose=K,a.updateNotifyProps=Y,a.joinChannel=J,a.leaveChannel=Z,a.deleteChannel=X,a.updateLastViewedAt=Q,a.getChannels=ee,a.getChannel=te,a.getMoreChannels=ae,a.getChannelCounts=se,a.getChannelExtraInfo=ne,a.executeCommand=re,a.getPostsPage=le,a.getPosts=ie,a.getPostsBefore=oe,a.getPostsAfter=ce,a.getPost=ue,a.getPostById=de,a.search=me,a.deletePost=pe,a.createPost=he,a.updatePost=fe,a.addChannelMember=ge,a.removeChannelMember=be,a.getProfiles=ve,a.getProfilesForTeam=_e,a.uploadFile=Ee,a.getPublicLink=Re,a.uploadProfileImage=Ce,a.importSlack=we,a.exportTeam=Se,a.getStatuses=ke,a.getMyTeam=Ne,a.uploadLicenseFile=$e,a.removeLicenseFile=He;var Ge=e("../stores/browser_store.jsx"),Ve=n(Ge),We=e("../stores/team_store.jsx"),ze=n(We),Ke=e("../stores/error_store.jsx"),Ye=n(Ke);a.getTeamAnalytics=x,a.getSystemAnalytics=j,a.updateTeam=A,a.getFileInfo=ye,a.registerOAuthApp=Me,a.allowOAuth2=xe,a.addIncomingHook=je,a.deleteIncomingHook=Te,a.listIncomingHooks=Pe,a.getAllPreferences=Oe,a.getPreferenceCategory=Ie,a.savePreferences=De,a.addOutgoingHook=Le,a.deleteOutgoingHook=Ae,a.listOutgoingHooks=Fe,a.regenOutgoingHookToken=Ue}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stores/browser_store.jsx":324,"../stores/error_store.jsx":326,"../stores/team_store.jsx":334,"babel-runtime/core-js/json/stringify":4}],339:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("keymirror"),r=s(n);a.default={ActionTypes:(0,r.default)({RECIEVED_ERROR:null,CLICK_CHANNEL:null,CREATE_CHANNEL:null,LEAVE_CHANNEL:null,CREATE_POST:null,POST_DELETED:null,RECIEVED_CHANNELS:null,RECIEVED_CHANNEL:null,RECIEVED_MORE_CHANNELS:null,RECIEVED_CHANNEL_EXTRA_INFO:null,FOCUS_POST:null,RECIEVED_POSTS:null,RECIEVED_FOCUSED_POST:null,RECIEVED_POST:null,RECIEVED_EDIT_POST:null,RECIEVED_SEARCH:null,RECIEVED_SEARCH_TERM:null,RECIEVED_POST_SELECTED:null,RECIEVED_MENTION_DATA:null,RECIEVED_ADD_MENTION:null,RECIEVED_PROFILES:null,RECIEVED_ME:null,RECIEVED_SESSIONS:null,RECIEVED_AUDITS:null,RECIEVED_TEAMS:null,RECIEVED_STATUSES:null,RECIEVED_PREFERENCE:null,RECIEVED_PREFERENCES:null,RECIEVED_FILE_INFO:null,RECIEVED_MSG:null,RECIEVED_TEAM:null,RECIEVED_CONFIG:null,RECIEVED_LOGS:null,RECIEVED_ALL_TEAMS:null,SHOW_SEARCH:null,TOGGLE_IMPORT_THEME_MODAL:null,TOGGLE_INVITE_MEMBER_MODAL:null,TOGGLE_DELETE_POST_MODAL:null,TOGGLE_GET_TEAM_INVITE_LINK_MODAL:null,TOGGLE_REGISTER_APP_MODAL:null,SUGGESTION_PRETEXT_CHANGED:null,SUGGESTION_RECEIVED_SUGGESTIONS:null,SUGGESTION_CLEAR_SUGGESTIONS:null,SUGGESTION_COMPLETE_WORD:null,SUGGESTION_SELECT_NEXT:null,SUGGESTION_SELECT_PREVIOUS:null}),PayloadSources:(0,r.default)({SERVER_ACTION:null,VIEW_ACTION:null}),SocketEvents:{POSTED:"posted",POST_EDITED:"post_edited",POST_DELETED:"post_deleted",CHANNEL_VIEWED:"channel_viewed",NEW_USER:"new_user",USER_ADDED:"user_added",USER_REMOVED:"user_removed",TYPING:"typing",PREFERENCE_CHANGED:"preference_changed"},SPECIAL_MENTIONS:["channel"],CHARACTER_LIMIT:4e3,IMAGE_TYPES:["jpg","gif","bmp","png","jpeg"],AUDIO_TYPES:["mp3","wav","wma","m4a","flac","aac"],VIDEO_TYPES:["mp4","avi","webm","mkv","wmv","mpg","mov","flv"],PRESENTATION_TYPES:["ppt","pptx"],SPREADSHEET_TYPES:["xlsx","csv"],WORD_TYPES:["doc","docx"],CODE_TYPES:["css","html","js","php","rb"],PDF_TYPES:["pdf"],PATCH_TYPES:["patch"],ICON_FROM_TYPE:{audio:"audio",video:"video",spreadsheet:"excel",presentation:"ppt",pdf:"pdf",code:"code",word:"word",patch:"patch",other:"generic"},MAX_DISPLAY_FILES:5,MAX_UPLOAD_FILES:5,MAX_FILE_SIZE:5e7,THUMBNAIL_WIDTH:128,THUMBNAIL_HEIGHT:100,WEB_VIDEO_WIDTH:640,WEB_VIDEO_HEIGHT:480,MOBILE_VIDEO_WIDTH:480,MOBILE_VIDEO_HEIGHT:360,DEFAULT_CHANNEL:"town-square",OFFTOPIC_CHANNEL:"off-topic",GITLAB_SERVICE:"gitlab",GOOGLE_SERVICE:"google",EMAIL_SERVICE:"email",SIGNIN_CHANGE:"signin_change",SIGNIN_VERIFIED:"verified",POST_CHUNK_SIZE:60,MAX_POST_CHUNKS:3,POST_FOCUS_CONTEXT_RADIUS:10,POST_LOADING:"loading",POST_FAILED:"failed",POST_DELETED:"deleted",POST_TYPE_JOIN_LEAVE:"system_join_leave",SYSTEM_MESSAGE_PREFIX:"system_",SYSTEM_MESSAGE_PROFILE_NAME:"System",SYSTEM_MESSAGE_PROFILE_IMAGE:"/static/images/logo_compact.png",RESERVED_TEAM_NAMES:["www","web","admin","support","notify","test","demo","mail","team","channel","internal","localhost","dockerhost","stag","post","cluster","api"],RESERVED_USERNAMES:["valet","all","channel"],MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MAX_DMS:20,MAX_CHANNEL_POPOVER_COUNT:100,DM_CHANNEL:"D",OPEN_CHANNEL:"O",PRIVATE_CHANNEL:"P",INVITE_TEAM:"I",OPEN_TEAM:"O",MAX_POST_LEN:4e3,EMOJI_SIZE:16,ONLINE_ICON_SVG:"<svg version='1.1'id='Layer_1' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:cc='http://creativecommons.org/ns#' inkscape:version='0.48.4 r9939' sodipodi:docname='TRASH_1_4.svg'xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='-243 245 12 12'style='enable-background:new -243 245 12 12;' xml:space='preserve'> <sodipodi:namedview  inkscape:cx='26.358185' inkscape:zoom='1.18' bordercolor='#666666' pagecolor='#ffffff' borderopacity='1' objecttolerance='10' inkscape:cy='139.7898' gridtolerance='10' guidetolerance='10' showgrid='false' showguides='true' id='namedview6' inkscape:pageopacity='0' inkscape:pageshadow='2' inkscape:guide-bbox='true' inkscape:window-width='1366' inkscape:current-layer='Layer_1' inkscape:window-height='705' inkscape:window-y='-8' inkscape:window-maximized='1' inkscape:window-x='-8'> <sodipodi:guide  position='50.036793,85.991376' orientation='1,0' id='guide2986'></sodipodi:guide> <sodipodi:guide  position='58.426196,66.216355' orientation='0,1' id='guide3047'></sodipodi:guide> </sodipodi:namedview> <g> <path class='online--icon' d='M-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5z'/> <ellipse class='online--icon' cx='-238.5' cy='248' rx='2.5' ry='2.5'/> </g> <path class='online--icon' d='M-238.9,253.8c0-0.4,0.1-0.9,0.2-1.3c-2.2-0.2-2.2-2-2.2-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5c0,0.1-0.1,0.5,0,0.6 c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0C-238.7,255.7-238.9,254.8-238.9,253.8z'/> <g> <g> <path class='online--icon' d='M-232.3,250.1l1.3,1.3c0,0,0,0.1,0,0.1l-4.1,4.1c0,0,0,0-0.1,0c0,0,0,0,0,0l-2.7-2.7c0,0,0-0.1,0-0.1l1.2-1.2 c0,0,0.1,0,0.1,0l1.4,1.4l2.9-2.9C-232.4,250.1-232.3,250.1-232.3,250.1z'/> </g> </g> </svg>",AWAY_ICON_SVG:"<svg version='1.1'id='Layer_1' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:cc='http://creativecommons.org/ns#' inkscape:version='0.48.4 r9939' sodipodi:docname='TRASH_1_4.svg'xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='-299 391 12 12'style='enable-background:new -299 391 12 12;' xml:space='preserve'> <sodipodi:namedview  inkscape:cx='26.358185' inkscape:zoom='1.18' bordercolor='#666666' pagecolor='#ffffff' borderopacity='1' objecttolerance='10' inkscape:cy='139.7898' gridtolerance='10' guidetolerance='10' showgrid='false' showguides='true' id='namedview6' inkscape:pageopacity='0' inkscape:pageshadow='2' inkscape:guide-bbox='true' inkscape:window-width='1366' inkscape:current-layer='Layer_1' inkscape:window-height='705' inkscape:window-y='-8' inkscape:window-maximized='1' inkscape:window-x='-8'> <sodipodi:guide  position='50.036793,85.991376' orientation='1,0' id='guide2986'></sodipodi:guide> <sodipodi:guide  position='58.426196,66.216355' orientation='0,1' id='guide3047'></sodipodi:guide> </sodipodi:namedview> <g> <ellipse class='away--icon' cx='-294.6' cy='394' rx='2.5' ry='2.5'/> <path class='away--icon' d='M-293.8,399.4c0-0.4,0.1-0.7,0.2-1c-0.3,0.1-0.6,0.2-1,0.2c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0.7,0,1.4-0.1,2-0.3 C-293.3,401.5-293.8,400.5-293.8,399.4z'/> </g> <path class='away--icon' d='M-287,400c0,0.1-0.1,0.1-0.1,0.1l-4.9,0c-0.1,0-0.1-0.1-0.1-0.1v-1.6c0-0.1,0.1-0.1,0.1-0.1l4.9,0c0.1,0,0.1,0.1,0.1,0.1 V400z'/> </svg>",OFFLINE_ICON_SVG:"<svg version='1.1'id='Layer_1' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:cc='http://creativecommons.org/ns#' inkscape:version='0.48.4 r9939' sodipodi:docname='TRASH_1_4.svg'xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='-299 391 12 12'style='enable-background:new -299 391 12 12;' xml:space='preserve'> <sodipodi:namedview  inkscape:cx='26.358185' inkscape:zoom='1.18' bordercolor='#666666' pagecolor='#ffffff' borderopacity='1' objecttolerance='10' inkscape:cy='139.7898' gridtolerance='10' guidetolerance='10' showgrid='false' showguides='true' id='namedview6' inkscape:pageopacity='0' inkscape:pageshadow='2' inkscape:guide-bbox='true' inkscape:window-width='1366' inkscape:current-layer='Layer_1' inkscape:window-height='705' inkscape:window-y='-8' inkscape:window-maximized='1' inkscape:window-x='-8'> <sodipodi:guide  position='50.036793,85.991376' orientation='1,0' id='guide2986'></sodipodi:guide> <sodipodi:guide  position='58.426196,66.216355' orientation='0,1' id='guide3047'></sodipodi:guide> </sodipodi:namedview> <g> <g> <ellipse class='offline--icon' cx='-294.5' cy='394' rx='2.5' ry='2.5'/> <path class='offline--icon' d='M-294.3,399.7c0-0.4,0.1-0.8,0.2-1.2c-0.1,0-0.2,0-0.4,0c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4h0.1h0.1c0.3,0,0.7,0,1-0.1C-293.9,401.6-294.3,400.7-294.3,399.7z'/> </g> </g> <g> <path class='offline--icon' d='M-288.9,399.4l1.8-1.8c0.1-0.1,0.1-0.3,0-0.3l-0.7-0.7c-0.1-0.1-0.3-0.1-0.3,0l-1.8,1.8l-1.8-1.8c-0.1-0.1-0.3-0.1-0.3,0 l-0.7,0.7c-0.1,0.1-0.1,0.3,0,0.3l1.8,1.8l-1.8,1.8c-0.1,0.1-0.1,0.3,0,0.3l0.7,0.7c0.1,0.1,0.3,0.1,0.3,0l1.8-1.8l1.8,1.8 c0.1,0.1,0.3,0.1,0.3,0l0.7-0.7c0.1-0.1,0.1-0.3,0-0.3L-288.9,399.4z'/> </g> </svg>",MENU_ICON:"<svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px'width='4px' height='16px' viewBox='0 0 8 32' enable-background='new 0 0 8 32' xml:space='preserve'> <g> <circle cx='4' cy='4.062' r='4'/> <circle cx='4' cy='16' r='4'/> <circle cx='4' cy='28' r='4'/> </g> </svg>",COMMENT_ICON:"<svg version='1.1' id='Layer_2' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px'width='15px' height='15px' viewBox='1 1.5 15 15' enable-background='new 1 1.5 15 15' xml:space='preserve'> <g> <g> <path fill='#211B1B' d='M14,1.5H3c-1.104,0-2,0.896-2,2v8c0,1.104,0.896,2,2,2h1.628l1.884,3l1.866-3H14c1.104,0,2-0.896,2-2v-8 C16,2.396,15.104,1.5,14,1.5z M15,11.5c0,0.553-0.447,1-1,1H8l-1.493,2l-1.504-1.991L5,12.5H3c-0.552,0-1-0.447-1-1v-8 c0-0.552,0.448-1,1-1h11c0.553,0,1,0.448,1,1V11.5z'/> </g> </g> </svg>",REPLY_ICON:"<svg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px'viewBox='-158 242 18 18' style='enable-background:new -158 242 18 18;' xml:space='preserve'> <path d='M-142.2,252.6c-2-3-4.8-4.7-8.3-4.8v-3.3c0-0.2-0.1-0.3-0.2-0.3s-0.3,0-0.4,0.1l-6.9,6.2c-0.1,0.1-0.1,0.2-0.1,0.3 c0,0.1,0,0.2,0.1,0.3l6.9,6.4c0.1,0.1,0.3,0.1,0.4,0.1c0.1-0.1,0.2-0.2,0.2-0.4v-3.8c4.2,0,7.4,0.4,9.6,4.4c0.1,0.1,0.2,0.2,0.3,0.2 c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.3,0.2-0.4C-140.2,257.3-140.6,255-142.2,252.6z M-150.8,252.5c-0.2,0-0.4,0.2-0.4,0.4v3.3l-6-5.5 l6-5.3v2.8c0,0.2,0.2,0.4,0.4,0.4c3.3,0,6,1.5,8,4.5c0.5,0.8,0.9,1.6,1.2,2.3C-144,252.8-147.1,252.5-150.8,252.5z'/> </svg>",UPDATE_TYPING_MS:5e3,THEMES:{default:{type:"Organization",sidebarBg:"#2071a7",sidebarText:"#fff",sidebarUnreadText:"#fff",sidebarTextHoverBg:"#136197",sidebarTextActiveBorder:"#7AB0D6",sidebarTextActiveColor:"#FFFFFF",sidebarHeaderBg:"#2f81b7",sidebarHeaderTextColor:"#FFFFFF",onlineIndicator:"#7DBE00",awayIndicator:"#DCBD4E",mentionBj:"#136197",mentionColor:"#bfcde8",centerChannelBg:"#f2f4f8",centerChannelColor:"#333333",newMessageSeparator:"#FF8800",linkColor:"#2f81b7",buttonBg:"#1dacfc",buttonColor:"#FFFFFF",mentionHighlightBg:"#fff2bb",mentionHighlightLink:"#2f81b7",codeTheme:"github"},mattermost:{type:"Mattermost",sidebarBg:"#fafafa",sidebarText:"#333333",sidebarUnreadText:"#333333",sidebarTextHoverBg:"#e6f2fa",sidebarTextActiveBorder:"#378FD2",sidebarTextActiveColor:"#111111",sidebarHeaderBg:"#2389d7",sidebarHeaderTextColor:"#ffffff",onlineIndicator:"#7DBE00",awayIndicator:"#DCBD4E",mentionBj:"#2389d7",mentionColor:"#ffffff",centerChannelBg:"#ffffff",centerChannelColor:"#333333",newMessageSeparator:"#FF8800",linkColor:"#2389d7",buttonBg:"#2389d7",buttonColor:"#FFFFFF",mentionHighlightBg:"#fff2bb",mentionHighlightLink:"#2f81b7",codeTheme:"github"},mattermostDark:{type:"Mattermost Dark",sidebarBg:"#1B2C3E",sidebarText:"#fff",sidebarUnreadText:"#fff",sidebarTextHoverBg:"#4A5664",sidebarTextActiveBorder:"#39769C",sidebarTextActiveColor:"#FFFFFF",sidebarHeaderBg:"#1B2C3E",sidebarHeaderTextColor:"#FFFFFF",onlineIndicator:"#55C5B2",awayIndicator:"#A9A14C",mentionBj:"#B74A4A",mentionColor:"#FFFFFF",centerChannelBg:"#2F3E4E",centerChannelColor:"#DDDDDD",newMessageSeparator:"#5de5da",linkColor:"#A4FFEB",buttonBg:"#4CBBA4",buttonColor:"#FFFFFF",mentionHighlightBg:"#984063",mentionHighlightLink:"#A4FFEB",codeTheme:"solarized_dark"},windows10:{type:"Windows Dark",sidebarBg:"#171717",sidebarText:"#fff",sidebarUnreadText:"#fff",sidebarTextHoverBg:"#302e30",sidebarTextActiveBorder:"#196CAF",sidebarTextActiveColor:"#FFFFFF",sidebarHeaderBg:"#1f1f1f",sidebarHeaderTextColor:"#FFFFFF",onlineIndicator:"#0177e7",awayIndicator:"#A9A14C",mentionBj:"#0177e7",mentionColor:"#FFFFFF",centerChannelBg:"#1F1F1F",centerChannelColor:"#DDDDDD",newMessageSeparator:"#CC992D",linkColor:"#0D93FF",buttonBg:"#0177e7",buttonColor:"#FFFFFF",mentionHighlightBg:"#784098",mentionHighlightLink:"#A4FFEB",codeTheme:"monokai"}},THEME_ELEMENTS:[{id:"sidebarBg",uiName:"Sidebar BG"},{id:"sidebarText",uiName:"Sidebar Text"},{id:"sidebarHeaderBg",uiName:"Sidebar Header BG"},{id:"sidebarHeaderTextColor",uiName:"Sidebar Header Text"},{id:"sidebarUnreadText",uiName:"Sidebar Unread Text"},{id:"sidebarTextHoverBg",uiName:"Sidebar Text Hover BG"},{id:"sidebarTextActiveBorder",uiName:"Sidebar Text Active Border"},{id:"sidebarTextActiveColor",uiName:"Sidebar Text Active Color"},{id:"onlineIndicator",uiName:"Online Indicator"},{id:"awayIndicator",uiName:"Away Indicator"},{id:"mentionBj",uiName:"Mention Jewel BG"},{id:"mentionColor",uiName:"Mention Jewel Text"},{id:"centerChannelBg",uiName:"Center Channel BG"},{id:"centerChannelColor",uiName:"Center Channel Text"},{id:"newMessageSeparator",uiName:"New Message Separator"},{id:"linkColor",uiName:"Link Color"},{id:"buttonBg",uiName:"Button BG"},{id:"buttonColor",uiName:"Button Text"},{id:"mentionHighlightBg",uiName:"Mention Highlight BG"},{id:"mentionHighlightLink",uiName:"Mention Highlight Link"},{id:"codeTheme",uiName:"Code Theme",themes:[{id:"solarized_dark",uiName:"Solarized Dark"},{id:"solarized_light",uiName:"Solarized Light"},{id:"github",uiName:"GitHub"},{id:"monokai",uiName:"Monokai"}]}],DEFAULT_CODE_THEME:"github",FONTS:{"Droid Serif":"font--droid_serif","Roboto Slab":"font--roboto_slab",Lora:"font--lora",Arvo:"font--arvo","Open Sans":"font--open_sans",Roboto:"font--roboto","PT Sans":"font--pt_sans",Lato:"font--lato","Source Sans Pro":"font--source_sans_pro","Exo 2":"font--exo_2",Ubuntu:"font--ubuntu"},DEFAULT_FONT:"Open Sans",Preferences:{CATEGORY_DIRECT_CHANNEL_SHOW:"direct_channel_show",CATEGORY_DISPLAY_SETTINGS:"display_settings",CATEGORY_ADVANCED_SETTINGS:"advanced_settings",TUTORIAL_STEP:"tutorial_step"},TutorialSteps:{INTRO_SCREENS:0,POST_POPOVER:1,CHANNEL_POPOVER:2,MENU_POPOVER:3},KeyCodes:{UP:38,DOWN:40,LEFT:37,RIGHT:39,BACKSPACE:8,ENTER:13,ESCAPE:27,SPACE:32,TAB:9},HighlightedLanguages:{diff:"Diff",apache:"Apache",makefile:"Makefile",http:"HTTP",json:"JSON",markdown:"Markdown",javascript:"JavaScript",css:"CSS",nginx:"nginx",objectivec:"Objective-C",python:"Python",xml:"XML",perl:"Perl",bash:"Bash",php:"PHP",coffeescript:"CoffeeScript",cs:"C#",cpp:"C++",sql:"SQL",go:"Go",ruby:"Ruby",java:"Java",ini:"ini"},PostsViewJumpTypes:{BOTTOM:1,POST:2,SIDEBAR_OPEN:3},NotificationPrefs:{MENTION:"mention"},FeatureTogglePrefix:"feature_enabled_",PRE_RELEASE_FEATURES:{MARKDOWN_PREVIEW:{label:"markdown_preview",description:"Show markdown preview option in message input box"},EMBED_PREVIEW:{label:"embed_preview",description:"Show preview snippet of links below message"},LOC_PREVIEW:{label:"loc_preview",description:"Show user language in display settings"}},OVERLAY_TIME_DELAY:400,MIN_USERNAME_LENGTH:3,MAX_USERNAME_LENGTH:15,MIN_PASSWORD_LENGTH:5,MAX_PASSWORD_LENGTH:50}},{keymirror:"keymirror"}],340:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=e("babel-runtime/helpers/classCallCheck"),r=s(n),l=e("babel-runtime/helpers/createClass"),i=s(l);Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(t){(0,r.default)(this,e),this.action=t,this.timer=-1,this.fire=this.fire.bind(this)}return(0,i.default)(e,[{key:"fire",value:function(){this.action(),this.timer=-1}},{key:"fireAfter",value:function(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}}]),e}();a.default=o},{"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17}],341:[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(){for(var e="+1,-1,100,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_large_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crescent_moon,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slightly_smiling_face,slightly_frowning_face,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square_button,wind_chime,wine_glass,wink,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz".split(","),t=new o.default,a=0;a<e.length;a++)t.set(e[a],!0);return t}function r(e,t){function a(e,a,s,n){if(u.has(n)){var r=t.size,i="MM_EMOTICON"+r;return t.set(i,{value:'<img align="absmiddle" alt="'+s+'" class="emoji" src="'+l(n)+'" title="'+s+'" />',originalText:e}),a+i}return e}var s=e;return s=s.replace(/(^|\s)(:([a-zA-Z0-9_-]+):)(?=$|\s)/g,function(e,t,s,n){return a(e,t,s,n)}),$.each(c,function(e,t){s=s.replace(t,function(t,s,n){return a(t,s,n,e)})}),s}function l(e){return e?"/static/images/emoji/"+e+".png":"/static/images/emoji"}var i=e("babel-runtime/core-js/map"),o=s(i);Object.defineProperty(a,"__esModule",{value:!0}),a.emoticonMap=void 0,a.handleEmoticons=r,a.getImagePathForEmoticon=l;var c={slightly_smiling_face:/(^|\s)(:-?\))(?=$|\s)/g,wink:/(^|\s)(;-?\))(?=$|\s)/g,open_mouth:/(^|\s)(:o)(?=$|\s)/gi,scream:/(^|\s)(:-o)(?=$|\s)/gi,smirk:/(^|\s)(:-?])(?=$|\s)/g,smile:/(^|\s)(:-?d)(?=$|\s)/gi,stuck_out_tongue_closed_eyes:/(^|\s)(x-d)(?=$|\s)/gi,stuck_out_tongue:/(^|\s)(:-?p)(?=$|\s)/gi,rage:/(^|\s)(:-?[\[@])(?=$|\s)/g,slightly_frowning_face:/(^|\s)(:-?\()(?=$|\s)/g,cry:/(^|\s)(:['’]-?\(|:&#x27;\(|:&#39;\()(?=$|\s)/g,confused:/(^|\s)(:-?\/)(?=$|\s)/g,confounded:/(^|\s)(:-?s)(?=$|\s)/gi,neutral_face:/(^|\s)(:-?\|)(?=$|\s)/g,flushed:/(^|\s)(:-?\$)(?=$|\s)/g,mask:/(^|\s)(:-x)(?=$|\s)/gi,heart:/(^|\s)(<3|&lt;3)(?=$|\s)/g,broken_heart:/(^|\s)(<\/3|&lt;&#x2F;3)(?=$|\s)/g,thumbsup:/(^|\s)(:\+1:)(?=$|\s)/g,thumbsdown:/(^|\s)(:\-1:)(?=$|\s)/g},u=a.emoticonMap=n()},{"babel-runtime/core-js/map":5}],342:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){e.style.height="auto"}function l(e,t){var a={renderer:new ke(null,t),sanitize:!0,gfm:!0,tables:!0},s=new Ne(a).lex(e);return new Se(a).parse(s)}var i=e("babel-runtime/helpers/get"),o=n(i),c=e("babel-runtime/helpers/createClass"),u=n(c),d=e("babel-runtime/core-js/object/assign"),m=n(d),p=e("babel-runtime/core-js/object/get-prototype-of"),h=n(p),f=e("babel-runtime/helpers/classCallCheck"),g=n(f),b=e("babel-runtime/helpers/possibleConstructorReturn"),v=n(b),_=e("babel-runtime/helpers/inherits"),E=n(_);Object.defineProperty(a,"__esModule",{value:!0
}),a.format=l;var y=e("highlight.js/lib/highlight.js"),R=n(y),C=e("highlight.js/lib/languages/diff.js"),w=n(C),S=e("highlight.js/lib/languages/apache.js"),k=n(S),N=e("highlight.js/lib/languages/makefile.js"),M=n(N),x=e("highlight.js/lib/languages/http.js"),j=n(x),T=e("highlight.js/lib/languages/json.js"),P=n(T),O=e("highlight.js/lib/languages/markdown.js"),I=n(O),D=e("highlight.js/lib/languages/javascript.js"),L=n(D),A=e("highlight.js/lib/languages/css.js"),F=n(A),U=e("highlight.js/lib/languages/nginx.js"),$=n(U),H=e("highlight.js/lib/languages/objectivec.js"),B=n(H),q=e("highlight.js/lib/languages/python.js"),G=n(q),V=e("highlight.js/lib/languages/xml.js"),W=n(V),z=e("highlight.js/lib/languages/perl.js"),K=n(z),Y=e("highlight.js/lib/languages/bash.js"),J=n(Y),Z=e("highlight.js/lib/languages/php.js"),X=n(Z),Q=e("highlight.js/lib/languages/coffeescript.js"),ee=n(Q),te=e("highlight.js/lib/languages/cs.js"),ae=n(te),se=e("highlight.js/lib/languages/cpp.js"),ne=n(se),re=e("highlight.js/lib/languages/sql.js"),le=n(re),ie=e("highlight.js/lib/languages/go.js"),oe=n(ie),ce=e("highlight.js/lib/languages/ruby.js"),ue=n(ce),de=e("highlight.js/lib/languages/java.js"),me=n(de),pe=e("highlight.js/lib/languages/ini.js"),he=n(pe),fe=e("./text_formatting.jsx"),ge=s(fe),be=e("./utils.jsx"),ve=s(be),_e=e("marked"),Ee=n(_e),ye=e("../utils/constants.jsx"),Re=n(ye);R.default.registerLanguage("diff",w.default),R.default.registerLanguage("apache",k.default),R.default.registerLanguage("makefile",M.default),R.default.registerLanguage("http",j.default),R.default.registerLanguage("json",P.default),R.default.registerLanguage("markdown",I.default),R.default.registerLanguage("javascript",L.default),R.default.registerLanguage("css",F.default),R.default.registerLanguage("nginx",$.default),R.default.registerLanguage("objectivec",B.default),R.default.registerLanguage("python",G.default),R.default.registerLanguage("xml",W.default),R.default.registerLanguage("perl",K.default),R.default.registerLanguage("bash",J.default),R.default.registerLanguage("php",X.default),R.default.registerLanguage("coffeescript",ee.default),R.default.registerLanguage("cs",ae.default),R.default.registerLanguage("cpp",ne.default),R.default.registerLanguage("sql",le.default),R.default.registerLanguage("go",oe.default),R.default.registerLanguage("ruby",ue.default),R.default.registerLanguage("java",me.default),R.default.registerLanguage("ini",he.default);var Ce=Re.default.HighlightedLanguages;window.markdownImageLoaded=r;var we=function(e){function t(e,a){(0,g.default)(this,t);var s=(0,v.default)(this,(0,h.default)(t).call(this,e,a));return s.rules=(0,m.default)({},s.rules),s.rules.text=/^[\s\S]+?(?=[\\<!\[_*`~]|https?:\/\/|www\.|\(| {2,}\n|$)/,s.rules.url=/^(\(?(?:https?:\/\/|www\.)[^\s<.][^\s<]*[^<.,:;"'\]\s])/,s.rules.autolink=/^<((?:[^ >]+(@|:\/)|www\.)[^ >]+)>/,s}return(0,E.default)(t,e),t}(Ee.default.InlineLexer),Se=function(e){function t(){return(0,g.default)(this,t),(0,v.default)(this,(0,h.default)(t).apply(this,arguments))}return(0,E.default)(t,e),(0,u.default)(t,[{key:"parse",value:function(e){this.inline=new we(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t}}]),t}(Ee.default.Parser),ke=function(e){function t(e){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,g.default)(this,t);var s=(0,v.default)(this,(0,h.default)(t).call(this,e));return s.heading=s.heading.bind(s),s.paragraph=s.paragraph.bind(s),s.text=s.text.bind(s),s.formattingOptions=a,s}return(0,E.default)(t,e),(0,u.default)(t,[{key:"code",value:function(e,t,a){var s=t||"";if(s=s.toLowerCase(),"html"===s&&(s="xml"),Ce[s]){var n=R.default.highlight(s,e);return'<div class="post-body--code"><span class="post-body--code__language">'+Ce[s]+'</span><pre><code class="hljs">'+n.value+"</code></pre></div>"}if("tex"===s||"latex"===s)try{var r=katex.renderToString(ge.sanitizeHtml(e),{throwOnError:!1,displayMode:!0});return'<div class="post-body--code tex">'+r+"</div>"}catch(e){}return'<pre><code class="hljs">'+(a?e:ge.sanitizeHtml(e))+"\n</code></pre>"}},{key:"br",value:function(){return this.formattingOptions.singleline?" ":(0,o.default)((0,h.default)(t.prototype),"br",this).call(this)}},{key:"image",value:function(e,t,a){var s='<img src="'+e+'" alt="'+a+'"';return t&&(s+=' title="'+t+'"'),s+=' onload="window.markdownImageLoaded(this)" onerror="window.markdownImageLoaded(this)" class="markdown-inline-img"',s+=this.options.xhtml?"/>":">"}},{key:"heading",value:function(e,t,a){var s=""+this.options.headerPrefix+a.toLowerCase().replace(/[^\w]+/g,"-");return"<h"+t+' id="'+s+'" class="markdown__heading">'+e+"</h"+t+">"}},{key:"link",value:function(e,t,a){var s=e,n=a,r="",l="";s.startsWith("(")&&s.endsWith(")")&&a===s&&(r="(",l=")",n=a.substring(1,a.length-1),s=s.substring(1,s.length-1)),/[a-z+.-]+:/i.test(s)||(s="http://"+s);var i='<a class="theme markdown__link" href="'+s+'"';return t&&(i+=' title="'+t+'"'),i+=0===s.lastIndexOf(ve.getTeamURLFromAddressBar(),0)?">":' target="_blank">',i+=n+"</a>",r+i+l}},{key:"paragraph",value:function(e){return this.formattingOptions.singleline?'<p class="markdown__paragraph-inline">'+e+"</p>":(0,o.default)((0,h.default)(t.prototype),"paragraph",this).call(this,e)}},{key:"table",value:function(e,t){return'<table class="markdown__table"><thead>'+e+"</thead><tbody>"+t+"</tbody></table>"}},{key:"listitem",value:function(e){var t=/^\[([ |xX])\] /,a=t.exec(e);return a?'<li class="list-item--task-list">'+('<input type="checkbox" disabled="disabled" '+(" "===a[1]?"":'checked="checked" ')+"/> ")+e.replace(t,"")+"</li>":"<li>"+e+"</li>"}},{key:"text",value:function(e){return ge.doFormatText(e,this.formattingOptions)}}]),t}(Ee.default.Renderer),Ne=function(e){function t(){return(0,g.default)(this,t),(0,v.default)(this,(0,h.default)(t).apply(this,arguments))}return(0,E.default)(t,e),(0,u.default)(t,[{key:"token",value:function(e,t,a){for(var s=e.replace(/^ +$/gm,"");s;){var n=this.rules.newline.exec(s);if(n&&(s=s.substring(n[0].length),n[0].length>1&&this.tokens.push({type:"space"})),n=this.rules.code.exec(s))s=s.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:n.replace(/\n+$/,"")});else if(n=this.rules.fences.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]||""});else if(n=this.rules.heading.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(n=this.rules.nptable.exec(s),t&&n){s=s.substring(n[0].length);for(var r={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/\n$/,"").split("\n")},l=0;l<r.align.length;l++)/^ *-+: *$/.test(r.align[l])?r.align[l]="right":/^ *:-+: *$/.test(r.align[l])?r.align[l]="center":/^ *:-+ *$/.test(r.align[l])?r.align[l]="left":r.align[l]=null;for(var l=0;l<r.cells.length;l++)r.cells[l]=r.cells[l].split(/ *\| */);this.tokens.push(r)}else if(n=this.rules.lheading.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(n=this.rules.hr.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,t,!0),this.tokens.push({type:"blockquote_end"});else if(n=this.rules.list.exec(s)){s=s.substring(n[0].length);var i=n[2];this.tokens.push({type:"list_start",ordered:i.length>1}),n=n[0].match(this.rules.item);for(var o=!1,c=n.length,l=0;c>l;l++){var r=n[l],u=r.length;if(r=r.replace(/^ *([*+-]|\d+\.) +/,""),~r.indexOf("\n ")&&(u-=r.length,r=this.options.pedantic?r.replace(/^ {1,4}/gm,""):r.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&l!==c-1){var d=this.rules.bullet.exec(n[l+1])[0];i===d||i.length>1&&d.length>1||(s=n.slice(l+1).join("\n")+s,l=c-1)}var m=o||/\n\n(?!\s*$)/.test(r);l!==c-1&&(o="\n"===r.charAt(r.length-1),m||(m=o)),this.tokens.push({type:m?"loose_item_start":"list_item_start"}),this.token(r,!1,a),this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"})}else if(n=this.rules.html.exec(s))s=s.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]});else if(n=this.rules.def.exec(s),!a&&t&&n)s=s.substring(n[0].length),this.tokens.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(n=this.rules.table.exec(s),t&&n){s=s.substring(n[0].length);for(var r={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<r.align.length;l++)/^ *-+: *$/.test(r.align[l])?r.align[l]="right":/^ *:-+: *$/.test(r.align[l])?r.align[l]="center":/^ *:-+ *$/.test(r.align[l])?r.align[l]="left":r.align[l]=null;for(var l=0;l<r.cells.length;l++)r.cells[l]=r.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(r)}else if(n=this.rules.paragraph.exec(s),t&&n)s=s.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(s))s=s.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(s)throw new Error("Infinite loop on byte: "+s.charCodeAt(0))}return this.tokens}}]),t}(Ee.default.Lexer)},{"../utils/constants.jsx":339,"./text_formatting.jsx":343,"./utils.jsx":344,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/get-prototype-of":10,"babel-runtime/helpers/classCallCheck":16,"babel-runtime/helpers/createClass":17,"babel-runtime/helpers/get":19,"babel-runtime/helpers/inherits":20,"babel-runtime/helpers/possibleConstructorReturn":22,"highlight.js/lib/highlight.js":284,"highlight.js/lib/languages/apache.js":285,"highlight.js/lib/languages/bash.js":286,"highlight.js/lib/languages/coffeescript.js":287,"highlight.js/lib/languages/cpp.js":288,"highlight.js/lib/languages/cs.js":289,"highlight.js/lib/languages/css.js":290,"highlight.js/lib/languages/diff.js":291,"highlight.js/lib/languages/go.js":292,"highlight.js/lib/languages/http.js":293,"highlight.js/lib/languages/ini.js":294,"highlight.js/lib/languages/java.js":295,"highlight.js/lib/languages/javascript.js":296,"highlight.js/lib/languages/json.js":297,"highlight.js/lib/languages/makefile.js":298,"highlight.js/lib/languages/markdown.js":299,"highlight.js/lib/languages/nginx.js":300,"highlight.js/lib/languages/objectivec.js":301,"highlight.js/lib/languages/perl.js":302,"highlight.js/lib/languages/php.js":303,"highlight.js/lib/languages/python.js":304,"highlight.js/lib/languages/ruby.js":305,"highlight.js/lib/languages/sql.js":306,"highlight.js/lib/languages/xml.js":307,marked:"marked"}],343:[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=void 0;return"markdown"in t&&!t.markdown?(a=i(e),a=l(a,t)):a=I.format(e,t),t.singleline&&(a=b(a)),a}function l(e,t){var a=e,s=new k.default;return a=c(a,s),a=o(a,s),a=m(a,s),"emoticons"in t&&!t.emoticon||(a=P.handleEmoticons(a,s)),t.searchTerm&&(a=f(a,s,t.searchTerm)),"mentionHighlight"in t&&!t.mentionHighlight||(a=d(a,s)),a=g(a,s)}function i(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;")}function o(e,t){function a(e,a){var s=a.getMatchedText(),n=s;"email"===a.getType()&&(n="mailto:"+n);var r=t.size,l="MM_EMAIL"+r;return t.set(l,{value:'<a class="theme" href="'+n+'">'+s+"</a>",originalText:s}),l}var s=new M.default({urls:!1,email:!0,phone:!1,twitter:!1,hashtag:!1,replaceFn:a});return s.link(e)}function c(e,t){function a(e){var t=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g;return t.test(e)}function s(e){return-1!==j.default.SPECIAL_MENTIONS.indexOf(e)||L.default.getProfileByUsername(e)}function n(e,a,s){var n=t.size,r="MM_ATMENTION"+n;return t.set(r,{value:"<a class='mention-link' href='#' data-mention='"+e+"'>"+a+"</a>",originalText:a,extraText:s}),r}function r(e,t,r){var l=r.toLowerCase();if(s(l)){var i=n(l,t,"");return i}for(var o=l,c=l.length;c>0&&a(l[c-1]);c--)if(l=l.substring(0,c-1),s(l)){var u=o.substr(c-1),i=n(l,"@"+l,u);return i}return e}var l=e;return l=l.replace(/(@([a-z0-9.\-_]*))/gi,r)}function u(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function d(e,t){function a(e,a,s){var n=t.size,r="MM_SELFMENTION"+n;return t.set(r,{value:"<span class='mention-highlight'>"+s+"</span>",originalText:s}),a+r}var s=e,n=L.default.getCurrentMentionKeys(),r=new k.default,l=!0,i=!1,o=void 0;try{for(var c,d=(0,w.default)(t);!(l=(c=d.next()).done);l=!0){var m=(0,R.default)(c.value,2),p=m[0],h=m[1];if(-1!==n.indexOf(h.originalText)){var f=t.size+r.size,g="MM_SELFMENTION"+f;r.set(g,{value:"<span class='mention-highlight'>"+p+"</span>"+(h.extraText||""),originalText:h.originalText}),s=s.replace(p,g)}}}catch(e){i=!0,o=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw o}}var b=!0,v=!1,_=void 0;try{for(var E,y=(0,w.default)(r);!(b=(E=y.next()).done);b=!0){var C=E.value;t.set(C[0],C[1])}}catch(e){v=!0,_=e}finally{try{!b&&y.return&&y.return()}finally{if(v)throw _}}var S=!0,N=!1,M=void 0;try{for(var x,j=(0,w.default)(L.default.getCurrentMentionKeys());!(S=(x=j.next()).done);S=!0){var T=x.value;s=s.replace(new RegExp("(^|\\W)("+u(T)+")\\b","gi"),a)}}catch(e){N=!0,M=e}finally{try{!S&&j.return&&j.return()}finally{if(N)throw M}}return s}function m(e,t){function a(e,a,s){var n=t.size,r="MM_HASHTAG"+n;return t.set(r,{value:"<a class='mention-link' href='#' data-hashtag='"+s+"'>"+s+"</a>",originalText:s}),a+r}var s=e,n=new k.default,r=!0,l=!1,i=void 0;try{for(var o,c=(0,w.default)(t);!(r=(o=c.next()).done);r=!0){var u=(0,R.default)(o.value,2),d=u[0],m=u[1];if(0===m.originalText.lastIndexOf("#",0)){var p=t.size+n.size,h="MM_HASHTAG"+p;n.set(h,{value:"<a class='mention-link' href='#' data-hashtag='"+m.originalText+"'>"+m.originalText+"</a>",originalText:m.originalText}),s=s.replace(d,h)}}}catch(e){l=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw i}}var f=!0,g=!1,b=void 0;try{for(var v,_=(0,w.default)(n);!(f=(v=_.next()).done);f=!0){var E=v.value;t.set(E[0],E[1])}}catch(e){g=!0,b=e}finally{try{!f&&_.return&&_.return()}finally{if(g)throw b}}return s.replace(/(^|\W)(#[a-zA-ZäöüÄÖÜß][a-zA-Z0-9äöüÄÖÜß.\-_]*)\b/g,a)}function p(e){for(var t=[],a=e;a;){var s=void 0;if(s=/^"(.*?)"/.exec(a))a=a.substring(s[0].length),t.push(s[1]);else if(s=/^(?:in|from|channel): ?\S+/.exec(a))a=a.substring(s[0].length);else{if(s=/^.+?(?=\bin|\bfrom|\bchannel|"|$)/.exec(a),!s)throw new Error("Infinite loop in search term parsing: "+a);var n;a=a.substring(s[0].length),(n=t).push.apply(n,(0,E.default)(s[0].split(/[ <>+\-\(\)\~\@]/).filter(function(e){return!!e})))}}return t=t.map(function(e){return e.replace(U,"").replace($,"")})}function h(e){var t=void 0;return t=e.endsWith("*")?"\\b"+u(e.substring(0,e.length-1)):"\\b"+u(e)+"\\b",new RegExp(t,"gi")}function f(e,t,a){function s(e){var a=t.size,s="MM_SEARCHTERM"+a;return t.set(s,{value:"<span class='search-highlight'>"+e+"</span>",originalText:e}),s}var n=p(a);if(0===n.length)return e;var r=e,l=!0,i=!1,o=void 0;try{for(var c,u=(0,w.default)(n);!(l=(c=u.next()).done);l=!0){var d=c.value,m=new k.default,f=!0,g=!1,b=void 0;try{for(var v,_=(0,w.default)(t);!(f=(v=_.next()).done);f=!0){var E=(0,R.default)(v.value,2),y=E[0],C=E[1];if(C.originalText===d.replace(/\*$/,"")){var S=t.size+m.size,N="MM_SEARCHTERM"+S;m.set(N,{value:"<span class='search-highlight'>"+y+"</span>",originalText:C.originalText}),r=r.replace(y,N)}}}catch(e){g=!0,b=e}finally{try{!f&&_.return&&_.return()}finally{if(g)throw b}}var M=!0,x=!1,j=void 0;try{for(var T,P=(0,w.default)(m);!(M=(T=P.next()).done);M=!0){var O=T.value;t.set(O[0],O[1])}}catch(e){x=!0,j=e}finally{try{!M&&P.return&&P.return()}finally{if(x)throw j}}r=r.replace(h(d),s)}}catch(e){i=!0,o=e}finally{try{!l&&u.return&&u.return()}finally{if(i)throw o}}return r}function g(e,t){for(var a=e,s=[].concat((0,E.default)(t.keys())),n=s.length-1;n>=0;n--){var r=s[n],l=t.get(r);a=a.replace(r,l.value)}return a}function b(e){return e.replace(/\n/g," ")}function v(e){var t=e.target.getAttributeNode("data-mention"),a=e.target.getAttributeNode("data-hashtag");t?F.searchForTerm(t.value):a&&F.searchForTerm(a.value)}var _=e("babel-runtime/helpers/toConsumableArray"),E=n(_),y=e("babel-runtime/helpers/slicedToArray"),R=n(y),C=e("babel-runtime/core-js/get-iterator"),w=n(C),S=e("babel-runtime/core-js/map"),k=n(S);Object.defineProperty(a,"__esModule",{value:!0}),a.formatText=r,a.doFormatText=l,a.sanitizeHtml=i,a.handleClick=v;var N=e("autolinker"),M=n(N),x=e("./constants.jsx"),j=n(x),T=e("./emoticons.jsx"),P=s(T),O=e("./markdown.jsx"),I=s(O),D=e("../stores/user_store.jsx"),L=n(D),A=e("./utils.jsx"),F=s(A),U=/^[.,()&$!\[\]{}':;\\]+/,$=/[.,()&$#!\[\]{}':;\\]+$/},{"../stores/user_store.jsx":335,"./constants.jsx":339,"./emoticons.jsx":341,"./markdown.jsx":342,"./utils.jsx":344,autolinker:"autolinker","babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":5,"babel-runtime/helpers/slicedToArray":23,"babel-runtime/helpers/toConsumableArray":24}],344:[function(e,t,a){(function(t){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return-1!==e.indexOf("@")}function l(e){var t=e.trim().replace(/-/g," ").replace(/[^\w\s]/gi,"").toLowerCase().replace(/\s/g,"-");return t=t.replace(/-{2,}/,"-"),t=t.replace(/^\-+/,""),t=t.replace(/\-+$/,"")}function i(){return/^localhost/.test(window.location.hostname)?!0:/^dockerhost/.test(window.location.hostname)?!0:/^test/.test(window.location.hostname)?!0:/^127.0./.test(window.location.hostname)?!0:/^192.168./.test(window.location.hostname)?!0:/^10./.test(window.location.hostname)?!0:/^176./.test(window.location.hostname)?!0:!1}function o(){return navigator.userAgent.indexOf("Chrome")>-1?!0:!1}function c(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")?!0:!1}function u(){return-1!==navigator.userAgent.indexOf("CriOS")}function d(){var e=navigator.userAgent,t=-1!==e.indexOf("Mattermost"),a=-1!==e.indexOf("iPhone")&&-1===e.indexOf("Safari")&&-1===e.indexOf("Chrome");return t||a}function m(e,t){for(var a=e.split(" "),s=0;s<a.length;s++)if(a[s]===t)return!0;return!1}function p(e){return m(e,"admin")?!0:m(e,"system_admin")?!0:!1}function h(e){return m(e,"system_admin")?!0:!1}function f(){var e=window.location.host.split(".");return 1===e.length?e[0].indexOf("dockerhost")>-1?"dockerhost:8065":"localhost:8065":e[1]+"."+e[2]}function g(e){var t="; "+document.cookie,a=t.split("; "+e+"=");return 2===a.length?a.pop().split(";").shift():void 0}function b(e,t,a){"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission(function(s){if(Notification.permission!==s&&(Notification.permission=s),"granted"===s){var n=new Notification(e,{body:t,tag:t,icon:"/static/images/icon50x50.png"});n.onclick=function(){window.focus(),a?Z(a):window.location.href=Ze.default.getCurrentTeamUrl()+"/channels/town-square"},setTimeout(function(){n.close()},5e3)}})}function v(){if(!pe()&&ot){var e=new Audio("/static/images/bing.mp3");e.play(),ot=!1,setTimeout(function(){return ot=!0},3e3)}}function _(e){for(var t=window.location.search.substring(1),a=t.split("&"),s=0;s<a.length;s++){var n=a[s].split("=");if(n[0]===e)return n[1]}return null}function E(e){return new Date(e)}function y(e){var t=new Date(e),a=["January","February","March","April","May","June","July","August","September","October","November","December"];return a[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()}function R(e,t){var a=new Date(e),s=void 0,n=void 0,r="",l="";t?(s=a.getUTCHours(),n=a.getUTCMinutes(),l=" UTC"):(s=a.getHours(),n=a.getMinutes()),9>=n&&(n="0"+n);var i=Ye.default.getBool(Qe.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"use_military_time");return i||(r=" AM",s>=12&&(r=" PM"),s%=12,s||(s="12")),s+":"+n+r+l}function C(e){var t=Math.floor((Date.now()-e)/1e3),a=Math.floor(t/3600);return a>24?this.displayTime(e):a>1?a+" hours ago":1===a?a+" hour ago":(a=Math.floor(t/60),a>=2?a+" minutes ago":a>=1?"1 minute ago":"just now")}function w(e){return y(e)+" "+R(e)}function S(){return Date.now()}function k(e){function t(e,t){var r="",l=t.getMatchedText(),i=s,o=s.indexOf(l),c=o+l.length;if(s=s.substring(0,o)+s.substring(c),!(o>1&&"]"===i.charAt(o-2)&&"("===i.charAt(o-1)&&")"===i.charAt(c))){for(var u in n)if(0===n[u].indexOf(l))return void(n[u]=n[u].replace(l,""));r=0===l.trim().indexOf("http")?l:"http://"+l,a.push(r)}}for(var a=[],s=e,n=[],r=s.split("`"),l=1;l<r.length;l+=2)""!==r[l].trim()&&n.push(r[l]);return lt.default.link(e,{replaceFn:t,urls:{schemeMatches:!0,wwwMatches:!0,tldMatches:!1},emails:!1,twitter:!1,phone:!1,hashtag:!1}),{links:a,text:e}}function N(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function M(e,t){var a=void 0,s=[],n=[];if(isNaN(e)&&isNaN(t)&&"number"==typeof e&&"number"==typeof t)return!0;if(e===t)return!0;if("function"==typeof e&&"function"==typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(s.indexOf(e)>-1||n.indexOf(t)>-1)return!1;for(a in t){if(t.hasOwnProperty(a)!==e.hasOwnProperty(a))return!1;if((0,Ue.default)(t[a])!==(0,Ue.default)(e[a]))return!1}for(a in e){if(t.hasOwnProperty(a)!==e.hasOwnProperty(a))return!1;if((0,Ue.default)(t[a])!==(0,Ue.default)(e[a]))return!1;switch((0,Ue.default)(e[a])){case"object":case"function":if(s.push(e),n.push(t),!M(e[a],t[a]))return!1;s.pop(),n.pop();break;default:if(e[a]!==t[a])return!1}}return!0}function x(e){var t={"&amp;":"&","&lt;":"<","&gt;":">"},a=e;for(var s in t)if({}.hasOwnProperty.call(t,s)){var n=new RegExp(s,"g");a=a.replace(n,t[s])}return a}function j(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;"},a=e;for(var s in t)if({}.hasOwnProperty.call(t,s)){var n=new RegExp(s,"g");a=a.replace(n,t[s])}return a}function T(e){He.default.handleServerAction({type:it.RECIEVED_SEARCH_TERM,term:e,do_search:!0})}function P(e){var t=e.toLowerCase();return Qe.default.IMAGE_TYPES.indexOf(t)>-1?"image":Qe.default.AUDIO_TYPES.indexOf(t)>-1?"audio":Qe.default.VIDEO_TYPES.indexOf(t)>-1?"video":Qe.default.SPREADSHEET_TYPES.indexOf(t)>-1?"spreadsheet":Qe.default.CODE_TYPES.indexOf(t)>-1?"code":Qe.default.WORD_TYPES.indexOf(t)>-1?"word":Qe.default.PRESENTATION_TYPES.indexOf(t)>-1?"presentation":Qe.default.PDF_TYPES.indexOf(t)>-1?"pdf":Qe.default.PATCH_TYPES.indexOf(t)>-1?"patch":"other"}function O(e){var t,a=e.toLowerCase();return t=a in Qe.default.ICON_FROM_TYPE?Qe.default.ICON_FROM_TYPE[a]:Qe.default.ICON_FROM_TYPE.other,"/static/images/icons/"+t+".png"}function I(e){var t=e.toLowerCase();return t in Qe.default.ICON_FROM_TYPE?Qe.default.ICON_FROM_TYPE[t]:"glyphicon-file"}function D(e){var t=e.split("."),a="";t.length>1&&(a=t[t.length-1],t.splice(t.length-1,1));var s=t.join("."),n=s.split("/")[s.split("/").length-1];return{ext:a,name:n,path:s}}function L(e){var t=D(e),a=P(t.ext);return"image"===a?oe(t.path+"_preview.jpg"):O(a)}function A(e){function t(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}return e.replace(/\w\S*/g,t)}function F(e){e.sidebarBg&&H(".sidebar--left, .settings-modal .settings-table .settings-links, .sidebar--menu","background:"+e.sidebarBg,1),e.sidebarText&&(H(".sidebar--left .nav-pills__container li>a, .sidebar--right, .settings-modal .nav-pills>li a, .sidebar--menu","color:"+ae(e.sidebarText,.6),1),H("@media(max-width: 768px){.settings-modal .settings-table .nav>li>a","color:"+e.sidebarText,1),H(".sidebar--left .nav-pills__container li>h4, .sidebar--left .add-channel-btn","color:"+ae(e.sidebarText,.6),1),H(".sidebar--left .add-channel-btn:hover, .sidebar--left .add-channel-btn:focus","color:"+e.sidebarText,1),H(".sidebar--left .status .offline--icon, .sidebar--left .status .offline--icon","fill:"+e.sidebarText,1),H("@media(max-width: 768px){.settings-modal .settings-table .nav>li>a","border-color:"+ae(e.sidebarText,.2),2)),e.sidebarUnreadText&&H(".sidebar--left .nav-pills__container li>a.unread-title","color:"+e.sidebarUnreadText+"!important;",2),e.sidebarTextHoverBg&&(H(".sidebar--left .nav-pills__container li>a:hover, .sidebar--left .nav-pills__container li>a:focus, .settings-modal .nav-pills>li:hover a, .settings-modal .nav-pills>li:focus a","background:"+e.sidebarTextHoverBg,1),H("@media(max-width: 768px){.settings-modal .settings-table .nav>li:hover a","background:"+e.sidebarTextHoverBg,1)),e.sidebarTextActiveBorder&&H(".sidebar--left .nav li.active a:before, .settings-modal .nav-pills>li.active a:before","background:"+e.sidebarTextActiveBorder,1),e.sidebarTextActiveColor&&(H(".sidebar--left .nav-pills__container li.active a, .sidebar--left .nav-pills__container li.active a:hover, .sidebar--left .nav-pills__container li.active a:focus, .settings-modal .nav-pills>li.active a, .settings-modal .nav-pills>li.active a:hover, .settings-modal .nav-pills>li.active a:active","color:"+e.sidebarTextActiveColor,2),H(".sidebar--left .nav li.active a, .sidebar--left .nav li.active a:hover, .sidebar--left .nav li.active a:focus","background:"+ae(e.sidebarTextActiveColor,.1),1)),e.sidebarHeaderBg&&(H(".sidebar--left .team__header, .sidebar--menu .team__header, .post-list__timestamp","background:"+e.sidebarHeaderBg,1),H(".modal .modal-header","background:"+e.sidebarHeaderBg,1),H("#navbar .navbar-default","background:"+e.sidebarHeaderBg,1),H("@media(max-width: 768px){.search-bar__container","background:"+e.sidebarHeaderBg,1),H(".attachment .attachment__container","border-left-color:"+e.sidebarHeaderBg,1)),e.sidebarHeaderTextColor&&(H(".sidebar--left .team__header .header__info, .sidebar--menu .team__header .header__info, .post-list__timestamp","color:"+e.sidebarHeaderTextColor,1),H(".sidebar--left .team__header .navbar-right .dropdown__icon, .sidebar--menu .team__header .navbar-right .dropdown__icon","fill:"+e.sidebarHeaderTextColor,1),H(".sidebar--left .team__header .user__name, .sidebar--menu .team__header .user__name","color:"+ae(e.sidebarHeaderTextColor,.8),1),H(".sidebar--left .team__header:hover .user__name, .sidebar--menu .team__header:hover .user__name","color:"+e.sidebarHeaderTextColor,1),H(".modal .modal-header .modal-title, .modal .modal-header .modal-title .name, .modal .modal-header button.close","color:"+e.sidebarHeaderTextColor,1),H("#navbar .navbar-default .navbar-brand .heading","color:"+e.sidebarHeaderTextColor,1),H("#navbar .navbar-default .navbar-toggle .icon-bar, ","background:"+e.sidebarHeaderTextColor,1),H("@media(max-width: 768px){.search-bar__container","color:"+e.sidebarHeaderTextColor,2)),e.onlineIndicator&&H(".sidebar--left .status .online--icon","fill:"+e.onlineIndicator,1),e.awayIndicator&&H(".sidebar--left .status .away--icon","fill:"+e.awayIndicator,1),e.mentionBj&&(H(".sidebar--left .nav-pills__unread-indicator","background:"+e.mentionBj,1),H(".sidebar--left .badge","background:"+e.mentionBj,1)),e.mentionColor&&(H(".sidebar--left .nav-pills__unread-indicator","color:"+e.mentionColor,2),H(".sidebar--left .badge","color:"+e.mentionColor,2)),e.centerChannelBg&&(H(".app__content, .markdown__table, .markdown__table tbody tr, .suggestion-content, .modal .modal-content","background:"+e.centerChannelBg,1),H("#post-list .post-list-holder-by-time","background:"+e.centerChannelBg,1),H("#post-create","background:"+e.centerChannelBg,1),H(".date-separator .separator__text, .new-separator .separator__text","background:"+e.centerChannelBg,1),H(".post-image__column .post-image__details, .search-help-popover .search-autocomplete__divider span","background:"+e.centerChannelBg,1),H(".sidebar--right, .dropdown-menu, .popover, .tip-overlay","background:"+e.centerChannelBg,1),H(".popover.bottom>.arrow:after","border-bottom-color:"+e.centerChannelBg,1),H(".popover.right>.arrow:after, .tip-overlay.tip-overlay--sidebar .arrow, .tip-overlay.tip-overlay--header .arrow","border-right-color:"+e.centerChannelBg,1),H(".popover.left>.arrow:after","border-left-color:"+e.centerChannelBg,1),H(".popover.top>.arrow:after, .tip-overlay.tip-overlay--chat .arrow","border-top-color:"+e.centerChannelBg,1),H("@media(min-width: 768px){.search-bar__container .search__form .search-bar, .form-control","background:"+e.centerChannelBg,1),H(".attachment__content","background:"+e.centerChannelBg,1)),e.centerChannelColor&&(H(".sidebar--left, .sidebar--right .sidebar--right__header","border-color:"+ae(e.centerChannelColor,.2),1),H(".app__content, .post-create__container .post-create-body .btn-file, .post-create__container .post-create-footer .msg-typing, .command-name, .modal .modal-content, .dropdown-menu, .popover, .mentions-name, .tip-overlay","color:"+e.centerChannelColor,1),H("#archive-link-home","background:"+ae(e.centerChannelColor,.15),1),H("#post-create","color:"+e.centerChannelColor,2),H(".mentions--top, .suggestion-list","box-shadow:"+ae(e.centerChannelColor,.2)+" 1px -3px 12px",3),H(".mentions--top, .suggestion-list","-webkit-box-shadow:"+ae(e.centerChannelColor,.2)+" 1px -3px 12px",2),H(".mentions--top, .suggestion-list","-moz-box-shadow:"+ae(e.centerChannelColor,.2)+" 1px -3px 12px",1),H(".dropdown-menu, .popover ","box-shadow:"+ae(e.centerChannelColor,.1)+" 0px 6px 12px",3),H(".dropdown-menu, .popover ","-webkit-box-shadow:"+ae(e.centerChannelColor,.1)+" 0px 6px 12px",2),H(".dropdown-menu, .popover ","-moz-box-shadow:"+ae(e.centerChannelColor,.1)+" 0px 6px 12px",1),H(".post__body hr, .loading-screen .loading__content .round, .tutorial__circles .circle","background:"+e.centerChannelColor,1),H(".channel-header .heading","color:"+e.centerChannelColor,1),H(".markdown__table tbody tr:nth-child(2n)","background:"+ae(e.centerChannelColor,.07),1),H(".channel-header__info>div.dropdown .header-dropdown__icon","color:"+ae(e.centerChannelColor,.8),1),H(".channel-header #member_popover","color:"+ae(e.centerChannelColor,.8),1),H(".custom-textarea, .custom-textarea:focus, .preview-container .preview-div, .post-image__column .post-image__details, .sidebar--right .sidebar-right__body, .markdown__table th, .markdown__table td, .suggestion-content, .modal .modal-content, .settings-modal .settings-table .settings-content .divider-light, .webhooks__container, .dropdown-menu, .modal .modal-header, .popover","border-color:"+ae(e.centerChannelColor,.2),1),H(".popover.bottom>.arrow","border-bottom-color:"+ae(e.centerChannelColor,.25),1),H(".search-help-popover .search-autocomplete__divider span","color:"+ae(e.centerChannelColor,.7),1),H(".popover.right>.arrow","border-right-color:"+ae(e.centerChannelColor,.25),1),H(".popover.left>.arrow","border-left-color:"+ae(e.centerChannelColor,.25),1),H(".popover.top>.arrow","border-top-color:"+ae(e.centerChannelColor,.25),1),H(".command-name, .popover .popover-title","border-color:"+ae(e.centerChannelColor,.2),1),H(".dropdown-menu .divider, .search-help-popover .search-autocomplete__divider:before","background:"+e.centerChannelColor,1),H(".custom-textarea","color:"+e.centerChannelColor,1),H(".post-image__column","border-color:"+ae(e.centerChannelColor,.2),2),H(".post-image__column .post-image__details","color:"+e.centerChannelColor,2),H(".post-image__column a, .post-image__column a:hover, .post-image__column a:focus","color:"+e.centerChannelColor,1),
H("@media(min-width: 768px){.search-bar__container .search__form .search-bar, .form-control","color:"+e.centerChannelColor,2),H(".input-group-addon, .search-bar__container .search__form, .form-control","border-color:"+ae(e.centerChannelColor,.2),1),H(".form-control:focus","border-color:"+ae(e.centerChannelColor,.3),1),H(".attachment .attachment__content","border-color:"+ae(e.centerChannelColor,.3),1),H(".channel-intro .channel-intro__content, .webhooks__container","background:"+ae(e.centerChannelColor,.05),1),H(".date-separator .separator__text","color:"+e.centerChannelColor,2),H(".date-separator .separator__hr, .modal-footer, .modal .custom-textarea","border-color:"+ae(e.centerChannelColor,.2),1),H(".search-item-container, .post-right__container .post.post--root","border-color:"+ae(e.centerChannelColor,.1),1),H(".modal .custom-textarea:focus","border-color:"+ae(e.centerChannelColor,.3),1),H(".channel-intro, .settings-modal .settings-table .settings-content .divider-dark, hr, .settings-modal .settings-table .settings-links","border-color:"+ae(e.centerChannelColor,.2),1),H(".post.current--user .post__body, .post.post--comment.other--root.current--user .post-comment, pre, .post-right__container .post.post--root","background:"+ae(e.centerChannelColor,.07),1),H(".post.current--user .post__body, .post.post--comment.other--root.current--user .post-comment, .post.same--root.post--comment .post__body, .modal .more-table tbody>tr td, .member-div:first-child, .member-div, .access-history__table .access__report, .activity-log__table","border-color:"+ae(e.centerChannelColor,.1),2),H("@media(max-width: 1800px){.inner__wrap.move--left .post.post--comment.same--root","border-color:"+ae(e.centerChannelColor,.07),2),H(".post:hover, .modal .more-table tbody>tr:hover td, .settings-modal .settings-table .settings-content .section-min:hover","background:"+ae(e.centerChannelColor,.07),1),H(".date-separator.hovered--before:after, .date-separator.hovered--after:before, .new-separator.hovered--after:before, .new-separator.hovered--before:after","background:"+ae(e.centerChannelColor,.07),1),H(".command-name:hover, .mentions-name:hover, .suggestion--selected, .dropdown-menu>li>a:focus, .dropdown-menu>li>a:hover, .bot-indicator","background:"+ae(e.centerChannelColor,.15),1),H("code","background:"+ae(e.centerChannelColor,.1),1),H("@media(min-width: 960px){.post.current--user:hover .post__body ","background: none;",1),H(".sidebar--right","color:"+e.centerChannelColor,2),H(".search-help-popover .search-autocomplete__item:hover","background:"+ae(e.centerChannelColor,.05),1),H(".search-help-popover .search-autocomplete__item.selected","background:"+ae(e.centerChannelColor,.15),1)),e.newMessageSeparator&&(H(".new-separator .separator__text","color:"+e.newMessageSeparator,1),H(".new-separator .separator__hr","border-color:"+ae(e.newMessageSeparator,.5),1)),e.linkColor&&(H("a, a:focus, a:hover, .btn, .btn:focus, .btn:hover","color:"+e.linkColor,1),H(".post .comment-icon__container, .post .post__reply","fill:"+e.linkColor,1)),e.buttonBg&&(H(".btn.btn-primary, .tutorial__circles .circle.active","background:"+e.buttonBg,1),H(".btn.btn-primary:hover, .btn.btn-primary:active, .btn.btn-primary:focus","background:"+te(e.buttonBg,-.25),1),H(".file-playback-controls","color:"+te(e.buttonBg,-.25),1)),e.buttonColor&&H(".btn.btn-primary","color:"+e.buttonColor,2),e.mentionHighlightBg&&H(".mention-highlight, .search-highlight","background:"+e.mentionHighlightBg,1),e.mentionHighlightBg&&H(".post.post--highlight","background:"+ae(e.mentionHighlightBg,.5),1),e.mentionHighlightLink&&H(".mention-highlight .mention-link","color:"+e.mentionHighlightLink,1),e.codeTheme||(e.codeTheme=Qe.default.DEFAULT_CODE_THEME),q(e.codeTheme)}function U(e){var t=$("body"),a=!0,s=!1,n=void 0;try{for(var r,l=(0,Ae.default)((0,De.default)(Qe.default.FONTS));!(a=(r=l.next()).done);a=!0){var i=r.value,o=Qe.default.FONTS[i];e===i?t.hasClass(o)||t.addClass(o):t.removeClass(o)}}catch(e){s=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}}function H(e,t,a){var s=$("#css-modifier-container");0===s.length&&(s=$('<div id="css-modifier-container"></div>'),s.hide(),s.appendTo($("body")));var n=s.find('div[data-class="'+e+a+'"]');0===n.length&&(n=$('<div data-class="'+e+a+'"></div>'),n.appendTo(s)),n.html("<style>"+e+" {"+t+"}</style>")}function B(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}if(/^#[0-9A-F]{6}$/i.test(e))return e;var a=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t(a[1])+t(a[2])+t(a[3])}function q(e){var t="/static/css/highlight/"+e+".css",a=$("link.code_theme");if(t!==a.attr("href")){H("code.hljs","visibility: hidden");var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){a.attr("href",t),pe()?a.one("load",function(){H("code.hljs","visibility: visible")}):H("code.hljs","visibility: visible")},s.send()}}function G(e){e.focus(),e.selectionStart=e.value.length,e.selectionEnd=e.value.length}function V(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var a=e.createTextRange(),s=a.duplicate();return a.moveToBookmark(t.getBookmark()),s.setEndPoint("EndToStart",a),s.text.length}return 0}function W(e,t,a){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,a);else if(e.createTextRange){var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",a),s.moveStart("character",t),s.select()}}function z(e,t){W(e,t,t)}function K(e){var t;if("undefined"!=typeof document.selection){e.focus();var a=document.selection.createRange();t=a.text}else if("undefined"!=typeof e.selectionStart){var s=e.selectionStart,n=e.selectionEnd;t=e.value.substring(s,n)}return t}function Y(e){var t="";if(e)if(e.length<Qe.default.MIN_USERNAME_LENGTH||e.length>Qe.default.MAX_USERNAME_LENGTH)t="Must be between "+Qe.default.MIN_USERNAME_LENGTH+" and "+Qe.default.MAX_USERNAME_LENGTH+" characters";else if(/^[a-z0-9\.\-\_]+$/.test(e))if(/[a-z]/.test(e.charAt(0))){for(var a=0;a<Qe.default.RESERVED_USERNAMES.length;a++)if(e===Qe.default.RESERVED_USERNAMES[a]){t="Cannot use a reserved word as a username.";break}}else t="First character must be a letter.";else t="Must contain only letters, numbers, and the symbols '.', '-', and '_'.";else t="This field is required";return t}function J(e){var t=Ze.default.getCurrentTeamUrl();history.replaceState("data","",t+"/channels/"+e)}function Z(e){return qe.emitChannelClickEvent(e),J(e.name),$(".inner__wrap").removeClass("move--right"),$(".sidebar--left").removeClass("move--right"),at.trackPage(),!1}function X(){return screen.width<=768}function Q(e){return"root_id"in e?""!==e.root_id&&null!=e.root_id:!1}function ee(e){var t=Ve.default.get(e).name.split("__"),a=ze.default.getCurrentId(),s={};if(2!==t.length||-1===t.indexOf(a))return s;for(var n in t)if(t[n]!==a){s=ze.default.getProfile(t[n]);break}return s}function te(e,t){var a=e,s=t;a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),s=s||0;var n,r,l="#";for(r=0;3>r;r++)n=parseInt(a.substr(2*r,2),16),n=Math.round(Math.min(Math.max(0,n+n*s),255)).toString(16),l+=("00"+n).substr(n.length);return l}function ae(e,t){var a=e;if("#"===a[0]&&(a=a.slice(1)),3===a.length){var s=a;a="",a+=s[0]+s[0],a+=s[1]+s[1],a+=s[2]+s[2]}var n=parseInt(a.substring(0,2),16),r=parseInt(a.substring(2,4),16),l=parseInt(a.substring(4,6),16);return"rgba("+n+","+r+","+l+","+t+")"}function se(e){return e.first_name&&e.last_name?e.first_name+" "+e.last_name:e.first_name?e.first_name:e.last_name?e.last_name:""}function ne(e){if(e.nickname&&e.nickname.trim().length>0)return e.nickname;var t=se(e);return t?t:e.username}function re(e){var t=ze.default.getProfile(e),a=Ye.default.get(Qe.default.Preferences.CATEGORY_DISPLAY_SETTINGS,"name_format","false"),s="";return t&&("nickname_full_name"===a?s=t.nickname||se(t):"full_name"===a&&(s=se(t)),s.trim().length||(s=t.username)),s}function le(){var e=window.location.origin;return e||(e=window.location.protocol+"//"+window.location.hostname,window.location.port&&(e+=":"+window.location.port)),e}function ie(e){return e>1099511627776?Math.floor(e/1099511627776)+"TB":e>1073741824?Math.floor(e/1073741824)+"GB":e>1048576?Math.floor(e/1048576)+"MB":e>1024?Math.floor(e/1024)+"KB":e+"B"}function oe(e,t){var a=t?"&download=1":"";return le()+"/api/v1/files/get"+e+"?"+de()+a}function ce(e){var t=e.split("/");return t[t.length-1]}function ue(e){return/^wss:/.test(e)?":"+t.window.mm_config.WebsocketSecurePort:/^ws:/.test(e)?":"+t.window.mm_config.WebsocketPort:""}function de(){return t.window.mm_session_token_index>=0?"session_token_index="+t.window.mm_session_token_index:""}function me(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e=e.replace(/[xy]/g,function(e){var t,a=Math.floor(16*Math.random());return t="x"===e?a:3&a|8,t.toString(16)})}function pe(){return navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function he(){if(window.navigator&&window.navigator.userAgent){var e=window.navigator.userAgent;return e.indexOf("Trident/7.0")>0||e.indexOf("Trident/6.0")>0}return!1}function fe(){return window.navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("edge")>-1}function ge(e,t){var a=void 0;return a=t>e?e+"__"+t:t+"__"+e}function be(e){var t=e.name.split("__"),a="";return a=t[0]===ze.default.getCurrentId()?t[1]:t[0]}function ve(e,t){return t.type===Qe.default.DM_CHANNEL&&be(t)===e}function _e(e,t,a){var s=new FormData;s.append("file",e,e.name),s.append("filesize",e.size),s.append("importFrom","slack"),at.importSlack(s,t,a)}function Ee(){return window.location.href.split("/channels")[0]}function ye(){var e=Ee();return e.length>35?e.substring(0,10)+"..."+e.substring(e.length-12,e.length)+"/":e+"/"}function Re(){return $(window).width()}function Ce(){return $(window).height()}function we(e,t,a){var s=this.getDirectChannelName(ze.default.getCurrentId(),e.id),n=Ve.default.getByName(s),r=Ye.default.setPreference(Qe.default.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,e.id,"true");nt.savePreferences([r]),n?$.isFunction(t)&&t(n,!0):(n={name:s,last_post_at:0,total_msg_count:0,type:"D",display_name:e.username,teammate_id:e.id,status:ze.default.getStatus(e.id)},tt.createDirectChannel(n,e.id,function(e){nt.getChannel(e.id),$.isFunction(t)&&t(e,!1)},function(){window.location.href=Ze.default.getCurrentTeamUrl()+"/channels/"+s,$.isFunction(a)&&a()}))}function Se(e,t){var a="",s="";return e&&e.display_name&&(a=e.display_name.toLowerCase()),t&&t.display_name&&(s=t.display_name.toLowerCase()),s>a?-1:a>s?1:0}function ke(e){var t="Channel";return e===Qe.default.PRIVATE_CHANNEL&&(t="Group"),t}function Ne(e){var t="Post";return e.root_id&&(t="Comment"),t}function Me(e){return Ye.default.getBool(Qe.default.Preferences.CATEGORY_ADVANCED_SETTINGS,Qe.default.FeatureTogglePrefix+e.label)}function xe(e){return e.type&&0===e.type.lastIndexOf(Qe.default.SYSTEM_MESSAGE_PREFIX)}function je(e,t){for(var a=[],s=0;t>s;s++)a.push(e);return a}function Te(e){return he()?null!=e.types&&e.types.contains("Files"):null!=e.types&&(e.types.indexOf?-1!==e.types.indexOf("Files"):e.types.contains("application/x-moz-file"))}function Pe(e){try{e.value="",e.value&&(e.type="text",e.type="file")}catch(e){}}function Oe(){return[{value:"en",name:"English"},{value:"es",name:"Español"}]}var Ie=e("babel-runtime/core-js/reflect/own-keys"),De=n(Ie),Le=e("babel-runtime/core-js/get-iterator"),Ae=n(Le),Fe=e("babel-runtime/helpers/typeof"),Ue=n(Fe);Object.defineProperty(a,"__esModule",{value:!0}),a.isEmail=r,a.cleanUpUrlable=l,a.isTestDomain=i,a.isChrome=o,a.isSafari=c,a.isIosChrome=u,a.isMobileApp=d,a.isInRole=m,a.isAdmin=p,a.isSystemAdmin=h,a.getDomainWithOutSub=f,a.getCookie=g,a.notifyMe=b,a.ding=v,a.getUrlParameter=_,a.getDateForUnixTicks=E,a.displayDate=y,a.displayTime=R,a.displayDateTime=C,a.displayCommentDateTime=w,a.getTimestamp=S,a.extractLinks=k,a.escapeRegExp=N,a.areObjectsEqual=M,a.replaceHtmlEntities=x,a.insertHtmlEntities=j,a.searchForTerm=T,a.getFileType=P,a.getPreviewImagePathForFileType=O,a.getIconClassName=I,a.splitFileLocation=D,a.getPreviewImagePath=L,a.toTitleCase=A,a.applyTheme=F,a.applyFont=U,a.changeCss=H,a.rgb2hex=B,a.updateCodeTheme=q,a.placeCaretAtEnd=G,a.getCaretPosition=V,a.setSelectionRange=W,a.setCaretPosition=z,a.getSelectedText=K,a.isValidUsername=Y,a.updateAddressBar=J,a.switchChannel=Z,a.isMobile=X,a.isComment=Q,a.getDirectTeammate=ee,a.changeColor=te,a.changeOpacity=ae,a.getFullName=se,a.getDisplayName=ne,a.displayUsername=re,a.getWindowLocationOrigin=le,a.fileSizeToString=ie,a.getFileUrl=oe,a.getFileName=ce,a.getWebsocketPort=ue,a.getSessionIndex=de,a.generateId=me,a.isBrowserFirefox=pe,a.isBrowserIE=he,a.isBrowserEdge=fe,a.getDirectChannelName=ge,a.getUserIdFromChannelName=be,a.isDirectChannelForUser=ve,a.importSlack=_e,a.getTeamURLFromAddressBar=Ee,a.getShortenedTeamURL=ye,a.windowWidth=Re,a.windowHeight=Ce,a.openDirectChannelToUser=we,a.sortByDisplayName=Se,a.getChannelTerm=ke,a.getPostTerm=Ne,a.isFeatureEnabled=Me,a.isSystemMessage=xe,a.fillArray=je,a.isFileTransfer=Te,a.clearFileInput=Pe,a.languages=Oe;var $e=e("../dispatcher/app_dispatcher.jsx"),He=n($e),Be=e("../dispatcher/event_helpers.jsx"),qe=s(Be),Ge=e("../stores/channel_store.jsx"),Ve=n(Ge),We=e("../stores/user_store.jsx"),ze=n(We),Ke=e("../stores/preference_store.jsx"),Ye=n(Ke),Je=e("../stores/team_store.jsx"),Ze=n(Je),Xe=e("../utils/constants.jsx"),Qe=n(Xe),et=e("./client.jsx"),tt=s(et),at=s(et),st=e("./async_client.jsx"),nt=s(st),rt=e("autolinker"),lt=n(rt),it=Qe.default.ActionTypes,ot=!0;Image.prototype.load=function(e,t){var a=this,s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){var e=s.getAllResponseHeaders(),t=e.match(/^Content-Type\:\s*(.*?)$/im),n=t[1]||"image/png",r=new Blob([this.response],{type:n});a.src=window.URL.createObjectURL(r)},s.onprogress=function(e){parseInt(a.completedPercentage=e.loaded/e.total*100,10),t&&t()},s.onloadstart=function(){a.completedPercentage=0},s.send()},Image.prototype.completedPercentage=0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dispatcher/app_dispatcher.jsx":281,"../dispatcher/event_helpers.jsx":282,"../stores/channel_store.jsx":325,"../stores/preference_store.jsx":330,"../stores/team_store.jsx":334,"../stores/user_store.jsx":335,"../utils/constants.jsx":339,"./async_client.jsx":336,"./client.jsx":338,autolinker:"autolinker","babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/reflect/own-keys":14,"babel-runtime/helpers/typeof":25}]},{},[110,111,112,138,139,140,141,142,143,144,145,146,147,148,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,260,261,278,279,280,281,282,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344]);
//# sourceMappingURL=/static/js/bundle.min.js.map
